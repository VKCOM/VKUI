import{t as T,i as ie,r as l,k as re,u as ce,c as ue,a0 as de,l as pe,j as t,R as fe,h as H,n as me}from"./iframe-DhuutAfC.js";import{h as be}from"./react_utils-CSZjvU4X.js";import{u as _e}from"./useBooleanState-D-KuXqfN.js";import{u as he}from"./useConfigDirection-BKOpe2-3.js";import{u as ve}from"./useNativeFormResetListener-BYpumOEf.js";import{c as Ie}from"./callMultiple-ChqatQlo.js";import{B as M}from"./Button-Id7-fKaz.js";import{I as E}from"./IconButton-CS1h91J8.js";import{H as je}from"./Headline-CY9tv16R.js";import{V as S}from"./VisuallyHidden-BkhWnsJf.js";import{I as ye}from"./clear_16-CKgm9LeN.js";import{I as Re}from"./cancel_24-DOIBb5nA.js";import{I as qe}from"./search_outline_16-aW4du7Sp.js";const Ce="_host_blbjq_1",Ve="_rtl_blbjq_11",ge="_withPadding_blbjq_15",xe="_sizeYCompact_blbjq_24",Be="_sizeYNone_blbjq_29",Ne="_field_blbjq_34",Te="_label_blbjq_57",He="_input_blbjq_64",Me="_nativeInput_blbjq_76",Ee="_hasAfter_blbjq_106",Se="_disabled_blbjq_111",Le="_controls_blbjq_131",Fe="_hasIcon_blbjq_144",ke="_hasValue_blbjq_156",ze="_icon_blbjq_160",Ae="_after_blbjq_174",Ye="_focused_blbjq_185",we="_afterTextClip_blbjq_204",De="_findButton_blbjq_211",e={host:Ce,rtl:Ve,withPadding:ge,sizeYCompact:xe,sizeYNone:Be,field:Ne,label:Te,input:He,nativeInput:Me,hasAfter:Ee,disabled:Se,controls:Le,hasIcon:Fe,hasValue:ke,icon:ze,after:Ae,focused:Ye,afterTextClip:we,findButton:De},L=({className:b,getRootRef:F,style:k,placeholder:z="Поиск",before:A=t.jsx(qe,{}),after:_="Отмена",getRef:Y,icon:s,onIconClick:h,autoComplete:w="off",iconLabel:D,clearLabel:P="Очистить",clearButtonTestId:O,noPadding:$,findButtonText:G="Найти",findButtonTestId:J,onFindButtonClick:r,hideClearButton:v,slotProps:I,...j})=>{const K=he()==="rtl",Q=T({className:b,style:k,getRootRef:F},I?.root),{id:y,placeholder:R,onChange:U,autoComplete:W,getRootRef:X,onFocus:q,onBlur:C,...n}=T({getRootRef:Y,placeholder:z,autoComplete:w,className:e.nativeInput,...j},I?.input),o=ie(X),{value:Z,setTrue:c,setFalse:u}=_e(!1),ee=l.useId(),V=y||`search-${ee}`,[d,p]=l.useState(()=>!!(n.value||n.defaultValue)),te=a=>p(!!a.currentTarget.value),{sizeY:g="none"}=re(),{sizeY:f}=ce(),x=ue(),B=x==="ios"&&be(_),ae=a=>{c(),q&&q(a)},ne=a=>{u(),C&&C(a)},i=l.useCallback(()=>{Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")?.set?.call(o.current,"");const m=new Event("input",{bubbles:!0});o.current?.dispatchEvent(m)},[o]),oe=l.useCallback(a=>h?.(a),[h]),se=l.useCallback(a=>{a.preventDefault(),o.current?.focus(),de()&&i()},[o,i]);pe(()=>{n.value!==void 0&&p(!!n.value)},[n.value]),ve(o,()=>{p(!!n.defaultValue)});const N=(a,m={})=>t.jsxs(E,{hoverMode:"opacity",onPointerDown:oe,className:e.icon,onFocus:c,onBlur:u,onClick:me,...m,children:[t.jsx(S,{children:D}),a]}),le=!!(s||!v||f.compact&&r);return t.jsxs(fe,{baseClassName:H("vkuiInternalSearch",e.host,g==="none"&&e.sizeYNone,g==="compact"&&e.sizeYCompact,Z&&e.focused,d&&e.hasValue,B&&e.hasAfter,s&&e.hasIcon,n.disabled&&e.disabled,!$&&e.withPadding,K&&e.rtl),...Q,children:[t.jsxs("div",{className:e.field,children:[t.jsx("label",{htmlFor:V,className:e.label,children:R}),t.jsxs("div",{className:e.input,children:[A,t.jsx(je,{Component:"input",type:"search",level:"1",weight:"3",id:V,placeholder:R,autoComplete:W,getRootRef:o,onChange:Ie(U,te),onFocus:ae,onBlur:ne,...n})]}),le&&t.jsxs("div",{className:e.controls,children:[s&&(typeof s=="function"?s(N):N(s)),!v&&t.jsxs(E,{hoverMode:"opacity",onPointerDown:se,onClick:i,className:e.icon,tabIndex:d?void 0:-1,disabled:j.disabled,"data-testid":O,children:[t.jsx(S,{children:P}),x==="ios"?t.jsx(ye,{}):t.jsx(Re,{})]}),f.compact&&r&&t.jsx(M,{mode:"primary",size:"m",className:H(e.findButton,f.compact.className),focusVisibleMode:"inside",onClick:r,tabIndex:d?void 0:-1,"data-testid":J,children:G})]})]}),B&&t.jsx("div",{className:e.after,children:t.jsx(M,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:i,onFocus:c,onBlur:u,children:t.jsx("span",{className:e.afterTextClip,children:_})})})]})};try{L.displayName="Search",L.__docgenInfo={description:"",displayName:"Search",props:{getRef:{defaultValue:null,description:"@deprecated Since 7.9.0. Вместо этого используйте `slotProps={ input: { getRootRef: ... } }`.",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},slotProps:{defaultValue:null,description:"Свойства, которые можно прокинуть внутрь компонента:\n- `root`: свойства для прокидывания в корень компонента;\n- `input`: свойства для прокидывания в поле ввода.",name:"slotProps",required:!1,type:{name:"{ root?: (HTMLAttributes<HTMLDivElement> & HasRootRef<HTMLDivElement> & HasDataAttribute); input?: (InputHTMLAttributes<...> & ... 1 more ... & HasDataAttribute); } | undefined"}},after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},hideClearButton:{defaultValue:null,description:"Скрывает кнопку очистки.",name:"hideClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{L as S};
