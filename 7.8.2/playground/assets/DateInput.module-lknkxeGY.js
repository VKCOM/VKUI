import{q as T,r as n,j as C,h as U,Q as G,R as Q}from"./iframe-DvQ0hW0I.js";import{u as $}from"./useBooleanState-Dgn4KllC.js";import{u as J}from"./useGlobalEventListener-Cq3tChGi.js";import{c as W}from"./callMultiple-ChqatQlo.js";import{V as X}from"./VisuallyHidden-CGlAvVNH.js";function be({maxElement:t,refs:a,autoFocus:l,disabled:y,elementsConfig:o,onClear:_,onInternalValueChange:c,getInternalValue:d,value:k,onCalendarOpenChanged:p,accessible:i}){const{document:j}=T(),{value:h,setTrue:B,setFalse:I}=$(!1),L=n.useRef(null),w=n.useRef(null),[R,x]=n.useState([]),[e,m]=n.useState(null),q=n.useRef(!1),{window:S}=T(),M=n.useCallback(()=>!q.current,[]),V=n.useCallback(()=>{h&&(I(),p?.(!1))},[I,p,h]),b=n.useCallback(()=>{h||(B(),p?.(!0),i&&m(null),q.current=!1)},[p,h,B,i]),v=n.useCallback(()=>{e!==null&&(m(null),S.getSelection()?.removeAllRanges(),x(d(k)))},[e,d,k,S]),E=n.useCallback(()=>{v(),V()},[v,V]),Y=n.useCallback(()=>{v(),h?V():b()},[v,h,V,b]),z=n.useCallback(u=>{!L.current?.contains(u.target)&&!w.current?.contains(u.target)&&(q.current=!0,E())},[E]),g=n.useCallback(()=>{e===null&&m(0)},[e]);J(j,"click",z,{capture:!0}),n.useEffect(()=>{x(d(k))},[d,k]),n.useEffect(()=>{l&&g()},[l,g]),n.useEffect(()=>{if(y||e===null)return;const u=S.document.createRange();let s=a[e].current,r;return s&&(s.focus(),i||b(),u.selectNodeContents(s),r=setTimeout(()=>{const f=S.getSelection();f?.removeAllRanges(),f?.addRange(u)},0)),()=>{clearTimeout(r)}},[y,e,a,S,b,i]);const K=n.useCallback(()=>{_?.(),g()},[_,g]),H=n.useCallback(()=>{g()},[g]),P=n.useCallback(u=>{if(e===null)return;const s=[...R],r=o(e);if(/^\d+$/.test(u.key))s[e].length>=r.length?s[e]=u.key:(s[e]+=u.key,s[e].length>=r.length&&e<t&&m(e+1));else if(u.key==="Backspace")s[e]?s[e]=s[e].slice(0,-1):m(e<=0?t:e-1);else if(u.key==="ArrowDown"||u.key==="Down"){let f=Number(s[e]);s[e]=String(f<=r.min?r.max:f-1).padStart(r.length,"0")}else if(u.key==="ArrowUp"||u.key==="Up"){let f=Number(s[e]);s[e]=String(f>=r.max?r.min:f+1).padStart(r.length,"0")}else if(u.key==="ArrowLeft"||u.key==="Left"||u.key==="Tab"&&u.shiftKey){if(e<=0){u.key==="Tab"&&E();return}m(e-1)}else if(u.key==="ArrowRight"||u.key==="Right"||u.key==="Tab"){if(e>=t){u.key==="Tab"&&E();return}m(e+1)}else if(u.key==="Delete"||u.key==="Del")s[e]="";else if(u.key===" "){u.preventDefault(),b();return}else return;u.preventDefault(),x(s),c(s)},[b,E,o,e,R,t,c]);return{rootRef:L,calendarRef:w,open:h,openCalendar:b,closeCalendar:V,toggleCalendar:Y,internalValue:R,focusedElement:e,setFocusedElement:m,handleKeyDown:P,clear:K,handleFieldEnter:H,removeFocusFromField:E,handleRestoreFocus:M}}const Z="_mask_1xpg8_1",O="_lastCharacter_1xpg8_20",ee="_divider_1xpg8_25",ue="_host_1xpg8_31",N={mask:Z,lastCharacter:O,divider:ee,host:ue},F=({children:t,className:a,...l})=>C.jsx("span",{className:U(N.divider,a),...l,children:t});try{F.displayName="InputLikeDivider",F.__docgenInfo={description:"",displayName:"InputLikeDivider",props:{}}}catch{}const te=" ";function ne(t){const a=[];for(let l=0;l<t;l+=1)a.push(C.jsx("span",{className:N.mask,children:te},l));return a}const D=({value:t,length:a,index:l,onElementSelect:y,onFocus:o,label:_,readOnly:c,onKeyDown:d,...k})=>{const p=n.useCallback(i=>{G(i),y?.(l)},[l,y]);return C.jsxs(Q,{Component:"span",baseClassName:t?.length===a?N.host:void 0,tabIndex:c?-1:0,onFocus:W(o,p),onKeyDown:c?void 0:d,...k,children:[_&&C.jsx(X,{children:_}),t?.slice(0,a-1),t?.slice(a-1)&&C.jsx("span",{className:N.lastCharacter,children:t.slice(a-1)},l),ne(a-(t?.length??0))]})};try{D.displayName="InputLike",D.__docgenInfo={description:"",displayName:"InputLike",props:{length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},onElementSelect:{defaultValue:null,description:"",name:"onElementSelect",required:!1,type:{name:"((index: number) => void)"}},baseClassName:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `className`.",name:"baseClassName",required:!1,type:{name:"string | false"}},baseStyle:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `style`.",name:"baseStyle",required:!1,type:{name:"CSSProperties"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLSpanElement>"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}}}catch{}const ae=(t,a)=>{if(t!==void 0)return typeof t=="string"?t:String(t).padStart(a,"0")},A=({value:t,length:a,minValue:l,maxValue:y,readOnly:o,disabled:_,label:c,onKeyDown:d,"aria-label":k,...p})=>{const i=ae(t,a);return C.jsx(D,{role:"spinbutton",value:i,length:a,"aria-valuemin":l,"aria-valuemax":y,"aria-valuenow":t!==void 0?Number(t):void 0,"aria-valuetext":i,"aria-readonly":o,"aria-disabled":_,"aria-label":c,label:c,tabIndex:o?-1:0,onKeyDown:o?void 0:d,...p})};try{A.displayName="NumberInputLike",A.__docgenInfo={description:"",displayName:"NumberInputLike",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number"}},maxValue:{defaultValue:null,description:"",name:"maxValue",required:!1,type:{name:"number"}},minValue:{defaultValue:null,description:"",name:"minValue",required:!1,type:{name:"number"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLSpanElement>"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},baseClassName:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `className`.",name:"baseClassName",required:!1,type:{name:"string | false"}},baseStyle:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `style`.",name:"baseStyle",required:!1,type:{name:"CSSProperties"}},length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},onElementSelect:{defaultValue:null,description:"",name:"onElementSelect",required:!1,type:{name:"((index: number) => void)"}}}}}catch{}const se="_wrapper_9hk7p_1",le="_hasBefore_9hk7p_12",re="_hasAfter_9hk7p_16",ie="_input_9hk7p_20",oe="_hidden_9hk7p_33",ce="_customValue_9hk7p_37",de="_inputTimeDivider_9hk7p_54",pe="_sizeYCompact_9hk7p_59",me="_sizeYNone_9hk7p_64",Ee={wrapper:se,hasBefore:le,hasAfter:re,input:ie,hidden:oe,customValue:ce,inputTimeDivider:de,sizeYCompact:pe,sizeYNone:me};export{F as I,A as N,Ee as d,be as u};
