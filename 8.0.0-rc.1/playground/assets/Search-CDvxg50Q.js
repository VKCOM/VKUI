import{s as T,k as Ve,r as l,l as xe,g as Be,B as Ne,a6 as Te,f as je,j as t,R as He,o as Me,m as j,n as qe}from"./iframe-CDzsgUJ6.js";import{u as Ee}from"./useBooleanState-CnmcT8ct.js";import{u as Fe}from"./useConfigDirection-BVbAx_rU.js";import{u as Le}from"./useNativeFormResetListener-DjcK7FVz.js";import{c as Se}from"./callMultiple-ChqatQlo.js";import{B as H}from"./Button-DrWhGNV0.js";import{I as M}from"./IconButton-DmVT1v_5.js";import{H as ke}from"./Headline-BViG_F4T.js";import{V as q}from"./VisuallyHidden-hrbUbT1W.js";import{I as Ae}from"./clear_16-QsHFcIy7.js";import{I as De}from"./cancel_24-D42vZ9MX.js";import{I as we}from"./search_outline_16-DOzVRN6B.js";const Pe="_host_9bpoo_1",Oe="_rtl_9bpoo_11",ze="_withPadding_9bpoo_15",$e="_densityCompact_9bpoo_24",Ge="_densityNone_9bpoo_29",Je="_field_9bpoo_34",Ke="_label_9bpoo_57",Qe="_input_9bpoo_64",Ue="_nativeInput_9bpoo_76",We="_hasAfter_9bpoo_106",Xe="_disabled_9bpoo_111",Ye="_controls_9bpoo_131",Ze="_hasIcon_9bpoo_144",et="_hasValue_9bpoo_156",tt="_icon_9bpoo_160",ot="_after_9bpoo_174",nt="_focused_9bpoo_185",at="_afterTextClip_9bpoo_204",st="_findButton_9bpoo_211",e={host:Pe,rtl:Oe,withPadding:ze,densityCompact:$e,densityNone:Ge,field:Je,label:Ke,input:Qe,nativeInput:Ue,hasAfter:We,disabled:Xe,controls:Ye,hasIcon:Ze,hasValue:et,icon:tt,after:ot,focused:nt,afterTextClip:at,findButton:st},E=({after:r="Отмена",before:F=t.jsx(we,{}),icon:s,onIconClick:h,iconLabel:L,clearLabel:S="Очистить",clearButtonTestId:k,noPadding:A,findButtonText:D="Найти",onFindButtonClick:c,findButtonTestId:w,hideClearButton:b,getRef:P,placeholder:O="Поиск",autoComplete:z="off",autoCapitalize:$,autoCorrect:G,disabled:J,list:K,maxLength:Q,minLength:U,name:W,pattern:X,readOnly:Y,required:Z,value:ee,form:te,id:oe,inputMode:ne,defaultValue:ae,autoFocus:se,tabIndex:le,spellCheck:ie,onChange:re,onFocus:ce,onBlur:de,slotProps:y,...ue})=>{const pe=Fe()==="rtl",fe=T(ue,y?.root),{id:v,placeholder:I,getRootRef:me,onChange:_e,onFocus:R,onBlur:g,...n}=T({getRootRef:P,className:e.nativeInput,placeholder:O,autoComplete:z,autoCapitalize:$,autoCorrect:G,disabled:J,list:K,maxLength:Q,minLength:U,name:W,pattern:X,readOnly:Y,required:Z,value:ee,form:te,id:oe,inputMode:ne,defaultValue:ae,autoFocus:se,tabIndex:le,spellCheck:ie,onChange:re,onFocus:ce,onBlur:de},y?.input),a=Ve(me),[he,d,u]=Ee(!1),be=l.useId(),C=v||`search-${be}`,[p,f]=l.useState(()=>!!(n.value||n.defaultValue)),ye=o=>f(!!o.currentTarget.value),{density:V="none"}=xe(),{density:m}=Be(),x=Ne(),B=x==="ios"&&Me(r),ve=o=>{d(),R&&R(o)},Ie=o=>{u(),g&&g(o)},i=l.useCallback(()=>{Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")?.set?.call(a.current,"");const _=new Event("input",{bubbles:!0});a.current?.dispatchEvent(_)},[a]),Re=l.useCallback(o=>h?.(o),[h]),ge=l.useCallback(o=>{o.preventDefault(),a.current?.focus(),Te()&&i()},[a,i]);je(()=>{n.value!==void 0&&f(!!n.value)},[n.value]),Le(a,()=>{f(!!n.defaultValue)});const N=(o,_={})=>t.jsxs(M,{hoverMode:"opacity",onPointerDown:Re,className:e.icon,onFocus:d,onBlur:u,onClick:qe,..._,children:[t.jsx(q,{children:L}),o]}),Ce=!!(s||!b||m.compact&&c);return t.jsxs(He,{baseClassName:j("vkuiInternalSearch",e.host,V==="none"&&e.densityNone,V==="compact"&&e.densityCompact,he&&e.focused,p&&e.hasValue,B&&e.hasAfter,s&&e.hasIcon,n.disabled&&e.disabled,!A&&e.withPadding,pe&&e.rtl),...fe,children:[t.jsxs("div",{className:e.field,children:[t.jsx("label",{htmlFor:C,className:e.label,children:I}),t.jsxs("div",{className:e.input,children:[F,t.jsx(ke,{Component:"input",type:"search",level:"1",weight:"3",id:C,placeholder:I,getRootRef:a,onChange:Se(_e,ye),onFocus:ve,onBlur:Ie,...n})]}),Ce&&t.jsxs("div",{className:e.controls,children:[s&&(typeof s=="function"?s(N):N(s)),!b&&t.jsxs(M,{hoverMode:"opacity",onPointerDown:ge,onClick:i,className:e.icon,tabIndex:p?void 0:-1,disabled:n.disabled,"data-testid":k,children:[t.jsx(q,{children:S}),x==="ios"?t.jsx(Ae,{}):t.jsx(De,{})]}),m.compact&&c&&t.jsx(H,{mode:"primary",size:"m",className:j(e.findButton,m.compact.className),focusVisibleMode:"inside",onClick:c,tabIndex:p?void 0:-1,"data-testid":w,children:D})]})]}),B&&t.jsx("div",{className:e.after,children:t.jsx(H,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:i,onFocus:d,onBlur:u,children:t.jsx("span",{className:e.afterTextClip,children:r})})})]})};try{E.displayName="Search",E.__docgenInfo={description:"",displayName:"Search",props:{getRef:{defaultValue:null,description:"@deprecated Since 7.9.0. Вместо этого используйте `slotProps={ input: { getRootRef: ... } }`.",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},slotProps:{defaultValue:null,description:"Свойства, которые можно прокинуть внутрь компонента:\n- `root`: свойства для прокидывания в корень компонента;\n- `input`: свойства для прокидывания в поле ввода.",name:"slotProps",required:!1,type:{name:"{ root?: (HTMLAttributes<HTMLDivElement> & HasRootRef<HTMLDivElement> & HasDataAttribute); input?: (InputHTMLAttributes<...> & ... 1 more ... & HasDataAttribute); } | undefined"}},after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},hideClearButton:{defaultValue:null,description:"Скрывает кнопку очистки.",name:"hideClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{E as S};
