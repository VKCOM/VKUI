"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[7524],{"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[13].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css":function(e,t,n){var a=n("../../node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=n.n(a),l=n("../../node_modules/css-loader/dist/runtime/api.js"),o=n.n(l)()(r());o.push([e.id,".DateRangeInput__input--c8r2o{cursor:text;flex-grow:1;font-variant-numeric:tabular-nums;margin-left:10px;margin-right:14px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;white-space:nowrap;z-index:1;z-index:var(--vkui_internal--z_index_form_field_element)}.DateRangeInput--sizeY-compact--iXDEM .DateRangeInput__input--c8r2o{margin-right:22px}@media (max-height:414.9px),(pointer:fine) and (min-width:768px){.DateRangeInput--sizeY-none--xvAjl .DateRangeInput__input--c8r2o{margin-right:22px}}",""]),o.locals={DateRangeInput__input:"DateRangeInput__input--c8r2o","DateRangeInput--sizeY-compact":"DateRangeInput--sizeY-compact--iXDEM","DateRangeInput--sizeY-none":"DateRangeInput--sizeY-none--xvAjl"},t.Z=o},"./src/components/DateRangeInput/DateRangeInput.stories.tsx":function(e,t,n){n.r(t),n.d(t,{Playground:function(){return $},default:function(){return Q}});var a,r,l,o=n("../../node_modules/react/jsx-runtime.js"),u=n("../../node_modules/react/index.js"),i=n("@storybook/preview-api"),s=n("./src/storybook/constants.ts"),c=n("../../node_modules/@vkontakte/icons/dist/es6/16/clear_16.js"),d=n("../../node_modules/@vkontakte/icons/dist/es6/20/calendar_outline_20.js"),p=n("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),g=n("./src/hooks/useAdaptivity.ts"),m=n("./src/hooks/useDateInput.ts"),b=n("./src/hooks/useExternRef.ts"),h=n("./src/lib/adaptivity/constants.ts"),f=n("./src/lib/callMultiple.ts"),v=n("./src/lib/date.ts"),y=n("./src/components/CalendarRange/CalendarRange.tsx"),D=n("./src/components/FormField/FormField.tsx"),j=n("./src/components/IconButton/IconButton.tsx"),A=n("./src/components/InputLike/InputLike.tsx"),R=n("./src/components/InputLike/InputLikeDivider.tsx"),x=n("./src/components/Popper/Popper.tsx"),Text=n("./src/components/Typography/Text/Text.tsx"),O=n("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),S=n.n(O),I=n("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),L=n.n(I),k=n("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),w=n.n(k),M=n("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),E=n.n(M),P=n("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),_=n.n(P),C=n("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[13].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css"),Y={attributes:{class:"vkui-style"}};Y.setAttributes=E(),Y.insert=w().bind(null,"head"),Y.domAPI=L(),Y.insertStyleElement=_(),S()(C.Z,Y);var V=C.Z&&C.Z.locals?C.Z.locals:void 0,q=n("./src/components/DateInput/DateInput.module.css");function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=F({none:V["DateRangeInput--sizeY-none"]},h.n$.COMPACT,V["DateRangeInput--sizeY-compact"]),z=function(e){var t=2,n=1,a=0;switch(e){case 0:case 3:a=31;break;case 1:case 4:a=12;break;case 2:case 5:a=2100,n=1900,t=4}return{length:t,min:n,max:a}},B=function(e){var t=["","","","","",""];return(null==e?void 0:e[0])&&(t[0]=String(e[0].getDate()).padStart(2,"0"),t[1]=String(e[0].getMonth()+1).padStart(2,"0"),t[2]=String(e[0].getFullYear()).padStart(4,"0")),(null==e?void 0:e[1])&&(t[3]=String(e[1].getDate()).padStart(2,"0"),t[4]=String(e[1].getMonth()+1).padStart(2,"0"),t[5]=String(e[1].getFullYear()).padStart(4,"0")),t},N=function(e){var t=e.shouldDisableDate,n=e.disableFuture,a=e.disablePast,r=e.value,l=e.onChange,i=e.calendarPlacement,s=e.style,O=e.className,S=e.closeOnChange,I=void 0===S||S,L=e.disablePickers,k=e.getRootRef,w=e.name,M=e.autoFocus,E=e.disabled,P=e.onClick,_=e.onFocus,C=e.prevMonthAriaLabel,Y=e.nextMonthAriaLabel,V=e.changeDayAriaLabel,N=e.changeMonthAriaLabel,U=e.changeYearAriaLabel,K=e.changeStartDayAriaLabel,Z=e.changeStartMonthAriaLabel,W=e.changeStartYearAriaLabel,Q=e.changeEndDayAriaLabel,$=e.changeEndMonthAriaLabel,X=e.changeEndYearAriaLabel,G=e.clearFieldAriaLabel,H=e.showCalendarAriaLabel,J=e.prevMonthIcon,ee=e.nextMonthIcon,et=e.disableCalendar,en=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["shouldDisableDate","disableFuture","disablePast","value","onChange","calendarPlacement","style","className","closeOnChange","disablePickers","getRootRef","name","autoFocus","disabled","onClick","onFocus","prevMonthAriaLabel","nextMonthAriaLabel","changeDayAriaLabel","changeMonthAriaLabel","changeYearAriaLabel","changeStartDayAriaLabel","changeStartMonthAriaLabel","changeStartYearAriaLabel","changeEndDayAriaLabel","changeEndMonthAriaLabel","changeEndYearAriaLabel","clearFieldAriaLabel","showCalendarAriaLabel","prevMonthIcon","nextMonthIcon","disableCalendar"]),ea=u.useRef(null),er=u.useRef(null),el=u.useRef(null),eo=u.useRef(null),eu=u.useRef(null),ei=u.useRef(null),es=u.useCallback(function(e){for(var t=!0,n=!0,a=0;a<=2;a+=1)e[a].length<z(a).length&&(t=!1);for(var o=3;o<=5;o+=1)e[o].length<z(o).length&&(n=!1);var u="".concat(e[0],".").concat(e[1],".").concat(e[2]),i="".concat(e[3],".").concat(e[4],".").concat(e[5]),s="DD.MM.YYYY";if((0,v.BD)(u,s)||(t=!1),(0,v.BD)(i,s)||(n=!1),t||n){var c=Array.isArray(r),d=new Date,p=t?(0,v.Qc)(u,s,c&&(null==r?void 0:r[0])||d):null,g=n?(0,v.Qc)(i,s,c&&(null==r?void 0:r[1])||d):null;p&&g&&(0,v.Ax)(g,p)&&(null==l||l([p,g]))}},[l,r]),ec=u.useMemo(function(){return[ea,er,el,eo,eu,ei]},[ea,er,el,eo,eu,ei]),ed=(0,m.S)({maxElement:5,refs:ec,autoFocus:M,disabled:E,elementsConfig:z,onChange:l,onInternalValueChange:es,getInternalValue:B,value:r}),ep=ed.rootRef,eg=ed.calendarRef,em=ed.open,eb=ed.openCalendar,eh=ed.closeCalendar,ef=ed.internalValue,ev=ed.handleKeyDown,ey=ed.setFocusedElement,eD=ed.handleFieldEnter,ej=ed.clear,eA=ed.removeFocusFromField,eR=(0,g.g)().sizeY,ex=void 0===eR?"none":eR,eO=(0,b.Q)(ep,k),eS=u.useCallback(function(e){null==l||l(e),I&&(null==e?void 0:e[1])&&e[1]!==(null==r?void 0:r[1])&&eA()},[l,I,r,eA]);return(0,o.jsxs)(D.W,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){F(e,t,n[t])})}return e}({style:s,className:(0,p.AK)(ex!==h.n$.REGULAR&&T[ex],O),getRootRef:eO,after:r?(0,o.jsx)(j.h,{hoverMode:"opacity","aria-label":void 0===G?"Очистить поле":G,onClick:ej,children:(0,o.jsx)(c.l,{})}):(0,o.jsx)(j.h,{hoverMode:"opacity","aria-label":void 0===H?"Показать календарь":H,onClick:eb,children:(0,o.jsx)(d.D,{})}),disabled:E,onClick:(0,f.C)(eD,P),onFocus:(0,f.C)(eD,_)},en),{children:[(0,o.jsx)("input",{type:"hidden",name:w,value:r?"".concat(r[0]?(0,v.WU)(r[0],"DD.MM.YYYY"):""," - ").concat(r[1]?(0,v.WU)(r[1],"DD.MM.YYYY"):""):""}),(0,o.jsxs)(Text.x,{className:q.Z.DateInput__input,onKeyDown:ev,children:[(0,o.jsx)(A.E,{length:2,getRootRef:ea,index:0,onElementSelect:ey,value:ef[0],"aria-label":void 0===K?"Изменить день начала":K}),(0,o.jsx)(R.q,{children:"."}),(0,o.jsx)(A.E,{length:2,getRootRef:er,index:1,onElementSelect:ey,value:ef[1],"aria-label":void 0===Z?"Изменить месяц начала":Z}),(0,o.jsx)(R.q,{children:"."}),(0,o.jsx)(A.E,{length:4,getRootRef:el,index:2,onElementSelect:ey,value:ef[2],"aria-label":void 0===W?"Изменить год начала":W}),(0,o.jsx)(R.q,{children:" — "}),(0,o.jsx)(A.E,{length:2,getRootRef:eo,index:3,onElementSelect:ey,value:ef[3],"aria-label":void 0===Q?"Изменить день окончания":Q}),(0,o.jsx)(R.q,{children:"."}),(0,o.jsx)(A.E,{length:2,getRootRef:eu,index:4,onElementSelect:ey,value:ef[4],"aria-label":void 0===$?"Изменить месяц окончания":$}),(0,o.jsx)(R.q,{children:"."}),(0,o.jsx)(A.E,{length:4,getRootRef:ei,index:5,onElementSelect:ey,value:ef[5],"aria-label":void 0===X?"Изменить год окончания":X})]}),em&&!(void 0!==et&&et)&&(0,o.jsx)(x.r,{targetRef:ep,offsetDistance:8,placement:void 0===i?"bottom-start":i,children:(0,o.jsx)(y.a,{value:r,onChange:eS,disablePast:a,disableFuture:n,shouldDisableDate:t,onClose:eh,getRootRef:eg,disablePickers:L,prevMonthAriaLabel:C,nextMonthAriaLabel:Y,changeMonthAriaLabel:N,changeYearAriaLabel:U,changeDayAriaLabel:V,prevMonthIcon:J,nextMonthIcon:ee})})]}))};try{N.displayName="DateRangeInput",N.__docgenInfo={description:"",displayName:"DateRangeInput",props:{calendarPlacement:{defaultValue:{value:"bottom-start"},description:"",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom"'},{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"",name:"closeOnChange",required:!1,type:{name:"boolean"}},clearFieldAriaLabel:{defaultValue:{value:"Очистить поле"},description:"",name:"clearFieldAriaLabel",required:!1,type:{name:"string"}},showCalendarAriaLabel:{defaultValue:{value:"Показать календарь"},description:"",name:"showCalendarAriaLabel",required:!1,type:{name:"string"}},changeStartDayAriaLabel:{defaultValue:{value:"Изменить день начала"},description:"",name:"changeStartDayAriaLabel",required:!1,type:{name:"string"}},changeStartMonthAriaLabel:{defaultValue:{value:"Изменить месяц начала"},description:"",name:"changeStartMonthAriaLabel",required:!1,type:{name:"string"}},changeStartYearAriaLabel:{defaultValue:{value:"Изменить год начала"},description:"",name:"changeStartYearAriaLabel",required:!1,type:{name:"string"}},changeEndDayAriaLabel:{defaultValue:{value:"Изменить день окончания"},description:"",name:"changeEndDayAriaLabel",required:!1,type:{name:"string"}},changeEndMonthAriaLabel:{defaultValue:{value:"Изменить месяц окончания"},description:"",name:"changeEndMonthAriaLabel",required:!1,type:{name:"string"}},changeEndYearAriaLabel:{defaultValue:{value:"Изменить год окончания"},description:"",name:"changeEndYearAriaLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"",name:"disableCalendar",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DateRangeType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: DateRangeType) => void)"}},disablePast:{defaultValue:null,description:"",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},weekStartsOn:{defaultValue:null,description:"",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthAriaLabel:{defaultValue:null,description:"",name:"prevMonthAriaLabel",required:!1,type:{name:"string"}},nextMonthAriaLabel:{defaultValue:null,description:"",name:"nextMonthAriaLabel",required:!1,type:{name:"string"}},changeMonthAriaLabel:{defaultValue:null,description:"",name:"changeMonthAriaLabel",required:!1,type:{name:"string"}},changeYearAriaLabel:{defaultValue:null,description:"",name:"changeYearAriaLabel",required:!1,type:{name:"string"}},changeDayAriaLabel:{defaultValue:null,description:"",name:"changeDayAriaLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"after",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"]={docgenInfo:N.__docgenInfo,name:"DateRangeInput",path:"src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"})}catch(e){}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})}return e}function Z(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,a,r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var l=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q={title:"Forms/DateRangeInput",component:N,parameters:K({},s.tW,s.nB),argTypes:{value:{description:"Используйте startDate и endDate для задания периода",control:!1},startDate:{description:"Дата начала периода",table:{type:{summary:"string"}},control:{type:"date"}},endDate:{description:"Дата окончания периода",table:{type:{summary:"string"}},control:{type:"date"}}}},$={render:function(){var e=(0,i.useArgs)(),t=W(e,2),n=t[0],a=(n.value,n.startDate),r=n.endDate,l=t[1],u=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e[0],["value","startDate","endDate"]),s=a?new Date(a):null,c=r?new Date(r):null;return(0,o.jsx)(N,Z(K({},u),{value:[s,c],onChange:function(e){var t=W(e||[null,null],2),n=t[0],a=t[1];l({startDate:n?new Date(n):null,endDate:a?new Date(a):null})}}))}};$.parameters=Z(K({},$.parameters),{docs:Z(K({},null===(a=$.parameters)||void 0===a?void 0:a.docs),{source:K({originalSource:"{\n  render: function Render() {\n    const [{\n      value,\n      startDate,\n      endDate,\n      ...args\n    }, updateArgs] = useArgs();\n    const handleDateRangeUpdate: DateRangeInputProps['onChange'] = updatedValue => {\n      const [changedStartDate, changedEndDate] = updatedValue || [null, null];\n      updateArgs({\n        startDate: changedStartDate ? new Date(changedStartDate) : null,\n        endDate: changedEndDate ? new Date(changedEndDate) : null\n      });\n    };\n    const parsedStartDate = startDate ? new Date(startDate) : null;\n    const parsedEndDate = endDate ? new Date(endDate) : null;\n    return <DateRangeInput {...args} value={[parsedStartDate, parsedEndDate]} onChange={handleDateRangeUpdate} />;\n  }\n}"},null===(l=$.parameters)||void 0===l?void 0:null===(r=l.docs)||void 0===r?void 0:r.source)})})}}]);