"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[7957],{"./src/lib/animation/useCSSTransition.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WithClassNameAttribute:()=>WithClassNameAttribute,WithStyleAttribute:()=>WithStyleAttribute,__namedExportsOrder:()=>__namedExportsOrder,default:()=>useCSSTransition_stories});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),lib=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/index.js"),constants=__webpack_require__("./src/storybook/constants.ts"),useCSSTransition=__webpack_require__("./src/lib/animation/useCSSTransition.ts"),injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),singletonStyleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),singletonStyleDomAPI_default=__webpack_require__.n(singletonStyleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithAttributesAndNonce=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),setAttributesWithAttributesAndNonce_default=__webpack_require__.n(setAttributesWithAttributesAndNonce),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),useCSSTransition_stories_module=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/lib/animation/useCSSTransition.stories.module.css"),options={attributes:{class:"vkui-style"}};options.setAttributes=setAttributesWithAttributesAndNonce_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=singletonStyleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(useCSSTransition_stories_module.A,options);const animation_useCSSTransition_stories_module=useCSSTransition_stories_module.A&&useCSSTransition_stories_module.A.locals?useCSSTransition_stories_module.A.locals:void 0,useCSSTransition_stories={title:"DevTools/useCSSTransition",tags:["test"],component:()=>(0,jsx_runtime.jsx)("div",{}),parameters:{...constants.eb,...constants.eC},argTypes:{in:{control:{type:"boolean"}},enableAppear:{control:{type:"boolean"}},enableEnter:{control:{type:"boolean"}},enableExit:{control:{type:"boolean"}},duration:{control:{type:"number"},table:{defaultValue:{summary:"⚠️ Это параметр данного Story"}}}},args:{duration:1,in:!0,enableAppear:!0,enableEnter:!0,enableExit:!0,onEnter(appear){console.log("onEnter",appear)},onEntering(appear){console.log("onEntering",appear)},onEntered(propertyName,appear){console.log("onEntered",propertyName,appear)},onExit(){console.log("onExit")},onExiting(){console.log("onExiting")},onExited(propertyName){console.log("onExited",propertyName)}}},transitionClassNames={appear:animation_useCSSTransition_stories_module.appear,appearing:animation_useCSSTransition_stories_module.appearing,appeared:animation_useCSSTransition_stories_module.appeared,enter:animation_useCSSTransition_stories_module.enter,entering:animation_useCSSTransition_stories_module.entering,entered:animation_useCSSTransition_stories_module.entered,exit:animation_useCSSTransition_stories_module.exit,exiting:animation_useCSSTransition_stories_module.exiting,exited:animation_useCSSTransition_stories_module.exited},WithClassNameAttribute={render:function Render({in:inProp,duration,...restProps}){const[state,{ref,onTransitionEnd}]=(0,useCSSTransition.k)(inProp,restProps);return"exited"===state?(0,jsx_runtime.jsx)("div",{}):(0,jsx_runtime.jsx)("div",{ref,className:(0,lib.xW)(animation_useCSSTransition_stories_module.host,transitionClassNames[state]),style:duration?{"--css-transition-duration":`${duration}s`}:void 0,onTransitionEnd})}},getTransition=(state,duration=1)=>({appear:{opacity:0},appearing:{opacity:1,transition:`opacity ${duration}s ease-in-out`},appeared:{opacity:1},enter:{opacity:0,transform:"translateY(-25%) rotate(25deg)",transformOrigin:"center center"},entering:{opacity:1,transform:"translateY(0) rotate(0deg)",transformOrigin:"center center",transition:`transform ${duration}s ease-in-out, opacity ${duration}s ease-in-out`},entered:{opacity:1},exit:{opacity:1,transform:"translateY(0) rotate(0deg)"},exiting:{opacity:0,transform:"translateY(-25%) rotate(25deg)",transformOrigin:"center center",transition:`transform ${duration}s ease-in-out, opacity ${duration}s ease-in-out`},exited:{opacity:0,transform:"translateY(-25%) rotate(25deg)"}}[state]),WithStyleAttribute={render:function Render({in:inProp,duration,...restProps}){const[state,{ref,onTransitionEnd}]=(0,useCSSTransition.k)(inProp,restProps);return"exited"===state?(0,jsx_runtime.jsx)("div",{}):(0,jsx_runtime.jsx)("div",{ref,className:animation_useCSSTransition_stories_module.host,style:getTransition(state,duration),onTransitionEnd})}},__namedExportsOrder=["WithClassNameAttribute","WithStyleAttribute"];WithClassNameAttribute.parameters={...WithClassNameAttribute.parameters,docs:{...WithClassNameAttribute.parameters?.docs,source:{originalSource:"{\n  render: function Render({\n    in: inProp,\n    duration,\n    ...restProps\n  }) {\n    const [state, {\n      ref,\n      onTransitionEnd\n    }] = useCSSTransition<HTMLDivElement>(inProp, restProps);\n    if (state === 'exited') {\n      return <div />;\n    }\n    return <div ref={ref} className={classNames(styles.host, transitionClassNames[state])} style={duration ? {\n      '--css-transition-duration': `${duration}s`\n    } as unknown as CSSCustomProperties : undefined} onTransitionEnd={onTransitionEnd} />;\n  }\n}",...WithClassNameAttribute.parameters?.docs?.source}}},WithStyleAttribute.parameters={...WithStyleAttribute.parameters,docs:{...WithStyleAttribute.parameters?.docs,source:{originalSource:"{\n  render: function Render({\n    in: inProp,\n    duration,\n    ...restProps\n  }) {\n    const [state, {\n      ref,\n      onTransitionEnd\n    }] = useCSSTransition<HTMLDivElement>(inProp, restProps);\n    if (state === 'exited') {\n      return <div />;\n    }\n    return <div ref={ref} className={styles.host} style={getTransition(state, duration)} onTransitionEnd={onTransitionEnd} />;\n  }\n}",...WithStyleAttribute.parameters?.docs?.source}}}},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/lib/animation/useCSSTransition.stories.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".animation__host--TUKuf{--css-transition-duration:1s;background-color:var(--vkui--color_background_accent);block-size:50vh;border-radius:8px;inline-size:50vh}.animation__appear--bB6Hc{opacity:0}.animation__appearing--BZOA4{opacity:1;transition:opacity var(--css-transition-duration) ease-in-out}.animation__appeared--L0WRj{opacity:1}.animation__enter--Bimq2{opacity:0;transform:translateY(-25%) rotate(25deg);transform-origin:center center}.animation__entering--JnSh5{opacity:1;transform:translateY(0) rotate(0deg);transform-origin:center center;transition:transform var(--css-transition-duration) ease-in-out,opacity var(--css-transition-duration) ease-in-out}.animation__entered--PMOfm,.animation__exit--lhANl{opacity:1}.animation__exit--lhANl{transform:translateY(0) rotate(0deg)}.animation__exiting--_a3gf{opacity:0;transform:translateY(-25%) rotate(25deg);transform-origin:center center;transition:transform var(--css-transition-duration) ease-in-out,opacity var(--css-transition-duration) ease-in-out}.animation__exited--C6zgI{opacity:0;transform:translateY(-25%) rotate(25deg)}","",{version:3,sources:["webpack://./src/lib/animation/useCSSTransition.stories.module.css"],names:[],mappings:"AAAA,wBACE,4BAA6B,CAI7B,qDAAsD,CADtD,eAAgB,CAEhB,iBAAkB,CAHlB,gBAIF,CAEA,0BACE,SACF,CAEA,6BACE,SAAU,CACV,6DACF,CAEA,4BACE,SACF,CAEA,yBACE,SAAU,CACV,wCAAyC,CACzC,8BACF,CAEA,4BACE,SAAU,CACV,oCAAqC,CACrC,8BAA+B,CAC/B,kHAGF,CAMA,mDAHE,SAMF,CAHA,wBAEE,oCACF,CAEA,2BACE,SAAU,CACV,wCAAyC,CACzC,8BAA+B,CAC/B,kHAGF,CAEA,0BACE,SAAU,CACV,wCACF",sourcesContent:[".host {\n  --css-transition-duration: 1s;\n\n  inline-size: 50vh;\n  block-size: 50vh;\n  background-color: var(--vkui--color_background_accent);\n  border-radius: 8px;\n}\n\n.appear {\n  opacity: 0;\n}\n\n.appearing {\n  opacity: 1;\n  transition: opacity var(--css-transition-duration) ease-in-out;\n}\n\n.appeared {\n  opacity: 1;\n}\n\n.enter {\n  opacity: 0;\n  transform: translateY(-25%) rotate(25deg);\n  transform-origin: center center;\n}\n\n.entering {\n  opacity: 1;\n  transform: translateY(0) rotate(0deg);\n  transform-origin: center center;\n  transition:\n    transform var(--css-transition-duration) ease-in-out,\n    opacity var(--css-transition-duration) ease-in-out;\n}\n\n.entered {\n  opacity: 1;\n}\n\n.exit {\n  opacity: 1;\n  transform: translateY(0) rotate(0deg);\n}\n\n.exiting {\n  opacity: 0;\n  transform: translateY(-25%) rotate(25deg);\n  transform-origin: center center;\n  transition:\n    transform var(--css-transition-duration) ease-in-out,\n    opacity var(--css-transition-duration) ease-in-out;\n}\n\n.exited {\n  opacity: 0;\n  transform: translateY(-25%) rotate(25deg);\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={host:"animation__host--TUKuf",appear:"animation__appear--bB6Hc",appearing:"animation__appearing--BZOA4",appeared:"animation__appeared--L0WRj",enter:"animation__enter--Bimq2",entering:"animation__entering--JnSh5",entered:"animation__entered--PMOfm",exit:"animation__exit--lhANl",exiting:"animation__exiting--_a3gf",exited:"animation__exited--C6zgI"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/hooks/useStateWithPrev.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useStateWithPrev});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");function initializer(initialArg){const initialState=function basicStateInitializer(initialArg){return initialArg instanceof Function?initialArg():initialArg}(initialArg);return[initialState,void 0]}function reducer([prevState],action){const newState=function basicStateReducer(state,action){return action instanceof Function?action(state):action}(prevState,action);return[newState,prevState]}function useStateWithPrev(initialState){return react__WEBPACK_IMPORTED_MODULE_0__.useReducer(reducer,void 0,(()=>initializer(initialState)))}},"./src/lib/animation/useCSSTransition.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>useCSSTransition});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/index.js"),_hooks_useStableCallback__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/useStableCallback.ts"),_hooks_useStateWithPrev__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/useStateWithPrev.ts");const useCSSTransition=(inProp,{enableAppear=!1,enableEnter=!0,enableExit=!0,onEnter:onEnterProp,onEntering:onEnteringProp,onEntered:onEnteredProp,onExit:onExitProp,onExiting:onExitingProp,onExited:onExitedProp}={})=>{const onEnter=(0,_hooks_useStableCallback__WEBPACK_IMPORTED_MODULE_2__.K)(onEnterProp||_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_1__.lQ),onEntering=(0,_hooks_useStableCallback__WEBPACK_IMPORTED_MODULE_2__.K)(onEnteringProp||_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_1__.lQ),onEntered=(0,_hooks_useStableCallback__WEBPACK_IMPORTED_MODULE_2__.K)(onEnteredProp||_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_1__.lQ),onExit=(0,_hooks_useStableCallback__WEBPACK_IMPORTED_MODULE_2__.K)(onExitProp||_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_1__.lQ),onExiting=(0,_hooks_useStableCallback__WEBPACK_IMPORTED_MODULE_2__.K)(onExitingProp||_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_1__.lQ),onExited=(0,_hooks_useStableCallback__WEBPACK_IMPORTED_MODULE_2__.K)(onExitedProp||_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_1__.lQ),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[[state,prevState],setState]=(0,_hooks_useStateWithPrev__WEBPACK_IMPORTED_MODULE_3__.A)((()=>inProp?enableAppear?(onEnter(!0),"appear"):"entered":"exited"));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function updateState(){if(inProp)switch(state){case"appear":ref.current,setState("appearing"),onEntering(!0);break;case"enter":ref.current,setState("entering"),onEntering();break;case"exiting":if(enableEnter){setState("entering"),onEntering();break}setState("entered"),onEntered();break;case"exited":if(enableEnter){setState("enter"),onEnter();break}setState("entered"),onEntered()}else switch(state){case"exit":ref.current,setState("exiting"),onExiting();break;case"appearing":case"entering":if(enableExit){setState("exiting"),onExiting();break}setState("exited"),onExited();break;case"appeared":case"entered":if(enableExit){setState("exit"),onExit();break}setState("exited"),onExited()}}),[inProp,state,prevState,setState,enableAppear,enableEnter,onEnter,onEntering,onEntered,enableExit,onExit,onExiting,onExited]);return[state,{ref,onTransitionEnd:"appeared"!==state&&"entered"!==state&&"exited"!==state?event=>{if(event.target===ref.current)switch(state){case"appearing":setState("appeared"),onEntered(event.propertyName,!0);break;case"entering":setState("entered"),onEntered(event.propertyName);break;case"exiting":setState("exited"),onExited(event.propertyName)}}:void 0}]}},"./src/storybook/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{eC:()=>DisableCartesianParam,eb:()=>CanvasFullLayout,oL:()=>StringArg});const CanvasFullLayout={layout:"fullscreen",centered:!0},DisableCartesianParam={cartesian:{disable:!0}},StringArg={control:"text"}}}]);