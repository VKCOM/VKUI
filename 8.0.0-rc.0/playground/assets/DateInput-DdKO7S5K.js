import{r as a,a9 as Eu,aa as Du,a6 as Fu,a7 as cu,ab as mu,ac as Bu,i as pu,h as fu,q as Cu,p as Au,j as e,g as i4,ad as hu,a8 as bu,T as d4}from"./iframe-CJSxyW9U.js";import{u as vu,d as i,N as h,I as y}from"./DateInput.module-D1ecsWee.js";import{u as yu}from"./useGlobalEscKeyDown-Ctvb27ds.js";import{c as gu}from"./CalendarHeader-Dt0WtSan.js";import{C as Vu}from"./Calendar-DtJeej2d.js";import{a as qu}from"./FocusTrap-BY7eisJ4.js";import{F as xu}from"./FormField-C1QoIvTb.js";import{I as E4}from"./IconButton-DlIx3m79.js";import{P as Iu}from"./Popper-CILUD6SC.js";import{V as O}from"./VisuallyHidden-BRZ1JlNp.js";import{I as Ru}from"./calendar_outline_20-bCaT4xjS.js";import{I as Tu}from"./clear_16-BNhH-lhb.js";const g=(u,t)=>Eu(u,t)||null,Mu=(u,t)=>Du(u,t),D4=(u,t,s,n)=>g(t!==void 0?t:s!==void 0?s:u,n),Lu=({value:u,defaultValue:t,onChange:s,timezone:n})=>{const[V,F]=a.useState(D4(null,u,t,n)),c=a.useRef(D4(null,u,t,n)),m=u!==void 0;a.useEffect(()=>{if(m){const d=g(u,n);F(d),c.current=d}},[m,n,u]);const q=a.useCallback(()=>c.current,[]),x=a.useCallback(d=>{m||(F(d),c.current=d);const b=Mu(d,n);return s?.(b),b},[m,s,n]);return{value:V,updateValue:x,setInternalValue:F,getLastUpdatedValue:q,clearValue:()=>{F(null),c.current=null,s?.(null)}}},ju={weekday:"long",year:"numeric",month:"long",day:"numeric"},ku=gu(),wu={none:i.densityNone,compact:i.densityCompact},F4=u=>{let t=2,s=1,n=0;switch(u){case 0:n=31;break;case 1:n=12;break;case 2:n=2100,s=1900,t=4;break;case 3:n=23;break;case 4:n=59;break}return{length:t,min:s,max:n}},Nu=u=>{const t=["","","","",""];return u&&(t[0]=String(u.getDate()).padStart(2,"0"),t[1]=String(u.getMonth()+1).padStart(2,"0"),t[2]=String(u.getFullYear()).padStart(4,"0"),t[3]=String(u.getHours()).padStart(2,"0"),t[4]=String(u.getMinutes()).padStart(2,"0")),t},Su={childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]},c4=({enableTime:u,shouldDisableDate:t,disableFuture:s,disablePast:n,minDateTime:V,maxDateTime:F,value:c,defaultValue:m,onChange:q,calendarPlacement:x="bottom-start",style:H,className:d,doneButtonText:b,DoneButton:m4,closeOnChange:K=!0,disablePickers:B4,getRootRef:p4,name:f4,autoFocus:C4,disabled:$,accessible:E=!0,calendarLabel:A4="Календарь",prevMonthLabel:h4="Предыдущий месяц",nextMonthLabel:b4="Следующий месяц",changeDayLabel:v4="День",changeMonthLabel:U="Месяц",changeYearLabel:Z="Год",changeHoursLabel:Y="Час",changeMinutesLabel:z="Минута",clearFieldLabel:y4="Очистить поле",showCalendarLabel:g4="Показать календарь",showNeighboringMonth:V4,size:q4,viewDate:x4,onHeaderChange:I4,onNextMonth:R4,onPrevMonth:T4,prevMonthIcon:M4,nextMonthIcon:L4,renderDayContent:j4,onCalendarOpenChanged:k4,calendarTestsProps:w4,dayFieldTestId:N4,monthFieldTestId:S4,yearFieldTestId:P4,hourFieldTestId:_4,minuteFieldTestId:O4,showCalendarButtonTestId:H4,clearButtonTestId:K4,id:$4,onApply:G,renderCustomValue:J,timezone:U4,restoreFocus:Z4,disableFocusTrap:Y4,readOnly:o,disableCalendar:z4=!1,"aria-label":Q="",before:W,...G4})=>{const I=a.useRef(null),R=a.useRef(null),T=a.useRef(null),M=a.useRef(null),L=a.useRef(null),X=a.useRef(null),j=o?!0:z4,{value:l,updateValue:B,setInternalValue:k,getLastUpdatedValue:u4,clearValue:J4}=Lu({value:c,defaultValue:m,onChange:q,timezone:U4}),w=u?4:2,Q4=a.useCallback(r=>{for(let D=0;D<=w;D+=1)if(r[D].length<F4(D).length)return;let P=`${r[0]}.${r[1]}.${r[2]}`,_="dd.MM.yyyy";if(u&&(P+=` ${r[3]}:${r[4]}`,_+=" HH:mm"),Fu(P,_)){const D=new Date;B(cu(P,_,l??(u?mu(D):Bu(D))))}},[u,w,B,l]),W4=a.useMemo(()=>[I,R,T,M,L],[I,R,T,M,L]),{rootRef:e4,calendarRef:X4,open:p,internalValue:f,handleKeyDown:C,setFocusedElement:A,handleFieldEnter:N,clear:uu,removeFocusFromField:v,closeCalendar:eu,toggleCalendar:au,openCalendar:a4,handleRestoreFocus:tu}=vu({maxElement:w,refs:W4,autoFocus:C4,disabled:$||o,elementsConfig:F4,onClear:J4,onInternalValueChange:Q4,getInternalValue:Nu,value:l,onCalendarOpenChanged:k4,accessible:E}),{density:t4="none"}=pu(),nu=fu(e4,p4);Cu(function(){p||k(u4())},[p,u4]);const lu=a.useCallback(r=>{if(u){k(r);return}B(r),K&&v()},[u,B,K,k,v]),ru=a.useCallback(()=>{if(!l)return;const r=B(l);G?.(r),v()},[G,v,B,l]),S=a.useMemo(()=>!p&&J?.(l||void 0),[p,J,l]),[su,ou]=a.useState(x),{locale:iu}=Au(),n4=l?ku(iu,ju).format(l):null,l4=a.useId(),r4=a.useId(),du=a.useCallback(()=>{N(),E&&a4()},[N,a4,E]),s4=!j&&(E||!E&&!l),o4=l&&!o;return yu(p&&!j,eu,{capture:!1}),e.jsxs(xu,{style:H,className:i4(t4!=="regular"&&wu[t4],!!W&&i.hasBefore,(s4||o4)&&i.hasAfter,d),getRootRef:nu,role:"group","aria-labelledby":`${r4} ${l4}`,before:W,after:e.jsxs(a.Fragment,{children:[s4?e.jsx(E4,{hoverMode:"opacity",label:g4,onClick:au,"data-testid":H4,children:e.jsx(Ru,{})}):null,o4?e.jsx(E4,{hoverMode:"opacity",label:y4,onClick:uu,"data-testid":K4,children:e.jsx(Tu,{})}):null]}),disabled:$,...G4,children:[e.jsxs("div",{className:i.wrapper,children:[Q&&e.jsx(O,{id:r4,children:Q}),n4&&e.jsx(O,{id:l4,children:n4}),e.jsx(O,{id:$4,Component:"input",readOnly:!0,"aria-hidden":!0,tabIndex:o?0:-1,name:f4,value:l?u?hu.format(l):bu.format(l):"",onFocus:N}),e.jsxs(d4,{className:i4(i.input,S&&i.hidden),normalize:!1,Component:"span",onClick:du,children:[e.jsx(h,{value:f[0],minValue:1,maxValue:31,length:2,getRootRef:I,index:0,onKeyDown:C,onElementSelect:A,label:v4,readOnly:o,"data-testid":N4}),e.jsx(y,{children:"."}),e.jsx(h,{value:f[1],minValue:1,maxValue:12,length:2,getRootRef:R,index:1,onElementSelect:A,onKeyDown:C,readOnly:o,label:U,"data-testid":S4}),e.jsx(y,{children:"."}),e.jsx(h,{value:f[2],minValue:1,maxValue:275750,length:4,getRootRef:T,index:2,onElementSelect:A,readOnly:o,label:Z,onKeyDown:C,"data-testid":P4}),u&&e.jsxs(a.Fragment,{children:[e.jsx(y,{className:i.inputTimeDivider,children:" "}),e.jsx(h,{value:f[3],minValue:1,maxValue:24,length:2,getRootRef:M,index:3,onElementSelect:A,readOnly:o,label:Y,onKeyDown:C,"data-testid":_4}),e.jsx(y,{children:":"}),e.jsx(h,{value:f[4],minValue:1,maxValue:59,length:2,getRootRef:L,index:4,onElementSelect:A,readOnly:o,label:z,onKeyDown:C,"data-testid":O4})]})]}),S&&e.jsx(d4,{className:i.customValue,"aria-hidden":!0,normalize:!1,children:S})]}),p&&!j&&e.jsx(Iu,{targetRef:e4,offsetByMainAxis:8,placement:su,onPlacementChange:ou,autoUpdateOnTargetResize:!0,children:e.jsx(qu,{rootRef:X,disabled:Y4??!E,restoreFocus:Z4??(!!E&&tu),mutationObserverOptions:Su,children:e.jsx("div",{ref:X,children:e.jsx(Vu,{"aria-label":A4,role:"dialog",value:l,onChange:lu,enableTime:u,disablePast:n,disableFuture:s,shouldDisableDate:t,onDoneButtonClick:ru,getRootRef:X4,doneButtonText:b,DoneButton:m4,disablePickers:B4,changeHoursLabel:Y,changeMinutesLabel:z,prevMonthLabel:h4,nextMonthLabel:b4,changeMonthLabel:U,changeYearLabel:Z,showNeighboringMonth:V4,renderDayContent:j4,size:q4,viewDate:x4,onHeaderChange:I4,onNextMonth:R4,onPrevMonth:T4,prevMonthIcon:M4,nextMonthIcon:L4,minDateTime:V,maxDateTime:F,...w4})})})})]})};try{c4.displayName="DateInput",c4.__docgenInfo={description:"",displayName:"DateInput",props:{onChange:{defaultValue:null,description:"Обработчик изменения выбранной даты.",name:"onChange",required:!1,type:{name:"((value: Date | null) => void)"}},calendarTestsProps:{defaultValue:null,description:"Передает атрибуты `data-testid` для интерактивных элементов в календаре.",name:"calendarTestsProps",required:!1,type:{name:"CalendarTestsProps"}},calendarPlacement:{defaultValue:{value:"bottom-start"},description:"Расположение календаря относительно поля ввода.",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"Автоматически закрывать календарь при изменениях.",name:"closeOnChange",required:!1,type:{name:"boolean"}},calendarLabel:{defaultValue:{value:"Календарь"},description:"`aria-label` для календаря.",name:"calendarLabel",required:!1,type:{name:"string"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"Label для кнопки очистки. Делает доступным для ассистивных технологий.",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"Label для кнопки открытия календаря. Делает доступным для ассистивных технологий.",name:"showCalendarLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"Отключение открытия календаря.",name:"disableCalendar",required:!1,type:{name:"boolean"}},onCalendarOpenChanged:{defaultValue:null,description:"Обработчик изменения состояния открытия календаря.",name:"onCalendarOpenChanged",required:!1,type:{name:"((opened: boolean) => void)"}},changeDayLabel:{defaultValue:{value:"День"},description:"`aria-label` для поля изменения дня.",name:"changeDayLabel",required:!1,type:{name:"string"}},onApply:{defaultValue:null,description:'Обработчик нажатия на кнопку `"Done"`. Используется совместно с флагом `enableTime`.',name:"onApply",required:!1,type:{name:"((value?: Date) => void)"}},renderCustomValue:{defaultValue:null,description:`Функция для кастомного форматирования отображаемого значения даты.
Позволяет переопределить стандартное отображение даты и вернуть собственное представление.`,name:"renderCustomValue",required:!1,type:{name:"((date: Date) => ReactNode)"}},timezone:{defaultValue:null,description:"Часовой пояс для отображения даты.",name:"timezone",required:!1,type:{name:"string"}},accessible:{defaultValue:{value:"true"},description:`@deprecated Since 8.0.0. Будет удалено в 9.0.0.

Включает режим в котором DateInput доступен
для ассистивных технологий.
В этом режиме:
- календарь больше не открывает при фокусе на DateInput;
- иконка календаря видна всегда, чтобы пользователи
ассистивных технологий могли открыть календарь по клику на иконку;
- календарь при открытии получает фокус, клавиатурный
фокус зациклен и не выходит за пределы календаря пока календарь не закрыт.`,name:"accessible",required:!1,type:{name:"boolean"}},disableFocusTrap:{defaultValue:null,description:"Позволяет отключить захват фокуса при появлении календаря.",name:"disableFocusTrap",required:!1,type:{name:"boolean"}},restoreFocus:{defaultValue:{value:"true"},description:"Управление поведением возврата фокуса при закрытии всплывающего окна.",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean | HTMLElement)"}},size:{defaultValue:null,description:"Размер календаря.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},value:{defaultValue:null,description:"Текущая выбранная дата.",name:"value",required:!1,type:{name:"Date | null"}},defaultValue:{defaultValue:null,description:"Начальная дата при монтировании.",name:"defaultValue",required:!1,type:{name:"Date | null"}},changeHoursLabel:{defaultValue:{value:"Час"},description:"Текст выпадающего списка с выбором часов. Делает его доступным для ассистивных технологий.",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Минута"},description:"Текст выпадающего списка с выбором минут. Делает его доступным для ассистивных технологий.",name:"changeMinutesLabel",required:!1,type:{name:"string"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"`aria-label` для кнопки предыдущего месяца.",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"`aria-label` для кнопки следующего месяца.",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Месяц"},description:"`aria-label` для селектора месяца.",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Год"},description:"`aria-label` для селектора года.",name:"changeYearLabel",required:!1,type:{name:"string"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},prevMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки предыдущего месяца.",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки следующего месяца.",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},renderDayContent:{defaultValue:null,description:"Кастомизация отображения содержимого дня.",name:"renderDayContent",required:!1,type:{name:"((day: Date) => ReactNode)"}},disablePast:{defaultValue:null,description:"Запрещает выбор даты в прошлом.\nПрименяется, если не заданы `shouldDisableDate` и `disableFuture`.",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"Запрещает выбор даты в будущем.\nПрименяется, если не задано `shouldDisableDate`.",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"Функция для проверки запрета выбора даты.",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},enableTime:{defaultValue:null,description:"Включает выбор времени.",name:"enableTime",required:!1,type:{name:"boolean"}},doneButtonText:{defaultValue:null,description:'Текст отображаемый в кнопке `"Done"`.',name:"doneButtonText",required:!1,type:{name:"string"}},DoneButton:{defaultValue:null,description:'Кастомное отображение кнопки `"Done"`.',name:"DoneButton",required:!1,type:{name:"ComponentType<ButtonProps>"}},weekStartsOn:{defaultValue:null,description:"День недели, с которого начинается неделя.",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"Отключает селекторы выбора месяца/года.",name:"disablePickers",required:!1,type:{name:"boolean"}},showNeighboringMonth:{defaultValue:null,description:"Показывать дни соседних месяцев.",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},viewDate:{defaultValue:null,description:`Дата отображаемого месяца.
При использовании обновление даты должно происходить вне компонента.`,name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Обработчик изменения даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},minDateTime:{defaultValue:null,description:"Минимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"minDateTime",required:!1,type:{name:"Date"}},maxDateTime:{defaultValue:null,description:"Максимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"maxDateTime",required:!1,type:{name:"Date"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"Статус отображения поля в форме.",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},mode:{defaultValue:null,description:"Режим отображения.\n\n- `default` — показывает фон, обводку и, при наличии, текст-подсказку.\n- `plain` — показывает только текст-подсказку.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"plain"'},{value:'"default"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkui.io/components/icon-button), если вам нужна иконка, реагирующая на нажатие.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkui.io/components/icon-button), если вам нужна иконка, реагируюущая на нажатие.",name:"after",required:!1,type:{name:"ReactNode"}},beforeAlign:{defaultValue:null,description:"Вертикальное выравнивание иконки слева.",name:"beforeAlign",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"center"'},{value:'"end"'}]}},afterAlign:{defaultValue:null,description:"Вертикальное выравнивание иконки справа.",name:"afterAlign",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"center"'},{value:'"end"'}]}},dayFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода дня.",name:"dayFieldTestId",required:!1,type:{name:"string"}},monthFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода месяца.",name:"monthFieldTestId",required:!1,type:{name:"string"}},yearFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода года.",name:"yearFieldTestId",required:!1,type:{name:"string"}},hourFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода часа.",name:"hourFieldTestId",required:!1,type:{name:"string"}},minuteFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода минут.",name:"minuteFieldTestId",required:!1,type:{name:"string"}},showCalendarButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки показа календаря.",name:"showCalendarButtonTestId",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки даты.",name:"clearButtonTestId",required:!1,type:{name:"string"}}}}}catch{}export{c4 as D};
