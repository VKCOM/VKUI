import{x as T,h as Ie,r as l,i as Re,u as ge,c as Ce,a4 as Ve,q as xe,j as t,R as Be,k as Ne,g as j,n as Te}from"./iframe-DP0c1f9Y.js";import{u as je}from"./useBooleanState-CFH-Qq-E.js";import{u as He}from"./useConfigDirection-BNkwGAZM.js";import{u as Me}from"./useNativeFormResetListener-s-K9-YPr.js";import{c as qe}from"./callMultiple-ChqatQlo.js";import{B as H}from"./Button-DYe3R3CT.js";import{I as M}from"./IconButton-DX6zaS9g.js";import{H as Ee}from"./Headline-D5yVS7YY.js";import{V as q}from"./VisuallyHidden-CsBByQHJ.js";import{I as Fe}from"./clear_16-p70laEFK.js";import{I as Le}from"./cancel_24-Cb6nnPMq.js";import{I as Se}from"./search_outline_16-BBoezJaZ.js";const ke="_host_9bpoo_1",Ae="_rtl_9bpoo_11",De="_withPadding_9bpoo_15",we="_densityCompact_9bpoo_24",Pe="_densityNone_9bpoo_29",Oe="_field_9bpoo_34",ze="_label_9bpoo_57",$e="_input_9bpoo_64",Ge="_nativeInput_9bpoo_76",Je="_hasAfter_9bpoo_106",Ke="_disabled_9bpoo_111",Qe="_controls_9bpoo_131",Ue="_hasIcon_9bpoo_144",We="_hasValue_9bpoo_156",Xe="_icon_9bpoo_160",Ye="_after_9bpoo_174",Ze="_focused_9bpoo_185",et="_afterTextClip_9bpoo_204",tt="_findButton_9bpoo_211",e={host:ke,rtl:Ae,withPadding:De,densityCompact:we,densityNone:Pe,field:Oe,label:ze,input:$e,nativeInput:Ge,hasAfter:Je,disabled:Ke,controls:Qe,hasIcon:Ue,hasValue:We,icon:Xe,after:Ye,focused:Ze,afterTextClip:et,findButton:tt},E=({after:r="Отмена",before:F=t.jsx(Se,{}),icon:s,onIconClick:h,iconLabel:L,clearLabel:S="Очистить",clearButtonTestId:k,noPadding:A,findButtonText:D="Найти",onFindButtonClick:c,findButtonTestId:w,hideClearButton:b,getRef:P,placeholder:O="Поиск",autoComplete:z="off",disabled:$,list:G,maxLength:J,minLength:K,name:Q,readOnly:U,required:W,value:X,id:Y,inputMode:Z,defaultValue:ee,autoFocus:te,tabIndex:oe,spellCheck:ne,onChange:ae,onFocus:se,onBlur:le,slotProps:y,...ie})=>{const re=He()==="rtl",ce=T(ie,y?.root),{id:v,placeholder:I,getRootRef:de,onChange:ue,onFocus:R,onBlur:g,...n}=T({getRootRef:P,className:e.nativeInput,placeholder:O,autoComplete:z,disabled:$,list:G,maxLength:J,minLength:K,name:Q,readOnly:U,required:W,value:X,id:Y,inputMode:Z,defaultValue:ee,autoFocus:te,tabIndex:oe,spellCheck:ne,onChange:ae,onFocus:se,onBlur:le},y?.input),a=Ie(de),[pe,d,u]=je(!1),fe=l.useId(),C=v||`search-${fe}`,[p,f]=l.useState(()=>!!(n.value||n.defaultValue)),me=o=>f(!!o.currentTarget.value),{density:V="none"}=Re(),{density:m}=ge(),x=Ce(),B=x==="ios"&&Ne(r),_e=o=>{d(),R&&R(o)},he=o=>{u(),g&&g(o)},i=l.useCallback(()=>{Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")?.set?.call(a.current,"");const _=new Event("input",{bubbles:!0});a.current?.dispatchEvent(_)},[a]),be=l.useCallback(o=>h?.(o),[h]),ye=l.useCallback(o=>{o.preventDefault(),a.current?.focus(),Ve()&&i()},[a,i]);xe(()=>{n.value!==void 0&&f(!!n.value)},[n.value]),Me(a,()=>{f(!!n.defaultValue)});const N=(o,_={})=>t.jsxs(M,{hoverMode:"opacity",onPointerDown:be,className:e.icon,onFocus:d,onBlur:u,onClick:Te,..._,children:[t.jsx(q,{children:L}),o]}),ve=!!(s||!b||m.compact&&c);return t.jsxs(Be,{baseClassName:j("vkuiInternalSearch",e.host,V==="none"&&e.densityNone,V==="compact"&&e.densityCompact,pe&&e.focused,p&&e.hasValue,B&&e.hasAfter,s&&e.hasIcon,n.disabled&&e.disabled,!A&&e.withPadding,re&&e.rtl),...ce,children:[t.jsxs("div",{className:e.field,children:[t.jsx("label",{htmlFor:C,className:e.label,children:I}),t.jsxs("div",{className:e.input,children:[F,t.jsx(Ee,{Component:"input",type:"search",level:"1",weight:"3",id:C,placeholder:I,getRootRef:a,onChange:qe(ue,me),onFocus:_e,onBlur:he,...n})]}),ve&&t.jsxs("div",{className:e.controls,children:[s&&(typeof s=="function"?s(N):N(s)),!b&&t.jsxs(M,{hoverMode:"opacity",onPointerDown:ye,onClick:i,className:e.icon,tabIndex:p?void 0:-1,disabled:n.disabled,"data-testid":k,children:[t.jsx(q,{children:S}),x==="ios"?t.jsx(Fe,{}):t.jsx(Le,{})]}),m.compact&&c&&t.jsx(H,{mode:"primary",size:"m",className:j(e.findButton,m.compact.className),focusVisibleMode:"inside",onClick:c,tabIndex:p?void 0:-1,"data-testid":w,children:D})]})]}),B&&t.jsx("div",{className:e.after,children:t.jsx(H,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:i,onFocus:d,onBlur:u,children:t.jsx("span",{className:e.afterTextClip,children:r})})})]})};try{E.displayName="Search",E.__docgenInfo={description:"",displayName:"Search",props:{getRef:{defaultValue:null,description:"@deprecated Since 7.9.0. Вместо этого используйте `slotProps={ input: { getRootRef: ... } }`.",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},slotProps:{defaultValue:null,description:"Свойства, которые можно прокинуть внутрь компонента:\n- `root`: свойства для прокидывания в корень компонента;\n- `input`: свойства для прокидывания в поле ввода.",name:"slotProps",required:!1,type:{name:"{ root?: (HTMLAttributes<HTMLDivElement> & HasRootRef<HTMLDivElement> & HasDataAttribute); input?: (InputHTMLAttributes<...> & ... 1 more ... & HasDataAttribute); } | undefined"}},after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},hideClearButton:{defaultValue:null,description:"Скрывает кнопку очистки.",name:"hideClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{E as S};
