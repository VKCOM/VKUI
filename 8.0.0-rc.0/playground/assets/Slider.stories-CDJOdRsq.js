import{r as m,h as mu,j as o,g as M,aZ as _u,i as hu,as as K,X as Du,a5 as vu,w as Cu,b as Su}from"./iframe-CWLi0Dwx.js";import{D as Fu,C as Bu}from"./constants-DdkjnEgz.js";import{c as Vu}from"./createStoryParameters-CcwS40kl.js";import{F as Au}from"./FormItem-C8PPO9Ml.js";import{G as Tu}from"./Group-vgwGhKNH.js";import{u as wu}from"./useConfigDirection-EPKxpKX2.js";import{u as Ru}from"./useBooleanState-DBJg9YoG.js";import{u as xu}from"./useState-B6GpLt4z.js";import{u as Pu}from"./useFocusVisibleClassName-C_mTcJQY.js";import{T as Iu}from"./TooltipBase-CDQIlhIS.js";import{o as ku,h as qu,d as Mu,i as Nu,u as zu,c as Lu}from"./floating-ui.react-dom-CUfx7nZO.js";const ju="_host_1q66x_1",Xu="_focusVisible_1q66x_15",Hu="_hover_1q66x_20",Ou="_active_1q66x_24",Wu="_nativeInput_1q66x_31",V={host:ju,focusVisible:Xu,hover:Hu,active:Ou,nativeInput:Wu},N=({className:u,getRootRef:e,inputProps:t,withTooltip:n,isActive:s,...d})=>{const{focusVisible:r,onBlur:S,onFocus:T}=xu(),g=Pu({focusVisible:r,mode:V.focusVisible}),[f,z]=m.useState(null),L=m.useMemo(()=>[ku({crossAxis:0,mainAxis:15}),qu(),Mu({padding:8}),Nu({element:f})],[f]),{x:b,y:w,placement:j,refs:R,strategy:X,middlewareData:{arrow:x},update:H}=zu({placement:"top",middleware:L}),[y,_,P]=Ru(!1),I=mu(e,R.setReference),c=n&&(r||y||s),i=t&&t.value;return m.useEffect(function(){c&&i!=="undefined"&&H()},[i,H,c]),o.jsxs(m.Fragment,{children:[o.jsx("span",{...d,ref:I,onMouseEnter:_,onMouseLeave:P,className:M(V.host,g,s&&V.active,y&&V.hover,u),children:o.jsx("input",{...t,type:"range",className:V.nativeInput,"aria-orientation":"horizontal",onBlur:S,onFocus:T})}),c&&o.jsx(Iu,{appearance:"neutral",getRootRef:R.setFloating,style:Lu({strategy:X,x:b,y:w}),arrowProps:{coords:x,placement:j,getRootRef:z},description:i})]})};try{N.displayName="SliderThumb",N.__docgenInfo={description:"",displayName:"SliderThumb",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"(InputHTMLAttributes<HTMLInputElement> & RefAttributes<HTMLInputElement> & HasDataAttribute)"}},withTooltip:{defaultValue:null,description:"",name:"withTooltip",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLSpanElement>"}}}}}catch{}const lu=(u,e,t)=>(u-e)/(t-e)*100,ou=(u,e,t,n,s)=>_u(u,[0,e],[t,n],{step:s}),U=(u,e,t)=>u<e?e:u>t?t:u,iu=(u,e,t,n,s)=>{const[d,r]=u;if(r===null)return[U(e,t,n),null];switch(s){case"start":return e>r?[r,r]:[U(e,t,n),r];case"end":return e<d?[d,d]:[d,U(e,t,n)];default:return u}},$u=(u,e,t)=>{const[n,s]=u;switch(t){case"start":return[e,s];case"end":return[n,e];default:return u}};function Gu(u){return u[1]!==null}const Ku=(u,e,t)=>{if(t==="start")return"start";if(t==="end")return"end";const[n,s]=u,d=.1,r=s!==null?n-d:n,S=s!==null?s+d:0;return Math.abs(r-e)<=Math.abs(S-e)?"start":"end"},du=u=>{if(u){if(u.dataset.type==="start")return"start";if(u.dataset.type==="end")return"end"}return null},Uu={"aria-label":void 0,"aria-valuetext":void 0,"aria-labelledby":void 0},Yu=u=>{const e=u["aria-label"],t=u["aria-valuetext"],n=u["aria-labelledby"];return{...u,...Uu,ariaLabel:e,ariaValueText:t,ariaLabelledBy:n}},Zu="_host_1gkew_1",Ju="_disabled_1gkew_10",Qu="_track_1gkew_15",u4="_trackFill_1gkew_16",e4="_multiple_1gkew_34",t4="_thumbs_1gkew_40",a4="_thumb_1gkew_40",n4="_rtl_1gkew_52",r4="_thumbStart_1gkew_56",s4="_thumbEnd_1gkew_60",l4="_sizeL_1gkew_64",o4="_sizeM_1gkew_68",i4="_sizeS_1gkew_72",d4="_densityCompact_1gkew_80",c4="_densityNone_1gkew_93",l={host:Zu,disabled:Ju,track:Qu,trackFill:u4,multiple:e4,thumbs:t4,thumb:a4,rtl:n4,thumbStart:r4,thumbEnd:s4,sizeL:l4,sizeM:o4,sizeS:i4,densityCompact:d4,densityNone:c4},m4={none:l.densityNone,compact:l.densityCompact},p4={l:l.sizeL,m:l.sizeM,s:l.sizeS},Y=({step:u=1,min:e=0,max:t=100,value:n,multiple:s,defaultValue:d=s?[e,t]:e,disabled:r,className:S,getRootRef:T,getAriaLabel:g,getAriaValueText:f,startThumbTestId:z,endThumbTestId:L,onChange:b,withTooltip:w,size:j="l",style:R,...X})=>{const{density:x="none"}=hu(),y=wu()==="rtl",_=n!==void 0,[P,I]=m.useState(d),c=m.useMemo(()=>{const a=_?n:P;return Array.isArray(a)?[K(a[0],e,t),K(a[1],e,t)]:[K(a,e,t),null]},[_,n,P,e,t]),[i,p]=c,h=s&&p!==null,Z=lu(i,e,t),pu=h?lu(p,e,t):0,[J,Q]=m.useState(null),D=m.useRef({dragging:null,startX:0,containerWidth:0}).current,O=mu(T),W=m.useRef(null),$=m.useRef(null),{ariaLabel:uu,ariaValueText:eu,ariaLabelledBy:tu,...fu}=Yu(X),G=(a,v)=>{r||c[0]===a[0]&&c[1]===a[1]||(s?Gu(a)&&(!_&&I(a),b&&b(a,v)):(!_&&I(a[0]),b&&b(a[0],v)))},Eu=a=>{if(!O.current)return;const{left:v,width:F}=O.current.getBoundingClientRect(),B=du(a.originalEvent.target);let E=a.startX-v;y&&(E=F-E);const k=ou(E,F,e,t,u),q=Ku(c,k,B);D.dragging=q,D.containerWidth=F,D.startX=E;const nu=iu(c,k,e,t,q),[ru,su]=nu;W.current&&(B==="start"||ru!==i&&su===p)?(W.current.focus(),a.originalEvent.preventDefault()):$.current&&(B==="end"||su!==p&&ru===i)&&($.current.focus(),a.originalEvent.preventDefault()),G(nu,a),a.originalEvent.stopPropagation(),Q(D.dragging)},gu=a=>{const{startX:v,containerWidth:F,dragging:B}=D,{shiftX:E=0}=a,k=v+(y?-E:E),q=ou(k,F,e,t,u);G(iu(c,q,e,t,B),a),a.originalEvent.stopPropagation(),a.originalEvent.preventDefault()},bu=a=>{D.dragging=null,a.originalEvent.stopPropagation(),Q(null)},au=a=>{G($u(c,Number(a.target.value),du(a.target)),a)},yu={"--vkui_internal--Slider_start_value":String(Z),"--vkui_internal--Slider_end_value":String(pu)};return o.jsxs(Du,{"data-value":h?`${i},${p}`:i,...fu,className:M(l.host,r&&l.disabled,x!=="regular"&&m4[x],p4[j],h&&l.multiple,y&&l.rtl,S),style:vu(R,yu),getRootRef:T,onStart:r?void 0:Eu,onMove:r?void 0:gu,onEnd:r?void 0:bu,children:[o.jsx("div",{className:l.track}),o.jsx("div",{className:l.trackFill}),o.jsxs("div",{ref:O,className:l.thumbs,children:[o.jsx(N,{"data-type":"start",className:M(l.thumb,l.thumbStart),style:{zIndex:h&&Z>=50?2:void 0},withTooltip:w,inputProps:{"data-type":"start","data-testid":z,ref:W,step:u,min:e,value:i,max:h?p:t,disabled:r,"aria-label":g?g(0):uu,"aria-valuetext":f?f(i,0):eu,"aria-labelledby":tu,onChange:au},isActive:J==="start"}),h&&o.jsx(N,{"data-type":"end",className:M(l.thumb,l.thumbEnd),withTooltip:w,inputProps:{"data-type":"end","data-testid":L,ref:$,step:u,min:i,value:p,max:t,disabled:r,"aria-label":g?g(1):uu,"aria-valuetext":f?f(p,1):eu,"aria-labelledby":tu,onChange:au},isActive:J==="end"})]})]})};try{Y.displayName="Slider",Y.__docgenInfo={description:"",displayName:"Slider",props:{multiple:{defaultValue:null,description:`Флаг множественного выбора (должен быть false или не указан).
Флаг множественного выбора (должен быть true).`,name:"multiple",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:`Текущее значение слайдера.
Текущие значения слайдера в виде массива [начальное, конечное].`,name:"value",required:!1,type:{name:"number | [number, number]"}},defaultValue:{defaultValue:{value:"multipleProp ? [min, max] : min"},description:`Значение слайдера по умолчанию.
Значения слайдера по умолчанию в виде массива [начальное, конечное].`,name:"defaultValue",required:!1,type:{name:"number | [number, number]"}},onChange:{defaultValue:null,description:`Обработчик изменения значения слайдера.
Обработчик изменения значений слайдера.`,name:"onChange",required:!1,type:{name:"((value: number, event: CustomTouchEvent | ChangeEvent<Element>) => void) | ((value: [number, number], event: CustomTouchEvent | ChangeEvent<...>) => void)"}},min:{defaultValue:{value:"0"},description:"Минимальное значение слайдера.",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"100"},description:"Максимальное значение слайдера.",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"Шаг изменения значения слайдера.",name:"step",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}},getAriaLabel:{defaultValue:null,description:"Тоже самое, что и `aria-label`, но на вход можно получать индекс текущего ползунка и в зависимости от этого выдавать разный текст.\n\n> Перебивает `aria-label`.",name:"getAriaLabel",required:!1,type:{name:"((index: number) => string)"}},getAriaValueText:{defaultValue:null,description:"В отличие от `aria-valuetext`, позволяет более гибко форматировать текст в зависимости от значения ползунка.\n\nПолезно при использовании компонента как неконтролируемого.\n\n> Перебивает `aria-valuetext`.",name:"getAriaValueText",required:!1,type:{name:"((value: number, index: number) => string)"}},withTooltip:{defaultValue:null,description:"Включает отображение всплывающей подсказки при взаимодействии с ползунком.",name:"withTooltip",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"l"},description:"Размер ползунка.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},startThumbTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для первого ползунка.",name:"startThumbTestId",required:!1,type:{name:"string"}},endThumbTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для второго ползунка когда `multiple=true`.",name:"endThumbTestId",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}function cu(u){return u===1?"Pineapple Maximum Count":"Pineapple Minimum Count"}const f4={title:"Forms/Slider",component:Y,parameters:Vu("Slider",Bu,Fu),args:{getAriaLabel:cu},argTypes:{defaultValue:{table:{defaultValue:{summary:"min | [min, max]"}}},multiple:{table:{defaultValue:{summary:"false"}}},getAriaLabel:{table:{defaultValue:{summary:`Для примера используется функция: ${cu.toString()}`}}}},tags:["Формы и поля ввода"]},E4=u=>u?.multiple?"multiple":"single",C={decorators:[(u,e)=>o.jsx(Tu,{children:o.jsx(Au,{top:"Pineapple Count",children:o.jsx(u,{...e.args},E4(e.args))})}),Cu,Su]},A={...C,args:{withTooltip:!0}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  decorators: [(Component: typeof Slider, context: StoryContext<SliderProps | SliderMultipleProps>) => <Group>
        <FormItem top="Pineapple Count">
          <Component key={forceRemountKey(context.args)} {...context.args} />
        </FormItem>
      </Group>, withSinglePanel, withVKUILayout]
}`,...C.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  ...Playground,
  args: {
    withTooltip: true
  }
}`,...A.parameters?.docs?.source}}};const g4=["Playground","Tooltip"],A4=Object.freeze(Object.defineProperty({__proto__:null,Playground:C,Tooltip:A,__namedExportsOrder:g4,default:f4},Symbol.toStringTag,{value:"Module"}));export{C as P,Y as S,A4 as a};
