import{j as e,h as s,q as I,r as _,c as b,R as h}from"./iframe-CdM-7Hfu.js";import{g as C}from"./children-CDGrqL8f.js";import{I as A}from"./IconButton-CDyvGU-p.js";import{u as x}from"./useConfigDirection-BPbTAtL3.js";import{u as N}from"./useGlobalEventListener-BRj5_zmB.js";import{T as V}from"./Tappable-DK6ahodC.js";import{V as q}from"./VisuallyHidden-DydpD7lG.js";import{I as S}from"./cancel_24-CxY6nUNi.js";const T="_content_1j3ca_1",k="_withPadding_1j3ca_17",P="_rtl_1j3ca_21",M="_action_1j3ca_25",O="_ios_1j3ca_33",w="_indentation_1j3ca_33",H="_alignStart_1j3ca_42",L="_remove_1j3ca_57",W="_removeIn_1j3ca_72",G="_toggle_1j3ca_80",z="_toggleIn_1j3ca_89",J="_indent_1j3ca_33",K="_offset_1j3ca_141",u={content:T,withPadding:k,rtl:P,action:M,ios:O,indentation:w,alignStart:H,remove:L,removeIn:W,toggle:G,toggleIn:z,indent:J,offset:K},Q=({onRemove:t,removePlaceholder:n,removePlaceholderString:a,children:l,toggleButtonTestId:i,removeButtonTestId:m,disabled:d})=>{const E=x()==="rtl",{window:p}=I(),r=_.useRef(null),c=_.useRef(!0),[o,f]=_.useState(0);N(p,"click",()=>{o>0&&f(0)},{capture:!0});const R=()=>{o>0?r?.current?.focus():c.current=!0},B=j=>{if(j.stopPropagation(),!r.current)return;const{offsetWidth:y}=r.current;c.current=!1,f(y)},D={"--vkui_internal_Removable_remove_offset":String(o??0)};return e.jsxs("div",{className:s(u.content,E&&u.rtl,"vkuiInternalRemovable__content"),style:D,onTransitionEnd:R,children:[e.jsxs(A,{hasActive:!1,hasHover:!1,className:s(u.action,u.toggle,"vkuiInternalRemovable__action"),onClick:B,disabled:o>0||d,"data-testid":i,children:[e.jsx(q,{children:a}),e.jsx("i",{className:u.toggleIn,role:"presentation"})]}),typeof l=="function"?l({isRemoving:o>0}):l,e.jsx("span",{className:u.offset,"aria-hidden":!0}),e.jsx(V,{Component:"button",hasActive:!1,hasHover:!1,disabled:c.current,getRootRef:r,className:u.remove,onClick:t,"data-testid":m,children:e.jsx("span",{className:u.removeIn,children:n})})]})},U=({children:t})=>e.jsxs("div",{className:s(u.content,"vkuiInternalRemovable__content"),children:[e.jsx("div",{className:s(u.action,u.indentation,"vkuiInternalRemovable__action")}),typeof t=="function"?t({isRemoving:!1}):t,e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),F=({indent:t,children:n,...a})=>t?e.jsx(U,{children:n}):e.jsx(Q,{...a,children:n});try{F.displayName="RemovableIos",F.__docgenInfo={description:"",displayName:"RemovableIos",props:{indent:{defaultValue:null,description:"",name:"indent",required:!1,type:{name:"boolean"}},removePlaceholderString:{defaultValue:null,description:"",name:"removePlaceholderString",required:!1,type:{name:"string"}},removePlaceholder:{defaultValue:null,description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const X=({noPadding:t,children:n,removePlaceholderString:a,onRemoveClick:l,removeButtonTestId:i,disabled:m,indent:d})=>e.jsxs("div",{className:s(u.content,!t&&u.withPadding,"vkuiInternalRemovable__content"),children:[typeof n=="function"?n({isRemoving:!1}):n,d?e.jsx("div",{className:s(u.action,u.indentation)}):e.jsx(A,{activeMode:"opacity",hoverMode:"opacity",className:s(u.action,"vkuiInternalRemovable__action"),onClick:l,label:a,"data-testid":i,disabled:m,children:e.jsx(S,{role:"presentation"})}),e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),g=({children:t,onRemove:n,removePlaceholder:a="Удалить",align:l="center",indent:i=!1,toggleButtonTestId:m,removeButtonTestId:d,disabled:v,noPadding:E,...p})=>{const r=b(),c=f=>{f.preventDefault(),n?.(f)},o=C(a);return e.jsx(h,{...p,baseClassName:s(r==="ios"&&u.ios,l==="start"&&u.alignStart,i&&u.indent),children:r==="ios"?e.jsx(F,{onRemove:c,removePlaceholder:a,removePlaceholderString:o,toggleButtonTestId:m,removeButtonTestId:d,disabled:v,indent:i,children:t}):e.jsx(X,{onRemoveClick:c,noPadding:E,removeButtonTestId:d,removePlaceholderString:o,disabled:v,indent:i,children:t})})};try{g.displayName="Removable",g.__docgenInfo={description:"",displayName:"Removable",props:{align:{defaultValue:{value:"center"},description:"Расположение кнопки удаления.",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"start"'}]}},indent:{defaultValue:{value:"false"},description:`Скрывает кнопку, но оставляет отступ.
@since 5.4.0`,name:"indent",required:!1,type:{name:"boolean"}},noPadding:{defaultValue:null,description:"Убирает базовые отступы для базовой платформы.",name:"noPadding",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"Содержимое. Можно передать функцию для отрисовки.",name:"children",required:!1,type:{name:"ReactNode | ((renderProps: RemovableIosRenderProps) => ReactNode)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},removePlaceholder:{defaultValue:{value:"Удалить"},description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}export{g as R};
