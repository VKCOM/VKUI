import{r as o,i as U,l as X,n as Z,j as p,R as G,h as B}from"./iframe-CdM-7Hfu.js";import{u as J,e as K}from"./fx-Cz6Hdhb6.js";import{u as Q}from"./useConfigDirection-BPbTAtL3.js";import{u as $}from"./useFocusVisible-DVe26rtb.js";import{u as u4}from"./useFocusVisibleClassName-FPVKyUEe.js";import{S as N}from"./ScrollArrow-BRg4ORiB.js";const e4="_host_tew1j_1",t4="_rtl_tew1j_14",r4="_inWrapper_tew1j_33",n4="_arrow_tew1j_39",o4="_withConstArrows_tew1j_47",a4="_arrowLeft_tew1j_55",l4="_arrowRight_tew1j_59",a={host:e4,rtl:t4,in:"_in_tew1j_18",inWrapper:r4,arrow:n4,withConstArrows:o4,arrowLeft:a4,arrowRight:l4};function H(){return performance&&performance.now?performance.now():Date.now()}function z(u){return u>0?Math.ceil(u):Math.floor(u)}const M=u=>z(u.scrollLeft),s4=250;function i4({scrollElement:u,getScrollPosition:E,animationQueue:c,onScrollToEndBorder:s,onScrollEnd:D,onScrollStart:A,initialScrollWidth:C,scrollAnimationDuration:y,textDirection:l}){if(!u||!E)return;const h=(l==="ltr"?1:-1)*(C-u.offsetWidth),i=M(u),F=i*(l==="rtl"?-1:1);let r=E(F);const R=r-F;l==="rtl"&&(r=i-R),A(),i*r<0&&(r=0),Math.abs(r)>=Math.abs(h)&&(s(),r=h);const g=H();(function L(){const b=H(),S=Math.min((b-g)/y,1),m=K(S),V=i+(r-i)*m;u.scrollLeft=z(V);const W=l==="ltr"?Math.max(0,r):Math.min(0,r);if(M(u)!==W&&S!==1){requestAnimationFrame(L);return}D(),c.shift(),c.length>0&&c[0]()})()}const k=({children:u,getScrollToLeft:E,getScrollToRight:c,showArrows:s=!0,arrowSize:D="m",arrowOffsetY:A,scrollAnimationDuration:C=s4,getRef:y,scrollOnAnyWheel:l=!1,prevButtonTestId:h,nextButtonTestId:i,ContentWrapperComponent:F="div",contentWrapperRef:r,contentWrapperClassName:R,...g})=>{const[L,b]=o.useState(!1),[S,m]=o.useState(!1),{focusVisible:V,...W}=$(),P=u4({focusVisible:V}),x=Q(),T=x==="rtl",j=o.useRef(!1),t=U(y),w=o.useRef([]),f=J(),_=o.useCallback(n=>{const e=t.current;w.current.push(()=>i4({scrollElement:e,getScrollPosition:n,animationQueue:w.current,onScrollToEndBorder:()=>m(!1),onScrollEnd:()=>j.current=!1,onScrollStart:()=>j.current=!0,initialScrollWidth:e?.firstElementChild?.scrollWidth||0,scrollAnimationDuration:C,textDirection:x})),w.current.length===1&&w.current[0]()},[t,C,x,m]),O=o.useCallback(()=>{_(E??(e=>e-t.current.offsetWidth))},[E,_,t]),Y=o.useCallback(()=>{_(c??(e=>e+t.current.offsetWidth))},[c,_,t]),d=o.useCallback(()=>{if(s&&f&&t.current&&!j.current){const n=t.current,e=n.scrollLeft;b(T?e<0:e>0),m(Math.abs(M(n))+n.offsetWidth<n.scrollWidth)}},[s,f,t,T]);return o.useEffect(d,[d,u]),X(function(){const e=t.current;if(!e)return Z;const I=q=>{t.current.scrollBy({left:q.deltaX+q.deltaY,behavior:"auto"}),q.preventDefault()},v={passive:!1};return l&&e.addEventListener("wheel",I,v),e.addEventListener("scroll",d,v),()=>{l&&e.removeEventListener("wheel",I,v),e.removeEventListener("scroll",d,v)}},[l,d,t]),p.jsxs(G,{...g,baseClassName:B(a.host,"vkuiInternalHorizontalScroll",s==="always"&&a.withConstArrows,T&&a.rtl),onMouseEnter:d,children:[s&&(f||f===void 0)&&L&&p.jsx(N,{"data-testid":h,size:D,offsetY:A,direction:"left","aria-hidden":!0,tabIndex:-1,className:B(a.arrow,a.arrowLeft),onClick:O}),s&&(f||f===void 0)&&S&&p.jsx(N,{"data-testid":i,size:D,offsetY:A,direction:"right","aria-hidden":!0,tabIndex:-1,className:B(a.arrow,a.arrowRight),onClick:Y}),p.jsx("div",{className:B(a.in,P),ref:t,tabIndex:0,...W,children:p.jsx(F,{className:B(a.inWrapper,R),ref:r,children:u})})]})};try{k.displayName="HorizontalScroll",k.__docgenInfo={description:"",displayName:"HorizontalScroll",props:{getScrollToLeft:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на левую стрелку.",name:"getScrollToLeft",required:!1,type:{name:"ScrollPositionHandler"}},getScrollToRight:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на правую стрелку.",name:"getScrollToRight",required:!1,type:{name:"ScrollPositionHandler"}},arrowSize:{defaultValue:{value:"m"},description:"Размер стрелок.",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},arrowOffsetY:{defaultValue:null,description:"Смещает иконки кнопок навигации по вертикали.",name:"arrowOffsetY",required:!1,type:{name:"string | number"}},showArrows:{defaultValue:{value:"true"},description:"Показывать ли стрелки.",name:"showArrows",required:!1,type:{name:'boolean | "always"'}},scrollAnimationDuration:{defaultValue:{value:"250"},description:"Длительность анимации скролла.",name:"scrollAnimationDuration",required:!1,type:{name:"number"}},scrollOnAnyWheel:{defaultValue:{value:"false"},description:`Добавляет возможность прокручивать контент на любое колесо мыши.
По умолчанию прокручивается как любой горизонтальный контент через shift.`,name:"scrollOnAnyWheel",required:!1,type:{name:"boolean"}},prevButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении предыдущего элемента.",name:"prevButtonTestId",required:!1,type:{name:"string"}},nextButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении следующего элемента.",name:"nextButtonTestId",required:!1,type:{name:"string"}},ContentWrapperComponent:{defaultValue:{value:"div"},description:"Позволяет поменять тег используемый для обертки над контентом, прокинутым в `children`.",name:"ContentWrapperComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},contentWrapperRef:{defaultValue:null,description:"`ref` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentWrapperClassName:{defaultValue:null,description:"Специфичный `className` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperClassName",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{k as H};
