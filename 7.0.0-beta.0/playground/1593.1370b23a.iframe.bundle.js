"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[1593],{"../../node_modules/@vkontakte/icons/dist_es6/16/spinner_16.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>Icon16Spinner});var Icon16Spinner=(0,__webpack_require__("../../node_modules/@vkontakte/icons-sprite/dist/index.js").mT)("Icon16Spinner","spinner_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="spinner_16"><path fill-rule="evenodd" d="M8 3.25a4.75 4.75 0 0 0-4.149 7.065.75.75 0 1 1-1.31.732A6.25 6.25 0 1 1 8 14.25a.75.75 0 0 1 .001-1.5 4.75 4.75 0 1 0 0-9.5Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},"../../node_modules/@vkontakte/icons/dist_es6/20/cancel_20.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>Icon20Cancel});var Icon20Cancel=(0,__webpack_require__("../../node_modules/@vkontakte/icons-sprite/dist/index.js").mT)("Icon20Cancel","cancel_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="cancel_20"><path fill="currentColor" fill-rule="evenodd" d="M4.72 4.72a.75.75 0 0 1 1.06 0L10 8.94l4.22-4.22a.75.75 0 1 1 1.06 1.06L11.06 10l4.22 4.22a.75.75 0 1 1-1.06 1.06L10 11.06l-4.22 4.22a.75.75 0 0 1-1.06-1.06L8.94 10 4.72 5.78a.75.75 0 0 1 0-1.06" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},"../../node_modules/@vkontakte/icons/dist_es6/24/spinner_24.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>Icon24Spinner});var Icon24Spinner=(0,__webpack_require__("../../node_modules/@vkontakte/icons-sprite/dist/index.js").mT)("Icon24Spinner","spinner_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="spinner_24"><path fill="currentColor" fill-rule="evenodd" d="M16.394 5.077A8.2 8.2 0 0 0 4.58 15.49a.9.9 0 0 1-1.628.767A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.394-15.123" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},"../../node_modules/@vkontakte/icons/dist_es6/32/spinner_32.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>Icon32Spinner});var Icon32Spinner=(0,__webpack_require__("../../node_modules/@vkontakte/icons-sprite/dist/index.js").mT)("Icon32Spinner","spinner_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path fill="currentColor" d="M16 32a1.5 1.5 0 0 1 0-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 1 1 .986 21.54 16 16 0 0 1 0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16" /></symbol>',32,32,!1,void 0)},"../../node_modules/@vkontakte/icons/dist_es6/44/spinner_44.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>Icon44Spinner});var Icon44Spinner=(0,__webpack_require__("../../node_modules/@vkontakte/icons-sprite/dist/index.js").mT)("Icon44Spinner","spinner_44","0 0 44 44",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path fill="currentColor" d="M22 44a1.5 1.5 0 0 1 0-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 1 1-2.825 1.01A22 22 0 0 1 0 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22" /></symbol>',44,44,!1,void 0)},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/ModalDismissButton/ModalDismissButton.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'.ModalDismissButton__host--IULad{block-size:56px;box-sizing:border-box;color:var(--vkui--color_icon_contrast);inline-size:56px;inset-block-start:0;inset-inline-end:-56px;padding:18px;position:absolute}.ModalDismissButton__host--IULad:before{background:var(--vkui--color_overlay_secondary);border-radius:50%;content:"";display:block;inset:14px;position:absolute;transition:background-color .15s ease-out}.ModalDismissButton__host--IULad .vkuiIcon{transform:translateX(0)}.ModalDismissButton__hover--MqKjp:before{background:var(--vkui--color_overlay_secondary--hover)}.ModalDismissButton__active--OKMEC:before{background:var(--vkui--color_overlay_secondary--active)}',"",{version:3,sources:["webpack://./src/components/ModalDismissButton/ModalDismissButton.module.css"],names:[],mappings:"AAAA,iCAKE,eAAgB,CAEhB,qBAAsB,CACtB,sCAAuC,CAJvC,gBAAiB,CAFjB,mBAAoB,CACpB,sBAAuB,CAGvB,YAAa,CALb,iBAQF,CAEA,wCAIE,+CAAgD,CAChD,iBAAkB,CAHlB,UAAW,CADX,aAAc,CAEd,UAAW,CAGX,iBAAkB,CAClB,yCACF,CAGA,2CACE,uBACF,CAEA,yCACE,sDACF,CAEA,0CACE,uDACF",sourcesContent:[".host {\n  position: absolute;\n  inset-block-start: 0;\n  inset-inline-end: -56px;\n  inline-size: 56px;\n  block-size: 56px;\n  padding: 18px;\n  box-sizing: border-box;\n  color: var(--vkui--color_icon_contrast);\n}\n\n.host::before {\n  display: block;\n  content: '';\n  inset: 14px;\n  background: var(--vkui--color_overlay_secondary);\n  border-radius: 50%;\n  position: absolute;\n  transition: background-color 0.15s ease-out;\n}\n\n/* stylelint-disable-next-line selector-pseudo-class-disallowed-list -- fixes icon misplacement on Safari in some cases */\n.host :global(.vkuiIcon) {\n  transform: translateX(0);\n}\n\n.hover::before {\n  background: var(--vkui--color_overlay_secondary--hover);\n}\n\n.active::before {\n  background: var(--vkui--color_overlay_secondary--active);\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={host:"ModalDismissButton__host--IULad",hover:"ModalDismissButton__hover--MqKjp",active:"ModalDismissButton__active--OKMEC"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/ModalRoot/ModalRoot.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".ModalRoot__host--BmHPy,.ModalRoot__mask--FD4VL{block-size:100%;inline-size:100%}.ModalRoot__mask--FD4VL{animation:ModalRoot__animation-modalroot-fade-in--psHfX .32s ease;background:rgba(0,0,0,.4);inset-block-start:0;inset-inline-start:0;opacity:1;position:absolute;transition:opacity 167ms ease-out;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ModalRoot__touched--QnmFp .ModalRoot__mask--FD4VL{transition:none}.ModalRoot__switching--WI8Hg .ModalRoot__mask--FD4VL,.ModalRoot__viewport--vyKre{pointer-events:none}.ModalRoot__viewport--vyKre{inset:0;position:absolute}:not(.ModalRoot__desktop--kQ6kQ).ModalRoot__host--BmHPy .ModalRoot__viewport--vyKre{inset-block-start:var(--vkui_internal--safe_area_inset_top)}:not(.ModalRoot__desktop--kQ6kQ).ModalRoot__hasCustomPanelHeaderAfterSlot--KmfKj .ModalRoot__viewport--vyKre{inset-block-start:calc(var(--vkui_internal--safe_area_inset_top) + var(--vkui_internal--panel_header_height))}.ModalRoot__modal--qaa7d{block-size:100%;box-sizing:border-box;inline-size:100%;position:absolute}@keyframes ModalRoot__animation-modalroot-fade-in--psHfX{0%{opacity:0}to{opacity:1}}","",{version:3,sources:["webpack://./src/components/ModalRoot/ModalRoot.module.css"],names:[],mappings:"AAKA,gDAHE,eAAgB,CADhB,gBAeF,CAXA,wBAUE,iEAAiD,CAHjD,yBAA8B,CAD9B,mBAAoB,CADpB,oBAAqB,CAJrB,SAAU,CAGV,iBAAkB,CAKlB,iCAAkC,CADlC,wBAAiB,CAAjB,qBAAiB,CAAjB,gBAGF,CAEA,mDACE,eACF,CAOA,iFAHE,mBAOF,CAJA,4BAEE,OAAQ,CADR,iBAGF,CAEA,oFACE,2DACF,CAEA,6GACE,6GAGF,CAEA,yBAGE,eAAgB,CAChB,qBAAsB,CAFtB,gBAAiB,CADjB,iBAIF,CAEA,yDACE,GACE,SACF,CAEA,GACE,SACF,CACF",sourcesContent:[".host {\n  inline-size: 100%;\n  block-size: 100%;\n}\n\n.mask {\n  opacity: 1;\n  inline-size: 100%;\n  block-size: 100%;\n  position: absolute;\n  inset-inline-start: 0;\n  inset-block-start: 0;\n  background: rgba(0, 0, 0, 0.4);\n  user-select: none;\n  transition: opacity 167ms ease-out;\n  animation: animation-modalroot-fade-in 0.32s ease;\n}\n\n.touched .mask {\n  transition: none;\n}\n\n.switching .mask {\n  /** Во время автоматической анимации смены модалок с фоном взаимодействовать нельзя */\n  pointer-events: none;\n}\n\n.viewport {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n}\n\n:not(.desktop).host .viewport {\n  inset-block-start: var(--vkui_internal--safe_area_inset_top);\n}\n\n:not(.desktop).hasCustomPanelHeaderAfterSlot .viewport {\n  inset-block-start: calc(\n    var(--vkui_internal--safe_area_inset_top) + var(--vkui_internal--panel_header_height)\n  );\n}\n\n.modal {\n  position: absolute;\n  inline-size: 100%;\n  block-size: 100%;\n  box-sizing: border-box;\n}\n\n@keyframes animation-modalroot-fade-in {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={host:"ModalRoot__host--BmHPy",mask:"ModalRoot__mask--FD4VL","animation-modalroot-fade-in":"ModalRoot__animation-modalroot-fade-in--psHfX",touched:"ModalRoot__touched--QnmFp",switching:"ModalRoot__switching--WI8Hg",viewport:"ModalRoot__viewport--vyKre",desktop:"ModalRoot__desktop--kQ6kQ",hasCustomPanelHeaderAfterSlot:"ModalRoot__hasCustomPanelHeaderAfterSlot--KmfKj",modal:"ModalRoot__modal--qaa7d"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/Placeholder/Placeholder.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".Placeholder__host--aUv_F{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;justify-content:center;text-align:center}.Placeholder__withPadding--mKEFJ{padding-block:48px;padding-inline:32px}.Placeholder__stretched--zhq6y{block-size:100%;flex:1 0}.Placeholder__icon--LDmLx{-webkit-margin-after:12px;color:var(--vkui--color_icon_secondary);display:inline-block;margin-block-end:12px;vertical-align:top}.Placeholder__header--Wkobi{color:var(--vkui--color_text_primary)}.Placeholder__text--VHebq{color:var(--vkui--color_text_secondary)}.Placeholder__header--Wkobi+.Placeholder__text--VHebq{-webkit-margin-before:8px;margin-block-start:8px}.Placeholder__action--x2nDa:not(:first-child){-webkit-margin-before:16px;margin-block-start:16px}","",{version:3,sources:["webpack://./src/components/Placeholder/Placeholder.module.css"],names:[],mappings:"AAAA,0BAEE,kBAAmB,CAInB,qBAAsB,CALtB,YAAa,CAGb,qBAAsB,CADtB,sBAAuB,CAEvB,iBAEF,CAEA,iCACE,kBAAmB,CACnB,mBACF,CAEA,+BAEE,eAAgB,CADhB,QAEF,CAEA,0BACE,yBAAsB,CAGtB,uCAAwC,CAFxC,oBAAqB,CADrB,qBAAsB,CAEtB,kBAEF,CAEA,4BACE,qCACF,CAEA,0BACE,uCACF,CAEA,sDACE,yBAAuB,CAAvB,sBACF,CAEA,8CACE,0BAAwB,CAAxB,uBACF",sourcesContent:[".host {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  text-align: center;\n  box-sizing: border-box;\n}\n\n.withPadding {\n  padding-block: 48px;\n  padding-inline: 32px;\n}\n\n.stretched {\n  flex: 1 0;\n  block-size: 100%;\n}\n\n.icon {\n  margin-block-end: 12px;\n  display: inline-block;\n  vertical-align: top;\n  color: var(--vkui--color_icon_secondary);\n}\n\n.header {\n  color: var(--vkui--color_text_primary);\n}\n\n.text {\n  color: var(--vkui--color_text_secondary);\n}\n\n.header + .text {\n  margin-block-start: 8px;\n}\n\n.action:not(:first-child) {\n  margin-block-start: 16px;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={host:"Placeholder__host--aUv_F",withPadding:"Placeholder__withPadding--mKEFJ",stretched:"Placeholder__stretched--zhq6y",icon:"Placeholder__icon--LDmLx",header:"Placeholder__header--Wkobi",text:"Placeholder__text--VHebq",action:"Placeholder__action--x2nDa"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/FocusTrap/FocusTrap.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>FocusTrap});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/react/index.js");var useExternRef=__webpack_require__("./src/hooks/useExternRef.ts"),useMutationObserver=__webpack_require__("./src/hooks/useMutationObserver.ts"),accessibility=__webpack_require__("./src/lib/accessibility.ts"),dom=__webpack_require__("./src/lib/dom.tsx"),floating_ui_utils_dom_esm=__webpack_require__("../../node_modules/@vkontakte/vkui-floating-ui/utils/dom/floating-ui.utils.dom.esm.js"),useIsomorphicLayoutEffect=__webpack_require__("./src/lib/useIsomorphicLayoutEffect.ts");const FOCUSABLE_ELEMENTS=accessibility.C5.join(),FocusTrap=({Component="div",onClose,autoFocus=!0,restoreFocus=!0,disabled=!1,mount=!0,timeout=0,getRootRef,children,...restProps})=>{const ref=(0,useExternRef.Z)(getRootRef),{document}=(0,dom.a4)(),focusableNodesRef=(0,react.useRef)([]),[restoreFocusTo,setRestoreFocusTo]=(0,react.useState)(null),recalculateFocusableNodesRef=parentNode=>{const newFocusableElements=parentNode.querySelectorAll(FOCUSABLE_ELEMENTS),nodes=[];newFocusableElements.forEach((focusableEl=>{const{display,visibility}=getComputedStyle(focusableEl);"none"!==display&&"hidden"!==visibility&&nodes.push(focusableEl)})),0===nodes.length&&nodes.push(parentNode),focusableNodesRef.current=nodes},onMutateParentHandler=parentNode=>{const oldFocusableNodes=[...focusableNodesRef.current];if(recalculateFocusableNodesRef(parentNode),autoFocus&&!function arraysEquals(arrA,arrB){return arrA.length===arrB.length&&arrA.every(((item,index)=>item===arrB[index]))}(oldFocusableNodes,focusableNodesRef.current)&&document){const activeElement=document.activeElement;(nodeIndex=>{const element=focusableNodesRef.current[nodeIndex];element&&element.focus({preventScroll:!0})})(Math.max(document.activeElement?focusableNodesRef.current.indexOf(activeElement):-1,0))}};(0,useMutationObserver.P)(ref,(()=>ref.current&&onMutateParentHandler(ref.current))),(0,useIsomorphicLayoutEffect.E)((()=>{ref.current&&recalculateFocusableNodesRef(ref.current)}),[ref]),(0,useIsomorphicLayoutEffect.E)((function tryToAutoFocusToFirstNode(){if(!ref.current||!autoFocus||disabled)return;const timeoutId=setTimeout((()=>{if(!ref.current||!focusableNodesRef.current.length)return;const activeElement=(0,dom.HC)(ref.current);(0,dom.gR)(ref.current,activeElement)||("root"===autoFocus?ref.current?.focus():focusableNodesRef.current[0].focus())}),timeout);return()=>{clearTimeout(timeoutId)}}),[autoFocus,timeout,disabled]);const restoreFocusImpl=(0,react.useCallback)((()=>{const shouldRestoreFocus="function"==typeof restoreFocus?restoreFocus():restoreFocus;restoreFocusTo&&(0,floating_ui_utils_dom_esm.sb)(restoreFocusTo)&&shouldRestoreFocus&&setTimeout((()=>{restoreFocusTo&&(restoreFocusTo.focus(),setRestoreFocusTo(null))}),timeout)}),[restoreFocus,restoreFocusTo,timeout]);return(0,useIsomorphicLayoutEffect.E)((function calculateRestoreFocusTo(){ref.current&&restoreFocus&&mount?setRestoreFocusTo((0,dom.HC)(ref.current)):setRestoreFocusTo(null)}),[ref,mount,restoreFocus]),(0,useIsomorphicLayoutEffect.E)((function tryToRestoreFocusOnUnmount(){return()=>restoreFocusImpl()}),[restoreFocusImpl]),(0,useIsomorphicLayoutEffect.E)((function tryToRestoreFocusWhenFakeUnmount(){mount||restoreFocusImpl()}),[mount,restoreFocusImpl]),(0,useIsomorphicLayoutEffect.E)((()=>{if(!ref.current)return;const onDocumentKeydown=event=>{if(disabled)return;switch((0,accessibility.Mv)(event)){case accessibility.D$.TAB:{if(!focusableNodesRef.current.length)return!1;const lastIdx=focusableNodesRef.current.length-1,targetIdx=focusableNodesRef.current.findIndex((node=>node===event.target)),shouldFocusFirstNode=-1===targetIdx||targetIdx===lastIdx&&!event.shiftKey;if(shouldFocusFirstNode||0===targetIdx&&event.shiftKey){event.preventDefault();const node=focusableNodesRef.current[shouldFocusFirstNode?0:lastIdx];return node!==(0,dom.HC)(node)&&node.focus(),!1}break}case accessibility.D$.ESCAPE:onClose&&(event.preventDefault(),onClose())}return!0},doc=(0,floating_ui_utils_dom_esm.zk)(ref.current).document;return doc.addEventListener("keydown",onDocumentKeydown,{capture:!0}),()=>{doc.removeEventListener("keydown",onDocumentKeydown,!0)}}),[onClose,ref,disabled]),(0,jsx_runtime.jsx)(Component,{tabIndex:-1,ref,...restProps,children})};try{FocusTrap.displayName="FocusTrap",FocusTrap.__docgenInfo={description:"",displayName:"FocusTrap",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:'boolean | "root"'}},restoreFocus:{defaultValue:{value:"true"},description:"",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean)"}},mount:{defaultValue:{value:"true"},description:"",name:"mount",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"0"},description:"",name:"timeout",required:!1,type:{name:"number"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},disabled:{defaultValue:{value:"false"},description:"Форсированное отключение захвата фокуса",name:"disabled",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<T>"}},Component:{defaultValue:{value:"div"},description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FocusTrap/FocusTrap.tsx#FocusTrap"]={docgenInfo:FocusTrap.__docgenInfo,name:"FocusTrap",path:"src/components/FocusTrap/FocusTrap.tsx#FocusTrap"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ModalDismissButton/ModalDismissButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>ModalDismissButton});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),cancel_20=(__webpack_require__("../../node_modules/react/index.js"),__webpack_require__("../../node_modules/@vkontakte/icons/dist_es6/20/cancel_20.js")),es6=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),Tappable=__webpack_require__("./src/components/Tappable/Tappable.tsx"),VisuallyHidden=__webpack_require__("./src/components/VisuallyHidden/VisuallyHidden.tsx"),injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),singletonStyleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),singletonStyleDomAPI_default=__webpack_require__.n(singletonStyleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithAttributesAndNonce=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),setAttributesWithAttributesAndNonce_default=__webpack_require__.n(setAttributesWithAttributesAndNonce),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),ModalDismissButton_module=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/ModalDismissButton/ModalDismissButton.module.css"),options={attributes:{class:"vkui-style"}};options.setAttributes=setAttributesWithAttributesAndNonce_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=singletonStyleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ModalDismissButton_module.A,options);const ModalDismissButton_ModalDismissButton_module=ModalDismissButton_module.A&&ModalDismissButton_module.A.locals?ModalDismissButton_module.A.locals:void 0,ModalDismissButton=({children="Закрыть",className,...restProps})=>(0,jsx_runtime.jsxs)(Tappable.S,{className:(0,es6.xW)(ModalDismissButton_ModalDismissButton_module.host,className),...restProps,activeMode:ModalDismissButton_ModalDismissButton_module.active,hoverMode:ModalDismissButton_ModalDismissButton_module.hover,children:[children&&(0,jsx_runtime.jsx)(VisuallyHidden.s,{children}),(0,jsx_runtime.jsx)(cancel_20.Y,{})]});try{ModalDismissButton.displayName="ModalDismissButton",ModalDismissButton.__docgenInfo={description:"",displayName:"ModalDismissButton",props:{hasHover:{defaultValue:null,description:"Указывает, должен ли компонент реагировать на hover-состояние",name:"hasHover",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLElement>"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},baseClassName:{defaultValue:null,description:"",name:"baseClassName",required:!1,type:{name:"string | false"}},borderRadiusMode:{defaultValue:null,description:"Задает border-radius элементу\nВ режиме `auto` на маленьких экранах `border-radius: 0`, иначе определяется токеном `--vkui--size_border_radius--regular`",name:"borderRadiusMode",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"auto"'}]}},focusVisibleMode:{defaultValue:null,description:"Стиль аутлайна focus visible. Если передать произвольную строку, она добавится как css-класс при :focus-visible",name:"focusVisibleMode",required:!1,type:{name:"FocusVisibleMode"}},hovered:{defaultValue:null,description:"Позволяет управлять hovered-состоянием извне",name:"hovered",required:!1,type:{name:"boolean"}},activated:{defaultValue:null,description:"Позволяет управлять activated-состоянием извне",name:"activated",required:!1,type:{name:"boolean"}},hasActive:{defaultValue:null,description:"Указывает, должен ли компонент реагировать на active-состояние",name:"hasActive",required:!1,type:{name:"boolean"}},hasHoverWithChildren:{defaultValue:null,description:"Позволяет родительскому компоненту\nиметь hovered-cостояние при наведении\nна любой дочерний элемент.\nПо умолчанию состояние hovered у родителя сбрасывается.\n\nПрисваивается родителькому компоненту.\n@example <Tappable hasHoverWithChildren>\n  <IconButton />\n  <IconButton />\n  <IconButton />\n</Tappable>",name:"hasHoverWithChildren",required:!1,type:{name:"boolean"}},unlockParentHover:{defaultValue:null,description:"Позволяет родительскому компоненту показывать hovered-состояние при наведении\nна текущий дочерний компонент.\n\nПрисваивается дочернему компоненту.\n@example <Tappable>\n  <IconButton unlockParentHover />\n  <IconButton unlockParentHover />\n  <IconButton />\n</Tappable>",name:"unlockParentHover",required:!1,type:{name:"boolean"}},activeEffectDelay:{defaultValue:null,description:"Длительность показа `activated`-состояния",name:"activeEffectDelay",required:!1,type:{name:"number"}},activeClassName:{defaultValue:null,description:"Стиль подсветки active-состояния",name:"activeClassName",required:!1,type:{name:"string"}},hoverClassName:{defaultValue:null,description:"Стиль подсветки hover-состояния",name:"hoverClassName",required:!1,type:{name:"string"}},activeMode:{defaultValue:null,description:"Стиль подсветки active-состояния. Если передать произвольную строку, она добавится как css-класс во время active",name:"activeMode",required:!1,type:{name:"StateModeLiteral"}},hoverMode:{defaultValue:null,description:"Стиль подсветки hover-состояния. Если передать произвольную строку, она добавится как css-класс во время hover",name:"hoverMode",required:!1,type:{name:"StateModeLiteral"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalDismissButton/ModalDismissButton.tsx#ModalDismissButton"]={docgenInfo:ModalDismissButton.__docgenInfo,name:"ModalDismissButton",path:"src/components/ModalDismissButton/ModalDismissButton.tsx#ModalDismissButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ModalRoot/ModalRootAdaptive.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>ModalRoot});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/react/index.js"),useAdaptivityWithJSMediaQueries=__webpack_require__("./src/hooks/useAdaptivityWithJSMediaQueries.ts"),ScrollContext=__webpack_require__("./src/components/AppRoot/ScrollContext.tsx"),es6=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),math=__webpack_require__("./src/helpers/math.ts");var ConfigProviderContext=__webpack_require__("./src/components/ConfigProvider/ConfigProviderContext.tsx");function withPlatform(Component){return function WithPlatform(props){const{platform}=(0,ConfigProviderContext.h)();return(0,jsx_runtime.jsx)(Component,{...props,platform})}}try{withPlatform.displayName="withPlatform",withPlatform.__docgenInfo={description:"",displayName:"withPlatform",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hoc/withPlatform.tsx#withPlatform"]={docgenInfo:withPlatform.__docgenInfo,name:"withPlatform",path:"src/hoc/withPlatform.tsx#withPlatform"})}catch(__react_docgen_typescript_loader_error){}var dom=__webpack_require__("./src/lib/dom.tsx"),getNavId=__webpack_require__("./src/lib/getNavId.ts"),functions=__webpack_require__("./src/lib/touch/functions.ts"),warnOnce=__webpack_require__("./src/lib/warnOnce.ts"),FocusTrap=__webpack_require__("./src/components/FocusTrap/FocusTrap.tsx"),Touch=__webpack_require__("./src/components/Touch/Touch.tsx"),TouchContext=__webpack_require__("./src/components/Touch/TouchContext.ts"),ModalRootContext=__webpack_require__("./src/components/ModalRoot/ModalRootContext.tsx");var useIsomorphicLayoutEffect=__webpack_require__("./src/lib/useIsomorphicLayoutEffect.ts");const warn=(0,warnOnce.m)("ModalRoot");function modalTransitionReducer(state,action){if("setActive"===action.type&&action.id!==state.activeModal){const nextModal=action.id,prevModal=state.exitingModal||state.activeModal;let history=state.history?[...state.history]:[];const isBack=Boolean(nextModal&&history.includes(nextModal));return null===nextModal?history=[]:isBack?history=history.splice(0,history.indexOf(nextModal)+1):history.push(nextModal),{activeModal:nextModal,enteringModal:null,exitingModal:prevModal,history,isBack}}return"entered"===action.type&&action.id===state.enteringModal?{...state,enteringModal:null}:"exited"===action.type&&action.id===state.exitingModal?{...state,exitingModal:null}:"inited"===action.type&&action.id===state.activeModal?{...state,enteringModal:action.id}:state}function useModalManager(activeModal,children,onOpen=es6.lQ,onOpened=es6.lQ,onClose=es6.lQ,onClosed=es6.lQ,initModal=es6.lQ){const modalsState=react.useRef({}).current;(function getModals(children){return react.Children.toArray(children)})(children).forEach((Modal=>{const modalProps=Modal.props,id=(0,getNavId.p)(modalProps,warn),state=void 0!==id&&modalsState[id]||{id:id??null};state.onOpen=Modal.props.onOpen,state.onOpened=Modal.props.onOpened,state.onClose=Modal.props.onClose,state.onClosed=Modal.props.onClosed,state.preventClose=Modal.props.preventClose,"number"==typeof modalProps.settlingHeight&&(state.settlingHeight=modalProps.settlingHeight),null!==state.id&&(modalsState[state.id]=state)}));const safeActiveModal=activeModal&&!modalsState[activeModal]?null:activeModal,[transitionState,dispatchTransition]=react.useReducer(modalTransitionReducer,{activeModal:safeActiveModal,enteringModal:null,exitingModal:null,history:safeActiveModal?[safeActiveModal]:[],isBack:!1});(0,useIsomorphicLayoutEffect.E)((()=>{dispatchTransition({type:"setActive",id:safeActiveModal??null})}),[activeModal]),(0,useIsomorphicLayoutEffect.E)((()=>{transitionState.activeModal&&(initModal(modalsState[transitionState.activeModal]),dispatchTransition({type:"inited",id:transitionState.activeModal}))}),[transitionState.activeModal]);const isCard=id=>null!=id&&"card"===modalsState[id]?.type,onEntered=react.useCallback((id=>{if(id){const modalState=modalsState[id];(0,es6.Tn)(modalState.onOpened)?modalState.onOpened():(0,es6.Tn)(onOpened)&&onOpened(id)}dispatchTransition({type:"entered",id})}),[modalsState,onOpened]),onExited=react.useCallback((id=>{if(id){const modalState=modalsState[id];(0,es6.Tn)(modalState.onClosed)?modalState.onClosed():(0,es6.Tn)(onClosed)&&onClosed(id)}dispatchTransition({type:"exited",id})}),[modalsState,onClosed]),delayEnter=Boolean(transitionState.exitingModal&&(isCard(activeModal)||isCard(transitionState.exitingModal))),getModalState=react.useCallback((id=>id?modalsState[id]:void 0),[modalsState]);return{onEnter:function onEnter(){const modalState=transitionState.activeModal&&modalsState[transitionState.activeModal];modalState&&((0,es6.Tn)(modalState.onOpen)?modalState.onOpen():(0,es6.Tn)(onOpen)&&modalState.id&&onOpen(modalState.id))},onEntered,onExit:function onExit(){const modalState=transitionState.activeModal&&modalsState[transitionState.activeModal];modalState&&!modalState.preventClose&&((0,es6.Tn)(modalState.onClose)?modalState.onClose():(0,es6.Tn)(onClose)&&modalState.id&&onClose(modalState.id))},onExited,...transitionState,delayEnter,getModalState}}function withModalManager(initModal=es6.lQ){return function(Wrapped){return function WithModalManager(props){const transitionManager=useModalManager(props.activeModal,props.children,props.onOpen,props.onOpened,props.onClose,props.onClosed,initModal);return(0,jsx_runtime.jsx)(Wrapped,{...props,...transitionManager})}}}try{useModalManager.displayName="useModalManager",useModalManager.__docgenInfo={description:"Реализует переход модалок. При смене activeModal m1 -> m2:\n1. activeModal: m1, exitingModal: null, enteringModal: null, триггер перехода\n2. activeModal: m2, exitingModal: m1, enteringModal: null, рендерим m2 чтобы прошел init, начинаем анимацию выхода\nодновременный переход между ModalPage:\n  3a. activeModal: m2, exitingModal: m1, enteringModal: m2\n  4a. exitingModal и enteringModal переходят в null в порядке завершения анимации\nИЛИ дожидаемся скрытия ModalCard\n  3b. activeModal: m2, exitingModal: null, enteringModal: m2\n  4b. enteringModal переходит в null после завершения анимации\n5. activeModal: m2, exitingModal: null, enteringModal: null, переход закончен",displayName:"useModalManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalRoot/useModalManager.tsx#useModalManager"]={docgenInfo:useModalManager.__docgenInfo,name:"useModalManager",path:"src/components/ModalRoot/useModalManager.tsx#useModalManager"})}catch(__react_docgen_typescript_loader_error){}try{withModalManager.displayName="withModalManager",withModalManager.__docgenInfo={description:"",displayName:"withModalManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalRoot/useModalManager.tsx#withModalManager"]={docgenInfo:withModalManager.__docgenInfo,name:"withModalManager",path:"src/components/ModalRoot/useModalManager.tsx#withModalManager"})}catch(__react_docgen_typescript_loader_error){}var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),singletonStyleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),singletonStyleDomAPI_default=__webpack_require__.n(singletonStyleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithAttributesAndNonce=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),setAttributesWithAttributesAndNonce_default=__webpack_require__.n(setAttributesWithAttributesAndNonce),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),ModalRoot_module=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/ModalRoot/ModalRoot.module.css"),options={attributes:{class:"vkui-style"}};options.setAttributes=setAttributesWithAttributesAndNonce_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=singletonStyleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ModalRoot_module.A,options);const ModalRoot_ModalRoot_module=ModalRoot_module.A&&ModalRoot_module.A.locals?ModalRoot_module.A.locals:void 0,ModalRoot_warn=(0,warnOnce.m)("ModalRoot");function numberInRange(number,range){return!!range&&(number>=range[0]&&number<=range[1])}function rangeTranslate(number){return(0,math.qE)(number,0,98)}class ModalRootTouchComponent extends react.Component{constructor(props){super(props),this.state={touchDown:!1,dragging:!1,modalOpenedLog:[]},this.maskElementRef=react.createRef(),this.modalRootContext={updateModalHeight:this.updateModalHeight,registerModal:({id,...data})=>Object.assign(this.props.getModalState(id)??{},data),onClose:()=>this.props.onExit(),isInsideModal:!0},this.frameIds={}}maskElementRef;viewportRef=react.createRef();maskAnimationFrame=void 0;modalRootContext;frameIds;restoreFocusTo=void 0;get timeout(){return"ios"===this.props.platform?400:320}get document(){return this.props.document}get window(){return this.props.window}getModals(){return react.Children.toArray(this.props.children)}componentDidMount(){this.window?.addEventListener("resize",this.updateModalHeight,!1)}componentWillUnmount(){this.toggleDocumentScrolling(!0),this.window.removeEventListener("resize",this.updateModalHeight,!1)}componentDidUpdate(prevProps){if(this.props.exitingModal&&this.props.exitingModal!==prevProps.exitingModal&&this.closeModal(this.props.exitingModal),this.props.enteringModal&&this.props.enteringModal!==prevProps.enteringModal){const enteringState=this.props.getModalState(this.props.enteringModal);this.props.onEnter(),this.waitTransitionFinish(enteringState,(()=>{enteringState&&(enteringState.innerElement&&(enteringState.innerElement.style.transitionDelay=""),this.onEntered(enteringState))})),enteringState?.innerElement&&(enteringState.innerElement.style.transitionDelay=this.props.delayEnter?`${this.timeout}ms`:"",this.animateTranslate(enteringState,enteringState.translateY),this.setMaskOpacity(enteringState,1))}this.props.activeModal&&!prevProps.activeModal&&(this.restoreFocusTo=this.document.activeElement),this.props.activeModal||this.props.exitingModal||!this.restoreFocusTo||(this.restoreFocusTo.focus(),this.restoreFocusTo=null),this.toggleDocumentScrolling(!this.props.activeModal&&!this.props.exitingModal)}toggleDocumentScrolling(enabled){enabled?this.document.documentElement.classList.remove("vkui--disable-overscroll-behavior"):this.document.documentElement.classList.add("vkui--disable-overscroll-behavior")}checkPageContentHeight(){const modalState=this.props.getModalState(this.props.activeModal);if("page"===modalState?.type&&modalState?.modalElement){const prevModalState={...modalState};initPageModal(modalState);const currentModalState={...modalState};let needAnimate=!1;prevModalState.expandable===currentModalState.expandable?prevModalState.translateYFrom!==currentModalState.translateYFrom&&(needAnimate=!0):needAnimate=!0,needAnimate&&this.animateTranslate(modalState,modalState.translateY)}}updateModalHeight=()=>{const modalState=this.props.getModalState(this.props.activeModal);modalState&&"page"===modalState.type&&(this.props.enteringModal?this.waitTransitionFinish(modalState,(()=>{requestAnimationFrame((()=>this.checkPageContentHeight()))})):requestAnimationFrame((()=>this.checkPageContentHeight())))};onEntered({id,modalElement}){this.props.noFocusToDialog||!modalElement||modalElement.contains(this.document.activeElement)||modalElement.focus(),this.props.onEntered(id)}closeModal(id){this.setState({touchDown:!1});const prevModalState=this.props.getModalState(id);if(!prevModalState)return void(id&&ModalRoot_warn(`closeActiveModal: модальное окно (страница) ${id} не существует`,"error"));this.state.modalOpenedLog.length||this.setState((prevState=>({modalOpenedLog:[...prevState.modalOpenedLog,id]})));const nextModalState=this.props.getModalState(this.props.activeModal),nextIsPage=!!nextModalState&&"page"===nextModalState.type,prevIsPage=!!prevModalState&&"page"===prevModalState.type;this.waitTransitionFinish(prevModalState,(()=>this.props.onExited(id)));const exitTranslate=prevIsPage&&nextIsPage&&(prevModalState.translateY??0)<=(nextModalState?.translateYFrom??0)&&!this.props.isBack?(nextModalState?.translateYFrom??0)+10:100;this.animateTranslate(prevModalState,exitTranslate),nextModalState?nextModalState.id&&!this.state.modalOpenedLog.includes(nextModalState.id)&&(nextModalState.translateY=void 0,this.setState((prevState=>({modalOpenedLog:[...prevState.modalOpenedLog,nextModalState.id]})))):(this.setMaskOpacity(prevModalState,0),this.setState({modalOpenedLog:[]}),prevModalState.translateY=void 0,prevModalState.expandable=void 0)}onTouchMove=e=>{if(this.props.exitingModal)return;const modalState=this.props.getModalState(this.props.activeModal);return modalState?"page"===modalState.type?this.onPageTouchMove(e,modalState):"card"===modalState.type?this.onCardTouchMove(e,modalState):void 0:void 0};onPageTouchMove(event,modalState){const{shiftY,originalEvent}=event,target=originalEvent.target;if(!event.isY)return void(this.viewportRef.current?.contains(target)&&originalEvent.preventDefault());if(!modalState.innerElement?.contains(target))return originalEvent.preventDefault();originalEvent.stopPropagation();const{expandable,contentScrolled,collapsed,expanded}=modalState;if(this.state.touchDown||(modalState.touchStartContentScrollTop=modalState.contentElement?.scrollTop??0,this.setState({touchDown:!0})),!contentScrolled&&(null===modalState.touchMovePositive&&(modalState.touchMovePositive=shiftY>0),!modalState.expandable||collapsed||expanded&&modalState.touchMovePositive&&0===modalState.touchStartContentScrollTop||modalState.headerElement?.contains(target))){if(originalEvent.preventDefault(),!expandable&&shiftY<0||!this.window)return;!this.state.dragging&&this.setState({dragging:!0});const shiftYPercent=shiftY/this.window.innerHeight*100,shiftYCurrent=(0,functions.VJ)(shiftYPercent,72,.8,"ios"!==this.props.platform);modalState.touchShiftYPercent=shiftYPercent,modalState.translateYCurrent=rangeTranslate((modalState.translateY??0)+shiftYCurrent),this.animateTranslate(modalState,modalState.translateYCurrent),this.setMaskOpacity(modalState)}}onCardTouchMove(event,modalState){const{originalEvent,shiftY}=event,target=originalEvent.target;if(modalState.innerElement?.contains(target)){this.state.touchDown||this.setState({touchDown:!0,dragging:!0});const shiftYPercent=shiftY/modalState.innerElement.offsetHeight*100,shiftYCurrent=(0,functions.VJ)(shiftYPercent,72,1.2,"ios"!==this.props.platform);modalState.touchShiftYPercent=shiftYPercent,modalState.translateYCurrent=Math.max(0,(modalState.translateY??0)+shiftYCurrent),this.animateTranslate(modalState,modalState.translateYCurrent),this.setMaskOpacity(modalState)}}onTouchEnd=e=>{const modalState=this.props.getModalState(this.props.activeModal);return"page"===modalState?.type?this.onPageTouchEnd(e,modalState):"card"===modalState?.type?this.onCardTouchEnd(e,modalState):void 0};onPageTouchEnd(event,modalState){const{startY,shiftY}=event;let setStateCallback;if(modalState.contentScrolled=!1,modalState.touchMovePositive=null,this.state.dragging&&this.window){const shiftYEndPercent=(startY+shiftY)/this.window.innerHeight*100;let translateY=modalState.translateYCurrent??0;translateY=rangeTranslate(translateY+translateY/event.duration*240*.6*((modalState.touchShiftYPercent??0)<0?-1:1)),translateY=100!==modalState.settlingHeight?numberInRange(translateY,modalState.expandedRange)?modalState.expandedRange?.[0]??0:numberInRange(translateY,modalState.collapsedRange)?modalState.translateYFrom??0:numberInRange(translateY,modalState.hiddenRange)?modalState.preventClose?modalState.translateYFrom??0:100:modalState.translateYFrom??0:numberInRange(translateY,[0,25])?0:modalState.preventClose?modalState.translateYFrom??0:100,100!==translateY&&shiftYEndPercent>=75&&!modalState.preventClose&&(translateY=100),modalState.translateY=translateY,modalState.translateYCurrent=translateY,modalState.collapsed=numberInRange(translateY,modalState.collapsedRange),modalState.expanded=0===translateY,modalState.hidden=100===translateY,modalState.hidden&&this.props.onExit(),setStateCallback=()=>{modalState.hidden||this.animateTranslate(modalState,modalState.translateY),this.setMaskOpacity(modalState)}}this.setState({touchDown:!1,dragging:!1},setStateCallback)}onCardTouchEnd({duration},modalState){let setStateCallback;if(this.state.dragging){let translateY=modalState.translateYCurrent??0;const expectTranslateY=translateY/duration*240*.6*((modalState.touchShiftYPercent??0)<0?-1:1);translateY=Math.max(0,translateY+expectTranslateY),translateY=translateY>=30?100:0,modalState.translateY=translateY,modalState.hidden=100===translateY,modalState.hidden&&this.props.onExit(),setStateCallback=()=>{modalState.hidden||this.animateTranslate(modalState,modalState.translateY),this.setMaskOpacity(modalState)}}this.setState({touchDown:!1,dragging:!1},setStateCallback)}onScroll=e=>{const activeModal=this.props.activeModal,target=e.target;if(!activeModal)return;const modalState=this.props.getModalState(activeModal);"page"===modalState?.type&&modalState?.contentElement?.contains(target)&&(modalState.contentScrolled=!0,modalState.contentScrollStopTimeout&&clearTimeout(modalState.contentScrollStopTimeout),modalState.contentScrollStopTimeout=setTimeout((()=>{modalState.contentScrolled&&(modalState.contentScrolled=!1)}),250))};waitTransitionFinish(modalState,eventHandler){const el=modalState?modalState.innerElement:null;el?el.addEventListener("transitionend",eventHandler,{once:!0}):setTimeout(eventHandler,this.timeout)}animateTranslate(modalState,percent){const frameId=`animateTranslateFrame${modalState.id}`;cancelAnimationFrame(this.frameIds[frameId]),this.frameIds[frameId]=requestAnimationFrame((()=>{modalState.innerElement&&(modalState.innerElement.style.transform=`translate3d(0, ${percent}%, 0)`)}))}setMaskOpacity(modalState,forceOpacity=null){null===forceOpacity&&this.props.history?.[0]!==modalState.id||(this.maskAnimationFrame&&cancelAnimationFrame(this.maskAnimationFrame),this.maskAnimationFrame=requestAnimationFrame((()=>{if(this.maskElementRef.current){const{translateY=0,translateYCurrent=0}=modalState,opacity=null===forceOpacity?1-(translateYCurrent-translateY)/(100-translateY)||0:forceOpacity;this.maskElementRef.current.style.opacity=(0,math.qE)(opacity,0,100).toString(),this.maskElementRef.current.style.transitionDelay=opacity&&this.props.delayEnter?`${this.timeout}ms`:""}})))}render(){const{activeModal,exitingModal,enteringModal,modalOverlayTestId}=this.props,{touchDown,dragging}=this.state;return activeModal||exitingModal?(0,jsx_runtime.jsx)(TouchContext.A.Provider,{value:!0,children:(0,jsx_runtime.jsx)(ModalRootContext.f.Provider,{value:this.modalRootContext,children:(0,jsx_runtime.jsxs)(Touch.U,{className:(0,es6.xW)(ModalRoot_ModalRoot_module.host,this.props.configProvider?.hasCustomPanelHeaderAfter&&ModalRoot_ModalRoot_module.hasCustomPanelHeaderAfterSlot,touchDown&&(0,es6.xW)(ModalRoot_ModalRoot_module.touched,"vkuiInternalModalRoot--touched"),!(!enteringModal&&!exitingModal)&&(0,es6.xW)(ModalRoot_ModalRoot_module.switching,"vkuiInternalModalRoot--switching")),onMove:this.onTouchMove,onEnd:this.onTouchEnd,onScroll:this.onScroll,children:[(0,jsx_runtime.jsx)("div",{"data-testid":modalOverlayTestId,className:ModalRoot_ModalRoot_module.mask,onClick:this.props.onExit,ref:this.maskElementRef}),(0,jsx_runtime.jsx)("div",{className:ModalRoot_ModalRoot_module.viewport,ref:this.viewportRef,children:this.getModals().map((Modal=>{const modalId=(0,getNavId.p)(Modal.props,ModalRoot_warn),_modalState=this.props.getModalState(modalId);if(modalId!==activeModal&&modalId!==exitingModal||!_modalState)return null;const modalState={..._modalState},isPage="page"===modalState.type,key=`modal-${modalId}`;return(0,jsx_runtime.jsx)(FocusTrap.s,{onClose:this.props.onExit,timeout:this.timeout,className:(0,es6.xW)(ModalRoot_ModalRoot_module.modal,dragging&&"vkuiInternalModalRoot__modal--dragging",isPage&&modalState.expandable&&"vkuiInternalModalRoot__modal--expandable",isPage&&modalState.collapsed&&"vkuiInternalModalRoot__modal--collapsed"),autoFocus:!1,restoreFocus:!1,children:Modal},key)}))})]})})}):null}}const ModalRootTouch=function withContext(Component,Ctx,prop){return function WithContext(props){const context=react.useContext(Ctx);return(0,jsx_runtime.jsx)(Component,{...props,[prop]:context})}}(withPlatform((0,dom.Hk)(withModalManager((function initModal(modalState){switch(modalState.type){case"page":return modalState.settlingHeight=modalState.settlingHeight||75,initPageModal(modalState);case"card":return function initCardModal(modalState){modalState.translateY=0}(modalState)}}))(ModalRootTouchComponent))),ConfigProviderContext.T,"configProvider");function initPageModal(modalState){const{contentElement,bottomInset}=modalState,contentHeight=function calculateModalContentHeight(element,isExpandable){if(!isExpandable)return element.scrollHeight;const currentHeightStyle=element.style.height;element.style.height="auto";const elementHeight=element.scrollHeight;return element.style.height=currentHeightStyle,elementHeight}(contentElement?.firstElementChild,modalState.expandable)+(bottomInset?.offsetHeight||0);let prevTranslateY=modalState.translateY,prevExpandable=modalState.expandable;modalState.expandable=contentHeight>(contentElement?.clientHeight??0)||100===modalState.settlingHeight;let translateYFrom,translateY,expandedRange,collapsedRange,hiddenRange,collapsed=!1,expanded=!1;const hasCollapsedState=Boolean(modalState.expandable&&100!==modalState.settlingHeight);if(modalState.expandable){translateYFrom=100-(modalState.settlingHeight??0);const shiftHalf=translateYFrom/2,visiblePart=100-translateYFrom;expandedRange=[0,shiftHalf],collapsedRange=hasCollapsedState?[shiftHalf,translateYFrom+visiblePart/4]:void 0,hiddenRange=[translateYFrom+visiblePart/4,100],collapsed=hasCollapsedState&&translateYFrom>0,expanded=translateYFrom<=0,translateY=translateYFrom}else{translateYFrom=100-(contentHeight+(modalState.headerElement?.offsetHeight??0))/(modalState.innerElement?.parentElement?.offsetHeight??0)*100,translateY=translateYFrom,expandedRange=[translateY,translateY+25],collapsedRange=void 0,hiddenRange=[translateY+25,translateY+100]}(prevExpandable&&modalState.expandable&&translateY>(prevTranslateY??100)||100===modalState.settlingHeight)&&(translateY=0),0===translateY&&(expanded=!0,collapsed=!1),modalState.expandedRange=expandedRange,modalState.collapsedRange=collapsedRange,modalState.hiddenRange=hiddenRange,modalState.translateY=translateY,modalState.translateYFrom=translateYFrom,modalState.collapsed=collapsed,modalState.expanded=expanded}try{ModalRootTouch.displayName="ModalRootTouch",ModalRootTouch.__docgenInfo={description:"",displayName:"ModalRootTouch",props:{configProvider:{defaultValue:null,description:"@ignore",name:"configProvider",required:!1,type:{name:"ConfigProviderContextInterface"}},platform:{defaultValue:null,description:"@ignore",name:"platform",required:!1,type:{name:"enum",value:[{value:'"android"'},{value:'"ios"'},{value:'"vkcom"'}]}},activeModal:{defaultValue:null,description:"",name:"activeModal",required:!1,type:{name:"string | null"}},onOpen:{defaultValue:null,description:"Будет вызвано при начале открытия активной модалки с её id",name:"onOpen",required:!1,type:{name:"((modalId: string) => void)"}},onOpened:{defaultValue:null,description:"Будет вызвано при окончательном открытии активной модалки с её id",name:"onOpened",required:!1,type:{name:"((modalId: string) => void)"}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия активной модалки с её id",name:"onClose",required:!1,type:{name:"((modalId: string) => void)"}},onClosed:{defaultValue:null,description:"Будет вызвано при окончательном закрытии активной модалки с её id",name:"onClosed",required:!1,type:{name:"((modalId: string) => void)"}},modalOverlayTestId:{defaultValue:null,description:"`data-testid` для маски",name:"modalOverlayTestId",required:!1,type:{name:"string"}},noFocusToDialog:{defaultValue:null,description:"Отключает фокус на контейнер диалогового окна при открытии.",name:"noFocusToDialog",required:!1,type:{name:"boolean"}},window:{defaultValue:null,description:"@ignore",name:"window",required:!1,type:{name:"Window"}},document:{defaultValue:null,description:"@ignore",name:"document",required:!1,type:{name:"Document"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalRoot/ModalRoot.tsx#ModalRootTouch"]={docgenInfo:ModalRootTouch.__docgenInfo,name:"ModalRootTouch",path:"src/components/ModalRoot/ModalRoot.tsx#ModalRootTouch"})}catch(__react_docgen_typescript_loader_error){}var useObjectMemo=__webpack_require__("./src/hooks/useObjectMemo.ts"),usePrevious=__webpack_require__("./src/hooks/usePrevious.ts");const ModalRootDesktop_warn=(0,warnOnce.m)("ModalRoot"),ModalRootDesktop=({activeModal:activeModalProp,children,noFocusToDialog=!1,onOpen,onOpened,onClose,onClosed,modalOverlayTestId})=>{const maskElementRef=react.useRef(null),maskAnimationFrame=react.useRef(void 0),restoreFocusTo=react.useRef(void 0),{document}=(0,dom.a4)(),{hasCustomPanelHeaderAfter,platform}=(0,ConfigProviderContext.h)(),{activeModal,exitingModal,onExit,getModalState,enteringModal,onEnter,onEntered:onEnteredProp,onExited,history,delayEnter}=useModalManager(activeModalProp,children,onOpen,onOpened,onClose,onClosed,es6.lQ),waitTransitionFinish=(()=>{const timeoutRef=react.useRef(null),{document}=(0,dom.a4)(),detach=react.useRef(es6.lQ),remove=react.useCallback((()=>{detach.current(),detach.current=es6.lQ}),[]);return react.useCallback(((element,eventHandler,durationFallback)=>{element&&(document?.hidden?(timeoutRef?.current&&clearTimeout(timeoutRef.current),timeoutRef.current=setTimeout(eventHandler,durationFallback)):(remove(),element.addEventListener("transitionend",eventHandler),detach.current=()=>{element.removeEventListener("transitionend",eventHandler)}))}),[document,remove,timeoutRef])})(),prevProps=(0,usePrevious.Z)({exitingModal,enteringModal,activeModal}),modalRootContext=(0,useObjectMemo.d)({updateModalHeight:()=>{},registerModal:({id,...data})=>Object.assign(getModalState(id)??{},data),onClose:onExit,isInsideModal:!0}),timeout="ios"===platform?400:320,modals=react.Children.toArray(children),animateModalOpacity=(modalState,display)=>{modalState?.innerElement&&(modalState.innerElement.style.transition="",modalState.innerElement.style.transitionDelay=display&&delayEnter?`${timeout}ms`:"",modalState.innerElement.style.opacity=display?"1":"0")},setMaskOpacity=(modalState,forceOpacity=null)=>{null===forceOpacity&&history?.[0]!==modalState.id||(maskAnimationFrame.current&&cancelAnimationFrame(maskAnimationFrame.current),maskAnimationFrame.current=requestAnimationFrame((()=>{if(maskElementRef.current){const{translateY=0,translateYCurrent=0}=modalState,opacity=null===forceOpacity?1-(translateYCurrent-translateY)/(100-translateY)||0:forceOpacity;maskElementRef.current.style.opacity=(0,math.qE)(opacity,0,100).toString()}})))},onEntered=({id,modalElement})=>{noFocusToDialog||!modalElement||modalElement.contains(document.activeElement)||modalElement.focus(),onEnteredProp(id)};return react.useEffect((()=>{prevProps&&(exitingModal&&exitingModal!==prevProps.exitingModal&&(id=>{const prevModalState=getModalState(id);prevModalState&&(activeModal?onExited(id):requestAnimationFrame((()=>{waitTransitionFinish(prevModalState?.innerElement,(event=>{event&&event.target===prevModalState?.innerElement?onExited(id):event||onExited(id)}),timeout),animateModalOpacity(prevModalState,!1),setMaskOpacity(prevModalState,0)})))})(exitingModal),enteringModal&&enteringModal!==prevProps.enteringModal&&(()=>{if(!enteringModal||!prevProps)return;const enteringState=getModalState(enteringModal);onEnter(),prevProps.exitingModal?(requestAnimationFrame((()=>{enteringState?.innerElement&&(enteringState.innerElement.style.transition="none",enteringState.innerElement.style.opacity="1",setMaskOpacity(enteringState,1))})),enteringState&&onEntered(enteringState)):requestAnimationFrame((()=>{enteringModal==enteringModal&&enteringState&&(waitTransitionFinish(enteringState.innerElement,(()=>onEntered(enteringState)),timeout),animateModalOpacity(enteringState,!0),setMaskOpacity(enteringState,1))}))})(),activeModal&&!prevProps.activeModal&&(restoreFocusTo.current=document?.activeElement??void 0),activeModal||exitingModal||!restoreFocusTo.current||(restoreFocusTo.current.focus(),restoreFocusTo.current=void 0))})),activeModal||exitingModal?(0,jsx_runtime.jsx)(ModalRootContext.f.Provider,{value:modalRootContext,children:(0,jsx_runtime.jsxs)("div",{className:(0,es6.xW)(ModalRoot_ModalRoot_module.host,hasCustomPanelHeaderAfter&&ModalRoot_ModalRoot_module.hasCustomPanelHeaderAfterSlot,ModalRoot_ModalRoot_module.desktop),children:[(0,jsx_runtime.jsx)("div",{"data-testid":modalOverlayTestId,className:ModalRoot_ModalRoot_module.mask,ref:maskElementRef,onClick:onExit}),(0,jsx_runtime.jsx)("div",{className:ModalRoot_ModalRoot_module.viewport,children:modals.map((Modal=>{const modalId=(0,getNavId.p)(Modal.props,ModalRootDesktop_warn);if(modalId!==activeModal&&modalId!==exitingModal)return null;const key=`modal-${modalId}`;return(0,jsx_runtime.jsx)(FocusTrap.s,{autoFocus:!1,restoreFocus:!1,onClose:onExit,timeout,className:ModalRoot_ModalRoot_module.modal,children:Modal},key)}))})]})}):null};try{ModalRootDesktop.displayName="ModalRootDesktop",ModalRootDesktop.__docgenInfo={description:"",displayName:"ModalRootDesktop",props:{configProvider:{defaultValue:null,description:"@ignore",name:"configProvider",required:!1,type:{name:"ConfigProviderContextInterface"}},platform:{defaultValue:null,description:"@ignore",name:"platform",required:!1,type:{name:"enum",value:[{value:'"android"'},{value:'"ios"'},{value:'"vkcom"'}]}},activeModal:{defaultValue:null,description:"",name:"activeModal",required:!1,type:{name:"string | null"}},onOpen:{defaultValue:null,description:"Будет вызвано при начале открытия активной модалки с её id",name:"onOpen",required:!1,type:{name:"((modalId: string) => void)"}},onOpened:{defaultValue:null,description:"Будет вызвано при окончательном открытии активной модалки с её id",name:"onOpened",required:!1,type:{name:"((modalId: string) => void)"}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия активной модалки с её id",name:"onClose",required:!1,type:{name:"((modalId: string) => void)"}},onClosed:{defaultValue:null,description:"Будет вызвано при окончательном закрытии активной модалки с её id",name:"onClosed",required:!1,type:{name:"((modalId: string) => void)"}},modalOverlayTestId:{defaultValue:null,description:"`data-testid` для маски",name:"modalOverlayTestId",required:!1,type:{name:"string"}},noFocusToDialog:{defaultValue:{value:"false"},description:"Отключает фокус на контейнер диалогового окна при открытии.",name:"noFocusToDialog",required:!1,type:{name:"boolean"}},window:{defaultValue:null,description:"@ignore",name:"window",required:!1,type:{name:"Window"}},document:{defaultValue:null,description:"@ignore",name:"document",required:!1,type:{name:"Document"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalRoot/ModalRootDesktop.tsx#ModalRootDesktop"]={docgenInfo:ModalRootDesktop.__docgenInfo,name:"ModalRootDesktop",path:"src/components/ModalRoot/ModalRootDesktop.tsx#ModalRootDesktop"})}catch(__react_docgen_typescript_loader_error){}const ModalRoot=props=>{const{isDesktop}=(0,useAdaptivityWithJSMediaQueries.w)();(0,ScrollContext.K$)(!!props.activeModal);const RootComponent=isDesktop?ModalRootDesktop:ModalRootTouch;return(0,jsx_runtime.jsx)(RootComponent,{...props})};try{ModalRoot.displayName="ModalRoot",ModalRoot.__docgenInfo={description:"",displayName:"ModalRoot",props:{activeModal:{defaultValue:null,description:"",name:"activeModal",required:!1,type:{name:"string | null"}},onOpen:{defaultValue:null,description:"Будет вызвано при начале открытия активной модалки с её id",name:"onOpen",required:!1,type:{name:"((modalId: string) => void)"}},onOpened:{defaultValue:null,description:"Будет вызвано при окончательном открытии активной модалки с её id",name:"onOpened",required:!1,type:{name:"((modalId: string) => void)"}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия активной модалки с её id",name:"onClose",required:!1,type:{name:"((modalId: string) => void)"}},onClosed:{defaultValue:null,description:"Будет вызвано при окончательном закрытии активной модалки с её id",name:"onClosed",required:!1,type:{name:"((modalId: string) => void)"}},modalOverlayTestId:{defaultValue:null,description:"`data-testid` для маски",name:"modalOverlayTestId",required:!1,type:{name:"string"}},noFocusToDialog:{defaultValue:null,description:"Отключает фокус на контейнер диалогового окна при открытии.",name:"noFocusToDialog",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalRoot/ModalRootAdaptive.tsx#ModalRoot"]={docgenInfo:ModalRoot.__docgenInfo,name:"ModalRoot",path:"src/components/ModalRoot/ModalRootAdaptive.tsx#ModalRoot"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Placeholder/Placeholder.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>Placeholder});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),es6=(__webpack_require__("../../node_modules/react/index.js"),__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js")),RootComponent=__webpack_require__("./src/components/RootComponent/RootComponent.tsx"),Headline=__webpack_require__("./src/components/Typography/Headline/Headline.tsx"),Title=__webpack_require__("./src/components/Typography/Title/Title.tsx"),injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),singletonStyleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),singletonStyleDomAPI_default=__webpack_require__.n(singletonStyleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithAttributesAndNonce=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),setAttributesWithAttributesAndNonce_default=__webpack_require__.n(setAttributesWithAttributesAndNonce),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),Placeholder_module=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/Placeholder/Placeholder.module.css"),options={attributes:{class:"vkui-style"}};options.setAttributes=setAttributesWithAttributesAndNonce_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=singletonStyleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(Placeholder_module.A,options);const Placeholder_Placeholder_module=Placeholder_module.A&&Placeholder_module.A.locals?Placeholder_module.A.locals:void 0,PlaceholderContainer=({stretched,noPadding=!1,...restProps})=>(0,jsx_runtime.jsx)(RootComponent.I,{baseClassName:(0,es6.xW)(Placeholder_Placeholder_module.host,stretched&&Placeholder_Placeholder_module.stretched,!noPadding&&Placeholder_Placeholder_module.withPadding),...restProps}),PlaceholderIcon=props=>(0,jsx_runtime.jsx)(RootComponent.I,{baseClassName:Placeholder_Placeholder_module.icon,...props}),PlaceholderHeader=({className,...restProps})=>(0,jsx_runtime.jsx)(Title.h,{level:"2",weight:"2",className:(0,es6.xW)(className,Placeholder_Placeholder_module.header),...restProps}),PlaceholderText=({className,...restProps})=>(0,jsx_runtime.jsx)(Headline.$,{weight:"3",className:(0,es6.xW)(className,Placeholder_Placeholder_module.text),...restProps}),PlaceholderActions=props=>(0,jsx_runtime.jsx)(RootComponent.I,{baseClassName:Placeholder_Placeholder_module.action,...props}),Placeholder=({icon,header,children,action,noPadding=!1,...restProps})=>(0,jsx_runtime.jsxs)(PlaceholderContainer,{noPadding,...restProps,children:[(0,es6.G1)(icon)&&(0,jsx_runtime.jsx)(PlaceholderIcon,{children:icon}),(0,es6.G1)(header)&&(0,jsx_runtime.jsx)(PlaceholderHeader,{children:header}),(0,es6.G1)(children)&&(0,jsx_runtime.jsx)(PlaceholderText,{children}),(0,es6.G1)(action)&&(0,jsx_runtime.jsx)(PlaceholderActions,{children:action})]});Placeholder.Container=PlaceholderContainer,Placeholder.Icon=PlaceholderIcon,Placeholder.Header=PlaceholderHeader,Placeholder.Text=PlaceholderText,Placeholder.Actions=PlaceholderActions;try{Placeholder.displayName="Placeholder",Placeholder.__docgenInfo={description:"",displayName:"Placeholder",props:{icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:"ReactNode"}},header:{defaultValue:null,description:"Заголовок плейсхолдера",name:"header",required:!1,type:{name:"ReactNode"}},action:{defaultValue:null,description:"Кнопка действия",name:"action",required:!1,type:{name:"ReactNode"}},stretched:{defaultValue:null,description:"Растягивает плейсхолдер на весь экран, но в таком случае на экране должен быть только плейсхолдер",name:"stretched",required:!1,type:{name:"boolean"}},noPadding:{defaultValue:{value:"false"},description:"Убирает отступы у компонента",name:"noPadding",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Placeholder/Placeholder.tsx#Placeholder"]={docgenInfo:Placeholder.__docgenInfo,name:"Placeholder",path:"src/components/Placeholder/Placeholder.tsx#Placeholder"})}catch(__react_docgen_typescript_loader_error){}try{Container.displayName="Placeholder.Container",Container.__docgenInfo={description:"",displayName:"Placeholder.Container",props:{stretched:{defaultValue:null,description:"Растягивает плейсхолдер на весь экран, но в таком случае на экране должен быть только плейсхолдер",name:"stretched",required:!1,type:{name:"boolean"}},noPadding:{defaultValue:{value:"false"},description:"Убирает отступы у компонента",name:"noPadding",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Placeholder/Placeholder.tsx#Placeholder.Container"]={docgenInfo:Placeholder.Container.__docgenInfo,name:"Placeholder.Container",path:"src/components/Placeholder/Placeholder.tsx#Placeholder.Container"})}catch(__react_docgen_typescript_loader_error){}try{Icon.displayName="Placeholder.Icon",Icon.__docgenInfo={description:"",displayName:"Placeholder.Icon",props:{getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Placeholder/Placeholder.tsx#Placeholder.Icon"]={docgenInfo:Placeholder.Icon.__docgenInfo,name:"Placeholder.Icon",path:"src/components/Placeholder/Placeholder.tsx#Placeholder.Icon"})}catch(__react_docgen_typescript_loader_error){}try{Header.displayName="Placeholder.Header",Header.__docgenInfo={description:"",displayName:"Placeholder.Header",props:{getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLElement>"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Placeholder/Placeholder.tsx#Placeholder.Header"]={docgenInfo:Placeholder.Header.__docgenInfo,name:"Placeholder.Header",path:"src/components/Placeholder/Placeholder.tsx#Placeholder.Header"})}catch(__react_docgen_typescript_loader_error){}try{Text.displayName="Placeholder.Text",Text.__docgenInfo={description:"",displayName:"Placeholder.Text",props:{getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLElement>"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Placeholder/Placeholder.tsx#Placeholder.Text"]={docgenInfo:Placeholder.Text.__docgenInfo,name:"Placeholder.Text",path:"src/components/Placeholder/Placeholder.tsx#Placeholder.Text"})}catch(__react_docgen_typescript_loader_error){}try{Actions.displayName="Placeholder.Actions",Actions.__docgenInfo={description:"",displayName:"Placeholder.Actions",props:{getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Placeholder/Placeholder.tsx#Placeholder.Actions"]={docgenInfo:Placeholder.Actions.__docgenInfo,name:"Placeholder.Actions",path:"src/components/Placeholder/Placeholder.tsx#Placeholder.Actions"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Touch/TouchContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../node_modules/react/index.js").createContext(!1)},"./src/hooks/useAdaptivityWithJSMediaQueries.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>useAdaptivityWithJSMediaQueries});var react=__webpack_require__("../../node_modules/react/index.js"),es6=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),AdaptivityContext=__webpack_require__("./src/components/AdaptivityProvider/AdaptivityContext.tsx");function getOrDefault(value,defaultValue){return value??defaultValue}var functions=__webpack_require__("./src/lib/adaptivity/functions.ts"),matchMedia=__webpack_require__("./src/lib/matchMedia.ts"),useMediaQueries=__webpack_require__("./src/hooks/useMediaQueries.ts"),usePlatform=__webpack_require__("./src/hooks/usePlatform.ts");const useAdaptivityWithJSMediaQueries=()=>{es6.Sw||console.error("[useAdaptivityWithJSMediaQueries] Похоже, вы пытаетесь использовать хук вне браузера.\n\nПостарайтесь этого избегать, чтобы не было ошибок при гидратации: при SSR нет информации о размерах экрана.\n\nИспользуйте CSS Media Query или библиотеку по типу https://github.com/artsy/fresnel.");const{viewWidth:viewWidthContext,viewHeight:viewHeightContext,sizeX:sizeXContext,sizeY:sizeYContext,hasPointer:hasPointerContext,hasHover:hasHoverContext}=react.useContext(AdaptivityContext.D),platform=(0,usePlatform.V)(),mediaQueries=(0,useMediaQueries.e)(),[[viewWidthLocal,viewHeightLocal],setViewSizeLocal]=react.useState((()=>[getOrDefault(viewWidthContext,(0,functions.z6)(mediaQueries)),getOrDefault(viewHeightContext,(0,functions.EL)(mediaQueries))])),adaptivityProps=react.useMemo((()=>{const hasPointer=getOrDefault(hasPointerContext,es6.Wt),hasHover=getOrDefault(hasHoverContext,es6.pp),viewWidth=getOrDefault(viewWidthContext,viewWidthLocal),viewHeight=getOrDefault(viewHeightContext,viewHeightLocal);return{viewWidth,viewHeight,sizeX:getOrDefault(sizeXContext,(0,functions.Io)(viewWidth)),sizeY:getOrDefault(sizeYContext,(0,functions.BM)(viewWidth,viewHeight,hasPointer)),hasPointer,hasHover,isDesktop:(0,functions.RL)(viewWidth,viewHeight,hasPointer,platform)}}),[viewWidthLocal,viewHeightLocal,viewWidthContext,viewHeightContext,sizeXContext,sizeYContext,hasPointerContext,hasHoverContext,platform]);return react.useEffect((()=>{const handleMediaQuery=()=>{setViewSizeLocal((prevSizeLocal=>{const newViewWidthLocal=getOrDefault(viewWidthContext,(0,functions.z6)(mediaQueries)),newViewHeightLocal=getOrDefault(viewHeightContext,(0,functions.EL)(mediaQueries)),[prevViewWidthLocal,prevViewHeightLocal]=prevSizeLocal;return prevViewWidthLocal!==newViewWidthLocal||prevViewHeightLocal!==newViewHeightLocal?[newViewWidthLocal,newViewHeightLocal]:prevSizeLocal}))};return viewWidthContext||[mediaQueries.desktopPlus,mediaQueries.tablet,mediaQueries.smallTablet,mediaQueries.mobile].forEach((matchMediaListener=>(0,matchMedia.d)(matchMediaListener,handleMediaQuery))),viewHeightContext||[mediaQueries.mediumHeight,mediaQueries.mobileLandscapeHeight].forEach((matchMediaListener=>(0,matchMedia.d)(matchMediaListener,handleMediaQuery))),()=>{[mediaQueries.desktopPlus,mediaQueries.tablet,mediaQueries.smallTablet,mediaQueries.mobile,mediaQueries.mediumHeight,mediaQueries.mobileLandscapeHeight].forEach((matchMediaListener=>(0,matchMedia.Q)(matchMediaListener,handleMediaQuery)))}}),[mediaQueries,viewWidthContext,viewHeightContext]),adaptivityProps}},"./src/hooks/useMutationObserver.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>useMutationObserver});var _lib_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/useIsomorphicLayoutEffect.ts"),_useStableCallback__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/hooks/useStableCallback.ts");const useMutationObserver=(ref,callback)=>{const stableCallback=(0,_useStableCallback__WEBPACK_IMPORTED_MODULE_0__.K)(callback);(0,_lib_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__.E)((()=>{if(!ref||!ref.current)return;const observer=new MutationObserver(stableCallback);return observer.observe(ref.current,{subtree:!0,childList:!0}),()=>observer.disconnect()}),[ref,stableCallback])}}}]);