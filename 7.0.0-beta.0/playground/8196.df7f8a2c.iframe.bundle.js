"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[8196],{"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/CustomScrollView/CustomScrollView.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'.CustomScrollView__host--MHzCu{overflow:hidden}.CustomScrollView__box--PO6IE,.CustomScrollView__host--MHzCu{block-size:100%;inline-size:100%;position:relative}.CustomScrollView__box--PO6IE{max-block-size:inherit;overflow-x:hidden;overflow-y:scroll;-webkit-padding-end:100px;outline:none;padding-inline-end:100px}.CustomScrollView__boxOverscrollBehaviorContain--RBHnt{overscroll-behavior:contain}.CustomScrollView__boxOverscrollBehaviorNone--h1gxf{overscroll-behavior:none}.CustomScrollView__boxHorizontalEnabled--M0DCN{-webkit-padding-end:0;overflow-x:scroll;padding-inline-end:0}.CustomScrollView__boxContent--f4Cma{block-size:100%;inline-size:100%;position:relative}.CustomScrollView__barX--jGBq8:active+.CustomScrollView__box--PO6IE,.CustomScrollView__barY--wQKPA:active+.CustomScrollView__box--PO6IE{pointer-events:none}.CustomScrollView__barX--jGBq8,.CustomScrollView__barY--wQKPA{position:absolute}.CustomScrollView__barY--wQKPA{block-size:100%;inline-size:10px;inset-block-start:0;inset-inline-end:0}.CustomScrollView__barX--jGBq8{block-size:10px;inline-size:100%;inset-block-end:0;inset-inline-start:0}.CustomScrollView__trackerX--gCopR,.CustomScrollView__trackerY--hdmM_{box-sizing:border-box;inset-block-start:0;inset-inline-start:0;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.CustomScrollView__trackerY--hdmM_{inline-size:10px;padding-block:4px;padding-inline:0 4px}.CustomScrollView__trackerX--gCopR{block-size:10px;padding-block:0 4px;padding-inline:4px}.CustomScrollView__trackerXHidden--wKhBf,.CustomScrollView__trackerYHidden--NvSos{opacity:0;transition:opacity .2s}.CustomScrollView__trackerX--gCopR:before,.CustomScrollView__trackerY--hdmM_:before{background-color:var(--vkui--color_icon_medium);block-size:100%;border-radius:12px;content:"";display:block;inline-size:100%;opacity:.48;transition:transform .2s,opacity .2s}.CustomScrollView__trackerY--hdmM_:active:before,.CustomScrollView__trackerY--hdmM_:hover:before{opacity:.8;transform:scaleX(1.3333)}.CustomScrollView__trackerX--gCopR:active:before,.CustomScrollView__trackerX--gCopR:hover:before{opacity:.8;transform:scaleY(1.3333)}.vkuiInternalCustomSelectDropdown .CustomScrollView__box--PO6IE{-webkit-padding-end:8px;padding-inline-end:8px}.vkuiInternalCustomSelectDropdown--wide .CustomScrollView__box--PO6IE{-webkit-padding-end:0;padding-inline-end:0}.CustomScrollView__hasPointerTrue--BVvEl .CustomScrollView__box--PO6IE{scrollbar-width:none}.CustomScrollView__hasPointerTrue--BVvEl .CustomScrollView__box--PO6IE::-webkit-scrollbar{display:none}@media (pointer:fine){.CustomScrollView__hasPointerNone--CsPEA .CustomScrollView__box--PO6IE{scrollbar-width:none}.CustomScrollView__hasPointerNone--CsPEA .CustomScrollView__box--PO6IE::-webkit-scrollbar{display:none}}.CustomScrollView__hasPointerFalse--LbS5S .CustomScrollView__barX--jGBq8,.CustomScrollView__hasPointerFalse--LbS5S .CustomScrollView__barY--wQKPA{display:none}@media (pointer:coarse),(pointer:none){.CustomScrollView__hasPointerNone--CsPEA .CustomScrollView__barX--jGBq8,.CustomScrollView__hasPointerNone--CsPEA .CustomScrollView__barY--wQKPA{display:none}}',"",{version:3,sources:["webpack://./src/components/CustomScrollView/CustomScrollView.module.css"],names:[],mappings:"AAAA,+BAGE,eAEF,CAEA,6DALE,eAAgB,CADhB,gBAAiB,CAGjB,iBAYF,CATA,8BACE,sBAAuB,CAIvB,iBAAkB,CADlB,iBAAkB,CAElB,yBAAyB,CAEzB,YAAa,CAFb,wBAGF,CAEA,uDACE,2BACF,CAEA,oDACE,wBACF,CAEA,+CACE,qBAAqB,CACrB,iBAAkB,CADlB,oBAEF,CAEA,qCAGE,eAAgB,CADhB,gBAAiB,CADjB,iBAGF,CAEA,wIAEE,mBACF,CAEA,8DAEE,iBACF,CAEA,+BAGE,eAAgB,CAChB,gBAAiB,CAHjB,mBAAoB,CACpB,kBAGF,CAEA,+BAIE,eAAgB,CADhB,gBAAiB,CAFjB,iBAAkB,CAClB,oBAGF,CAEA,sEAIE,qBAAsB,CACtB,mBAAoB,CACpB,oBAAqB,CAJrB,iBAAkB,CAClB,wBAAiB,CAAjB,qBAAiB,CAAjB,gBAIF,CAEA,mCACE,gBAAiB,CACjB,iBAAkB,CAClB,oBACF,CAEA,mCACE,eAAgB,CAEhB,mBAAoB,CADpB,kBAEF,CAEA,kFAEE,SAAU,CACV,sBACF,CAEA,oFAOE,+CAAgD,CADhD,eAAgB,CAEhB,kBAAmB,CANnB,UAAW,CAEX,aAAc,CACd,gBAAiB,CAFjB,WAAa,CAMb,oCAGF,CAEA,iGAEE,UAAY,CACZ,wBACF,CAEA,iGAEE,UAAY,CACZ,wBACF,CAOA,gEACE,uBAAuB,CAAvB,sBACF,CAGA,sEACE,qBAAqB,CAArB,oBACF,CAEA,uEAKE,oBACF,CAEA,0FACE,YACF,CAEA,sBACE,uEAKE,oBACF,CAEA,0FACE,YACF,CACF,CAKA,kJAEE,YACF,CAEA,uCACE,gJAEE,YACF,CACF",sourcesContent:[".host {\n  inline-size: 100%;\n  block-size: 100%;\n  overflow: hidden;\n  position: relative;\n}\n\n.box {\n  max-block-size: inherit;\n  inline-size: 100%;\n  block-size: 100%;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  padding-inline-end: 100px;\n  position: relative;\n  outline: none;\n}\n\n.boxOverscrollBehaviorContain {\n  overscroll-behavior: contain;\n}\n\n.boxOverscrollBehaviorNone {\n  overscroll-behavior: none;\n}\n\n.boxHorizontalEnabled {\n  padding-inline-end: 0;\n  overflow-x: scroll;\n}\n\n.boxContent {\n  position: relative;\n  inline-size: 100%;\n  block-size: 100%;\n}\n\n.barY:active + .box,\n.barX:active + .box {\n  pointer-events: none;\n}\n\n.barY,\n.barX {\n  position: absolute;\n}\n\n.barY {\n  inset-block-start: 0;\n  inset-inline-end: 0;\n  block-size: 100%;\n  inline-size: 10px;\n}\n\n.barX {\n  inset-block-end: 0;\n  inset-inline-start: 0;\n  inline-size: 100%;\n  block-size: 10px;\n}\n\n.trackerY,\n.trackerX {\n  position: absolute;\n  user-select: none;\n  box-sizing: border-box;\n  inset-block-start: 0;\n  inset-inline-start: 0;\n}\n\n.trackerY {\n  inline-size: 10px;\n  padding-block: 4px;\n  padding-inline: 0 4px;\n}\n\n.trackerX {\n  block-size: 10px;\n  padding-inline: 4px;\n  padding-block: 0 4px;\n}\n\n.trackerYHidden,\n.trackerXHidden {\n  opacity: 0;\n  transition: opacity 200ms;\n}\n\n.trackerY::before,\n.trackerX::before {\n  content: '';\n  opacity: 0.48;\n  display: block;\n  inline-size: 100%;\n  block-size: 100%;\n  background-color: var(--vkui--color_icon_medium);\n  border-radius: 12px;\n  transition:\n    transform 200ms,\n    opacity 200ms;\n}\n\n.trackerY:hover::before,\n.trackerY:active::before {\n  opacity: 0.8;\n  transform: scaleX(1.3333);\n}\n\n.trackerX:hover::before,\n.trackerX:active::before {\n  opacity: 0.8;\n  transform: scaleY(1.3333);\n}\n\n/**\n * CMP:\n * CustomSelectDropdown\n */\n/* stylelint-disable-next-line selector-pseudo-class-disallowed-list */\n:global(.vkuiInternalCustomSelectDropdown) .box {\n  padding-inline-end: 8px;\n}\n\n/* stylelint-disable-next-line selector-pseudo-class-disallowed-list */\n:global(.vkuiInternalCustomSelectDropdown--wide) .box {\n  padding-inline-end: 0;\n}\n\n.hasPointerTrue .box {\n  /**\n   * Для удаление скролла в Firefox.\n   * В версии ниже 64 будет виден скролл, но это не ломает функциональность.\n   */\n  scrollbar-width: none;\n}\n\n.hasPointerTrue .box::-webkit-scrollbar {\n  display: none;\n}\n\n@media (--pointer-has) {\n  .hasPointerNone .box {\n    /**\n     * Для удаление скролла в Firefox.\n     * В версии ниже 64 будет виден скролл, но это не ломает функциональность.\n     */\n    scrollbar-width: none;\n  }\n\n  .hasPointerNone .box::-webkit-scrollbar {\n    display: none;\n  }\n}\n\n/**\n * Не отрисовываем полосу прокрутки, если у устройства отсутствует мышь\n */\n.hasPointerFalse .barY,\n.hasPointerFalse .barX {\n  display: none;\n}\n\n@media (--pointer-has-not) {\n  .hasPointerNone .barY,\n  .hasPointerNone .barX {\n    display: none;\n  }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={host:"CustomScrollView__host--MHzCu",box:"CustomScrollView__box--PO6IE",boxOverscrollBehaviorContain:"CustomScrollView__boxOverscrollBehaviorContain--RBHnt",boxOverscrollBehaviorNone:"CustomScrollView__boxOverscrollBehaviorNone--h1gxf",boxHorizontalEnabled:"CustomScrollView__boxHorizontalEnabled--M0DCN",boxContent:"CustomScrollView__boxContent--f4Cma",barX:"CustomScrollView__barX--jGBq8",barY:"CustomScrollView__barY--wQKPA",trackerX:"CustomScrollView__trackerX--gCopR",trackerY:"CustomScrollView__trackerY--hdmM_",trackerXHidden:"CustomScrollView__trackerXHidden--wKhBf",trackerYHidden:"CustomScrollView__trackerYHidden--NvSos",hasPointerTrue:"CustomScrollView__hasPointerTrue--BVvEl",hasPointerNone:"CustomScrollView__hasPointerNone--CsPEA",hasPointerFalse:"CustomScrollView__hasPointerFalse--LbS5S"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/CustomScrollView/CustomScrollView.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>CustomScrollView});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/react/index.js"),es6=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),useAdaptivity=__webpack_require__("./src/hooks/useAdaptivity.ts"),useExternRef=__webpack_require__("./src/hooks/useExternRef.ts"),utils=__webpack_require__("./src/lib/utils.ts"),useEventListener=__webpack_require__("./src/hooks/useEventListener.ts"),dom=__webpack_require__("./src/lib/dom.tsx");const useDragAndDrop=(onDragStart,onDragMove,onDragEnd)=>{const{document}=(0,dom.a4)(),[isPressed,setIsPressed]=react.useState(!1),listeners=[(0,useEventListener.M)("mousemove",(e=>{isPressed&&(e.preventDefault(),onDragMove(e))})),(0,useEventListener.M)("mouseup",(e=>{isPressed&&(e.preventDefault(),onDragEnd(e),function unsubscribe(){listeners.forEach((l=>l.remove()))}())}))];return{onDragStart:e=>{e.preventDefault(),setIsPressed(!0),onDragStart(e),function subscribe(el){el&&listeners.forEach((l=>l.add(el)))}(document)}}},useTrackerVisibility=(autoHideScrollbar=!1,autoHideScrollbarDelay=500)=>{const[visibility,setVisibility]=react.useState(autoHideScrollbar?"hidden":"visible"),isMouseOver=react.useRef(!1),isTrackerDragging=react.useRef(!1);react.useEffect((()=>{setVisibility(autoHideScrollbar?"hidden":"visible")}),[autoHideScrollbar]);const onTrackerDragStart=react.useCallback((()=>{isTrackerDragging.current=!0,setVisibility("visible")}),[]),onTrackerDragStop=react.useCallback((()=>{isTrackerDragging.current=!1,isMouseOver.current||setVisibility("temporary-visible")}),[]),onTrackerMouseEnter=react.useCallback((()=>{isMouseOver.current=!0,setVisibility("visible")}),[]),onTrackerMouseLeave=react.useCallback((()=>{isMouseOver.current=!1,isTrackerDragging.current||setVisibility("temporary-visible")}),[]),onTargetScroll=react.useCallback((()=>{isMouseOver.current||isTrackerDragging.current||setVisibility("temporary-visible")}),[]);return react.useEffect((function hideAfterDelay(){let timeoutId=null;return"temporary-visible"===visibility&&(timeoutId=setTimeout((()=>{setVisibility("hidden")}),autoHideScrollbarDelay)),function clearHideAfterDelay(){timeoutId&&clearTimeout(timeoutId)}}),[visibility,autoHideScrollbarDelay]),{trackerVisible:"hidden"!==visibility,onTrackerDragStart,onTrackerDragStop,onTrackerMouseEnter,onTrackerMouseLeave,onTargetScroll}},useHorizontalScrollController=(boxRef,autoHideScrollbar,autoHideScrollbarDelay)=>{const barX=react.useRef(null),horizontalRatio=react.useRef(NaN),lastTrackerLeft=react.useRef(0),clientWidth=react.useRef(0),trackerWidth=react.useRef(0),scrollWidth=react.useRef(0),startX=react.useRef(0),trackerLeft=react.useRef(0),trackerX=react.useRef(null),{trackerVisible,onTargetScroll,onTrackerDragStart,onTrackerDragStop,onTrackerMouseEnter,onTrackerMouseLeave}=useTrackerVisibility(autoHideScrollbar,autoHideScrollbarDelay),setTrackerPositionFromScroll=scrollLeft=>{const progress=scrollLeft/(scrollWidth.current-clientWidth.current);(scrollLeft=>{lastTrackerLeft.current=scrollLeft,null!==trackerX.current&&(trackerX.current.style.transform=`translate(${scrollLeft}px, 0)`)})((clientWidth.current-trackerWidth.current)*progress)};return{barRef:barX,trackerVisible,trackerRef:trackerX,resize:()=>{if(!boxRef.current||!barX.current||!trackerX.current)return;const localClientWidth=boxRef.current.clientWidth,localScrollWidth=boxRef.current.scrollWidth,localVerticalRatio=localClientWidth/localScrollWidth,localTrackerWidth=Math.max(localClientWidth*localVerticalRatio,40);horizontalRatio.current=localVerticalRatio,clientWidth.current=localClientWidth,scrollWidth.current=localScrollWidth,trackerWidth.current=localTrackerWidth;const currentScrollLeft=boxRef.current.scrollLeft;localVerticalRatio>=1?barX.current.style.display="none":(barX.current.style.display="",trackerX.current.style.width=`${localTrackerWidth}px`,setTrackerPositionFromScroll(currentScrollLeft))},dragging:e=>{const diff=e.clientX-startX.current;(trackerLeft=>{const progress=trackerLeft/(clientWidth.current-trackerWidth.current);null!==boxRef.current&&boxRef.current.scroll({left:(scrollWidth.current-clientWidth.current)*progress})})(Math.min(Math.max(trackerLeft.current+diff,0),clientWidth.current-trackerWidth.current))},dragEnd:()=>{autoHideScrollbar&&onTrackerDragStop()},scroll:()=>{boxRef.current&&(autoHideScrollbar&&onTargetScroll(),setTrackerPositionFromScroll(boxRef.current.scrollLeft))},dragStart:e=>{startX.current=e.clientX,trackerLeft.current=lastTrackerLeft.current,autoHideScrollbar&&onTrackerDragStart()},trackerMouseEnter:onTrackerMouseEnter,trackerMouseLeave:onTrackerMouseLeave}};var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),singletonStyleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),singletonStyleDomAPI_default=__webpack_require__.n(singletonStyleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithAttributesAndNonce=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),setAttributesWithAttributesAndNonce_default=__webpack_require__.n(setAttributesWithAttributesAndNonce),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),CustomScrollView_module=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./src/components/CustomScrollView/CustomScrollView.module.css"),options={attributes:{class:"vkui-style"}};options.setAttributes=setAttributesWithAttributesAndNonce_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=singletonStyleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(CustomScrollView_module.A,options);const CustomScrollView_CustomScrollView_module=CustomScrollView_module.A&&CustomScrollView_module.A.locals?CustomScrollView_module.A.locals:void 0,ScrollX=({barHandlers,boxRef,autoHideScrollbar,autoHideScrollbarDelay})=>{const{barRef:barX,trackerVisible:horizontalTrackerVisible,trackerRef:trackerX,resize:horizontalScrollResize,scroll:horizontalScroll,dragStart:onHorizontalDragStart,dragging:onHorizontalDragging,dragEnd:onHorizontalDragEnd,trackerMouseEnter:onHorizontalTrackerMouseEnter,trackerMouseLeave:onHorizontalTrackerMouseLeave}=useHorizontalScrollController(boxRef,autoHideScrollbar,autoHideScrollbarDelay),{onDragStart:onMouseDown}=useDragAndDrop(onHorizontalDragStart,onHorizontalDragging,onHorizontalDragEnd);return react.useImperativeHandle(barHandlers,(()=>({resize:horizontalScrollResize,scroll:horizontalScroll})),[horizontalScrollResize,horizontalScroll]),(0,jsx_runtime.jsx)("div",{className:CustomScrollView_CustomScrollView_module.barX,ref:barX,onClick:utils.dG,children:(0,jsx_runtime.jsx)("div",{className:(0,es6.xW)(CustomScrollView_CustomScrollView_module.trackerX,!horizontalTrackerVisible&&CustomScrollView_CustomScrollView_module.trackerXHidden),onMouseEnter:autoHideScrollbar?onHorizontalTrackerMouseEnter:void 0,onMouseLeave:autoHideScrollbar?onHorizontalTrackerMouseLeave:void 0,ref:trackerX,onMouseDown})})};try{ScrollX.displayName="ScrollX",ScrollX.__docgenInfo={description:"",displayName:"ScrollX",props:{barHandlers:{defaultValue:null,description:"",name:"barHandlers",required:!0,type:{name:"MutableRefObject<BarHandlers | null>"}},boxRef:{defaultValue:null,description:"",name:"boxRef",required:!0,type:{name:"MutableRefObject<HTMLDivElement | null>"}},autoHideScrollbar:{defaultValue:null,description:"",name:"autoHideScrollbar",required:!0,type:{name:"boolean"}},autoHideScrollbarDelay:{defaultValue:null,description:"",name:"autoHideScrollbarDelay",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/CustomScrollView/ScrollX.tsx#ScrollX"]={docgenInfo:ScrollX.__docgenInfo,name:"ScrollX",path:"src/components/CustomScrollView/ScrollX.tsx#ScrollX"})}catch(__react_docgen_typescript_loader_error){}const useVerticalScrollController=(boxRef,autoHideScrollbar,autoHideScrollbarDelay)=>{const barY=react.useRef(null),verticalRatio=react.useRef(NaN),lastTrackerTop=react.useRef(0),clientHeight=react.useRef(0),trackerHeight=react.useRef(0),scrollHeight=react.useRef(0),startY=react.useRef(0),trackerTop=react.useRef(0),trackerY=react.useRef(null),{trackerVisible,onTargetScroll,onTrackerDragStart,onTrackerDragStop,onTrackerMouseEnter,onTrackerMouseLeave}=useTrackerVisibility(autoHideScrollbar,autoHideScrollbarDelay),setTrackerPositionFromScroll=scrollTop=>{const progress=scrollTop/(scrollHeight.current-clientHeight.current);(scrollTop=>{lastTrackerTop.current=scrollTop,null!==trackerY.current&&(trackerY.current.style.transform=`translate(0, ${scrollTop}px)`)})((clientHeight.current-trackerHeight.current)*progress)};return{barRef:barY,trackerVisible,trackerRef:trackerY,resize:()=>{if(!boxRef.current||!barY.current||!trackerY.current)return;const localClientHeight=boxRef.current.clientHeight,localScrollHeight=boxRef.current.scrollHeight,localVerticalRatio=localClientHeight/localScrollHeight,localTrackerHeight=Math.max(localClientHeight*localVerticalRatio,40);verticalRatio.current=localVerticalRatio,clientHeight.current=localClientHeight,scrollHeight.current=localScrollHeight,trackerHeight.current=localTrackerHeight;const currentScrollTop=boxRef.current.scrollTop;localVerticalRatio>=1?barY.current.style.display="none":(barY.current.style.display="",trackerY.current.style.height=`${localTrackerHeight}px`,setTrackerPositionFromScroll(currentScrollTop))},dragging:e=>{const diff=e.clientY-startY.current;(trackerTop=>{const progress=trackerTop/(clientHeight.current-trackerHeight.current);null!==boxRef.current&&boxRef.current.scroll({top:(scrollHeight.current-clientHeight.current)*progress})})(Math.min(Math.max(trackerTop.current+diff,0),clientHeight.current-trackerHeight.current))},dragEnd:()=>{autoHideScrollbar&&onTrackerDragStop()},scroll:()=>{boxRef.current&&(autoHideScrollbar&&onTargetScroll(),setTrackerPositionFromScroll(boxRef.current.scrollTop))},dragStart:e=>{startY.current=e.clientY,trackerTop.current=lastTrackerTop.current,autoHideScrollbar&&onTrackerDragStart()},trackerMouseEnter:onTrackerMouseEnter,trackerMouseLeave:onTrackerMouseLeave}},ScrollY=({barHandlers,boxRef,autoHideScrollbar,autoHideScrollbarDelay})=>{const{barRef:barY,trackerVisible:verticalTrackerVisible,trackerRef:trackerY,resize:verticalScrollResize,scroll:verticalScroll,dragStart:onVerticalDragStart,dragging:onVerticalDragging,dragEnd:onVerticalDragEnd,trackerMouseEnter:onVerticalTrackerMouseEnter,trackerMouseLeave:onVerticalTrackerMouseLeave}=useVerticalScrollController(boxRef,autoHideScrollbar,autoHideScrollbarDelay),{onDragStart:onMouseDown}=useDragAndDrop(onVerticalDragStart,onVerticalDragging,onVerticalDragEnd);return react.useImperativeHandle(barHandlers,(()=>({resize:verticalScrollResize,scroll:verticalScroll})),[verticalScrollResize,verticalScroll]),(0,jsx_runtime.jsx)("div",{className:CustomScrollView_CustomScrollView_module.barY,ref:barY,onClick:utils.dG,children:(0,jsx_runtime.jsx)("div",{className:(0,es6.xW)(CustomScrollView_CustomScrollView_module.trackerY,!verticalTrackerVisible&&CustomScrollView_CustomScrollView_module.trackerYHidden),onMouseEnter:autoHideScrollbar?onVerticalTrackerMouseEnter:void 0,onMouseLeave:autoHideScrollbar?onVerticalTrackerMouseLeave:void 0,ref:trackerY,onMouseDown})})};try{ScrollY.displayName="ScrollY",ScrollY.__docgenInfo={description:"",displayName:"ScrollY",props:{barHandlers:{defaultValue:null,description:"",name:"barHandlers",required:!0,type:{name:"MutableRefObject<BarHandlers | null>"}},boxRef:{defaultValue:null,description:"",name:"boxRef",required:!0,type:{name:"MutableRefObject<HTMLDivElement | null>"}},autoHideScrollbar:{defaultValue:null,description:"",name:"autoHideScrollbar",required:!0,type:{name:"boolean"}},autoHideScrollbarDelay:{defaultValue:null,description:"",name:"autoHideScrollbarDelay",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/CustomScrollView/ScrollY.tsx#ScrollY"]={docgenInfo:ScrollY.__docgenInfo,name:"ScrollY",path:"src/components/CustomScrollView/ScrollY.tsx#ScrollY"})}catch(__react_docgen_typescript_loader_error){}var useResizeObserver=__webpack_require__("./src/hooks/useResizeObserver.ts"),useStableCallback=__webpack_require__("./src/hooks/useStableCallback.ts"),useIsomorphicLayoutEffect=__webpack_require__("./src/lib/useIsomorphicLayoutEffect.ts");function hasPointerClassName(hasPointer){switch(hasPointer){case!0:return CustomScrollView_CustomScrollView_module.hasPointerTrue;case!1:return CustomScrollView_CustomScrollView_module.hasPointerFalse;default:return CustomScrollView_CustomScrollView_module.hasPointerNone}}const overscrollBehaviorClassNames={auto:void 0,contain:CustomScrollView_CustomScrollView_module.boxOverscrollBehaviorContain,none:CustomScrollView_CustomScrollView_module.boxOverscrollBehaviorNone},CustomScrollView=({className,children,boxRef:externalBoxRef,windowResize,autoHideScrollbar=!1,autoHideScrollbarDelay,enableHorizontalScroll=!1,onScroll:onScrollProp,getRootRef,overscrollBehavior="auto",...restProps})=>{const{hasPointer}=(0,useAdaptivity.L)(),boxRef=(0,useExternRef.Z)(externalBoxRef),boxContentRef=react.useRef(null),detectScrollDirection=(()=>{const lastScrollLeft=react.useRef(0),lastScrollTop=react.useRef(0);return react.useCallback((event=>{const{scrollTop,scrollLeft}=event.currentTarget;return scrollTop!==lastScrollTop.current?(lastScrollTop.current=scrollTop,"vertical"):scrollLeft!==lastScrollLeft.current?(lastScrollLeft.current=scrollLeft,"horizontal"):null}),[])})(),barYHandlers=react.useRef(null),barXHandlers=react.useRef(null);(({windowResize,onResize,boxContentRef})=>{const{window}=(0,dom.a4)(),resizeCb=(0,useStableCallback.K)(onResize),resizeHandler=(0,useEventListener.M)("resize",resizeCb);(0,useIsomorphicLayoutEffect.E)((()=>{windowResize&&window&&resizeHandler.add(window)}),[windowResize,window]),(0,useResizeObserver.w)(boxContentRef,resizeCb),(0,useIsomorphicLayoutEffect.E)(resizeCb,[])})({windowResize,boxContentRef,onResize:()=>{barYHandlers.current?.resize(),barXHandlers.current?.resize()}});return(0,jsx_runtime.jsxs)("div",{className:(0,es6.xW)(className,CustomScrollView_CustomScrollView_module.host,hasPointerClassName(hasPointer)),ref:getRootRef,...restProps,children:[(0,jsx_runtime.jsx)("div",{className:(0,es6.xW)(CustomScrollView_CustomScrollView_module.box,enableHorizontalScroll&&CustomScrollView_CustomScrollView_module.boxHorizontalEnabled,overscrollBehaviorClassNames[overscrollBehavior]),tabIndex:-1,ref:boxRef,onScroll:event=>{switch(detectScrollDirection(event)){case"horizontal":barXHandlers.current?.scroll();break;case"vertical":barYHandlers.current?.scroll()}onScrollProp?.(event)},children:(0,jsx_runtime.jsx)("div",{ref:boxContentRef,className:CustomScrollView_CustomScrollView_module.boxContent,children})}),(0,jsx_runtime.jsx)(ScrollY,{barHandlers:barYHandlers,boxRef,autoHideScrollbar,autoHideScrollbarDelay}),enableHorizontalScroll&&(0,jsx_runtime.jsx)(ScrollX,{barHandlers:barXHandlers,boxRef,autoHideScrollbar,autoHideScrollbarDelay})]})};try{CustomScrollView.displayName="CustomScrollView",CustomScrollView.__docgenInfo={description:"",displayName:"CustomScrollView",props:{windowResize:{defaultValue:null,description:"",name:"windowResize",required:!1,type:{name:"boolean"}},boxRef:{defaultValue:null,description:"",name:"boxRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onScroll:{defaultValue:null,description:"",name:"onScroll",required:!1,type:{name:"((event: UIEvent<HTMLDivElement, UIEvent>) => void)"}},overscrollBehavior:{defaultValue:{value:"auto"},description:"Поведение overscroll, подробнее можно почитать в [документации](https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior)",name:"overscrollBehavior",required:!1,type:{name:"enum",value:[{value:'"contain"'},{value:'"none"'},{value:'"auto"'}]}},enableHorizontalScroll:{defaultValue:{value:"false"},description:"Включение замены горизонтального скролла\n\n> ⚠️ Важно: На версиях Firefox ниже 64 могут возникнуть проблемы при использовании этого флага, будьте осторожны",name:"enableHorizontalScroll",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},autoHideScrollbar:{defaultValue:{value:"false"},description:"Скрывать ли ползунок скроллбара",name:"autoHideScrollbar",required:!1,type:{name:"boolean"}},autoHideScrollbarDelay:{defaultValue:null,description:"Через какое кол-во миллисекунд ползунок скроллбара скрывается",name:"autoHideScrollbarDelay",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/CustomScrollView/CustomScrollView.tsx#CustomScrollView"]={docgenInfo:CustomScrollView.__docgenInfo,name:"CustomScrollView",path:"src/components/CustomScrollView/CustomScrollView.tsx#CustomScrollView"})}catch(__react_docgen_typescript_loader_error){}}}]);