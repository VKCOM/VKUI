"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[7524],{"./src/components/DateRangeInput/DateRangeInput.stories.tsx":(e,t,n)=>{n.r(t),n.d(t,{Playground:()=>U,__namedExportsOrder:()=>Z,default:()=>K});var a=n("../../node_modules/react/index.js"),l=n("@storybook/preview-api"),r=n("./src/storybook/constants.ts"),o=n("../../node_modules/@vkontakte/icons/dist/es6/16/clear_16.js"),u=n("../../node_modules/@vkontakte/icons/dist/es6/20/calendar_outline_20.js"),s=n("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),i=n("./src/hooks/useAdaptivity.ts"),c=n("./src/hooks/useDateInput.ts"),d=n("./src/hooks/useExternRef.ts"),p=n("./src/lib/callMultiple.ts"),m=n("./src/lib/date.ts"),g=n("./src/components/CalendarRange/CalendarRange.tsx"),b=n("./src/components/FormField/FormField.tsx"),h=n("./src/components/IconButton/IconButton.tsx"),f=n("./src/components/InputLike/InputLike.tsx"),v=n("./src/components/InputLike/InputLikeDivider.tsx"),y=n("./src/components/Popper/Popper.tsx"),D=n("./src/components/Typography/Text/Text.tsx"),R=n("./src/components/VisuallyHidden/VisuallyHidden.tsx"),S=n("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),E=n.n(S),I=n("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),L=n.n(I),O=n("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),x=n.n(O),j=n("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),k=n.n(j),M=n("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),_=n.n(M),w=n("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css"),C={attributes:{class:"vkui-style"}};C.setAttributes=k(),C.insert=x().bind(null,"head"),C.domAPI=L(),C.insertStyleElement=_(),E()(w.Z,C);let P=w.Z&&w.Z.locals?w.Z.locals:void 0;var V=n("./src/components/DateInput/DateInput.module.css");function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=Y({none:P["DateRangeInput--sizeY-none"]},"compact",P["DateRangeInput--sizeY-compact"]),A=function(e){var t=2,n=1,a=0;switch(e){case 0:case 3:a=31;break;case 1:case 4:a=12;break;case 2:case 5:a=2100,n=1900,t=4}return{length:t,min:n,max:a}},F=function(e){var t=["","","","","",""];return(null==e?void 0:e[0])&&(t[0]=String(e[0].getDate()).padStart(2,"0"),t[1]=String(e[0].getMonth()+1).padStart(2,"0"),t[2]=String(e[0].getFullYear()).padStart(4,"0")),(null==e?void 0:e[1])&&(t[3]=String(e[1].getDate()).padStart(2,"0"),t[4]=String(e[1].getMonth()+1).padStart(2,"0"),t[5]=String(e[1].getFullYear()).padStart(4,"0")),t},T=function(e){var t=e.shouldDisableDate,n=e.disableFuture,l=e.disablePast,r=e.value,S=e.onChange,E=e.calendarPlacement,I=e.style,L=e.className,O=e.closeOnChange,x=void 0===O||O,j=e.disablePickers,k=e.getRootRef,M=e.name,_=e.autoFocus,w=e.disabled,C=e.onClick,P=e.onFocus,T=e.prevMonthLabel,B=e.nextMonthLabel,z=e.changeDayLabel,N=e.changeMonthLabel,K=e.changeYearLabel,U=e.changeStartDayLabel,Z=e.changeStartMonthLabel,W=e.changeStartYearLabel,H=e.changeEndDayLabel,Q=e.changeEndMonthLabel,X=e.changeEndYearLabel,$=e.clearFieldLabel,G=e.showCalendarLabel,J=e.prevMonthIcon,ee=e.nextMonthIcon,et=e.disableCalendar,en=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,["shouldDisableDate","disableFuture","disablePast","value","onChange","calendarPlacement","style","className","closeOnChange","disablePickers","getRootRef","name","autoFocus","disabled","onClick","onFocus","prevMonthLabel","nextMonthLabel","changeDayLabel","changeMonthLabel","changeYearLabel","changeStartDayLabel","changeStartMonthLabel","changeStartYearLabel","changeEndDayLabel","changeEndMonthLabel","changeEndYearLabel","clearFieldLabel","showCalendarLabel","prevMonthIcon","nextMonthIcon","disableCalendar"]),ea=a.useRef(null),el=a.useRef(null),er=a.useRef(null),eo=a.useRef(null),eu=a.useRef(null),es=a.useRef(null),ei=a.useCallback(function(e){for(var t=!0,n=!0,a=0;a<=2;a+=1)e[a].length<A(a).length&&(t=!1);for(var l=3;l<=5;l+=1)e[l].length<A(l).length&&(n=!1);var o="".concat(e[0],".").concat(e[1],".").concat(e[2]),u="".concat(e[3],".").concat(e[4],".").concat(e[5]),s="DD.MM.YYYY";if((0,m.BD)(o,s)||(t=!1),(0,m.BD)(u,s)||(n=!1),t||n){var i=Array.isArray(r),c=new Date,d=t?(0,m.Qc)(o,s,i&&(null==r?void 0:r[0])||c):null,p=n?(0,m.Qc)(u,s,i&&(null==r?void 0:r[1])||c):null;d&&p&&(0,m.Ax)(p,d)&&(null==S||S([d,p]))}},[S,r]),ec=a.useMemo(function(){return[ea,el,er,eo,eu,es]},[ea,el,er,eo,eu,es]),ed=(0,c.S)({maxElement:5,refs:ec,autoFocus:_,disabled:w,elementsConfig:A,onChange:S,onInternalValueChange:ei,getInternalValue:F,value:r}),ep=ed.rootRef,em=ed.calendarRef,eg=ed.open,eb=ed.openCalendar,eh=ed.closeCalendar,ef=ed.internalValue,ev=ed.handleKeyDown,ey=ed.setFocusedElement,eD=ed.handleFieldEnter,eR=ed.clear,eS=ed.removeFocusFromField,eE=(0,i.g)().sizeY,eI=void 0===eE?"none":eE,eL=(0,d.Q)(ep,k),eO=a.useCallback(function(e){null==S||S(e),x&&(null==e?void 0:e[1])&&e[1]!==(null==r?void 0:r[1])&&eS()},[S,x,r,eS]);return a.createElement(b.W,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Y(e,t,n[t])})}return e}({style:I,className:(0,s.AK)("regular"!==eI&&q[eI],L),getRootRef:eL,after:r?a.createElement(h.h,{hoverMode:"opacity",onClick:eR},a.createElement(R.T,null,void 0===$?"Очистить поле":$),a.createElement(o.l,null)):a.createElement(h.h,{hoverMode:"opacity",onClick:eb},a.createElement(R.T,null,void 0===G?"Показать календарь":G),a.createElement(u.D,null)),disabled:w,onClick:(0,p.C)(eD,C),onFocus:(0,p.C)(eD,P)},en),a.createElement("input",{type:"hidden",name:M,value:r?"".concat(r[0]?(0,m.WU)(r[0],"DD.MM.YYYY"):""," - ").concat(r[1]?(0,m.WU)(r[1],"DD.MM.YYYY"):""):""}),a.createElement(D.x,{className:V.Z.DateInput__input,onKeyDown:ev},a.createElement(f.E,{length:2,getRootRef:ea,index:0,onElementSelect:ey,value:ef[0],label:void 0===U?"Изменить день начала":U}),a.createElement(v.q,null,"."),a.createElement(f.E,{length:2,getRootRef:el,index:1,onElementSelect:ey,value:ef[1],label:void 0===Z?"Изменить месяц начала":Z}),a.createElement(v.q,null,"."),a.createElement(f.E,{length:4,getRootRef:er,index:2,onElementSelect:ey,value:ef[2],label:void 0===W?"Изменить год начала":W}),a.createElement(v.q,null," — "),a.createElement(f.E,{length:2,getRootRef:eo,index:3,onElementSelect:ey,value:ef[3],label:void 0===H?"Изменить день окончания":H}),a.createElement(v.q,null,"."),a.createElement(f.E,{length:2,getRootRef:eu,index:4,onElementSelect:ey,value:ef[4],label:void 0===Q?"Изменить месяц окончания":Q}),a.createElement(v.q,null,"."),a.createElement(f.E,{length:4,getRootRef:es,index:5,onElementSelect:ey,value:ef[5],label:void 0===X?"Изменить год окончания":X})),eg&&!(void 0!==et&&et)&&a.createElement(y.r,{targetRef:ep,offsetByMainAxis:8,placement:void 0===E?"bottom-start":E},a.createElement(g.a,{value:r,onChange:eO,disablePast:l,disableFuture:n,shouldDisableDate:t,onClose:eh,getRootRef:em,disablePickers:j,prevMonthLabel:void 0===T?"Предыдущий месяц":T,nextMonthLabel:void 0===B?"Следующий месяц":B,changeMonthLabel:void 0===N?"Изменить месяц":N,changeYearLabel:void 0===K?"Изменить год":K,changeDayLabel:void 0===z?"Изменить день":z,prevMonthIcon:J,nextMonthIcon:ee})))};try{T.displayName="DateRangeInput",T.__docgenInfo={description:"",displayName:"DateRangeInput",props:{calendarPlacement:{defaultValue:{value:"bottom-start"},description:"",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"",name:"closeOnChange",required:!1,type:{name:"boolean"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"",name:"showCalendarLabel",required:!1,type:{name:"string"}},changeStartDayLabel:{defaultValue:{value:"Изменить день начала"},description:"",name:"changeStartDayLabel",required:!1,type:{name:"string"}},changeStartMonthLabel:{defaultValue:{value:"Изменить месяц начала"},description:"",name:"changeStartMonthLabel",required:!1,type:{name:"string"}},changeStartYearLabel:{defaultValue:{value:"Изменить год начала"},description:"",name:"changeStartYearLabel",required:!1,type:{name:"string"}},changeEndDayLabel:{defaultValue:{value:"Изменить день окончания"},description:"",name:"changeEndDayLabel",required:!1,type:{name:"string"}},changeEndMonthLabel:{defaultValue:{value:"Изменить месяц окончания"},description:"",name:"changeEndMonthLabel",required:!1,type:{name:"string"}},changeEndYearLabel:{defaultValue:{value:"Изменить год окончания"},description:"",name:"changeEndYearLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"",name:"disableCalendar",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DateRangeType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: DateRangeType) => void)"}},disablePast:{defaultValue:null,description:"",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},weekStartsOn:{defaultValue:null,description:"",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"",name:"changeYearLabel",required:!1,type:{name:"string"}},changeDayLabel:{defaultValue:{value:"Изменить день"},description:"",name:"changeDayLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"after",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"]={docgenInfo:T.__docgenInfo,name:"DateRangeInput",path:"src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"})}catch(e){}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})}return e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,a,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var r=[],o=!0,u=!1;try{for(l=l.call(e);!(o=(n=l.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let K={title:"Forms/DateRangeInput",component:T,parameters:z({},r.tW,r.nB),argTypes:{value:{description:"Используйте startDate и endDate для задания периода",control:!1},startDate:{description:"Дата начала периода",table:{type:{summary:"string"}},control:{type:"date"}},endDate:{description:"Дата окончания периода",table:{type:{summary:"string"}},control:{type:"date"}}}};var U={render:function(){var e=(0,l.useArgs)(),t=N(e,2),n=t[0],r=(n.value,n.startDate),o=n.endDate,u=t[1],s=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e[0],["value","startDate","endDate"]),i=r?new Date(r):null,c=o?new Date(o):null;return a.createElement(T,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}(z({},s),{value:[i,c],onChange:function(e){var t=N(e||[null,null],2),n=t[0],a=t[1];u({startDate:n?new Date(n):null,endDate:a?new Date(a):null})}}))}};U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:"{\n  render: function Render() {\n    const [{\n      value,\n      startDate,\n      endDate,\n      ...args\n    }, updateArgs] = useArgs();\n    const handleDateRangeUpdate: DateRangeInputProps['onChange'] = updatedValue => {\n      const [changedStartDate, changedEndDate] = updatedValue || [null, null];\n      updateArgs({\n        startDate: changedStartDate ? new Date(changedStartDate) : null,\n        endDate: changedEndDate ? new Date(changedEndDate) : null\n      });\n    };\n    const parsedStartDate = startDate ? new Date(startDate) : null;\n    const parsedEndDate = endDate ? new Date(endDate) : null;\n    return <DateRangeInput {...args} value={[parsedStartDate, parsedEndDate]} onChange={handleDateRangeUpdate} />;\n  }\n}",...U.parameters?.docs?.source}}};let Z=["Playground"]},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css":(e,t,n)=>{n.d(t,{Z:()=>u});var a=n("../../node_modules/css-loader/dist/runtime/noSourceMaps.js"),l=n.n(a),r=n("../../node_modules/css-loader/dist/runtime/api.js"),o=n.n(r)()(l());o.push([e.id,".DateRangeInput__input--c8r2o{cursor:text;flex-grow:1;font-variant-numeric:tabular-nums;margin-left:10px;margin-right:14px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;white-space:nowrap;z-index:var(--vkui_internal--z_index_form_field_element)}.DateRangeInput--sizeY-compact--iXDEM .DateRangeInput__input--c8r2o{margin-right:22px}@media (max-height:414.9px),(pointer:fine) and (min-width:768px){.DateRangeInput--sizeY-none--xvAjl .DateRangeInput__input--c8r2o{margin-right:22px}}",""]),o.locals={DateRangeInput__input:"DateRangeInput__input--c8r2o","DateRangeInput--sizeY-compact":"DateRangeInput--sizeY-compact--iXDEM","DateRangeInput--sizeY-none":"DateRangeInput--sizeY-none--xvAjl"};let u=o}}]);