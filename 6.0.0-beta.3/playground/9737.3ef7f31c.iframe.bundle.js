"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[9737],{"../../node_modules/@vkontakte/icons/dist/es6/16/chevron_16.js":(e,t,r)=>{r.d(t,{r:()=>n});var n=(0,r("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8" /></symbol>',12,16,!1,void 0)},"../../node_modules/@vkontakte/icons/dist/es6/24/chevron_24.js":(e,t,r)=>{r.d(t,{P:()=>n});var n=(0,r("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a.998.998 0 0 1 0 1.416l-5.084 5.084a1.002 1.002 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12 4.706 7.706" /></g></symbol>',16,24,!1,void 0)},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/BaseGallery/BaseGallery.module.css":(e,t,r)=>{r.d(t,{Z:()=>o});var n=r("../../node_modules/css-loader/dist/runtime/noSourceMaps.js"),l=r.n(n),a=r("../../node_modules/css-loader/dist/runtime/api.js"),i=r.n(a)()(l());i.push([e.id,".BaseGallery--aehDU{overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.BaseGallery__viewport--I1eNk{height:100%;margin:0;position:relative}.BaseGallery--align-center--JQQn4 .BaseGallery__viewport--I1eNk{margin:0 auto}.BaseGallery__layer--nJ0KW{align-items:stretch;display:flex;height:100%;min-height:100px;width:100%}.BaseGallery--draggable--J_egI .BaseGallery__layer--nJ0KW{cursor:-webkit-grab;cursor:grab}.BaseGallery__layer--nJ0KW:empty{min-height:0}.BaseGallery__slide--N5num{flex:0 0 auto;max-width:100%;overflow:hidden;width:100%}.BaseGallery--custom-width--Cet7r .BaseGallery__slide--N5num{width:auto}.BaseGallery__slide--N5num>*{min-height:100%;width:100%}.BaseGallery__bullets--acbMd{align-items:center;bottom:10px;display:flex;height:6px;justify-content:center;left:0;position:absolute;width:100%}.BaseGallery__bullets--dark--T_Veu .BaseGallery__bullet--YYi6w{background-color:var(--vkui--color_icon_primary_invariably)}.BaseGallery__bullets--light--wkxQq .BaseGallery__bullet--YYi6w{background-color:var(--vkui--color_icon_contrast)}.BaseGallery__bullet--YYi6w{border-radius:50%;height:6px;margin:0 3px;opacity:var(--vkui--opacity_disable_accessibility);width:6px}.BaseGallery__bullet--active--WpJY6{opacity:1}.BaseGallery__arrow--Z8JoJ{opacity:0;position:absolute;top:0}.BaseGallery--aehDU:hover .BaseGallery__arrow--Z8JoJ{opacity:var(--vkui--opacity_disable_accessibility)}.BaseGallery--aehDU .BaseGallery__arrow--Z8JoJ:hover{opacity:1}",""]),i.locals={BaseGallery:"BaseGallery--aehDU",BaseGallery__viewport:"BaseGallery__viewport--I1eNk","BaseGallery--align-center":"BaseGallery--align-center--JQQn4",BaseGallery__layer:"BaseGallery__layer--nJ0KW","BaseGallery--draggable":"BaseGallery--draggable--J_egI",BaseGallery__slide:"BaseGallery__slide--N5num","BaseGallery--custom-width":"BaseGallery--custom-width--Cet7r",BaseGallery__bullets:"BaseGallery__bullets--acbMd","BaseGallery__bullets--dark":"BaseGallery__bullets--dark--T_Veu",BaseGallery__bullet:"BaseGallery__bullet--YYi6w","BaseGallery__bullets--light":"BaseGallery__bullets--light--wkxQq","BaseGallery__bullet--active":"BaseGallery__bullet--active--WpJY6",BaseGallery__arrow:"BaseGallery__arrow--Z8JoJ"};let o=i},"./src/components/Gallery/Gallery.tsx":(e,t,r)=>{r.d(t,{r:()=>Z});var n=r("../../node_modules/react/index.js"),l=r("./src/helpers/math.ts"),a=r("./src/hooks/useIsClient.ts"),i=r("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),o=r("./src/hooks/useAdaptivityHasPointer.ts"),u=r("./src/hooks/useExternRef.ts"),s=r("./src/hooks/useGlobalEventListener.ts"),c=r("./src/lib/dom.tsx"),d=r("./src/lib/useIsomorphicLayoutEffect.ts"),f=r("./src/components/RootComponent/RootComponent.tsx"),m=r("./src/components/ScrollArrow/ScrollArrow.tsx"),y=r("./src/components/Touch/Touch.tsx"),p=function(e){var t=e.containerWidth,r=void 0===t?0:t,n=e.layerWidth,l=void 0===n?0:n,a=e.slides,i=void 0===a?[]:a,o=e.viewportOffsetWidth,u=void 0===o?0:o,s=e.align,c=e.isCenterWithCustomWidth;switch(s){case"left":return r-l;case"right":return u-l;case"center":if(!c||!i.length)return u-(r-u)/2-l;var d=i[i.length-1];return u/2-d.coordX-d.width/2}},v=function(e){var t=e.slides,r=void 0===t?[]:t,n=e.viewportOffsetWidth;if(e.isCenterWithCustomWidth&&r.length){var l=r[0],a=l.width;return(void 0===n?0:n)/2-l.coordX-a/2}return 0},h=r("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),g=r.n(h),b=r("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),w=r.n(b),_=r("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),O=r.n(_),S=r("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),B=r.n(S),G=r("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),E=r.n(G),j=r("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/BaseGallery/BaseGallery.module.css"),k={attributes:{class:"vkui-style"}};k.setAttributes=B(),k.insert=O().bind(null,"head"),k.domAPI=w(),k.insertStyleElement=E(),g()(j.Z,k);let C=j.Z&&j.Z.locals?j.Z.locals:void 0;function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])})}return e}function P(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var R={containerWidth:0,viewportOffsetWidth:0,layerWidth:0,min:0,max:0,slides:[],isFullyVisible:!0},V={animation:void 0,shiftX:0,dragging:!1,deltaX:0,indent:0},D={dark:C["BaseGallery__bullets--dark"],light:C["BaseGallery__bullets--light"]},q=function(e){var t,r=e.bullets,l=void 0!==r&&r,a=e.getRootRef,h=e.children,g=e.slideWidth,b=void 0===g?"100%":g,w=e.slideIndex,_=void 0===w?0:w,O=e.dragDisabled,S=e.onDragStart,B=e.onDragEnd,G=e.onChange,E=e.onPrevClick,j=e.onNextClick,k=e.align,q=void 0===k?"left":k,I=e.showArrows,W=e.getRef,N=e.arrowSize,X=void 0===N?"l":N,M=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["bullets","getRootRef","children","slideWidth","slideIndex","dragDisabled","onDragStart","onDragEnd","onChange","onPrevClick","onNextClick","align","showArrows","getRef","arrowSize"]),L=n.useRef({}),T=n.useRef(R),z=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var a=[],i=!0,o=!1;try{for(l=l.call(e);!(i=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.useState(V),2),F=z[0],J=z[1],K=(0,u.Q)(a),Q=(0,u.Q)(W),Y=(0,c.NG)().window,H=(0,o.K)(),U="custom"===b&&"center"===q,Z=function(e){var t,r,n=(t=T.current.max)!==null&&void 0!==t?t:0,l=(r=T.current.min)!==null&&void 0!==r?r:0;return e<l?l:e>n?n:e},$=function(e){if(T.current.isFullyVisible)return 0;var t=((r=T.current.slides)===null||void 0===r?void 0:r.length)?T.current.slides[e]:null;if(t){var r,n,l=t.coordX,a=t.width;return U?((n=T.current.viewportOffsetWidth)!==null&&void 0!==n?n:0)/2-l-a/2:Z(-1*l)}return 0},ee=function(){var e,t,r=(e=T.current.max)!==null&&void 0!==e?e:0,n=(t=T.current.min)!==null&&void 0!==t?t:0,l=F.shiftX+F.deltaX;return l>r?r+Number((l-r)/3):l<n?n+Number((l-n)/3):l},et=function(){var e,t,r,l,a,i,o,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(a=n.Children.map(h,function(e,t){var r,n,l=L.current["slide-".concat(t)];return{coordX:(r=null==l?void 0:l.offsetLeft)!==null&&void 0!==r?r:0,width:(n=null==l?void 0:l.offsetWidth)!==null&&void 0!==n?n:0}}))!==null&&void 0!==a?a:[],c=(i=(e=K.current)===null||void 0===e?void 0:e.offsetWidth)!==null&&void 0!==i?i:0,d=(o=(t=Q.current)===null||void 0===t?void 0:t.offsetWidth)!==null&&void 0!==o?o:0,f=s.reduce(function(e,t){return t.width+e},0),m=s.length<=T.current.slides.length||((r=T.current.slides[_])===null||void 0===r?void 0:r.coordX)!==((l=s[_])===null||void 0===l?void 0:l.coordX);T.current={containerWidth:c,viewportOffsetWidth:d,layerWidth:f,max:v({slides:s,viewportOffsetWidth:d,isCenterWithCustomWidth:U}),min:p({containerWidth:c,layerWidth:f,slides:s,viewportOffsetWidth:d,isCenterWithCustomWidth:U,align:q}),slides:s,isFullyVisible:f<=c},J(function(e){var t;return P(A({},e),{shiftX:m?$(_):e.shiftX,animation:(t=u.animation)!==null&&void 0!==t?t:e.shiftX===Z(e.shiftX)})})};(0,s.J)(Y,"resize",function(){void 0!==F.animation&&et({animation:!1})}),(0,d.L)(function(){et({animation:!1})},[h,q,b]),(0,d.L)(function(){void 0!==F.animation&&J(function(e){return P(A({},e),{animation:!0,deltaX:0,shiftX:$(null!=_?_:0)})})},[_]);var er=function(e){var t,r=F.deltaX/e.duration*144,n=F.shiftX+F.deltaX+r-((t=T.current.max)!==null&&void 0!==t?t:0),l=F.deltaX<0?1:-1,a=T.current.slides.reduce(function(e,t,r){return Math.abs(T.current.slides[e].coordX+n)<Math.abs(t.coordX+n)?e:r},_);if(a===_){var i=_+l;i>=0&&i<T.current.slides.length&&Math.abs(F.deltaX)>.05*T.current.slides[i].width&&(a=i)}return a},en=!(void 0!==O&&O)&&!T.current.isFullyVisible,el=F.dragging?ee():F.shiftX,ea={WebkitTransform:"translateX(".concat(el,"px)"),transform:"translateX(".concat(el,"px)"),WebkitTransition:F.animation?"-webkit-transform ".concat(.24,"s cubic-bezier(.1, 0, .25, 1)"):"none",transition:F.animation?"transform ".concat(.24,"s cubic-bezier(.1, 0, .25, 1)"):"none"},ei=function(e,t){L.current["slide-".concat(t)]=e},eo=!T.current.isFullyVisible&&F.shiftX<0,eu=!T.current.isFullyVisible&&("left"===q&&T.current.containerWidth-F.shiftX<((t=T.current.layerWidth)!==null&&void 0!==t?t:0)||"left"!==q&&_<T.current.slides.length-1);return n.createElement(f.U,P(A({},M),{baseClassName:(0,i.AK)(C.BaseGallery,"center"===q&&C["BaseGallery--align-center"],"custom"===b&&C["BaseGallery--custom-width"],en&&C["BaseGallery--draggable"]),getRootRef:K}),n.createElement(y.X,{className:C.BaseGallery__viewport,onStartX:function(e){e.originalEvent.stopPropagation(),en&&(null==S||S(e),J(function(e){return P(A({},e),{animation:!1})}))},onMoveX:function(e){en&&(e.originalEvent.preventDefault(),e.isSlideX&&F.deltaX!==e.shiftX&&J(function(t){return P(A({},t),{deltaX:e.shiftX,dragging:e.isSlideX})}))},onEnd:function(e){if(en){var t=e.isSlide?er(e):null!=_?_:0;null==B||B(e,t);var r={animation:!0,dragging:!1,deltaX:0},n=ee();t!==_&&(r.shiftX=n),J(function(e){return A({},e,r)}),t!==_&&(null==G||G(t))}},style:{width:"custom"===b?"100%":b},getRootRef:Q,noSlideClick:!0},n.createElement("div",{className:C.BaseGallery__layer,style:ea},n.Children.map(h,function(e,t){return n.createElement("div",{className:C.BaseGallery__slide,key:"slide-".concat(t),ref:function(e){return ei(e,t)}},e)}))),l&&n.createElement("div",{"aria-hidden":!0,className:(0,i.AK)(C.BaseGallery__bullets,D[l])},n.Children.map(h,function(e,t){return n.createElement("div",{className:(0,i.AK)(C.BaseGallery__bullet,t===_&&C["BaseGallery__bullet--active"]),key:t})})),I&&H&&eo&&n.createElement(m.Q,{className:C.BaseGallery__arrow,direction:"left",onClick:function(e){null==G||G(_-1),null==E||E(e)},size:X}),I&&H&&eu&&n.createElement(m.Q,{className:C.BaseGallery__arrow,direction:"right",onClick:function(e){null==G||G(_+1),null==j||j(e)},size:X}))};try{q.displayName="BaseGallery",q.__docgenInfo={description:"",displayName:"BaseGallery",props:{slideWidth:{defaultValue:{value:"100%"},description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:{value:"0"},description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:{value:"false"},description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:{value:"false"},description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:{value:"l"},description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:{value:"left"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BaseGallery/BaseGallery.tsx#BaseGallery"]={docgenInfo:q.__docgenInfo,name:"BaseGallery",path:"src/components/BaseGallery/BaseGallery.tsx#BaseGallery"})}catch(e){}var I=r("./src/lib/warnOnce.ts"),W={canSlideLeft:!0,canSlideRight:!0,isDraggable:!0},N={viewportOffsetWidth:0,slides:[],isFullyVisible:!0,loopPoints:[],contentSize:0,snaps:[]};function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t,r){for(var n=r,l=[],a=1===e?0:t.length-1,i=1===e?t.length-1:0,o=a;(1===e?o<=i:o>=i)&&n>0;o+=e){var u=t[o].width;n>0&&l.push(o),n-=u}return l}function T(e,t,r,n){var l=r.contentSize,a=r.slides,i=r.snaps,o="start"===t,u=o?-l:l;return e.map(function(e){var t=o?0:-l,r=o?l:0,s=o?i[e]+n+u:i[e]-a[e].width+u-i[0];return{index:e,target:function(e){return e>=s?t:r}}})}var z=(0,r("./src/lib/fx.ts")._)(.8,1);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])})}return e}function K(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Q={dark:C["BaseGallery__bullets--dark"],light:C["BaseGallery__bullets--light"]};(0,I.O)("Gallery");var Y=function(e){var t=e.bullets,r=void 0!==t&&t,l=e.getRootRef,a=e.children,p=e.slideWidth,v=void 0===p?"100%":p,h=e.slideIndex,g=void 0===h?0:h,b=e.dragDisabled,w=void 0!==b&&b,_=e.onDragStart,O=e.onDragEnd,S=e.onChange,B=e.onPrevClick,G=e.onNextClick,E=e.align,j=void 0===E?"left":E,k=e.showArrows,x=e.getRef,A=e.arrowSize,P=void 0===A?"l":A,R=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["bullets","getRootRef","children","slideWidth","slideIndex","dragDisabled","onDragStart","onDragEnd","onChange","onPrevClick","onNextClick","align","showArrows","getRef","arrowSize"]),V=n.useRef({}),D=n.useRef(N),q=(0,u.Q)(l),I=(0,u.Q)(x),X=n.useRef(null),Y=n.useRef(null),H=n.useRef(0),U=n.useRef(0),Z=n.useRef(!1),$=function(){var e=n.useRef([]);return{getAnimateFunction:function(t){return function(){!function(e){var t,r=e.duration,n=e.timing,l=e.draw,a=e.animationQueue,o=void 0===a?[]:a;i.Nq&&requestAnimationFrame(function e(a){t||(t=a);var i=Math.min((a-t)/r,1);if(l(n(i)),i<1){requestAnimationFrame(e);return}o.shift(),o.length>0&&o[0]()})}({duration:240,timing:z,animationQueue:e.current,draw:t})}},addToAnimationQueue:function(t){e.current.push(t)},startAnimation:function(){1===e.current.length&&e.current[0]()}}}(),ee=$.addToAnimationQueue,et=$.getAnimateFunction,er=$.startAnimation,en=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var a=[],i=!0,o=!1;try{for(l=l.call(e);!(i=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.useState(W),2),el=en[0],ea=en[1],ei=(0,c.NG)().window,eo=(0,o.K)(),eu="custom"===v&&"center"===j,es=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];D.current.loopPoints.forEach(function(t){var r=t.target,n=t.index,l=V.current[n];l&&(l.style.transform="translate3d(".concat(r(e),"px, 0, 0)"))}),X.current&&(X.current.style.transform="translate3d(".concat(e,"px, 0, 0)"),X.current.style.transition=t?"transform ".concat(240,"ms cubic-bezier(.1, 0, .25, 1)"):"")},ec=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=D.current,n=r.snaps,l=r.contentSize,a=r.slides;null!==Y.current&&cancelAnimationFrame(Y.current),Y.current=requestAnimationFrame(function(){e>n[0]&&(H.current=-l+n[0],e=H.current+U.current);var r=a[a.length-1].width+a[a.length-1].coordX;e<=-r&&(H.current=Math.abs(U.current)+n[0]),es(e,t)})},ed=function(){if(q.current&&I.current){var e=n.Children.map(a,function(e,t){var r=V.current[t]||{offsetLeft:0,offsetWidth:0};return{coordX:r.offsetLeft,width:r.offsetWidth}})||[],t=q.current.offsetWidth,r=I.current.offsetWidth,l=e.reduce(function(e,t){return t.width+e},0);if("center"===j){var i=(t-e[0].width)/2;e=e.map(function(e){return{width:e.width,coordX:e.coordX-i}})}D.current=K(J({},D.current),{viewportOffsetWidth:r,slides:e,isFullyVisible:l<=t});var o=e.map(function(e,t){return function(e,t,r){if(t.isFullyVisible||!t.slides.length)return 0;var n=t.slides[e];if(n){var l=n.coordX,a=n.width;return r?t.viewportOffsetWidth/2-l-a/2:-1*l}return 0}(t,D.current,eu)}),u=-o[o.length-1]+e[e.length-1].width;"center"===j&&(u+=o[0]),D.current.snaps=o,D.current.contentSize=u,D.current.loopPoints=function(e,t){var r=e.slides,n=e.snaps,l=L(-1,r,n[0]);return M(T(L(1,r,t-n[0]),"start",e,t)).concat(M(T(l,"end",e,t)))}(D.current,t),ea({canSlideLeft:!D.current.isFullyVisible,canSlideRight:!D.current.isFullyVisible,isDraggable:!(w||D.current.isFullyVisible)}),H.current=o[g],Z.current=!0,ec(H.current)}};(0,s.J)(ei,"resize",function(){Z.current&&ed()}),(0,d.L)(function(){if(Z.current){var e=D.current,t=e.snaps,r=e.slides,n=t[g],l=H.current;if(n===t[0]&&H.current<=t[t.length-1]){var a=Math.abs(t[t.length-1])+r[r.length-1].width+l;ee(et(function(e){var i=l+-(e*a*1);es(i),i<=t[t.length-1]-r[r.length-1].width&&requestAnimationFrame(function(){H.current=n,es(t[0])})}))}else n===t[t.length-1]&&H.current===t[0]?(l=n-r[r.length-1].width,ee(function(){requestAnimationFrame(function(){es(n-r[r.length-1].width),et(function(e){es(l+e*r[r.length-1].width)})()})})):ee(function(){var e=Math.abs(n-l),t=l<=n?1:-1;et(function(r){es(l+r*e*t)})()});er(),H.current=n}},[g]),(0,d.L)(function(){ed()},[a,j,v]);var ef=function(e,t){V.current[t]=e},em=el.canSlideLeft,ey=el.canSlideRight,ep=el.isDraggable;return n.createElement(f.U,K(J({},R),{baseClassName:(0,i.AK)(C.BaseGallery,"custom"===v&&C["BaseGallery--custom-width"],ep&&C["BaseGallery--draggable"]),getRootRef:q}),n.createElement(y.X,{className:C.BaseGallery__viewport,onStartX:function(e){e.originalEvent.stopPropagation(),el.isDraggable&&(null==_||_(e),H.current=D.current.snaps[g],U.current=0)},onMoveX:function(e){el.isDraggable&&(e.originalEvent.preventDefault(),e.isSlideX&&U.current!==e.shiftX&&(U.current=e.shiftX,ec(H.current+U.current)))},onEnd:function(e){if(el.isDraggable){var t=g;e.isSlide&&(t=function(e,t,r,n){var l=r+n,a=n<0?1:-1,i=e.reduce(function(t,r,n){return Math.abs(e[t].coordX+l)<Math.abs(r.coordX+l)?t:n},t);if(i===t){var o=t+a;return o>=0&&o<e.length?Math.abs(n)>.05*e[o].width?o:i:a<0?(o+e.length)%e.length:o%e.length}return i}(D.current.slides,g,H.current,U.current)),null==O||O(e,t),t!==g?(H.current=H.current+U.current,null==S||S(t)):ec(D.current.snaps[t],!0)}},style:{width:"custom"===v?"100%":v},getRootRef:I,noSlideClick:!0},n.createElement("div",{className:C.BaseGallery__layer,ref:X},n.Children.map(a,function(e,t){return n.createElement("div",{className:C.BaseGallery__slide,key:"slide-".concat(t),ref:function(e){return ef(e,t)}},e)}))),r&&n.createElement("div",{"aria-hidden":!0,className:(0,i.AK)(C.BaseGallery__bullets,Q[r])},n.Children.map(a,function(e,t){return n.createElement("div",{className:(0,i.AK)(C.BaseGallery__bullet,t===g&&C["BaseGallery__bullet--active"]),key:t})})),k&&eo&&em&&n.createElement(m.Q,{className:C.BaseGallery__arrow,direction:"left",onClick:function(e){null==S||S((g-1+D.current.slides.length)%D.current.slides.length),null==B||B(e)},size:P}),k&&eo&&ey&&n.createElement(m.Q,{className:C.BaseGallery__arrow,direction:"right",onClick:function(e){null==S||S((g+1)%D.current.slides.length),null==G||G(e)},size:P}))};try{Y.displayName="CarouselBase",Y.__docgenInfo={description:"",displayName:"CarouselBase",props:{slideWidth:{defaultValue:{value:"100%"},description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:{value:"0"},description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:{value:"false"},description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:{value:"false"},description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:{value:"l"},description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:{value:"left"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BaseGallery/CarouselBase/CarouselBase.tsx#CarouselBase"]={docgenInfo:Y.__docgenInfo,name:"CarouselBase",path:"src/components/BaseGallery/CarouselBase/CarouselBase.tsx#CarouselBase"})}catch(e){}var H=r("./src/hooks/useTimeout.ts");function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t,r=e.initialSlideIndex,i=e.children,o=e.timeout,u=e.onChange,s=e.bullets,d=e.looped,f=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["initialSlideIndex","children","timeout","onChange","bullets","looped"]),m=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var a=[],i=!0,o=!1;try{for(l=l.call(e);!(i=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.useState(void 0===r?0:r),2),y=m[0],p=m[1],v="number"==typeof f.slideIndex,h=v?(t=f.slideIndex)!==null&&void 0!==t?t:0:y,g=n.useMemo(function(){return n.Children.toArray(i).filter(function(e){return!!e})},[i]),b=g.length,w=(0,a.O)(),_=n.useCallback(function(e){e!==h&&(v||p(e),u&&u(e))},[v,u,h]);!function(e,t,r){var l=(0,H.K)(r,e),a=l.clear,i=l.set,o=(0,c.NG)().document;n.useEffect(function(){return e?i():a()},[e,t,a,i]),n.useEffect(function(){if(o&&e){var t=function(){"visible"===o.visibilityState&&(a(),i()),"hidden"===o.visibilityState&&a()};return o.addEventListener("visibilitychange",t),function(){o.removeEventListener("visibilitychange",t)}}},[o,e,a,i])}(void 0===o?0:o,h,function(){return _((h+1)%b)});var O=b>0?(0,l.uZ)(h,0,b-1):h;if(n.useEffect(function(){u&&O!==h&&u(O),p(O)},[u,O,h]),!w)return null;var S=d?Y:q;return n.createElement(S,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])})}return e}({dragDisabled:v&&!u},f),{bullets:b>0&&s,slideIndex:O,onChange:_}),g)};try{Z.displayName="Gallery",Z.__docgenInfo={description:"",displayName:"Gallery",props:{initialSlideIndex:{defaultValue:{value:"0"},description:"",name:"initialSlideIndex",required:!1,type:{name:"number"}},timeout:{defaultValue:{value:"0"},description:"",name:"timeout",required:!1,type:{name:"number"}},looped:{defaultValue:null,description:"",name:"looped",required:!1,type:{name:"boolean"}},slideWidth:{defaultValue:null,description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:null,description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:null,description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:null,description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:null,description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Gallery/Gallery.tsx#Gallery"]={docgenInfo:Z.__docgenInfo,name:"Gallery",path:"src/components/Gallery/Gallery.tsx#Gallery"})}catch(e){}}}]);