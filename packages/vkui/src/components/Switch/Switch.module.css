.host {
  user-select: none;
  position: relative;
  display: block;
  cursor: pointer;

  /* Добавляем отступы, если пин больше трека */
  padding: calc(
    (var(--vkui--size_switch_pin--regular) - var(--vkui--size_switch_height--regular)) / 2
  );
}

.hostSizeYCompact {
  padding: calc(
    (var(--vkui--size_switch_pin--compact) - var(--vkui--size_switch_height--compact)) / 2
  );
}

@media (--sizeY-compact) {
  .hostSizeYNone {
    padding: calc(
      (var(--vkui--size_switch_pin--compact) - var(--vkui--size_switch_height--compact)) / 2
    );
  }
}

.hostDisabled {
  cursor: default;
}

.pseudo {
  position: relative;
  display: block;
  box-sizing: border-box;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  -webkit-tap-highlight-color: transparent;
}

/**
 * Пин
 */
.pseudo::before {
  position: absolute;
  content: '';
  border-radius: 50%;
  box-sizing: border-box;
  background: var(--vkui--color_icon_contrast_secondary);
  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24);

  /* Делаем пин по центру */
  inset-block-start: calc(
    (var(--vkui--size_switch_height--regular) - var(--vkui--size_switch_pin--regular)) / 2
  );
  inset-inline-start: calc(
    (var(--vkui--size_switch_height--regular) - var(--vkui--size_switch_pin--regular)) / 2
  );
  inline-size: var(--vkui--size_switch_pin--regular);
  block-size: var(--vkui--size_switch_pin--regular);
}

.hostSizeYCompact .pseudo::before {
  inset-block-start: calc(
    (var(--vkui--size_switch_height--compact) - var(--vkui--size_switch_pin--compact)) / 2
  );
  inset-inline-start: calc(
    (var(--vkui--size_switch_height--compact) - var(--vkui--size_switch_pin--compact)) / 2
  );
  inline-size: var(--vkui--size_switch_pin--compact);
  block-size: var(--vkui--size_switch_pin--compact);
}

@media (--sizeY-compact) {
  .hostSizeYNone .pseudo::before {
    inset-block-start: calc(
      (var(--vkui--size_switch_height--compact) - var(--vkui--size_switch_pin--compact)) / 2
    );
    inset-inline-start: calc(
      (var(--vkui--size_switch_height--compact) - var(--vkui--size_switch_pin--compact)) / 2
    );
    inline-size: var(--vkui--size_switch_pin--compact);
    block-size: var(--vkui--size_switch_pin--compact);
  }
}

.self:checked + .pseudo::before {
  background: var(--vkui--color_icon_accent);
  transform: translateX(
    calc(var(--vkui--size_switch_width--regular) - var(--vkui--size_switch_height--regular))
  );
}

/**
 * Трек
 */
.pseudo::after {
  content: '';
  display: block;
  background: var(--vkui--color_icon_tertiary_alpha);
  border-radius: calc(var(--vkui--size_switch_width--regular) / 2);
  inline-size: var(--vkui--size_switch_width--regular);
  block-size: var(--vkui--size_switch_height--regular);
}

.hostSizeYCompact .pseudo::after {
  border-radius: calc(var(--vkui--size_switch_width--compact) / 2);
  inline-size: var(--vkui--size_switch_width--compact);
  block-size: var(--vkui--size_switch_height--compact);
}

@media (--sizeY-compact) {
  .hostSizeYNone .pseudo::after {
    border-radius: calc(var(--vkui--size_switch_width--compact) / 2);
    inline-size: var(--vkui--size_switch_width--compact);
    block-size: var(--vkui--size_switch_height--compact);
  }
}

.self:checked + .pseudo::after {
  opacity: 0.48;
  background: var(--vkui--color_icon_accent);
}

.hostSizeYCompact .self:checked + .pseudo::before {
  transform: translateX(
    calc(var(--vkui--size_switch_width--compact) - var(--vkui--size_switch_height--compact))
  );
}

@media (--sizeY-compact) {
  .hostSizeYNone .self:checked + .pseudo::before {
    transform: translateX(
      calc(var(--vkui--size_switch_width--compact) - var(--vkui--size_switch_height--compact))
    );
  }
}

.self[disabled] + .pseudo {
  opacity: var(--vkui--opacity_disable);
}

/**
 * Пин
 */
.hostIos .pseudo::before {
  background: var(--vkui_internal--white);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15), 0 3px 1px rgba(0, 0, 0, 0.06),
    inset 0 0 0 0.5px rgba(0, 0, 0, 0.04);
}

.hostIos .self:checked + .pseudo::before {
  background: var(--vkui_internal--white);
}

/**
 * Трек
 */
.hostIos .pseudo::after {
  background: var(--vkui--color_track_background);
}

.hostIos .self:checked + .pseudo::after {
  opacity: 1;
}

/**
 * [a11y]
 * add animation for browsers that support prefers-reduced-motion
 * so that users with vestibular motion disorders have no problem
 * navigating accessible vkui apps via keyboard
 */
@media (prefers-reduced-motion: no-preference) {
  .pseudo::after {
    transition: background-color 0.1s ease;
  }

  .pseudo::before {
    transition: transform 0.1s ease;
  }

  .hostIos .pseudo::after {
    transition: background-color 0.2s ease;
  }

  .hostIos .pseudo::before {
    transition: transform 0.2s cubic-bezier(0.36, -0.24, 0.26, 1.32);
  }
}

/**
 * CMP:
 * SimpleCell
 */
/* stylelint-disable-next-line selector-pseudo-class-disallowed-list */
:global(.vkuiInternalSimpleCellAfter) > .host {
  margin-inline-start: 12px;
}
