<Overview>

# DateInput [tag:component]

Компонент для поля даты и времени. Позволяет пользователю вводить дату как вручную, так и выбирать значение через календарь.

</Overview>

<Playground style={{ maxWidth: 200 }}>
  ```jsx
  <DateInput accessible />
  ```
</Playground>

## Применение компонента

> Данный компонент предназначен для использования на планшетах и десктопах.
> При использовании на мобильных устройствах работа компонента не гарантируется.

Данный компонент представляет собой поле формы с возможностью вызова календаря.

Если вам нужно поле ввода диапазона дат (со всплывающим календарём), то используйте компонент [`DateRangeInput`](/components/date-range-input).

Если вам нужен отдельный компонент календаря для выбора даты и времени, то используйте [`Calendar`](/components/calendar).

## Режим работы

Компонент поддерживает работу как в неконтролируемом режиме, так и контролируемом. Это стандартное поведение
React-компонентов, прочитать про это можно в [документации React](https://react.dev/reference/react-dom/components/input#controlling-an-input-with-a-state-variable).

Для использования неконтролируемого режима достаточно просто _не_ передавать `value` или передавать `defaultValue`, если
требуется задать значение по умолчанию.
Для контролируемого режима используйте связку свойств `value`/`onChange` для задания значения и его изменения.

```jsx
// Неконтролируемое состояние
<DateInput defaultValue={new Date()} />;

// Контролируемое состояние
const [date, setDate] = React.useState(new Date());

<DateInput value={date} onChange={setDate} />;
```

## Состояния

### `disabled`

Свойство `disabled` блокирует взаимодействие с компонентом и добавляет визуальную индикацию недоступности.

<Playground style={{ maxWidth: 200 }}>
  ```jsx
  <DateInput defaultValue={new Date()} disabled />
  ```
</Playground>

## Валидация

Свойство `status` используется для визуализации валидации компонента - некорректности заполненного поля (значение `"error"`)
или успешной валидации (значение `"valid"`).

> Если вы используете `DateInput` вместе с [`FormItem`](/components/form-item), вам достаточно указать свойство `status` только у
> [`FormItem`](/components/form-item).

<Playground style={{ maxWidth: 200 }}>
  ```jsx
  <DateInput status="error" defaultValue={new Date()} />
  <DateInput status="valid" defaultValue={new Date()} />
  ```
</Playground>

## Локализация

Компонент поддерживает настройку текстов через `changeMonthLabel`, `changeYearLabel` и остальные `*Label` свойства.

> Название месяцев и дней недели определяется исходя из значения `locale` в `ConfigProvider`.

## Тестирование (e2e) [#e2e]

Для тестирования компонента можно использовать следующие `data-testid` атрибуты:

- `dayFieldTestId` — поле ввода дня;
- `monthFieldTestId` — поле ввода месяца;
- `yearFieldTestId` — поле ввода года;
- `hourFieldTestId` — поле ввода часа;
- `minuteFieldTestId` — поле ввода минут.

## Доступность (a11y) [#a11y]

При использовании компонента убедитесь, что все текстовые метки
(`changeMonthLabel`, `changeYearLabel` и остальные `*Label` свойства) корректно описывают действия для пользователей скринридеров.

Компонент обеспечивает базовую доступность, но по умолчанию (в версии `v7`) компонент всё ещё сложно использовать пользователям
ассистивных технологий. Мы доработали компонент так, чтобы сделать его доступным, но это потребовало ломающих изменений
в визуальном поведении компонента.

Новое, доступное поведение можно включить с помощью нового свойства `accessible`.
Вот список изменений которые отличают поведение со свойством `accessible` от поведения по умолчанию:

- иконка календаря видна постоянно. Раньше она была видна, только если в `DateInput` нет значения;
- календарь открывается только по клику по иконке календаря, по клику на поле ввода и нажатию клавиши `<Space>`,
  если `DateInput` в фокусе. Раньше он открывался сразу при фокусе на `DateInput`;
- при открытии календарь получает фокус. При закрытии календаря фокус возвращается на `DateInput`. Если нужно
  отключить это поведение, используйте свойство `disableFocusTrap`. Если нужно больше контроля над тем, куда возвращать фокус,
  используйте свойство `restoreFocus`.

> Настоятельно рекомендуем включить режим доступности через свойство `accessible`,
> чтобы сделать `DateInput` полностью доступным. В `v8` режим `accessible` будет включен по умолчанию.

Из-за особенности реализации `DateInput`, если вкладывать его внутрь `label`, или связывать `label` и `DateInput` через `htmlFor`,
то по клику на `label` фокус будет попадать на `DateInput`, но текст `label` скринридером зачитываться в момент фокуса не будет.
Рекомендуем дублировать текст `label` в `DateInput`, передавая в `DateInput` текст через свойство `aria-label`.

```jsx
<label>
  День рождения
  <DateInput aria-label="День рождения" />
</label>

<label htmlFor="date"> День рождения</label>
<DateInput id="date" aria-label="День рождения" />

<FormItem top="День рождения" htmlFor="date">
  <DateInput id="date" aria-label="День рождения" />
</FormItem>
```
