<Overview>

# CustomSelect

Компонент для выбора значения из выпадающего списка. Поддерживает поиск по опциям, кастомный рендеринг опций и различные режимы работы (контролируемый/неконтролируемый).

</Overview>

> Важно: для отображения невыбранного состояния нужно использовать `value=null` вместо `undefined`.
>
> `undefined` ипользуется только для неконтролируемого компонента.

```jsx
<CustomSelect
  options={[
    { value: 0, label: 'Москва' },
    { value: 1, label: 'Санкт-Петербург' },
    { value: 2, label: 'Новосибирск' },
  ]}
/>
```

## CustomSelectOption

```jsx
<CustomSelectOption selected>Иван Иванов</CustomSelectOption>
```

Универсальный компонент для отрисовки одного из значений в выпадающем списке.
Помимо `CustomSelect` используется и в `ChipsSelect`.

### Вложенные CustomSelectOption

Для реализации многоуровневых `CustomSelectOption` используйте свойство `hierarchy`,
которое позволяет создать нужный отступ в зависимости от уровня вложенности.

```jsx
<CustomSelectOption hierarchy={3}>Файл 1</CustomSelectOption>
```

## Тестирование (e2e) [#e2e]

Для поиска компонента и его элементов на странице cуществует ряд вспомогательных свойств:

По умолчанию все `data-*` атрибуты попадают на `<input>` компонента, это значит, что при передаче
`data-testid` или `data-test-id` идентификатор попадёт `<input>`.
Доступ к полю ввода может быть полезен для:

- получения текста, введённого пользователем при поиске опций, в режиме `searchable`;
- получения информации о наличии фокуса на компоненте;
- симуляции работы с компонентом с клавиатуры.

Используйте `labelTextTestId`:

- для симуляции работы с компонентом с помощью мыши, тач-устройства;
- для получения текста выбранной в данный момент опции.

Для взаимодействия с кнопкой очистки состояния компонента, которая появляется,
если `CustomSelect` имеет свойство `searchable` и пользователь выбрал опцию, используйте свойство `clearButtonTestId`.

`CustomSelect` внутри себя хранит невидимый `<select>`, для того, чтобы `CustomSelect` можно было использовать внутри формы.
Для получения доступа к `<select>` используйте свойство `nativeSelectTestId`. Полезно для доступа к значению `value`,
выбранной в данный момент опции.

Все перечисленные выше свойства устанавливают аттрибут `data-testid` у соответствующих элементов. Учитывайте это при построении селекторов.

## Доступность (a11y)

Следуйте рекомендациям из раздела [Цифровая доступность компонента `Select`](/docs/components/select#a11y).
