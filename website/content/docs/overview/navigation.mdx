<Overview>
# Навигация

Каждое VKUI-приложение – это набор экранов с двумя типами переходов между ними.
Библиотека предоставляет только компоненты, отвечающие за визуальную составляющую.
Для непосредственной маршрутизации со сменой URL, воспользуйтесь специальными библиотеками для
роутинга (например, `react-router`).

</Overview>

> Структура экранов должна быть постоянной и не должна меняться в ходе работы приложения.
> То есть нельзя на лету добавлять и удалять `Panel` или `View`. Нельзя так же менять `id` у `Panel` или `View`.
>
> Структура – это _декларация_ приложения.
> Единственный способ для перехода между `Panel` в пределах `View`, `View` в пределах `Root`, `Root` или `View` в пределах `Epic` -
> это обновление свойств `activePanel`, `activeView` и `activeStory` соответственно.

## Навигационные слои

Экраны с контентом (навигационные слои) в библиотеке VKUI представлены несколькими компонентами:

- [`Panel`](/docs/components/panel) - минимальный навигационный слой, представляющий собой страницу с контентом;
- [`View`](/docs/components/view) - позволяет создавать коллекцию компонентов `Panel`;
- [`Root`](/docs/components/root) - позволяет создавать коллекцию компонентов `View`;
- [`Epic`](/docs/components/epic) - позволяет создавать либо коллекцию компонентов `Root`, либо коллекцию `View`.

Минимально вам может понадобиться только два навигационных слоя - несколько `Panel` с контентом и один `View` их объединяющий.
Используйте данные компоненты для создания _последовательной_ навигации, где экраны связаны иерархически.
Например, экран "Настройки" с возможностью перейти на экраны "Уведомления" и "Конфиденциональность и безопасность".

Если в вашем приложении структура более сложная и существуют различные пользовательские сценарии,
то создавайте несколько `View`, объединенных компонентом `Root`.
Используйте данные компоненты для создания _независимых_ разделов. Например, один компонент `View` может содержать
экраны с профилем пользователя и сопутствующими разделами, а другой компонент `View` содержит страницы с настройкой
приложения.

Примером использования `Epic` может являться мобильное приложение `VK` на android и iOS.
Внизу располагается панель с иконками, которая позволяет переключать различные `View` или `Root`.

Основное отличие в использовании коллекции `Panel` и коллекции `View` заключается в анимации смены этих слоёв,
в остальном деление на экраны остаётся на ваше усмотрение.

## Анимации перехода между слоями

Смена различных `Panel` внутри `View` и различных `View` внутри `Root` происходит с платформозависимыми анимациями
(актуально только для мобильных устройств).

Так, на платформе iOS анимация смены `Panel` внутри `View` происходит в горизонтальной оси (так как навигация
подразумевается _последовательной_), а анимация смены `View` внутри `Root` по вертикальной оси (навигация
подразумевается _независимой_ и сигнализирует о смене контекста).

Смена `Root` или `View` внутри `Epic` происходит без анимации в любом случае.

Отключить любые анимации можно с помощью свойства `transitionMotionEnabled={false}` в компоненте [`ConfigProvider`](/docs/components/config-provider).

> **Авторы [мини-приложений ВКонтакте](https://dev.vk.com/mini-apps/overview), обратите внимание!**
>
> Вашему приложению доступна почти вся площадь экрана, поэтому для корректной работы навигации:
>
> - Используйте компонент [`PanelHeader`](/docs/components/panel-header) на каждом экране приложения.
>   Он должен содержать название приложения и значок "Назад" на тех экранах, где тот требуется.
> - Не занимайте правый верхний угол `PanelHeader` — это место зарезервировано для нативного бара с кнопками "Меню" и "Закрыть",
>   который отображается всегда (для этого передавайте `hasCustomPanelHeaderAfter` в `ConfigProvider`).
> - Используйте стилизованный под платформу значок "Назад". Для этого применяйте компонент [`PanelHeaderBack`](/docs/components/panel-header-button#panelheaderback).
>
> На устройствах с android нажатие аппаратной кнопки "Назад" вызывает в `WebView` событие `history.back`.
> По нажатию этой кнопки официальное приложение ВКонтакте сделает возврат на предыдущую страницу вашего приложения или закроет его, если вернуться невозможно.
> Поэтому для корректной навигации необходимо обрабатывать нажатие в мини-приложении и реализовывать роутинг.
> Например, при помощи библиотеки `react-router`.
