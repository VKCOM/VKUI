import{r as o,aJ as ae,aK as te,j as n,h as ve,A as ne,s as Ee,K as H,a1 as Le,a0 as He,l as Ke,aq as le,aj as ze,ar as Ye,R as Oe}from"./iframe-7s0T-F6L.js";import{u as Ue,N as Ze,n as $e,s as Ge,d as Je,i as q,C as We,c as Qe,a as Xe,b as eu}from"./CalendarHeader-CJ2eXZuQ.js";import{u as uu}from"./useEnsuredControl-yAfZICsK.js";import{c as au}from"./callMultiple-ChqatQlo.js";import{B as tu}from"./Button-DBxYkQfv.js";import{C as De}from"./CustomSelect-CrjvJvEm.js";const nu="_host_vitji_1",lu="_host__withoutDone_vitji_6",su="_picker_vitji_10",ou="_divider_vitji_14",ru="_button_vitji_20",b={host:nu,host__withoutDone:lu,picker:su,divider:ou,button:ru},ye=()=>!0,se=[];for(let e=0;e<24;e+=1)se.push({value:e,label:String(e).padStart(2,"0")});const oe=[];for(let e=0;e<60;e+=1)oe.push({value:e,label:String(e).padStart(2,"0")});const he=(e,l)=>{const f=Number(e);return!isNaN(f)&&l.some(i=>i.value===f)},re=({value:e,onChange:l,onDoneButtonClick:f,changeHoursLabel:i,changeMinutesLabel:K,isDayDisabled:D,doneButtonText:z="Готово",doneButtonDisabled:Y=!1,doneButtonShow:_=!0,minutesTestId:O,hoursTestId:U,doneButtonTestId:Z,DoneButton:$})=>{const C=o.useRef(null),I=o.useRef(null),F=o.useRef(null),M=D?se.map(u=>({...u,disabled:D(ae(e,u.value),!0)})):se,x=D?oe.map(u=>({...u,disabled:D(te(e,u.value),!0)})):oe,T=(u,s,p)=>{const y=u.target.value.replace(/\D/g,"");u.target.value=y,s(y)&&(l==null||l(p(e,Number(y))))},G=u=>{T(u,s=>he(s,M),ae)},J=u=>{T(u,s=>he(s,x),te)},W=o.useCallback((u,s)=>l==null?void 0:l(ae(e,Number(s))),[l,e]),Q=o.useCallback((u,s)=>l==null?void 0:l(te(e,Number(s))),[l,e]),c=u=>{var P;if(Ee(u)!==H.ENTER)return;const p=[C,I,F].filter(v=>!!v.current),N=p.findIndex(v=>v.current===u.target)+1;if(N>=p.length)return;const k=p[N];k.current&&(u.preventDefault(),(P=k.current)==null||P.focus())},A=o.useCallback((u,s)=>{s&&u.key==="Escape"&&u.stopPropagation()},[]),w=au(c,A),X=()=>{const u=$??tu;return n.jsx(u,{mode:"secondary",onClick:f,size:"l",getRootRef:F,onKeyDown:c,disabled:Y,"data-testid":Z,children:z})};return n.jsxs("div",{className:ve(b.host,!_&&b.host__withoutDone),children:[n.jsx("div",{className:b.picker,children:n.jsx(ne,{sizeY:"compact",children:n.jsx(De,{value:e.getHours(),options:M,onChange:W,forceDropdownPortal:!1,searchable:!0,filterFn:ye,onInputChange:G,onInputKeyDown:w,getSelectInputRef:C,"aria-label":i,"data-testid":U})})}),n.jsx("div",{className:b.divider,children:":"}),n.jsx("div",{className:b.picker,children:n.jsx(ne,{sizeY:"compact",children:n.jsx(De,{value:e.getMinutes(),options:x,onChange:Q,forceDropdownPortal:!1,searchable:!0,filterFn:ye,onInputChange:J,getSelectInputRef:I,onInputKeyDown:w,"aria-label":K,"data-testid":O})})}),_&&n.jsx("div",{className:b.button,children:n.jsx(ne,{sizeY:"compact",children:X()})})]})};try{re.displayName="CalendarTime",re.__docgenInfo={description:"",displayName:"CalendarTime",props:{value:{defaultValue:null,description:"Отображаемая дата.",name:"value",required:!0,type:{name:"Date"}},changeHoursLabel:{defaultValue:null,description:"Текст выпадающего списка с выбором часов. Делает его доступным для ассистивных технологий.",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:null,description:"Текст выпадающего списка с выбором минут. Делает его доступным для ассистивных технологий.",name:"changeMinutesLabel",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Обработчик изменения времени.",name:"onChange",required:!1,type:{name:"((value: Date) => void)"}},isDayDisabled:{defaultValue:null,description:"Функция для проверки блокировки выбора даты и времени.",name:"isDayDisabled",required:!1,type:{name:"((day: Date, withTime?: boolean) => boolean)"}},hoursTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора часа в календаре.",name:"hoursTestId",required:!1,type:{name:"string"}},minutesTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора минут в календаре.",name:"minutesTestId",required:!1,type:{name:"string"}},doneButtonTestId:{defaultValue:null,description:'Передает атрибут `data-testid` для кнопки "Готово" в календаре.',name:"doneButtonTestId",required:!1,type:{name:"string"}},DoneButton:{defaultValue:null,description:'Кастомное отображение кнопки `"Done"`.',name:"DoneButton",required:!1,type:{name:"ComponentType<ButtonProps>"}},doneButtonText:{defaultValue:{value:"Готово"},description:'Текст отображаемый в кнопке `"Done"`.',name:"doneButtonText",required:!1,type:{name:"string"}},doneButtonShow:{defaultValue:{value:"true"},description:'Управление отображением кнопки `"Done"`.',name:"doneButtonShow",required:!1,type:{name:"boolean"}},doneButtonDisabled:{defaultValue:{value:"false"},description:'Блокировка взаимодействия с кнопкой "Done".',name:"doneButtonDisabled",required:!1,type:{name:"boolean"}},onDoneButtonClick:{defaultValue:null,description:'Обработки нажатия на кнопку `"Done"`.',name:"onDoneButtonClick",required:!1,type:{name:"(() => void)"}}}}}catch{}const iu="_host_1izce_1",du="_time_1izce_13",cu="_header_1izce_21",pu="_sizeS_1izce_25",L={host:iu,time:du,header:cu,sizeS:pu},be=({getRootRef:e,value:l,defaultValue:f,onChange:i,disablePast:K,disableFuture:D,shouldDisableDate:z,onDoneButtonClick:Y,enableTime:_=!1,doneButtonText:O,doneButtonDisabled:U,doneButtonShow:Z,DoneButton:$,weekStartsOn:C=1,disablePickers:I,"aria-label":F="Календарь",changeHoursLabel:M="Изменить час",changeMinutesLabel:x="Изменить минуту",prevMonthLabel:T="Предыдущий месяц",nextMonthLabel:G="Следующий месяц",changeMonthLabel:J="Изменить месяц",changeYearLabel:W="Изменить год",showNeighboringMonth:Q,size:c="m",viewDate:A,onHeaderChange:w,onNextMonth:X,onPrevMonth:u,prevMonthIcon:s,nextMonthIcon:p,prevMonthProps:y,nextMonthProps:N,dayProps:k,listenDayChangesForUpdate:P,renderDayContent:v,minDateTime:E,maxDateTime:V,timezone:S,minutesTestId:Ve,hoursTestId:ge,doneButtonTestId:Be,prevMonthButtonTestId:qe,nextMonthButtonTestId:_e,monthDropdownTestId:Ce,yearDropdownTestId:Ie,dayTestId:Fe,...Me})=>{const xe=o.useCallback(a=>{i==null||i(Le(a,S)||void 0)},[i,S]),[ie,ee]=uu({value:l,defaultValue:f,onChange:xe}),t=o.useMemo(()=>He(ie,S),[S,ie]),{viewDate:d,setViewDate:j,setPrevMonth:Te,setNextMonth:Ae,focusedDay:h,setFocusedDay:g,isDayFocused:we,isDayDisabled:de,isMonthDisabled:Ne,isYearDisabled:ke}=Ue({value:t,disableFuture:D,disablePast:K,shouldDisableDate:z,onHeaderChange:w,onNextMonth:X,onPrevMonth:u,minDateTime:E,maxDateTime:V}),[m,R]=o.useState();Ke(()=>{t&&j(t)},[t]);const Pe=o.useCallback(a=>{var me,fe;const r=Ee(a);if(r&&Ze.includes(r)){a.preventDefault();const B=$e(h??t,r);B&&!le(B,d)&&j(B),g(B),R(B);return}if(r===H.TAB){g(void 0),R(h);return}(r===H.ENTER||r===H.SPACE)&&ze(a.target)&&(a.preventDefault(),(fe=(me=a.target).click)==null||fe.call(me))},[h,g,R,j,t,d]),Se=o.useCallback(a=>{let r=Ge(a,t);(E||V)&&(r=Je(r,{min:E,max:V})),ee(r)},[t,ee,V,E]),je=o.useCallback(a=>{h&&q(h,a)||(g(a),(!m||!q(a,m))&&R(a))},[m,h,g]),ue=o.useCallback(a=>!!(t&&q(a,t)),[t]),ce=m&&le(m,d),pe=t&&le(t,d),Re=o.useCallback(a=>ce?q(m,a):pe?ue(a):q(Ye(d),a),[m,d,ue,ce,pe]);return n.jsxs(Oe,{"aria-label":F,...Me,baseClassName:ve(L.host,c==="s"&&L.sizeS),getRootRef:e,children:[n.jsx(We,{viewDate:A||d,onChange:j,onNextMonth:Ae,onPrevMonth:Te,disablePickers:I||c==="s",className:L.header,prevMonthLabel:T,nextMonthLabel:G,changeMonthLabel:J,changeYearLabel:W,prevMonthIcon:s,nextMonthIcon:p,prevMonthProps:y,nextMonthProps:N,isMonthDisabled:Ne,isYearDisabled:ke,nextMonthButtonTestId:_e,prevMonthButtonTestId:qe,monthDropdownTestId:Ce,yearDropdownTestId:Ie}),n.jsx(Qe,{viewDate:A||d,value:t,weekStartsOn:C,onKeyDown:Pe,onDayChange:Se,isDayActive:ue,onDayFocus:je,isDayFocused:we,isDayFocusable:Re,isDaySelectionStart:eu,isDaySelectionEnd:Xe,isDayDisabled:de,showNeighboringMonth:Q,size:c,dayProps:k,listenDayChangesForUpdate:P,renderDayContent:v,dayTestId:Fe}),_&&t&&c!=="s"&&n.jsx("div",{className:L.time,children:n.jsx(re,{value:t,onChange:ee,onDoneButtonClick:Y,doneButtonText:O,doneButtonDisabled:U,doneButtonShow:Z,DoneButton:$,changeHoursLabel:M,changeMinutesLabel:x,isDayDisabled:E||V?de:void 0,minutesTestId:Ve,hoursTestId:ge,doneButtonTestId:Be})})]})};try{be.displayName="Calendar",be.__docgenInfo={description:"",displayName:"Calendar",props:{value:{defaultValue:null,description:"Текущая выбранная дата.",name:"value",required:!1,type:{name:"Date | null"}},defaultValue:{defaultValue:null,description:"Начальная дата при монтировании.",name:"defaultValue",required:!1,type:{name:"Date | null"}},disablePast:{defaultValue:null,description:"Запрещает выбор даты в прошлом.\nПрименяется, если не заданы `shouldDisableDate` и `disableFuture`.",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"Запрещает выбор даты в будущем.\nПрименяется, если не задано `shouldDisableDate`.",name:"disableFuture",required:!1,type:{name:"boolean"}},enableTime:{defaultValue:{value:"false"},description:"Включает выбор времени.",name:"enableTime",required:!1,type:{name:"boolean"}},disablePickers:{defaultValue:null,description:"Отключает селекторы выбора месяца/года.",name:"disablePickers",required:!1,type:{name:"boolean"}},changeDayLabel:{defaultValue:null,description:`\`aria-label\` для изменения дня.
@deprecated Будет удалeно в **VKUI v8**.
Использовалось для задания aria-label для контейнера дней в календаре.
Теперь этот контейнер является таблицей (с помощью role="grid") и
в aria-label рендерится текущий открытый в календаре месяц и год.`,name:"changeDayLabel",required:!1,type:{name:"string"}},weekStartsOn:{defaultValue:{value:"1"},description:"День недели, с которого начинается неделя.",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},showNeighboringMonth:{defaultValue:null,description:"Показывать дни соседних месяцев.",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"m"},description:"Размер календаря.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},onChange:{defaultValue:null,description:"Обработчик изменения выбранной даты.",name:"onChange",required:!1,type:{name:"((value?: Date) => void)"}},shouldDisableDate:{defaultValue:null,description:"Функция для проверки запрета выбора даты.",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},viewDate:{defaultValue:null,description:`Дата отображаемого месяца.
При использовании обновление даты должно происходить вне компонента.`,name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Обработчик изменения даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},minDateTime:{defaultValue:null,description:"Минимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"minDateTime",required:!1,type:{name:"Date"}},maxDateTime:{defaultValue:null,description:"Максимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"maxDateTime",required:!1,type:{name:"Date"}},timezone:{defaultValue:null,description:"Часовой пояс для отображения даты.",name:"timezone",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},changeHoursLabel:{defaultValue:{value:"Изменить час"},description:"Текст выпадающего списка с выбором часов. Делает его доступным для ассистивных технологий.",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Изменить минуту"},description:"Текст выпадающего списка с выбором минут. Делает его доступным для ассистивных технологий.",name:"changeMinutesLabel",required:!1,type:{name:"string"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"`aria-label` для кнопки предыдущего месяца.",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"`aria-label` для кнопки следующего месяца.",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"`aria-label` для селектора месяца.",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"`aria-label` для селектора года.",name:"changeYearLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки предыдущего месяца.",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки следующего месяца.",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},prevMonthProps:{defaultValue:null,description:"Дополнительные свойства для кнопки предыдущего месяца.",name:"prevMonthProps",required:!1,type:{name:"ArrowMonthProps"}},nextMonthProps:{defaultValue:null,description:"Дополнительные свойства для кнопки следующего месяца.",name:"nextMonthProps",required:!1,type:{name:"ArrowMonthProps"}},listenDayChangesForUpdate:{defaultValue:null,description:"Следить за изменениями дней для обновления UI.",name:"listenDayChangesForUpdate",required:!1,type:{name:"boolean"}},renderDayContent:{defaultValue:null,description:"Кастомизация отображения содержимого дня.",name:"renderDayContent",required:!1,type:{name:"((day: Date) => ReactNode)"}},dayProps:{defaultValue:null,description:"Дополнительные свойства для элементов дней.",name:"dayProps",required:!1,type:{name:"CalendarDayElementProps"}},DoneButton:{defaultValue:null,description:'Кастомное отображение кнопки `"Done"`.',name:"DoneButton",required:!1,type:{name:"ComponentType<ButtonProps>"}},doneButtonText:{defaultValue:null,description:'Текст отображаемый в кнопке `"Done"`.',name:"doneButtonText",required:!1,type:{name:"string"}},doneButtonShow:{defaultValue:null,description:'Управление отображением кнопки `"Done"`.',name:"doneButtonShow",required:!1,type:{name:"boolean"}},doneButtonDisabled:{defaultValue:null,description:'Блокировка взаимодействия с кнопкой "Done".',name:"doneButtonDisabled",required:!1,type:{name:"boolean"}},onDoneButtonClick:{defaultValue:null,description:'Обработки нажатия на кнопку `"Done"`.',name:"onDoneButtonClick",required:!1,type:{name:"(() => void)"}},dayTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дня в календаре.",name:"dayTestId",required:!1,type:{name:"string | ((day: Date) => string)"}},monthDropdownTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора месяца в заголовке календаря.",name:"monthDropdownTestId",required:!1,type:{name:"string | ((monthIndex: number) => string)"}},yearDropdownTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора года в заголовке календаря.",name:"yearDropdownTestId",required:!1,type:{name:"string | ((year: number) => string)"}},nextMonthButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки перехода к следующему месяцу в заголовке календаря.",name:"nextMonthButtonTestId",required:!1,type:{name:"string"}},prevMonthButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки перехода к предыдущему месяцу в заголовке календаря.",name:"prevMonthButtonTestId",required:!1,type:{name:"string"}},hoursTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора часа в календаре.",name:"hoursTestId",required:!1,type:{name:"string"}},minutesTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора минут в календаре.",name:"minutesTestId",required:!1,type:{name:"string"}},doneButtonTestId:{defaultValue:null,description:'Передает атрибут `data-testid` для кнопки "Готово" в календаре.',name:"doneButtonTestId",required:!1,type:{name:"string"}}}}}catch{}export{be as C};
