import{j as B,r as o,m as su,k as I4,i as w4,K as S}from"./iframe-DDos8QSD.js";import{a as du}from"./useGlobalOnClickOutside-CiSE1t3Q.js";import{d as C4,D as pu}from"./DropdownIcon-CqqFb8dt.js";import{u as Eu,g as B4,a as A4,D as k4,b as P4,c as m4,t as cu,C as fu,r as Fu}from"./useChipsInput-S4OMms3S.js";import{C as mu}from"./CustomSelectDropdown-Da6ydPXD.js";import{C as U4}from"./CustomSelectOption-B3-0gwcs.js";import{F as Du}from"./Footnote-DolN14Rp.js";import{b as Y}from"./type_checkers-CVMjkZjG.js";function L4(u,n){if(u===n)return!0;if(u==null||n==null||!Y(u)&&!Y(n))return u!==u&&n!==n;if(Y(u)&&Y(n)){if(Object.keys(u).length!==Object.keys(n).length)return!1;for(var l in u)if(u.hasOwnProperty(l)&&n.hasOwnProperty(l)){if(!L4(u[l],n[l]))return!1}else return!1;return!0}return!1}const h4="highlight",y4="Ничего не найдено",F4="next",R4="prev",D4=u=>B.jsx(U4,{...u}),J=u=>u&&"actionText"in u,Q=u=>u&&"placeholder"in u,b=u=>!J(u)&&!Q(u);try{D4.displayName="renderOptionDefault",D4.__docgenInfo={description:"",displayName:"renderOptionDefault",props:{description:{defaultValue:null,description:"Добавляет описание под основным блоком.",name:"description",required:!1,type:{name:"ReactNode"}},before:{defaultValue:null,description:"Вставляет элемент в начало блока перед основным контентом.\nНапример, можно передать компонент `Avatar`, `Icon<Name>` или другие изображения.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Вставляет элемент в конец блока после основного контента.\nНапример, можно передать компонент `Avatar`, `Icon<Name>` или другие изображения.",name:"after",required:!1,type:{name:"ReactNode"}},hierarchy:{defaultValue:null,description:"Позволяет создавать вложенность.",name:"hierarchy",required:!1,type:{name:"number"}},selected:{defaultValue:null,description:"Включает состояние выбранного элемента списка.",name:"selected",required:!1,type:{name:"boolean"}},hovered:{defaultValue:null,description:"Включает состояние наведения.",name:"hovered",required:!1,type:{name:"boolean"}},focused:{defaultValue:null,description:"Включает состояние фокуса.",name:"focused",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Блокирует весь блок.\n\n> ⚠️  Важно: если CustomSelectOption используется внутри [Select](https://vkcom.github.io/VKUI/#/Select), [CustomSelect](https://vkcom.github.io/VKUI/#/CustomSelect) или [ChipsSelect](https://vkcom.github.io/VKUI/#/ChipsSelect), то свойство явно должно выставляться только через структуру `options`.\n> Запрещается выставлять `disabled` проп опциям в обход `options`, иначе [CustomSelect](https://vkcom.github.io/VKUI/#/CustomSelect) и [ChipsSelect](https://vkcom.github.io/VKUI/#/ChipsSelect) не будут знать об актуальном состоянии\nопции.",name:"disabled",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}try{J.displayName="isCreateNewOptionPreset",J.__docgenInfo={description:"",displayName:"isCreateNewOptionPreset",props:{value:{defaultValue:null,description:"Значение опции.",name:"value",required:!0,type:{name:"ChipOptionValue"}},label:{defaultValue:null,description:"Отображаемый текст опции.",name:"label",required:!0,type:{name:"ChipOptionLabel"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с оцией.",name:"disabled",required:!1,type:{name:"boolean"}},actionText:{defaultValue:null,description:"",name:"actionText",required:!0,type:{name:"any"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"any"}}}}}catch{}try{Q.displayName="isEmptyOptionPreset",Q.__docgenInfo={description:"",displayName:"isEmptyOptionPreset",props:{actionText:{defaultValue:null,description:"",name:"actionText",required:!0,type:{name:"any"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"any"}},value:{defaultValue:null,description:"Значение опции.",name:"value",required:!0,type:{name:"ChipOptionValue"}},label:{defaultValue:null,description:"Отображаемый текст опции.",name:"label",required:!0,type:{name:"ChipOptionLabel"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с оцией.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}try{b.displayName="isNotServicePreset",b.__docgenInfo={description:"",displayName:"isNotServicePreset",props:{actionText:{defaultValue:null,description:"",name:"actionText",required:!0,type:{name:"any"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"any"}},value:{defaultValue:null,description:"Значение опции.",name:"value",required:!0,type:{name:"ChipOptionValue"}},label:{defaultValue:null,description:"Отображаемый текст опции.",name:"label",required:!0,type:{name:"ChipOptionLabel"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с оцией.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const Cu=({disabled:u,delimiter:n,value:l,defaultValue:r,onChange:A,getOptionLabel:s=B4,getOptionValue:C=A4,getNewOptionData:_=P4,inputValue:h,defaultInputValue:x=m4,onInputChange:g,creatable:d=!1,emptyText:F=y4,filterFn:p=C4,sortFn:k=!1,selectedBehavior:P=h4,options:U=k4,onClose:q,onOpen:I})=>{const{value:w,inputValue:R,onInputChange:$,...L}=Eu({value:l,defaultValue:r,onChange:A,getOptionValue:C,getOptionLabel:s,getNewOptionData:_,inputValue:h,defaultInputValue:x,onInputChange:g,disabled:u,delimiter:n}),[y,Z]=o.useState(!1),[u4,e4]=o.useState(()=>y?N4({value:w,getOptionValue:C,getOptionLabel:s,inputValue:R,emptyText:F,creatable:d,filterFn:p,sortFn:k,options:U,selectedBehavior:P}):[]),[t4,M]=o.useState(0),[N,V]=o.useState(null),W=o.useCallback(O=>{O?I==null||I():q==null||q(),Z(O)},[I,q]),n4=o.useCallback(O=>{$(O,!!d),y||(W(!0),M(0))},[$,d,y,W]);return su(function(){y&&e4(j=>{const G=N4({value:w,getOptionValue:C,getOptionLabel:s,inputValue:R,emptyText:F,creatable:d,filterFn:p,sortFn:k,options:U,selectedBehavior:P});return L4(j,G)?j:G})},[y,w,s,C,R,U,d,P,p,k]),{...L,value:w,inputValue:R,onInputChange:n4,options:u4,opened:y,setOpened:W,focusedOption:N,focusedOptionIndex:t4,setFocusedOption:V,setFocusedOptionIndex:M}};function N4({value:u,getOptionValue:n=A4,getOptionLabel:l=B4,inputValue:r=m4,emptyText:A=y4,creatable:s=!1,sortFn:C=!1,filterFn:_=C4,options:h=k4,selectedBehavior:x=h4}){const g=_?h.filter(F=>_(r,F,l)):h;if(g.length===0)return r!==m4&&typeof s=="string"?[{actionText:s}]:[{placeholder:A}];C&&g.sort((F,p)=>C(F,p,r));const d=cu(g,n,l);if(x==="hide"){const F=u.map(p=>p.value);return d.filter(p=>b(p)?!F.includes(p.value):!1)}return d}const Bu="_host_h3n6h_1",Au="_empty_h3n6h_5",hu="_popDown_h3n6h_12",yu="_popUp_h3n6h_17",Vu="_dropdownIcon_h3n6h_22",vu="_dropdownIconWithOffset_h3n6h_26",T={host:Bu,empty:Au,popDown:hu,popUp:yu,dropdownIcon:Vu,dropdownIconWithOffset:vu},S4=(u=[],n=-1)=>n>=u.length-1?-1:u.findIndex((l,r)=>r>n&&(!b(l)||!l.disabled)),T4=(u=[],n=u.length)=>{let l=-1;if(n<=0)return l;for(let r=n-1;r>=0;r--){let A=u[r];if(!b(A)||!A.disabled){l=r;break}}return l},x4=({id:u,getRootRef:n,className:l,status:r="default",icon:A,onChangeStart:s,options:C,placement:_="bottom",closeAfterSelect:h=!0,selectedBehavior:x=h4,emptyText:g=y4,creatable:d=!1,fetching:F=!1,dropdownAutoWidth:p,forceDropdownPortal:k,noMaxHeight:P=!1,filterFn:U=C4,sortFn:q=!1,dropdownTestId:I,onClose:w,onOpen:R,overscrollBehavior:$,renderDropdown:L,getRef:y,value:Z,defaultValue:u4,inputValue:e4,defaultInputValue:t4,disabled:M,readOnly:N,getOptionValue:V=A4,getOptionLabel:W=B4,getNewOptionData:n4=P4,renderChip:O=Fu,renderOption:j=D4,onChange:G,onFocus:V4,onInputChange:M4,onBlur:v4,onKeyDown:b4,dropdownOffsetDistance:a4=0,allowClearButton:W4,clearButtonTestId:j4,delimiter:H4,...K4})=>{const{value:X,addOptionFromInput:l4,addOption:o4,removeOption:$4,clearOptions:G4,inputRef:X4,inputValue:z,clearInput:r4,onInputChange:z4,options:m,opened:i,setOpened:D,focusedOption:i4,focusedOptionIndex:c,setFocusedOption:s4,setFocusedOptionIndex:v}=Cu({value:Z,defaultValue:u4,onChange:G,getOptionValue:V,getOptionLabel:W,getNewOptionData:n4,inputValue:e4,defaultInputValue:t4,onInputChange:M4,options:C,emptyText:g,creatable:d,filterFn:U,sortFn:q,selectedBehavior:x,onClose:w,onOpen:R,disabled:M,delimiter:H4}),d4=I4(n),Y4=I4(y,X4),[p4,g4]=o.useState(_),J4=o.useCallback(e=>{e.startsWith("top")?g4("top"):e.startsWith("bottom")&&g4("bottom")},[]),H=o.useId(),Q4=c!==null?`${H}-${c}`:void 0,E4=o.useRef(null),Z4=e=>{V4&&V4(e),N||(D(!0),v(null))},uu=e=>{v4&&v4(e),!N&&!e.defaultPrevented&&!d&&e.preventDefault()},c4=o.useRef([]).current,eu=(e,t=!1)=>{const a=E4.current,E=c4[e];if(!E||!a)return;const f=a.offsetHeight,q4=a.scrollTop,K=E.offsetTop,f4=E.offsetHeight;t?a.scrollTop=K-f/2+f4/2:K+f4>f+q4?a.scrollTop=K-f+f4:K<q4&&(a.scrollTop=K)},tu=(e,t)=>{if(e===t)return;const a=m[e];b(a)&&a.disabled||(eu(e),v(e))},O4=(e,t)=>{let a=e===null?-1:e;if(t===F4){const E=S4(m,a);a=E===-1?S4(m):E}else if(t===R4){const E=T4(m,a);a=E===-1?T4(m):E}tu(a,c)},nu=e=>{if(b4&&b4(e),!(e.defaultPrevented||N))switch(e.key){case S.ARROW_UP:case S.ARROW_DOWN:e.preventDefault(),i?O4(c,e.key===S.ARROW_UP?R4:F4):(D(!0),O4(null,F4));break;case S.ENTER:{if(!i)break;if(c!=null){const t=m[c];if(t&&b(t)){e.preventDefault(),s&&s(e,t),o4(t),v(null),r4(),h&&D(!1);break}}d||e.preventDefault();break}case S.ESCAPE:case S.TAB:i&&D(!1)}};o.useEffect(()=>{if(c===null)s4(null);else{const e=m[c];e&&b(e)&&s4(e)}},[m,c,s4]);const au=o.useCallback(()=>{v(null)},[v]),lu=o.useCallback(()=>{D(!1)},[D]);du("mousedown",lu,i?d4:null,i?E4:null);const ou=o.useCallback(e=>{i&&(e.preventDefault(),D(!1))},[i,D]),ru=o.useMemo(()=>{const e=m.map((t,a)=>{const E=`${H}-${a}`;return Q(t)?B.jsx(Du,{className:T.empty,children:t.placeholder},"empty-text"):J(t)?B.jsx(U4,{id:E,hovered:c===a,onMouseDown:()=>l4(z),onMouseEnter:()=>v(a),children:t.actionText},"create-new-option"):B.jsx(o.Fragment,{children:j({id:E,disabled:t.disabled,hovered:i4?V(t)===V(i4):!1,children:t.label,selected:!!X.find(f=>V(f)===V(t)),getRootRef(f){f&&(c4[a]=f)},onMouseDown(f){t.disabled||(s&&s(f,t),f.defaultPrevented||(h&&D(!1),o4(t),r4()))},onMouseEnter(){v(a)}},t)},`${typeof t.value}-${t.value}`)});return L?L({defaultDropdownContent:e}):e},[o4,l4,c4,r4,h,H,i4,c,V,z,s,m,L,j,v,D,X]),iu=o.useMemo(()=>i&&a4===0&&(p4.includes("top")?T.popUp:T.popDown)||void 0,[a4,i,p4]),_4=W4&&(!!X.length||!!z.length);return B.jsxs(B.Fragment,{children:[B.jsx(fu,{...K4,disabled:M,readOnly:N,clearButtonShown:_4,clearButtonTestId:j4,id:u,getRootRef:d4,className:w4(T.host,iu,l),status:r,after:A||B.jsx(pu,{opened:i,onClick:ou,className:w4(T.dropdownIcon,_4&&T.dropdownIconWithOffset)}),value:X,onAddChipOption:l4,onRemoveChipOption:$4,renderChip:O,onClear:G4,getRef:Y4,inputValue:z,onInputChange:z4,onFocus:Z4,onBlur:uu,onKeyDown:nu,role:"combobox","aria-expanded":i,"aria-autocomplete":"list","aria-controls":i?H:void 0,"aria-activedescendant":i?Q4:void 0,"aria-haspopup":"listbox"}),i&&B.jsx(mu,{"data-testid":I,targetRef:d4,placement:p4,scrollBoxRef:E4,onPlacementChange:J4,onMouseLeave:au,fetching:F,autoWidth:p,forcePortal:k,noMaxHeight:P,offsetDistance:a4,overscrollBehavior:$,id:H,role:"listbox","aria-labelledby":u,children:ru})]})};try{x4.displayName="ChipsSelect",x4.__docgenInfo={description:"",displayName:"ChipsSelect",props:{placement:{defaultValue:null,description:"Расположение выпадающего списка.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"bottom"'}]}},fetching:{defaultValue:{value:"false"},description:"Отрисовка Spinner вместо списка опций в выпадающем списке.",name:"fetching",required:!1,type:{name:"boolean"}},closeAfterSelect:{defaultValue:{value:"true"},description:"Закрытие выпадающего списка после выбора элемента.",name:"closeAfterSelect",required:!1,type:{name:"boolean"}},dropdownAutoWidth:{defaultValue:null,description:"Ширина раскрывающегося списка зависит от контента.",name:"dropdownAutoWidth",required:!1,type:{name:"boolean"}},forceDropdownPortal:{defaultValue:null,description:"Принудительно использовать портал.",name:"forceDropdownPortal",required:!1,type:{name:"boolean"}},dropdownTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна.",name:"dropdownTestId",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"Иконка раскрывающегося списка.",name:"icon",required:!1,type:{name:"ReactNode"}},addOnBlur:{defaultValue:null,description:"Добавляет значение в список на событие `onBlur` (использовать вместе с `creatable`).",name:"addOnBlur",required:!1,type:{name:"boolean"}},noMaxHeight:{defaultValue:{value:"false"},description:"Отключает максимальную высоту по умолчанию.",name:"noMaxHeight",required:!1,type:{name:"boolean"}},renderOption:{defaultValue:{value:`(props: CustomSelectOptionProps): React.ReactNode => (
  <CustomSelectOption {...props} />
)`},description:"Функция для отрисовки кастомной опции в выпадающем списке.",name:"renderOption",required:!1,type:{name:"((props: CustomSelectOptionProps, option: Option) => ReactNode)"}},renderDropdown:{defaultValue:null,description:"Рендер-проп для кастомного рендера содержимого дропдауна.\nВ `defaultDropdownContent` содержится список опций.",name:"renderDropdown",required:!1,type:{name:"(({ defaultDropdownContent, }: { defaultDropdownContent: ReactNode; }) => ReactNode)"}},onChangeStart:{defaultValue:null,description:"Событие срабатывающее перед `onChange`.",name:"onChangeStart",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>, option: Option) => void)"}},dropdownOffsetDistance:{defaultValue:{value:"0"},description:"Отступ от выпадающего списка.",name:"dropdownOffsetDistance",required:!1,type:{name:"number"}},allowClearButton:{defaultValue:null,description:"Если `true`, то справа будет отображаться кнопка для очистки значения.",name:"allowClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"Ссылка на корневой элемент.",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},renderChip:{defaultValue:{value:"Используется [Chip](#/Chip)"},description:"Render prop функция для возврата своего компонента.",name:"renderChip",required:!1,type:{name:"RenderChip<Option>"}},clearButtonShown:{defaultValue:null,description:"Показывать ли кнопку для очистки значения.",name:"clearButtonShown",required:!1,type:{name:"boolean"}},clearButtonTestId:{defaultValue:null,description:"(e2e) testId кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},ClearButton:{defaultValue:null,description:"Кастомная кнопка для очистки значения.\nДолжна принимать обязательное свойство `onClick`.",name:"ClearButton",required:!1,type:{name:"ComponentType<FormFieldClearButtonProps>"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Выбранные опции.",name:"value",required:!1,type:{name:"Option[]"}},inputValue:{defaultValue:null,description:"Значение поля ввода.",name:"inputValue",required:!1,type:{name:"string"}},onInputChange:{defaultValue:null,description:"Обработчик изменения значения в поле ввода.",name:"onInputChange",required:!1,type:{name:"OnInputChange"}},delimiter:{defaultValue:null,description:`Символ или строка, которая будет использоваться как разделитель для автоматического создания опций из текста, введенного в поле ввода.
Принимает:
- \`string\` - простая строка
- \`RegExp\` - регулярное выражение
- \`string[]\` - массив строк, по которым нужно разелять ввод.

Работает в двух сценариях:
1. При вводе разделителя - текст до разделителя автоматически преобразуется в новую опцию.
   Например, при \`delimiter=","\` ввод "опция1," создаст опцию "опция1".

2. При вставке из буфера обмена - если вставляемый текст содержит разделители,
   он будет автоматически разбит на несколько опций.
   Например, при \`delimiter=","\` вставка "опция1,опция2,опция3" создаст
   три отдельные опции: "опция1", "опция2" и "опция3".`,name:"delimiter",required:!1,type:{name:"string | RegExp | string[]"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'},{value:'"right"'}]}},options:{defaultValue:null,description:"Список опций в выпадающем списке.",name:"options",required:!1,type:{name:"Option[]"}},creatable:{defaultValue:{value:"false"},description:"Возможность создавать чипы которых нет в списке:\n- `true` – добавление по кнопке Enter;\n- `<текст>` – помимо возможности добавления через Enter, в пункте меню появится кнопка с текстом.\nТекст для пункта, создающего чипы при нажатии, также отвечает за то, будет ли показан этот пункт\n(показывается после того как в списке не останется опций).",name:"creatable",required:!1,type:{name:"string | boolean"}},emptyText:{defaultValue:{value:"Ничего не найдено"},description:"Текст, который показывается если список опций пуст.",name:"emptyText",required:!1,type:{name:"string"}},selectedBehavior:{defaultValue:{value:"highlight"},description:"Показывать или скрывать уже выбранные опции.",name:"selectedBehavior",required:!1,type:{name:"enum",value:[{value:'"hide"'},{value:'"highlight"'}]}},filterFn:{defaultValue:null,description:"Функция для фильтрации опций в списке.",name:"filterFn",required:!1,type:{name:"false | FilterFn<Option>"}},sortFn:{defaultValue:{value:"false"},description:"Функция для сортировки опций в списке.",name:"sortFn",required:!1,type:{name:"false | SortFn<Option>"}},onClose:{defaultValue:null,description:"Будет вызвано в момент скрытия выпадающего списка.",name:"onClose",required:!1,type:{name:"VoidFunction"}},onOpen:{defaultValue:null,description:"Будет вызвано в момент открытия выпадающего списка.",name:"onOpen",required:!1,type:{name:"VoidFunction"}},getOptionValue:{defaultValue:null,description:"Селектор значения.",name:"getOptionValue",required:!1,type:{name:"GetOptionValue<Option>"}},getOptionLabel:{defaultValue:null,description:"Селектор пользовательского представления.",name:"getOptionLabel",required:!1,type:{name:"GetOptionLabel<Option>"}},getNewOptionData:{defaultValue:null,description:"Функция для создания новой опции.",name:"getNewOptionData",required:!1,type:{name:"GetNewOptionData<Option>"}},defaultValue:{defaultValue:null,description:"Выбранные опции по умолчанию.",name:"defaultValue",required:!1,type:{name:"Option[]"}},onChange:{defaultValue:null,description:"Обработчик изменения выбранных опций.",name:"onChange",required:!1,type:{name:"OnChange<Option>"}},defaultInputValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultInputValue",required:!1,type:{name:"string"}},mode:{defaultValue:null,description:"Режим отображения.\n\n- `default` — показывает фон, обводку и, при наличии, текст-подсказку.\n- `plain` — показывает только текст-подсказку.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"plain"'},{value:'"default"'}]}},status:{defaultValue:{value:"default"},description:"Статус отображения поля в форме.",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна иконка, реагирующая на нажатие.",name:"before",required:!1,type:{name:"ReactNode"}},overscrollBehavior:{defaultValue:null,description:"Поведение overscroll, подробнее можно почитать в [документации](https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior).",name:"overscrollBehavior",required:!1,type:{name:"enum",value:[{value:'"contain"'},{value:'"none"'},{value:'"auto"'}]}}}}}catch{}export{x4 as C};
