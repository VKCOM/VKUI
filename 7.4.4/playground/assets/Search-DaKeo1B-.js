import{k as Z,r as i,l as P,u as uu,d as eu,U as tu,m as au,j as e,i as x,n as nu}from"./iframe-DDos8QSD.js";import{h as ou}from"./react_utils-CSZjvU4X.js";import{u as su}from"./useBooleanState-BPdqgwEs.js";import{u as iu}from"./useConfigDirection-BVLc7CyO.js";import{u as lu}from"./useNativeFormResetListener-q-APSa1c.js";import{c as cu}from"./callMultiple-ChqatQlo.js";import{B as I}from"./Button-Ky5QsFrC.js";import{I as w}from"./IconButton-C3mRDxD7.js";import{H as ru}from"./Headline-A5M31mJl.js";import{V}from"./VisuallyHidden-Bn0ixRRD.js";import{I as du}from"./clear_16-IEFZOITA.js";import{I as fu}from"./cancel_24-Cjk92GYx.js";import{I as mu}from"./search_outline_16-BZN3qCIc.js";const pu="_host_ewo5i_1",Eu="_rtl_ewo5i_11",_u="_withPadding_ewo5i_15",hu="_sizeYCompact_ewo5i_24",Fu="_sizeYNone_ewo5i_29",Au="_field_ewo5i_34",Bu="_label_ewo5i_57",vu="_input_ewo5i_64",Du="_nativeInput_ewo5i_76",Cu="_hasAfter_ewo5i_106",yu="_disabled_ewo5i_111",bu="_controls_ewo5i_131",xu="_hasIcon_ewo5i_144",Iu="_hasValue_ewo5i_156",wu="_icon_ewo5i_160",Vu="_after_ewo5i_174",gu="_focused_ewo5i_185",Nu="_afterTextClip_ewo5i_204",Ru="_findButton_ewo5i_211",u={host:pu,rtl:Eu,withPadding:_u,sizeYCompact:hu,sizeYNone:Fu,field:Au,label:Bu,input:vu,nativeInput:Du,hasAfter:Cu,disabled:yu,controls:bu,hasIcon:xu,hasValue:Iu,icon:wu,after:Vu,focused:gu,afterTextClip:Nu,findButton:Ru},g=({id:r,before:N=e.jsx(mu,{}),className:R,placeholder:E="Поиск",after:_="Отмена",getRef:j,icon:s,onIconClick:l,style:T,autoComplete:q="off",onChange:z,iconLabel:M,clearLabel:H="Очистить",clearButtonTestId:S,noPadding:L,getRootRef:Y,findButtonText:k="Найти",findButtonTestId:O,onFindButtonClick:h,...a})=>{const U=iu()==="rtl",n=Z(j),{value:$,setTrue:d,setFalse:f}=su(!1),G=i.useId(),F=r||`search-${G}`,[m,p]=i.useState(()=>!!(a.value||a.defaultValue)),J=t=>p(!!t.currentTarget.value),{sizeY:A="none"}=P(),{sizeY:B}=uu(),v=eu(),D=v==="ios"&&ou(_),K=t=>{d(),a.onFocus&&a.onFocus(t)},Q=t=>{f(),a.onBlur&&a.onBlur(t)},c=i.useCallback(()=>{var y,b;const t=(y=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:y.set;t==null||t.call(n.current,"");const o=new Event("input",{bubbles:!0});(b=n.current)==null||b.dispatchEvent(o)},[n]),W=i.useCallback(t=>l==null?void 0:l(t),[l]),X=i.useCallback(t=>{var o;t.preventDefault(),(o=n.current)==null||o.focus(),tu()&&c()},[n,c]);au(()=>{a.value!==void 0&&p(!!a.value)},[a.value]),lu(n,()=>{p(!!a.defaultValue)});const C=(t,o={})=>e.jsxs(w,{hoverMode:"opacity",onPointerDown:W,className:u.icon,onFocus:d,onBlur:f,onClick:nu,...o,children:[e.jsx(V,{children:M}),t]});return e.jsxs("div",{className:x("vkuiInternalSearch",u.host,A==="none"&&u.sizeYNone,A==="compact"&&u.sizeYCompact,$&&u.focused,m&&u.hasValue,D&&u.hasAfter,s&&u.hasIcon,a.disabled&&u.disabled,!L&&u.withPadding,U&&u.rtl,R),ref:Y,style:T,children:[e.jsxs("div",{className:u.field,children:[e.jsx("label",{htmlFor:F,className:u.label,children:E}),e.jsxs("div",{className:u.input,children:[N,e.jsx(ru,{Component:"input",type:"search",level:"1",weight:"3",...a,id:F,placeholder:E,autoComplete:q,getRootRef:n,className:u.nativeInput,onFocus:K,onBlur:Q,onChange:cu(z,J)})]}),e.jsxs("div",{className:u.controls,children:[s&&(typeof s=="function"?s(C):C(s)),e.jsxs(w,{hoverMode:"opacity",onPointerDown:X,onClick:c,className:u.icon,tabIndex:m?void 0:-1,disabled:a.disabled,"data-testid":S,children:[e.jsx(V,{children:H}),v==="ios"?e.jsx(du,{}):e.jsx(fu,{})]}),B.compact&&h&&e.jsx(I,{mode:"primary",size:"m",className:x(u.findButton,B.compact.className),focusVisibleMode:"inside",onClick:h,tabIndex:m?void 0:-1,"data-testid":O,children:k})]})]}),D&&e.jsx("div",{className:u.after,children:e.jsx(I,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:c,onFocus:d,onBlur:f,children:e.jsx("span",{className:u.afterTextClip,children:_})})})]})};try{g.displayName="Search",g.__docgenInfo={description:"",displayName:"Search",props:{after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}}}}}catch{}export{g as S};
