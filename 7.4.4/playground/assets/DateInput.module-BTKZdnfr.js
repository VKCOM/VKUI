import{p as F,r as s,j as V,i as U,O as G,R as $}from"./iframe-DDos8QSD.js";import{u as J}from"./useBooleanState-BPdqgwEs.js";import{u as Q}from"./useGlobalEventListener-Cf-K_pnj.js";import{c as W}from"./callMultiple-ChqatQlo.js";import{V as X}from"./VisuallyHidden-Bn0ixRRD.js";function ke({maxElement:e,refs:a,autoFocus:r,disabled:c,elementsConfig:m,onClear:d,onInternalValueChange:f,getInternalValue:y,value:k,onCalendarOpenChanged:l,accessible:p}){const{document:A}=F(),{value:b,setTrue:L,setFalse:w}=J(!1),B=s.useRef(null),T=s.useRef(null),[x,D]=s.useState([]),[u,_]=s.useState(null),C=s.useRef(!1),{window:S}=F(),M=s.useCallback(()=>!C.current,[]),q=s.useCallback(()=>{b&&(w(),l==null||l(!1))},[w,l,b]),E=s.useCallback(()=>{b||(L(),l==null||l(!0),p&&_(null),C.current=!1)},[l,b,L,p]),N=s.useCallback(()=>{var t;u!==null&&(_(null),(t=S.getSelection())==null||t.removeAllRanges(),D(y(k)))},[u,y,k,S]),h=s.useCallback(()=>{N(),q()},[N,q]),Y=s.useCallback(()=>{N(),b?q():E()},[N,b,q,E]),z=s.useCallback(t=>{var n,i;!((n=B.current)!=null&&n.contains(t.target))&&!((i=T.current)!=null&&i.contains(t.target))&&(C.current=!0,h())},[h]),g=s.useCallback(()=>{u===null&&_(0)},[u]);Q(A,"click",z,{capture:!0}),s.useEffect(()=>{D(y(k))},[y,k]),s.useEffect(()=>{r&&g()},[r,g]),s.useEffect(()=>{if(c||u===null)return;const t=S.document.createRange();let n=a[u].current,i;return n&&(n.focus(),p||E(),t.selectNodeContents(n),i=setTimeout(()=>{const o=S.getSelection();o==null||o.removeAllRanges(),o==null||o.addRange(t)},0)),()=>{clearTimeout(i)}},[c,u,a,S,E,p]);const K=s.useCallback(()=>{d==null||d(),g()},[d,g]),H=s.useCallback(()=>{g()},[g]),P=s.useCallback(t=>{if(u===null)return;const n=[...x],i=m(u);if(/^\d+$/.test(t.key))n[u].length>=i.length?n[u]=t.key:(n[u]+=t.key,n[u].length>=i.length&&u<e&&_(u+1));else if(t.key==="Backspace")n[u]?n[u]=n[u].slice(0,-1):_(u<=0?e:u-1);else if(t.key==="ArrowDown"||t.key==="Down"){let o=Number(n[u]);n[u]=String(o<=i.min?i.max:o-1).padStart(i.length,"0")}else if(t.key==="ArrowUp"||t.key==="Up"){let o=Number(n[u]);n[u]=String(o>=i.max?i.min:o+1).padStart(i.length,"0")}else if(t.key==="ArrowLeft"||t.key==="Left"||t.key==="Tab"&&t.shiftKey){if(u<=0){t.key==="Tab"&&h();return}_(u-1)}else if(t.key==="ArrowRight"||t.key==="Right"||t.key==="Tab"){if(u>=e){t.key==="Tab"&&h();return}_(u+1)}else if(t.key==="Delete"||t.key==="Del")n[u]="";else if(t.key===" "){t.preventDefault(),E();return}else return;t.preventDefault(),D(n),f(n)},[E,h,m,u,x,e,f]);return{rootRef:B,calendarRef:T,open:b,openCalendar:E,closeCalendar:q,toggleCalendar:Y,internalValue:x,focusedElement:u,setFocusedElement:_,handleKeyDown:P,clear:K,handleFieldEnter:H,removeFocusFromField:h,handleRestoreFocus:M}}const Z="_mask_1xpg8_1",O="_lastCharacter_1xpg8_20",ee="_divider_1xpg8_25",ue="_host_1xpg8_31",R={mask:Z,lastCharacter:O,divider:ee,host:ue},v=({children:e,className:a,...r})=>V.jsx("span",{className:U(R.divider,a),...r,children:e});try{v.displayName="InputLikeDivider",v.__docgenInfo={description:"",displayName:"InputLikeDivider",props:{}}}catch{}const te=" ";function ne(e){const a=[];for(let r=0;r<e;r+=1)a.push(V.jsx("span",{className:R.mask,children:te},r));return a}const I=({value:e,length:a,index:r,onElementSelect:c,onFocus:m,label:d,readOnly:f,onKeyDown:y,...k})=>{const l=s.useCallback(p=>{G(p),c==null||c(r)},[r,c]);return V.jsxs($,{Component:"span",baseClassName:(e==null?void 0:e.length)===a?R.host:void 0,tabIndex:f?-1:0,onFocus:W(m,l),onKeyDown:f?void 0:y,...k,children:[d&&V.jsx(X,{children:d}),e==null?void 0:e.slice(0,a-1),(e==null?void 0:e.slice(a-1))&&V.jsx("span",{className:R.lastCharacter,children:e.slice(a-1)},r),ne(a-((e==null?void 0:e.length)??0))]})};try{I.displayName="InputLike",I.__docgenInfo={description:"",displayName:"InputLike",props:{length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},onElementSelect:{defaultValue:null,description:"",name:"onElementSelect",required:!1,type:{name:"((index: number) => void)"}},baseClassName:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `className`.",name:"baseClassName",required:!1,type:{name:"string | false"}},baseStyle:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `style`.",name:"baseStyle",required:!1,type:{name:"CSSProperties"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLSpanElement>"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}}}catch{}const se=(e,a)=>{if(e!==void 0)return typeof e=="string"?e:String(e).padStart(a,"0")},j=({value:e,length:a,minValue:r,maxValue:c,readOnly:m,disabled:d,label:f,onKeyDown:y,"aria-label":k,...l})=>{const p=se(e,a);return V.jsx(I,{role:"spinbutton",value:p,length:a,"aria-valuemin":r,"aria-valuemax":c,"aria-valuenow":e!==void 0?Number(e):void 0,"aria-valuetext":p,"aria-readonly":m,"aria-disabled":d,"aria-label":f,label:f,tabIndex:m?-1:0,onKeyDown:m?void 0:y,...l})};try{j.displayName="NumberInputLike",j.__docgenInfo={description:"",displayName:"NumberInputLike",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number"}},maxValue:{defaultValue:null,description:"",name:"maxValue",required:!1,type:{name:"number"}},minValue:{defaultValue:null,description:"",name:"minValue",required:!1,type:{name:"number"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLSpanElement>"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},baseClassName:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `className`.",name:"baseClassName",required:!1,type:{name:"string | false"}},baseStyle:{defaultValue:null,description:"@deprecated Since 7.3.0.\n\nСвойство устарело и будет удалено в `v8`, используйте свойство `style`.",name:"baseStyle",required:!1,type:{name:"CSSProperties"}},length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},onElementSelect:{defaultValue:null,description:"",name:"onElementSelect",required:!1,type:{name:"((index: number) => void)"}}}}}catch{}const ae="_wrapper_14qhh_1",re="_input_14qhh_12",ie="_hidden_14qhh_25",le="_customValue_14qhh_29",oe="_inputTimeDivider_14qhh_46",ce="_sizeYCompact_14qhh_51",de="_sizeYNone_14qhh_56",be={wrapper:ae,input:re,hidden:ie,customValue:le,inputTimeDivider:oe,sizeYCompact:ce,sizeYNone:de};export{v as I,j as N,be as d,ke as u};
