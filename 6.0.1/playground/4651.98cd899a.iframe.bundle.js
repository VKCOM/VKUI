"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[4651],{"./src/hooks/useEffectDev.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>useEffectDev}),__webpack_require__("../../node_modules/react/index.js");var useEffectDev=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js").ZT},"./src/hooks/usePatchChildren.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>usePatchChildren});var react=__webpack_require__("../../node_modules/react/index.js"),isFunctionExistInProps=function(props,key){return"function"==typeof props[key]},getMergedSameEventsByProps=function(mainProps,secondProps){var _loop=function(eventName){mainProps.hasOwnProperty(eventName)&&secondProps.hasOwnProperty(eventName)&&isFunctionExistInProps(mainProps,eventName)&&isFunctionExistInProps(secondProps,eventName)&&(result[eventName]=function mergeSameEventsByProps(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];secondProps[eventName].apply(this,args),mainProps[eventName].apply(this,args)})},result={};for(var eventName in mainProps)_loop(eventName);return result},utils=__webpack_require__("./src/lib/utils.ts"),warnOnce=__webpack_require__("./src/lib/warnOnce.ts"),useEffectDev=__webpack_require__("./src/hooks/useEffectDev.ts"),useExternRef=__webpack_require__("./src/hooks/useExternRef.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}var warn=(0,warnOnce.O)("usePatchChildrenRef"),usePatchChildren=function(children,injectProps,externRef){var isValidElementResult=(0,utils.i6)(children),isDOMTypeElementResult=isValidElementResult&&(0,utils.hg)(children),isForwardedRefElementResult=isValidElementResult&&(0,utils.VD)(children),shouldUseRef=isDOMTypeElementResult||isForwardedRefElementResult,childRef=(0,useExternRef.Q)(shouldUseRef?children.ref:isValidElementResult?children.props.getRootRef:void 0,externRef),mergedEventsByInjectProps=getMergedSameEventsByProps(injectProps||{},isValidElementResult?children.props:{}),props=shouldUseRef?_object_spread({ref:childRef},injectProps,mergedEventsByInjectProps):isValidElementResult?_object_spread({getRootRef:childRef},injectProps,mergedEventsByInjectProps):void 0;return(0,useEffectDev.i)(function(){childRef.current||warn("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента","error")},[isValidElementResult?children.type:null,childRef]),[childRef,isValidElementResult?react.cloneElement(children,props):children]}},"./src/lib/floating/adapters.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JO:()=>autoUpdateFloatingElement});var floating_ui_dom_esm=__webpack_require__("../../node_modules/@vkontakte/vkui-floating-ui/dom/dist/floating-ui.dom.esm.js"),floating_ui_utils_dom_esm=__webpack_require__("../../node_modules/@vkontakte/vkui-floating-ui/utils/dom/dist/floating-ui.utils.dom.esm.js");function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var defaultIframeStyles={position:"absolute",left:"0",top:"0",zIndex:"-1",width:"100%",height:"100%",pointerEvents:"none",opacity:"0"},CustomResizeObserver=function(){function CustomResizeObserver(updateFunction){_class_call_check(this,CustomResizeObserver),_define_property(this,"updateFunction",void 0),_define_property(this,"records",void 0),_define_property(this,"mutationObserverFallback",void 0),this.updateFunction=updateFunction,this.records=[],this.mutationObserverFallback=null,this.updateFunction=updateFunction}return _create_class(CustomResizeObserver,[{key:"observe",value:function observe(element){return isPositioned(element)?this.observeUsingIframe(element):this.observeUsingMutationObserver(element)}},{key:"appendToTheDOM",value:function appendToTheDOM(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.records[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var record=_step.value;record.target.appendChild(record.iframe)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=this.records[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0){var record1=_step1.value;record1.iframe.contentWindow&&record1.iframe.contentWindow.addEventListener("resize",this.updateFunction)}}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}}},{key:"observeUsingIframe",value:function observeUsingIframe(element){var iframe=element.ownerDocument.createElement("iframe");iframe.src="javascript:void(0)",iframe.ariaHidden="true",iframe.tabIndex=-1,Object.assign(iframe.style,defaultIframeStyles),this.records.push({target:element,iframe:iframe})}},{key:"observeUsingMutationObserver",value:function observeUsingMutationObserver(element){this.mutationObserverFallback||(this.mutationObserverFallback=new MutationObserver(this.updateFunction)),this.mutationObserverFallback.observe(element,{childList:!0,subtree:!0})}},{key:"disconnect",value:function disconnect(){var _this=this;this.records.map(function(param){var target=param.target,iframe=param.iframe;iframe.contentWindow&&iframe.contentWindow.removeEventListener("resize",_this.updateFunction),target.removeChild(iframe)}),this.records=[],this.mutationObserverFallback&&this.mutationObserverFallback.disconnect(),this.mutationObserverFallback=null}}]),CustomResizeObserver}();function isPositioned(element){return"static"!==getComputedStyle(element).position}function adapters_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){adapters_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var defaultOptions={ancestorScroll:!0,ancestorResize:!0,elementResize:!1,animationFrame:!1};function autoUpdateFloatingElement(reference,floating,update){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:defaultOptions,_options_elementResize=options.elementResize,elementResize=void 0!==_options_elementResize&&_options_elementResize,restOptions=_object_without_properties(options,["elementResize"]),canUseResizeObserver=void 0!==window.ResizeObserver,autoUpdateLibDisposer=(0,floating_ui_dom_esm.Me)(reference,floating,update,_object_spread_props(_object_spread({},restOptions),{elementResize:elementResize&&canUseResizeObserver})),observer=null;return elementResize&&!canUseResizeObserver&&(observer=new CustomResizeObserver(update),(0,floating_ui_utils_dom_esm.Re)(reference)&&observer.observe(reference),observer.observe(floating),observer.appendToTheDOM()),function(){observer&&(observer.disconnect(),observer=null),autoUpdateLibDisposer()}}},"./src/lib/floating/useFloatingMiddlewaresBootstrap/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>useFloatingMiddlewaresBootstrap});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_adapters__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@vkontakte/vkui-floating-ui/core/dist/floating-ui.core.esm.js"),_adapters__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@vkontakte/vkui-floating-ui/react-dom/dist/floating-ui.react-dom.esm.js"),_functions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/floating/functions.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var useFloatingMiddlewaresBootstrap=function(param){var _param_placement=param.placement,placement=void 0===_param_placement?"bottom-start":_param_placement,_param_arrowRef=param.arrowRef,arrowRef=void 0===_param_arrowRef?null:_param_arrowRef,arrow=param.arrow,arrowHeight=param.arrowHeight,arrowPadding=param.arrowPadding,sameWidth=param.sameWidth,_param_offsetByMainAxis=param.offsetByMainAxis,offsetByMainAxis=void 0===_param_offsetByMainAxis?0:_param_offsetByMainAxis,_param_offsetByCrossAxis=param.offsetByCrossAxis,offsetByCrossAxis=void 0===_param_offsetByCrossAxis?0:_param_offsetByCrossAxis,customMiddlewares=param.customMiddlewares,hideWhenReferenceHidden=param.hideWhenReferenceHidden;return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(function(){var isNotAutoPlacement=(0,_functions__WEBPACK_IMPORTED_MODULE_1__.Nf)(placement),middlewares=[(0,_adapters__WEBPACK_IMPORTED_MODULE_2__.cv)({crossAxis:offsetByCrossAxis,mainAxis:arrow&&arrowHeight?offsetByMainAxis+arrowHeight:offsetByMainAxis})];return isNotAutoPlacement?middlewares.push((0,_adapters__WEBPACK_IMPORTED_MODULE_2__.RR)({fallbackAxisSideDirection:"start"})):middlewares.push((0,_adapters__WEBPACK_IMPORTED_MODULE_2__.X5)({alignment:(0,_functions__WEBPACK_IMPORTED_MODULE_1__.kd)(placement)})),middlewares.push((0,_adapters__WEBPACK_IMPORTED_MODULE_2__.uY)()),sameWidth&&middlewares.push((0,_adapters__WEBPACK_IMPORTED_MODULE_2__.dp)({apply:function apply(param){var rects=param.rects;Object.assign(param.elements.floating.style,{width:"".concat(rects.reference.width,"px")})}})),customMiddlewares&&middlewares.push.apply(middlewares,_to_consumable_array(customMiddlewares)),arrow&&middlewares.push((0,_adapters__WEBPACK_IMPORTED_MODULE_3__.x7)({element:arrowRef,padding:arrowPadding})),hideWhenReferenceHidden&&middlewares.push((0,_adapters__WEBPACK_IMPORTED_MODULE_2__.Cp)()),{middlewares:middlewares,strictPlacement:isNotAutoPlacement?placement:void 0}},[offsetByCrossAxis,arrowRef,arrow,arrowHeight,arrowPadding,offsetByMainAxis,sameWidth,customMiddlewares,placement,hideWhenReferenceHidden])}},"./src/lib/floating/usePlacementChangeCallback.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>usePlacementChangeCallback});var _hooks_usePrevious__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/hooks/usePrevious.ts"),_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/useIsomorphicLayoutEffect.ts");function usePlacementChangeCallback(placement,onPlacementChange){var prevPlacement=(0,_hooks_usePrevious__WEBPACK_IMPORTED_MODULE_0__.D)(placement);(0,_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__.L)(function(){void 0!==prevPlacement&&onPlacementChange&&prevPlacement!==placement&&onPlacementChange(placement)},[prevPlacement,placement,onPlacementChange])}}}]);