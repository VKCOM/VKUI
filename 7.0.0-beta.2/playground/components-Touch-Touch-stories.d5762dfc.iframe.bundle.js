"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[3035],{"./src/storybook/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{eC:()=>DisableCartesianParam,eb:()=>CanvasFullLayout,oL:()=>StringArg});const CanvasFullLayout={layout:"fullscreen",centered:!0},DisableCartesianParam={cartesian:{disable:!0}},StringArg={control:"text"}},"./src/components/Touch/Touch.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Playground:()=>Playground,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_storybook_test__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@storybook/test/dist/index.mjs"),_storybook_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/storybook/constants.ts"),_Touch__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Touch/Touch.tsx");const __WEBPACK_DEFAULT_EXPORT__={title:"Service/Touch",component:_Touch__WEBPACK_IMPORTED_MODULE_3__.U,args:{onClick:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_2__.fn)(),onStart:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_2__.fn)(),onMove:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_2__.fn)(),onEnd:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_2__.fn)(),onEndX:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_2__.fn)(),onEndY:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_2__.fn)()},parameters:{..._storybook_constants__WEBPACK_IMPORTED_MODULE_4__.eb,cantered:!1,..._storybook_constants__WEBPACK_IMPORTED_MODULE_4__.eC}},circleStyle={width:40,height:40,borderRadius:"50%",background:"var(--vkui--color_background_accent)",position:"absolute",left:"50%",top:"50%",marginLeft:-20,marginTop:-20},containerStyle={height:200,width:"50%",border:"8px solid var(--vkui--color_icon_secondary)",position:"relative"},Playground={render:function Render(args){const[shiftX,setShiftX]=react__WEBPACK_IMPORTED_MODULE_1__.useState(0),[shiftY,setShiftY]=react__WEBPACK_IMPORTED_MODULE_1__.useState(0),[limitX,setLimitX]=react__WEBPACK_IMPORTED_MODULE_1__.useState(0),[limitY,setLimitY]=react__WEBPACK_IMPORTED_MODULE_1__.useState(0),circleRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),startX=react__WEBPACK_IMPORTED_MODULE_1__.useRef(0),startY=react__WEBPACK_IMPORTED_MODULE_1__.useRef(0);react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect((()=>{circleRef.current&&(setLimitX(circleRef.current.offsetLeft),setLimitY(circleRef.current.offsetTop))}));const getValueWithLimit=(value,limit)=>value>limit?limit:value<-limit?-limit:value,limitExceeded=Math.abs(shiftX)>=limitX||Math.abs(shiftY)>=limitY;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{...containerStyle,borderColor:limitExceeded?"var(--vkui--color_icon_negative)":"var(--vkui--color_icon_secondary)"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Touch__WEBPACK_IMPORTED_MODULE_3__.U,{...args,getRootRef:circleRef,onMove:e=>{const shiftX=startX.current+e.shiftX,shiftY=startY.current+e.shiftY;setShiftX(getValueWithLimit(shiftX,limitX)),setShiftY(getValueWithLimit(shiftY,limitY))},onEnd:e=>{const shiftX=startX.current+e.shiftX,shiftY=startY.current+e.shiftY;startX.current=getValueWithLimit(shiftX,limitX),startY.current=getValueWithLimit(shiftY,limitY)},style:{...circleStyle,transform:`translate(${shiftX}px, ${shiftY}px)`}})})}},__namedExportsOrder=["Playground"];Playground.parameters={...Playground.parameters,docs:{...Playground.parameters?.docs,source:{originalSource:"{\n  render: function Render(args) {\n    const [shiftX, setShiftX] = React.useState(0);\n    const [shiftY, setShiftY] = React.useState(0);\n    const [limitX, setLimitX] = React.useState(0);\n    const [limitY, setLimitY] = React.useState(0);\n    const circleRef = React.useRef<HTMLDivElement | null>(null);\n    const startX = React.useRef(0);\n    const startY = React.useRef(0);\n\n    // eslint-disable-next-line no-restricted-properties,react-hooks/exhaustive-deps,no-restricted-properties\n    React.useLayoutEffect(() => {\n      if (circleRef.current) {\n        setLimitX(circleRef.current.offsetLeft);\n        setLimitY(circleRef.current.offsetTop);\n      }\n    });\n    const getValueWithLimit = (value: number, limit: number) => {\n      return value > limit ? limit : value < -limit ? -limit : value;\n    };\n    const onMove = (e: CustomTouchEvent) => {\n      const shiftX = startX.current + e.shiftX;\n      const shiftY = startY.current + e.shiftY;\n      setShiftX(getValueWithLimit(shiftX, limitX));\n      setShiftY(getValueWithLimit(shiftY, limitY));\n    };\n    const onEnd = (e: CustomTouchEvent) => {\n      const shiftX = startX.current + e.shiftX;\n      const shiftY = startY.current + e.shiftY;\n      startX.current = getValueWithLimit(shiftX, limitX);\n      startY.current = getValueWithLimit(shiftY, limitY);\n    };\n    const limitExceeded = Math.abs(shiftX) >= limitX || Math.abs(shiftY) >= limitY;\n    return <div style={{\n      ...containerStyle,\n      borderColor: limitExceeded ? 'var(--vkui--color_icon_negative)' : 'var(--vkui--color_icon_secondary)'\n    }}>\n        <Touch {...args} getRootRef={circleRef} onMove={onMove} onEnd={onEnd} style={{\n        ...circleStyle,\n        transform: `translate(${shiftX}px, ${shiftY}px)`\n      }} />\n      </div>;\n  }\n}",...Playground.parameters?.docs?.source}}}}}]);