(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[83],{"./src/components/DateInput/DateInput.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Playground:()=>Playground,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DateInput_stories});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),dist=__webpack_require__("../../node_modules/@storybook/test/dist/index.mjs"),constants=__webpack_require__("./src/storybook/constants.ts"),react=__webpack_require__("../../node_modules/react/index.js"),clear_16=__webpack_require__("../../node_modules/@vkontakte/icons/dist_es6/16/clear_16.js"),calendar_outline_20=__webpack_require__("../../node_modules/@vkontakte/icons/dist_es6/20/calendar_outline_20.js"),es6=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),useAdaptivity=__webpack_require__("./src/hooks/useAdaptivity.ts"),useDateInput=__webpack_require__("./src/hooks/useDateInput.ts"),useExternRef=__webpack_require__("./src/hooks/useExternRef.ts"),callMultiple=__webpack_require__("./src/lib/callMultiple.ts"),date=__webpack_require__("./src/lib/date.ts"),Calendar=__webpack_require__("./src/components/Calendar/Calendar.tsx"),FormField=__webpack_require__("./src/components/FormField/FormField.tsx"),IconButton=__webpack_require__("./src/components/IconButton/IconButton.tsx"),InputLike=__webpack_require__("./src/components/InputLike/InputLike.tsx"),InputLikeDivider=__webpack_require__("./src/components/InputLike/InputLikeDivider.tsx"),Popper=__webpack_require__("./src/components/Popper/Popper.tsx"),Text=__webpack_require__("./src/components/Typography/Text/Text.tsx"),DateInput_module=(__webpack_require__("./src/components/InputLike/InputLike.module.css"),__webpack_require__("./src/components/DateInput/DateInput.module.css"));function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})),target}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var sizeYClassNames=_define_property({none:DateInput_module.A["DateInput--sizeY-none"]},"compact",DateInput_module.A["DateInput--sizeY-compact"]),elementsConfig=function(index){var length=2,min=1,max=0;switch(index){case 0:max=31;break;case 1:max=12;break;case 2:max=2100,min=1900,length=4;break;case 3:max=23;break;case 4:max=59}return{length,min,max}},getInternalValue=function(value){var newValue=["","","","",""];return value&&(newValue[0]=String(value.getDate()).padStart(2,"0"),newValue[1]=String(value.getMonth()+1).padStart(2,"0"),newValue[2]=String(value.getFullYear()).padStart(4,"0"),newValue[3]=String(value.getHours()).padStart(2,"0"),newValue[4]=String(value.getMinutes()).padStart(2,"0")),newValue},DateInput=function(_param){var enableTime=_param.enableTime,shouldDisableDate=_param.shouldDisableDate,disableFuture=_param.disableFuture,disablePast=_param.disablePast,minDateTime=_param.minDateTime,maxDateTime=_param.maxDateTime,value=_param.value,onChange=_param.onChange,_param_calendarPlacement=_param.calendarPlacement,calendarPlacement=void 0===_param_calendarPlacement?"bottom-start":_param_calendarPlacement,style=_param.style,className=_param.className,doneButtonText=_param.doneButtonText,_param_closeOnChange=_param.closeOnChange,closeOnChange=void 0===_param_closeOnChange||_param_closeOnChange,disablePickers=_param.disablePickers,getRootRef=_param.getRootRef,name=_param.name,autoFocus=_param.autoFocus,disabled=_param.disabled,onClick=_param.onClick,onFocus=_param.onFocus,_param_prevMonthLabel=_param.prevMonthLabel,prevMonthLabel=void 0===_param_prevMonthLabel?"Предыдущий месяц":_param_prevMonthLabel,_param_nextMonthLabel=_param.nextMonthLabel,nextMonthLabel=void 0===_param_nextMonthLabel?"Следующий месяц":_param_nextMonthLabel,showNeighboringMonth=_param.showNeighboringMonth,size=_param.size,_param_changeMonthLabel=_param.changeMonthLabel,changeMonthLabel=void 0===_param_changeMonthLabel?"Изменить месяц":_param_changeMonthLabel,_param_changeYearLabel=_param.changeYearLabel,changeYearLabel=void 0===_param_changeYearLabel?"Изменить год":_param_changeYearLabel,_param_changeDayLabel=_param.changeDayLabel,changeDayLabel=void 0===_param_changeDayLabel?"Изменить день":_param_changeDayLabel,_param_changeHoursLabel=_param.changeHoursLabel,changeHoursLabel=void 0===_param_changeHoursLabel?"Изменить час":_param_changeHoursLabel,_param_changeMinutesLabel=_param.changeMinutesLabel,changeMinutesLabel=void 0===_param_changeMinutesLabel?"Изменить минуту":_param_changeMinutesLabel,_param_clearFieldLabel=_param.clearFieldLabel,clearFieldLabel=void 0===_param_clearFieldLabel?"Очистить поле":_param_clearFieldLabel,_param_showCalendarLabel=_param.showCalendarLabel,showCalendarLabel=void 0===_param_showCalendarLabel?"Показать календарь":_param_showCalendarLabel,viewDate=_param.viewDate,onHeaderChange=_param.onHeaderChange,onNextMonth=_param.onNextMonth,onPrevMonth=_param.onPrevMonth,prevMonthIcon=_param.prevMonthIcon,nextMonthIcon=_param.nextMonthIcon,_param_disableCalendar=_param.disableCalendar,disableCalendar=void 0!==_param_disableCalendar&&_param_disableCalendar,props=_object_without_properties(_param,["enableTime","shouldDisableDate","disableFuture","disablePast","minDateTime","maxDateTime","value","onChange","calendarPlacement","style","className","doneButtonText","closeOnChange","disablePickers","getRootRef","name","autoFocus","disabled","onClick","onFocus","prevMonthLabel","nextMonthLabel","showNeighboringMonth","size","changeMonthLabel","changeYearLabel","changeDayLabel","changeHoursLabel","changeMinutesLabel","clearFieldLabel","showCalendarLabel","viewDate","onHeaderChange","onNextMonth","onPrevMonth","prevMonthIcon","nextMonthIcon","disableCalendar"]),daysRef=react.useRef(null),monthsRef=react.useRef(null),yearsRef=react.useRef(null),hoursRef=react.useRef(null),minutesRef=react.useRef(null),maxElement=enableTime?4:2,onInternalValueChange=react.useCallback((function(internalValue){for(var i=0;i<=maxElement;i+=1)if(internalValue[i].length<elementsConfig(i).length)return;var formattedValue="".concat(internalValue[0],".").concat(internalValue[1],".").concat(internalValue[2]),mask="DD.MM.YYYY";enableTime&&(formattedValue+=" ".concat(internalValue[3],":").concat(internalValue[4]),mask+=" HH:mm"),(0,date.uv)(formattedValue,mask)&&(null==onChange||onChange((0,date.qg)(formattedValue,mask,null!=value?value:new Date)))}),[enableTime,maxElement,onChange,value]),refs=react.useMemo((function(){return[daysRef,monthsRef,yearsRef,hoursRef,minutesRef]}),[daysRef,monthsRef,yearsRef,hoursRef,minutesRef]),_useDateInput=(0,useDateInput.e)({maxElement,refs,autoFocus,disabled,elementsConfig,onChange,onInternalValueChange,getInternalValue,value}),rootRef=_useDateInput.rootRef,calendarRef=_useDateInput.calendarRef,open=_useDateInput.open,openCalendar=_useDateInput.openCalendar,internalValue=_useDateInput.internalValue,handleKeyDown=_useDateInput.handleKeyDown,setFocusedElement=_useDateInput.setFocusedElement,handleFieldEnter=_useDateInput.handleFieldEnter,clear=_useDateInput.clear,removeFocusFromField=_useDateInput.removeFocusFromField,_useAdaptivity_sizeY=(0,useAdaptivity.L)().sizeY,sizeY=void 0===_useAdaptivity_sizeY?"none":_useAdaptivity_sizeY,handleRootRef=(0,useExternRef.Z)(rootRef,getRootRef),onCalendarChange=react.useCallback((function(value){null==onChange||onChange(value),closeOnChange&&!enableTime&&removeFocusFromField()}),[onChange,removeFocusFromField,closeOnChange,enableTime]);return(0,jsx_runtime.jsxs)(FormField.z,_object_spread_props(function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_define_property(target,key,source[key])}))}return target}({style,className:(0,es6.xW)("regular"!==sizeY&&sizeYClassNames[sizeY],className),getRootRef:handleRootRef,after:value?(0,jsx_runtime.jsx)(IconButton.K,{hoverMode:"opacity",label:clearFieldLabel,onClick:clear,children:(0,jsx_runtime.jsx)(clear_16.M,{})}):(0,jsx_runtime.jsx)(IconButton.K,{hoverMode:"opacity",label:showCalendarLabel,onClick:openCalendar,children:(0,jsx_runtime.jsx)(calendar_outline_20.Q,{})}),disabled,onClick:(0,callMultiple.j)(handleFieldEnter,onClick),onFocus:(0,callMultiple.j)(handleFieldEnter,onFocus)},props),{children:[(0,jsx_runtime.jsx)("input",{type:"hidden",name,value:value?(0,date.GP)(value,enableTime?"DD.MM.YYYYTHH:mm":"DD.MM.YYYY"):""}),(0,jsx_runtime.jsxs)(Text.E,{className:DateInput_module.A.DateInput__input,onKeyDown:handleKeyDown,normalize:!1,Component:"span",children:[(0,jsx_runtime.jsx)(InputLike.o,{length:2,getRootRef:daysRef,index:0,onElementSelect:setFocusedElement,value:internalValue[0],label:changeDayLabel}),(0,jsx_runtime.jsx)(InputLikeDivider.J,{children:"."}),(0,jsx_runtime.jsx)(InputLike.o,{length:2,getRootRef:monthsRef,index:1,onElementSelect:setFocusedElement,value:internalValue[1],label:changeMonthLabel}),(0,jsx_runtime.jsx)(InputLikeDivider.J,{children:"."}),(0,jsx_runtime.jsx)(InputLike.o,{length:4,getRootRef:yearsRef,index:2,onElementSelect:setFocusedElement,value:internalValue[2],label:changeYearLabel}),enableTime&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(InputLikeDivider.J,{className:DateInput_module.A["DateInput__input--time-divider"],children:" "}),(0,jsx_runtime.jsx)(InputLike.o,{length:2,getRootRef:hoursRef,index:3,onElementSelect:setFocusedElement,value:internalValue[3],label:changeHoursLabel}),(0,jsx_runtime.jsx)(InputLikeDivider.J,{children:":"}),(0,jsx_runtime.jsx)(InputLike.o,{length:2,getRootRef:minutesRef,index:4,onElementSelect:setFocusedElement,value:internalValue[4],label:changeMinutesLabel})]})]}),open&&!disableCalendar&&(0,jsx_runtime.jsx)(Popper.N,{targetRef:rootRef,offsetByMainAxis:8,placement:calendarPlacement,autoUpdateOnTargetResize:!0,children:(0,jsx_runtime.jsx)(Calendar.V,{value,onChange:onCalendarChange,enableTime,disablePast,disableFuture,shouldDisableDate,onClose:removeFocusFromField,getRootRef:calendarRef,doneButtonText,disablePickers,changeHoursLabel,changeMinutesLabel,prevMonthLabel,nextMonthLabel,changeMonthLabel,changeYearLabel,changeDayLabel,showNeighboringMonth,size,viewDate,onHeaderChange,onNextMonth,onPrevMonth,prevMonthIcon,nextMonthIcon,minDateTime,maxDateTime})})]}))};try{DateInput.displayName="DateInput",DateInput.__docgenInfo={description:"",displayName:"DateInput",props:{calendarPlacement:{defaultValue:{value:"bottom-start"},description:"",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"top"'},{value:'"bottom"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"",name:"closeOnChange",required:!1,type:{name:"boolean"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"",name:"showCalendarLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"",name:"disableCalendar",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: Date) => void)"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Date"}},disablePast:{defaultValue:null,description:"Запрещает выбор даты в прошлом.\nПрименяется, если не заданы `shouldDisableDate` и `disableFuture`.",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"Запрещает выбор даты в будущем.\nПрименяется, если не задано `shouldDisableDate`.",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"Позволяет запретить выбор даты.",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},weekStartsOn:{defaultValue:null,description:"",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"",name:"changeYearLabel",required:!1,type:{name:"string"}},changeDayLabel:{defaultValue:{value:"Изменить день"},description:"",name:"changeDayLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},enableTime:{defaultValue:null,description:"",name:"enableTime",required:!1,type:{name:"boolean"}},doneButtonText:{defaultValue:null,description:"",name:"doneButtonText",required:!1,type:{name:"string"}},changeHoursLabel:{defaultValue:{value:"Изменить час"},description:"",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Изменить минуту"},description:"",name:"changeMinutesLabel",required:!1,type:{name:"string"}},showNeighboringMonth:{defaultValue:null,description:"",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},viewDate:{defaultValue:null,description:"Дата отображаемого месяца.\nПри использовании обновление даты должно происходить вне компонента.",name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Изменение даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},minDateTime:{defaultValue:null,description:"Минимальные дата и время, которые можно выбрать\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"minDateTime",required:!1,type:{name:"Date"}},maxDateTime:{defaultValue:null,description:"Максимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"maxDateTime",required:!1,type:{name:"Date"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"default"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"after",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"Режим отображения.\n\n- `default` — показывает фон, обводку и, при наличии, текст-подсказку.\n- `plain` — показывает только текст-подсказку.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"plain"'},{value:'"default"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateInput/DateInput.tsx#DateInput"]={docgenInfo:DateInput.__docgenInfo,name:"DateInput",path:"src/components/DateInput/DateInput.tsx#DateInput"})}catch(__react_docgen_typescript_loader_error){}function DateInput_stories_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function DateInput_stories_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){DateInput_stories_define_property(target,key,source[key])}))}return target}function DateInput_stories_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=function DateInput_stories_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}const DateInput_stories={title:"Forms/DateInput",component:DateInput,parameters:DateInput_stories_object_spread({},constants.eb,constants.eC),args:{onChange:(0,dist.fn)()},argTypes:{value:{control:{type:"date"}}}};var Playground={render:function(_param){var value=_param.value,args=DateInput_stories_object_without_properties(_param,["value"]),parsedValue=value?new Date(value):value;return(0,jsx_runtime.jsx)(DateInput,DateInput_stories_object_spread({value:parsedValue},args))}};Playground.parameters={...Playground.parameters,docs:{...Playground.parameters?.docs,source:{originalSource:"{\n  render: ({\n    value,\n    ...args\n  }) => {\n    const parsedValue = value ? new Date(value) : value;\n    return <DateInput value={parsedValue} {...args} />;\n  }\n}",...Playground.parameters?.docs?.source}}};const __namedExportsOrder=["Playground"]},"../../node_modules/@storybook/test/dist sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="../../node_modules/@storybook/test/dist sync recursive",module.exports=webpackEmptyContext}}]);