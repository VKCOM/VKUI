import{r as o,k as P,m as O,n as Y,j as A,R as U,i as g}from"./iframe-C2_PECK0.js";import{u as X,e as Z}from"./fx-oG50EwDv.js";import{u as G}from"./useConfigDirection-CkTav0j8.js";import{S as H}from"./ScrollArrow-BTooiCCv.js";const J="_host_1q7u6_1",K="_rtl_1q7u6_14",Q="_inWrapper_1q7u6_33",$="_arrow_1q7u6_39",u4="_withConstArrows_1q7u6_47",e4="_arrowLeft_1q7u6_55",t4="_arrowRight_1q7u6_59",a={host:J,rtl:K,in:"_in_1q7u6_18",inWrapper:Q,arrow:$,withConstArrows:u4,arrowLeft:e4,arrowRight:t4};function I(){return performance&&performance.now?performance.now():Date.now()}function k(e){return e>0?Math.ceil(e):Math.floor(e)}const M=e=>k(e.scrollLeft),r4=250;function n4({scrollElement:e,getScrollPosition:E,animationQueue:c,onScrollToEndBorder:s,onScrollEnd:C,onScrollStart:h,initialScrollWidth:F,scrollAnimationDuration:L,textDirection:l}){if(!e||!E)return;const S=(l==="ltr"?1:-1)*(F-e.offsetWidth),i=M(e),_=i*(l==="rtl"?-1:1);let r=E(_);const q=r-_;l==="rtl"&&(r=i-q),h(),i*r<0&&(r=0),Math.abs(r)>=Math.abs(S)&&(s(),r=S);const W=I();(function b(){const T=I(),w=Math.min((T-W)/L,1),p=Z(w),m=i+(r-i)*p;e.scrollLeft=k(m);const B=l==="ltr"?Math.max(0,r):Math.min(0,r);if(M(e)!==B&&w!==1){requestAnimationFrame(b);return}C(),c.shift(),c.length>0&&c[0]()})()}const N=({children:e,getScrollToLeft:E,getScrollToRight:c,showArrows:s=!0,arrowSize:C="m",arrowOffsetY:h,scrollAnimationDuration:F=r4,getRef:L,scrollOnAnyWheel:l=!1,prevButtonTestId:S,nextButtonTestId:i,ContentWrapperComponent:_="div",contentWrapperRef:r,contentWrapperClassName:q,...W})=>{const[b,T]=o.useState(!1),[w,p]=o.useState(!1),m=G(),B=m==="rtl",x=o.useRef(!1),t=P(L),y=o.useRef([]),f=X(),v=o.useCallback(n=>{const u=t.current;y.current.push(()=>{var D;return n4({scrollElement:u,getScrollPosition:n,animationQueue:y.current,onScrollToEndBorder:()=>p(!1),onScrollEnd:()=>x.current=!1,onScrollStart:()=>x.current=!0,initialScrollWidth:((D=u==null?void 0:u.firstElementChild)==null?void 0:D.scrollWidth)||0,scrollAnimationDuration:F,textDirection:m})}),y.current.length===1&&y.current[0]()},[t,F,m,p]),j=o.useCallback(()=>{v(E??(u=>u-t.current.offsetWidth))},[E,v,t]),z=o.useCallback(()=>{v(c??(u=>u+t.current.offsetWidth))},[c,v,t]),d=o.useCallback(()=>{if(s&&f&&t.current&&!x.current){const n=t.current,u=n.scrollLeft;T(B?u<0:u>0),p(Math.abs(M(n))+n.offsetWidth<n.scrollWidth)}},[s,f,t,B]);return o.useEffect(d,[d,e]),O(function(){const u=t.current;if(!u)return Y;const D=V=>{t.current.scrollBy({left:V.deltaX+V.deltaY,behavior:"auto"}),V.preventDefault()},R={passive:!1};return l&&u.addEventListener("wheel",D,R),u.addEventListener("scroll",d,R),()=>{l&&u.removeEventListener("wheel",D,R),u.removeEventListener("scroll",d,R)}},[l,d,t]),A.jsxs(U,{...W,baseClassName:g(a.host,"vkuiInternalHorizontalScroll",s==="always"&&a.withConstArrows,B&&a.rtl),onMouseEnter:d,children:[s&&(f||f===void 0)&&b&&A.jsx(H,{"data-testid":S,size:C,offsetY:h,direction:"left","aria-hidden":!0,tabIndex:-1,className:g(a.arrow,a.arrowLeft),onClick:j}),s&&(f||f===void 0)&&w&&A.jsx(H,{"data-testid":i,size:C,offsetY:h,direction:"right","aria-hidden":!0,tabIndex:-1,className:g(a.arrow,a.arrowRight),onClick:z}),A.jsx("div",{className:a.in,ref:t,children:A.jsx(_,{className:g(a.inWrapper,q),ref:r,children:e})})]})};try{N.displayName="HorizontalScroll",N.__docgenInfo={description:"",displayName:"HorizontalScroll",props:{getScrollToLeft:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на левую стрелку.",name:"getScrollToLeft",required:!1,type:{name:"ScrollPositionHandler"}},getScrollToRight:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на правую стрелку.",name:"getScrollToRight",required:!1,type:{name:"ScrollPositionHandler"}},arrowSize:{defaultValue:{value:"m"},description:"Размер стрелок.",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},arrowOffsetY:{defaultValue:null,description:"Смещает иконки кнопок навигации по вертикали.",name:"arrowOffsetY",required:!1,type:{name:"string | number"}},showArrows:{defaultValue:{value:"true"},description:"Показывать ли стрелки.",name:"showArrows",required:!1,type:{name:'boolean | "always"'}},scrollAnimationDuration:{defaultValue:{value:"250"},description:"Длительность анимации скролла.",name:"scrollAnimationDuration",required:!1,type:{name:"number"}},scrollOnAnyWheel:{defaultValue:{value:"false"},description:`Добавляет возможность прокручивать контент на любое колесо мыши.
По умолчанию прокручивается как любой горизонтальный контент через shift.`,name:"scrollOnAnyWheel",required:!1,type:{name:"boolean"}},prevButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении предыдущего элемента.",name:"prevButtonTestId",required:!1,type:{name:"string"}},nextButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении следующего элемента.",name:"nextButtonTestId",required:!1,type:{name:"string"}},ContentWrapperComponent:{defaultValue:{value:"div"},description:"Позволяет поменять тег используемый для обертки над контентом, прокинутым в `children`.",name:"ContentWrapperComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},contentWrapperRef:{defaultValue:null,description:"`ref` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentWrapperClassName:{defaultValue:null,description:"Специфичный `className` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperClassName",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{N as H};
