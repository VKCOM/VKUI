import{r as a,h as Q,q as $,n as u4,j as E,R as e4,g as m}from"./iframe-BJ9555aC.js";import{u as t4}from"./useConfigDirection-BeEtg5OO.js";import{u as r4,a as n4}from"./useState-ernR_nsp.js";import{u as o4}from"./useFocusVisibleClassName-nD9g3KxA.js";import{e as a4}from"./fx-D-5xmdri.js";import{m as l4}from"./mergeCalls-Bc-HqyI0.js";import{S as N}from"./ScrollArrow-BPsGnfWv.js";const s4="_host_1hkd8_1",i4="_rtl_1hkd8_14",c4="_inWrapper_1hkd8_33",d4="_arrow_1hkd8_39",f4="_showArrows_1hkd8_47",E4="_arrowLeft_1hkd8_56",m4="_arrowRight_1hkd8_60",p4="_withPadding_1hkd8_68",n={host:s4,rtl:i4,in:"_in_1hkd8_18",inWrapper:c4,arrow:d4,showArrows:f4,arrowLeft:E4,arrowRight:m4,withPadding:p4};function I(){return performance&&performance.now?performance.now():Date.now()}function j(u){return u>0?Math.ceil(u):Math.floor(u)}const M=u=>j(u.scrollLeft),h4=250;function B4({scrollElement:u,getScrollPosition:f,animationQueue:c,onScrollToEndBorder:s,onScrollEnd:p,onScrollStart:h,initialScrollWidth:B,scrollAnimationDuration:_,textDirection:l}){if(!u||!f)return;const D=(l==="ltr"?1:-1)*(B-u.offsetWidth),i=M(u),A=i*(l==="rtl"?-1:1);let r=f(A);const w=r-A;l==="rtl"&&(r=i-w),h(),i*r<0&&(r=0),Math.abs(r)>=Math.abs(D)&&(s(),r=D);const g=I();(function v(){const y=I(),R=Math.min((y-g)/_,1),L=a4(R),b=i+(r-i)*L;u.scrollLeft=j(b);const V=l==="ltr"?Math.max(0,r):Math.min(0,r);if(M(u)!==V&&R!==1){requestAnimationFrame(v);return}p(),c.shift(),c.length>0&&c[0]()})()}const P=({children:u,getScrollToLeft:f,getScrollToRight:c,showArrows:s=!0,arrowSize:p="m",arrowOffsetY:h,scrollAnimationDuration:B=h4,getRef:_,scrollOnAnyWheel:l=!1,prevButtonTestId:D,nextButtonTestId:i,ContentWrapperComponent:A="div",contentWrapperRef:r,contentWrapperClassName:w,withPadding:g,onPointerEnter:v,onPointerLeave:y,onMouseEnter:R,...L})=>{const[b,V]=a.useState(!1),[z,W]=a.useState(!1),{focusVisible:O,...Y}=r4(),U=o4({focusVisible:O}),k=t4(),q=k==="rtl",T=a.useRef(!1),t=Q(_),C=a.useRef([]),{isHovered:X,...Z}=n4(),F=a.useCallback(o=>{const e=t.current;C.current.push(()=>B4({scrollElement:e,getScrollPosition:o,animationQueue:C.current,onScrollToEndBorder:()=>W(!1),onScrollEnd:()=>T.current=!1,onScrollStart:()=>T.current=!0,initialScrollWidth:e?.firstElementChild?.scrollWidth||0,scrollAnimationDuration:B,textDirection:k})),C.current.length===1&&C.current[0]()},[t,B,k,W]),G=a.useCallback(()=>{F(f??(e=>e-t.current.offsetWidth))},[f,F,t]),J=a.useCallback(()=>{F(c??(e=>e+t.current.offsetWidth))},[c,F,t]),d=a.useCallback(()=>{if(s&&t.current&&!T.current){const o=t.current,e=o.scrollLeft;V(q?e<0:e>0),W(Math.abs(M(o))+o.offsetWidth<o.scrollWidth)}},[s,t,q]);a.useEffect(d,[d,u]),$(function(){const e=t.current;if(!e)return u4;const H=x=>{t.current.scrollBy({left:x.deltaX+x.deltaY,behavior:"auto"}),x.preventDefault()},S={passive:!1};return l&&e.addEventListener("wheel",H,S),e.addEventListener("scroll",d,S),()=>{l&&e.removeEventListener("wheel",H,S),e.removeEventListener("scroll",d,S)}},[l,d,t]);const K=l4(Z,{onPointerEnter:v,onPointerLeave:y});return E.jsxs(e4,{...L,...K,baseClassName:m(n.host,"vkuiInternalHorizontalScroll",(s==="always"||X)&&n.showArrows,q&&n.rtl,g&&n.withPadding),onMouseEnter:d,children:[s&&b&&E.jsx(N,{"data-testid":D,size:p,offsetY:h,direction:"left","aria-hidden":!0,tabIndex:-1,className:m(n.arrow,n.arrowLeft),onClick:G}),s&&z&&E.jsx(N,{"data-testid":i,size:p,offsetY:h,direction:"right","aria-hidden":!0,tabIndex:-1,className:m(n.arrow,n.arrowRight),onClick:J}),E.jsx("div",{className:m(n.in,U),ref:t,...Y,children:E.jsx(A,{className:m(n.inWrapper,w),ref:r,children:u})})]})};try{P.displayName="HorizontalScroll",P.__docgenInfo={description:"",displayName:"HorizontalScroll",props:{getScrollToLeft:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на левую стрелку.",name:"getScrollToLeft",required:!1,type:{name:"ScrollPositionHandler"}},getScrollToRight:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на правую стрелку.",name:"getScrollToRight",required:!1,type:{name:"ScrollPositionHandler"}},arrowSize:{defaultValue:{value:"m"},description:"Размер стрелок.",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},arrowOffsetY:{defaultValue:null,description:"Смещает иконки кнопок навигации по вертикали.",name:"arrowOffsetY",required:!1,type:{name:"string | number"}},showArrows:{defaultValue:{value:"true"},description:"Показывать ли стрелки.",name:"showArrows",required:!1,type:{name:'boolean | "always"'}},scrollAnimationDuration:{defaultValue:{value:"250"},description:"Длительность анимации скролла.",name:"scrollAnimationDuration",required:!1,type:{name:"number"}},scrollOnAnyWheel:{defaultValue:{value:"false"},description:`Добавляет возможность прокручивать контент на любое колесо мыши.
По умолчанию прокручивается как любой горизонтальный контент через shift.`,name:"scrollOnAnyWheel",required:!1,type:{name:"boolean"}},prevButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении предыдущего элемента.",name:"prevButtonTestId",required:!1,type:{name:"string"}},nextButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении следующего элемента.",name:"nextButtonTestId",required:!1,type:{name:"string"}},ContentWrapperComponent:{defaultValue:{value:"div"},description:"Позволяет поменять тег используемый для обертки над контентом, прокинутым в `children`.",name:"ContentWrapperComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},contentWrapperRef:{defaultValue:null,description:"`ref` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentWrapperClassName:{defaultValue:null,description:"Специфичный `className` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperClassName",required:!1,type:{name:"string"}},withPadding:{defaultValue:null,description:"Добавляет отступы для контента внутри.",name:"withPadding",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{P as H};
