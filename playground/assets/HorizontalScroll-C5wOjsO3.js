import{r as a,k as P,m as O,n as Y,j as A,R as U,i as g}from"./iframe-k6odcVfq.js";import{u as X,e as Z}from"./fx-CpkSQu6p.js";import{u as G}from"./useConfigDirection-CxnUW9rE.js";import{S as H}from"./ScrollArrow-CQdXBPdy.js";const J="_host_9vamx_1",K="_rtl_9vamx_14",Q="_inWrapper_9vamx_33",$="_arrow_9vamx_39",u4="_withConstArrows_9vamx_50",e4="_arrowLeft_9vamx_56",t4="_arrowRight_9vamx_60",o={host:J,rtl:K,in:"_in_9vamx_18",inWrapper:Q,arrow:$,withConstArrows:u4,arrowLeft:e4,arrowRight:t4};function I(){return performance&&performance.now?performance.now():Date.now()}function k(e){return e>0?Math.ceil(e):Math.floor(e)}const M=e=>k(e.scrollLeft),r4=250;function n4({scrollElement:e,getScrollPosition:E,animationQueue:c,onScrollToEndBorder:s,onScrollEnd:C,onScrollStart:h,initialScrollWidth:F,scrollAnimationDuration:L,textDirection:l}){if(!e||!E)return;const S=(l==="ltr"?1:-1)*(F-e.offsetWidth),i=M(e),v=i*(l==="rtl"?-1:1);let r=E(v);const x=r-v;l==="rtl"&&(r=i-x),h(),i*r<0&&(r=0),Math.abs(r)>=Math.abs(S)&&(s(),r=S);const W=I();(function b(){const T=I(),_=Math.min((T-W)/L,1),m=Z(_),p=i+(r-i)*m;e.scrollLeft=k(p);const B=l==="ltr"?Math.max(0,r):Math.min(0,r);if(M(e)!==B&&_!==1){requestAnimationFrame(b);return}C(),c.shift(),c.length>0&&c[0]()})()}const N=({children:e,getScrollToLeft:E,getScrollToRight:c,showArrows:s=!0,arrowSize:C="m",arrowOffsetY:h,scrollAnimationDuration:F=r4,getRef:L,scrollOnAnyWheel:l=!1,prevButtonTestId:S,nextButtonTestId:i,ContentWrapperComponent:v="div",contentWrapperRef:r,contentWrapperClassName:x,...W})=>{const[b,T]=a.useState(!1),[_,m]=a.useState(!1),p=G(),B=p==="rtl",q=a.useRef(!1),t=P(L),w=a.useRef([]),f=X(),y=a.useCallback(n=>{const u=t.current;w.current.push(()=>{var D;return n4({scrollElement:u,getScrollPosition:n,animationQueue:w.current,onScrollToEndBorder:()=>m(!1),onScrollEnd:()=>q.current=!1,onScrollStart:()=>q.current=!0,initialScrollWidth:((D=u==null?void 0:u.firstElementChild)==null?void 0:D.scrollWidth)||0,scrollAnimationDuration:F,textDirection:p})}),w.current.length===1&&w.current[0]()},[t,F,p,m]),j=a.useCallback(()=>{y(E??(u=>u-t.current.offsetWidth))},[E,y,t]),z=a.useCallback(()=>{y(c??(u=>u+t.current.offsetWidth))},[c,y,t]),d=a.useCallback(()=>{if(s&&f&&t.current&&!q.current){const n=t.current,u=n.scrollLeft;T(B?u<0:u>0),m(Math.abs(M(n))+n.offsetWidth<n.scrollWidth)}},[s,f,t,B]);return a.useEffect(d,[d,e]),O(function(){const u=t.current;if(!u)return Y;const D=V=>{t.current.scrollBy({left:V.deltaX+V.deltaY,behavior:"auto"}),V.preventDefault()},R={passive:!1};return l&&u.addEventListener("wheel",D,R),u.addEventListener("scroll",d,R),()=>{l&&u.removeEventListener("wheel",D,R),u.removeEventListener("scroll",d,R)}},[l,d,t]),A.jsxs(U,{...W,baseClassName:g(o.host,"vkuiInternalHorizontalScroll",s==="always"&&o.withConstArrows,B&&o.rtl),onMouseEnter:d,children:[s&&(f||f===void 0)&&b&&A.jsx(H,{"data-testid":S,size:C,offsetY:h,direction:"left","aria-hidden":!0,tabIndex:-1,className:g(o.arrow,o.arrowLeft),onClick:j}),s&&(f||f===void 0)&&_&&A.jsx(H,{"data-testid":i,size:C,offsetY:h,direction:"right","aria-hidden":!0,tabIndex:-1,className:g(o.arrow,o.arrowRight),onClick:z}),A.jsx("div",{className:o.in,ref:t,children:A.jsx(v,{className:g(o.inWrapper,x),ref:r,children:e})})]})};try{N.displayName="HorizontalScroll",N.__docgenInfo={description:"",displayName:"HorizontalScroll",props:{getScrollToLeft:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на левую стрелку.",name:"getScrollToLeft",required:!1,type:{name:"ScrollPositionHandler"}},getScrollToRight:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на правую стрелку.",name:"getScrollToRight",required:!1,type:{name:"ScrollPositionHandler"}},arrowSize:{defaultValue:{value:"m"},description:"Размер стрелок.",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},arrowOffsetY:{defaultValue:null,description:"Смещает иконки кнопок навигации по вертикали.",name:"arrowOffsetY",required:!1,type:{name:"string | number"}},showArrows:{defaultValue:{value:"true"},description:"Показывать ли стрелки.",name:"showArrows",required:!1,type:{name:'boolean | "always"'}},scrollAnimationDuration:{defaultValue:{value:"250"},description:"Длительность анимации скролла.",name:"scrollAnimationDuration",required:!1,type:{name:"number"}},scrollOnAnyWheel:{defaultValue:{value:"false"},description:`Добавляет возможность прокручивать контент на любое колесо мыши.
По умолчанию прокручивается как любой горизонтальный контент через shift.`,name:"scrollOnAnyWheel",required:!1,type:{name:"boolean"}},prevButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении предыдущего элемента.",name:"prevButtonTestId",required:!1,type:{name:"string"}},nextButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении следующего элемента.",name:"nextButtonTestId",required:!1,type:{name:"string"}},ContentWrapperComponent:{defaultValue:{value:"div"},description:"Позволяет поменять тег используемый для обертки над контентом, прокинутым в `children`.",name:"ContentWrapperComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},contentWrapperRef:{defaultValue:null,description:"`ref` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentWrapperClassName:{defaultValue:null,description:"Специфичный `className` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperClassName",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{N as H};
