import{v as j,i as le,r as i,k as re,u as ce,c as ue,X as de,l as pe,j as t,R as fe,h as H,n as me}from"./iframe-CjlHPZNU.js";import{h as _e}from"./react_utils-CSZjvU4X.js";import{u as he}from"./useBooleanState-Byxj-TXc.js";import{u as ve}from"./useConfigDirection-CtCMtXRC.js";import{u as Ie}from"./useNativeFormResetListener-CxFv_rpZ.js";import{c as be}from"./callMultiple-ChqatQlo.js";import{B as M}from"./Button-eWkGETfu.js";import{I as q}from"./IconButton-DL_Qecp_.js";import{H as ye}from"./Headline-5QXk0_9F.js";import{V as E}from"./VisuallyHidden-BhHQTREx.js";import{I as Re}from"./clear_16-CDlNe0mR.js";import{I as Ce}from"./cancel_24-DoQTGG5W.js";import{I as Ve}from"./search_outline_16-DizdXxPN.js";const ge="_host_ewo5i_1",xe="_rtl_ewo5i_11",we="_withPadding_ewo5i_15",Be="_sizeYCompact_ewo5i_24",Ne="_sizeYNone_ewo5i_29",Te="_field_ewo5i_34",je="_label_ewo5i_57",He="_input_ewo5i_64",Me="_nativeInput_ewo5i_76",qe="_hasAfter_ewo5i_106",Ee="_disabled_ewo5i_111",Se="_controls_ewo5i_131",Le="_hasIcon_ewo5i_144",Fe="_hasValue_ewo5i_156",ke="_icon_ewo5i_160",ze="_after_ewo5i_174",Ae="_focused_ewo5i_185",Ye="_afterTextClip_ewo5i_204",De="_findButton_ewo5i_211",e={host:ge,rtl:xe,withPadding:we,sizeYCompact:Be,sizeYNone:Ne,field:Te,label:je,input:He,nativeInput:Me,hasAfter:qe,disabled:Ee,controls:Se,hasIcon:Le,hasValue:Fe,icon:ke,after:ze,focused:Ae,afterTextClip:Ye,findButton:De},S=({className:_,getRootRef:L,style:F,placeholder:k="Поиск",before:z=t.jsx(Ve,{}),after:h="Отмена",getRef:A,icon:s,onIconClick:v,autoComplete:Y="off",iconLabel:D,clearLabel:P="Очистить",clearButtonTestId:O,noPadding:X,findButtonText:$="Найти",findButtonTestId:G,onFindButtonClick:r,hideClearButton:I,slotProps:b,...y})=>{const J=ve()==="rtl",K=j({className:_,style:F,getRootRef:L},b?.root),{id:R,placeholder:C,onChange:Q,autoComplete:U,getRootRef:W,onFocus:V,onBlur:g,...o}=j({getRootRef:A,placeholder:k,autoComplete:Y,className:e.nativeInput,...y},b?.input),n=le(W),{value:Z,setTrue:c,setFalse:u}=he(!1),ee=i.useId(),x=R||`search-${ee}`,[d,p]=i.useState(()=>!!(o.value||o.defaultValue)),te=a=>p(!!a.currentTarget.value),{sizeY:w="none"}=re(),{sizeY:f}=ce(),B=ue(),N=B==="ios"&&_e(h),ae=a=>{c(),V&&V(a)},oe=a=>{u(),g&&g(a)},l=i.useCallback(()=>{Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")?.set?.call(n.current,"");const m=new Event("input",{bubbles:!0});n.current?.dispatchEvent(m)},[n]),ne=i.useCallback(a=>v?.(a),[v]),se=i.useCallback(a=>{a.preventDefault(),n.current?.focus(),de()&&l()},[n,l]);pe(()=>{o.value!==void 0&&p(!!o.value)},[o.value]),Ie(n,()=>{p(!!o.defaultValue)});const T=(a,m={})=>t.jsxs(q,{hoverMode:"opacity",onPointerDown:ne,className:e.icon,onFocus:c,onBlur:u,onClick:me,...m,children:[t.jsx(E,{children:D}),a]}),ie=!!(s||!I||f.compact&&r);return t.jsxs(fe,{baseClassName:H("vkuiInternalSearch",e.host,w==="none"&&e.sizeYNone,w==="compact"&&e.sizeYCompact,Z&&e.focused,d&&e.hasValue,N&&e.hasAfter,s&&e.hasIcon,o.disabled&&e.disabled,!X&&e.withPadding,J&&e.rtl),...K,children:[t.jsxs("div",{className:e.field,children:[t.jsx("label",{htmlFor:x,className:e.label,children:C}),t.jsxs("div",{className:e.input,children:[z,t.jsx(ye,{Component:"input",type:"search",level:"1",weight:"3",id:x,placeholder:C,autoComplete:U,getRootRef:n,onChange:be(Q,te),onFocus:ae,onBlur:oe,...o})]}),ie&&t.jsxs("div",{className:e.controls,children:[s&&(typeof s=="function"?s(T):T(s)),!I&&t.jsxs(q,{hoverMode:"opacity",onPointerDown:se,onClick:l,className:e.icon,tabIndex:d?void 0:-1,disabled:y.disabled,"data-testid":O,children:[t.jsx(E,{children:P}),B==="ios"?t.jsx(Re,{}):t.jsx(Ce,{})]}),f.compact&&r&&t.jsx(M,{mode:"primary",size:"m",className:H(e.findButton,f.compact.className),focusVisibleMode:"inside",onClick:r,tabIndex:d?void 0:-1,"data-testid":G,children:$})]})]}),N&&t.jsx("div",{className:e.after,children:t.jsx(M,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:l,onFocus:c,onBlur:u,children:t.jsx("span",{className:e.afterTextClip,children:h})})})]})};try{S.displayName="Search",S.__docgenInfo={description:"",displayName:"Search",props:{getRef:{defaultValue:null,description:"@deprecated Since 7.9.0. Вместо этого используйте `slotProps={ input: { getRootRef: ... } }`.",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},slotProps:{defaultValue:null,description:"Свойства, которые можно прокинуть внутрь компонента:\n- `root`: свойства для прокидывания в корень компонента;\n- `input`: свойства для прокидывания в поле ввода.",name:"slotProps",required:!1,type:{name:"{ root?: (HTMLAttributes<HTMLDivElement> & HasRootRef<HTMLDivElement> & HasDataAttribute); input?: (InputHTMLAttributes<...> & ... 1 more ... & HasDataAttribute); } | undefined"}},after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},hideClearButton:{defaultValue:null,description:"Скрывает кнопку очистки.",name:"hideClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{S};
