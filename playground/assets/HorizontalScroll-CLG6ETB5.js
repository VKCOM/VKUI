import{r as l,h as Q,q as $,n as u4,j as E,R as e4,g as m}from"./iframe-CGSrC79H.js";import{u as t4}from"./useConfigDirection-BDt5-3HT.js";import{u as r4,a as n4}from"./useState-DzaGsmJ4.js";import{u as o4}from"./useFocusVisibleClassName-CgCqKIR9.js";import{e as l4}from"./fx-D-5xmdri.js";import{m as a4}from"./mergeCalls-Bc-HqyI0.js";import{S as N}from"./ScrollArrow-BvupeBe5.js";const s4="_host_l45jv_1",i4="_rtl_l45jv_14",c4="_inWrapper_l45jv_33",f4="_arrow_l45jv_39",d4="_showArrows_l45jv_46",E4="_arrowLeft_l45jv_54",m4="_arrowRight_l45jv_58",p4="_withPadding_l45jv_66",n={host:s4,rtl:i4,in:"_in_l45jv_18",inWrapper:c4,arrow:f4,showArrows:d4,arrowLeft:E4,arrowRight:m4,withPadding:p4};function I(){return performance&&performance.now?performance.now():Date.now()}function k(u){return u>0?Math.ceil(u):Math.floor(u)}const M=u=>k(u.scrollLeft),B4=250;function D4({scrollElement:u,getScrollPosition:d,animationQueue:c,onScrollToEndBorder:s,onScrollEnd:p,onScrollStart:B,initialScrollWidth:D,scrollAnimationDuration:v,textDirection:a}){if(!u||!d)return;const h=(a==="ltr"?1:-1)*(D-u.offsetWidth),i=M(u),A=i*(a==="rtl"?-1:1);let r=d(A);const _=r-A;a==="rtl"&&(r=i-_),B(),i*r<0&&(r=0),Math.abs(r)>=Math.abs(h)&&(s(),r=h);const w=I();(function g(){const y=I(),R=Math.min((y-w)/v,1),L=l4(R),b=i+(r-i)*L;u.scrollLeft=k(b);const V=a==="ltr"?Math.max(0,r):Math.min(0,r);if(M(u)!==V&&R!==1){requestAnimationFrame(g);return}p(),c.shift(),c.length>0&&c[0]()})()}const P=({children:u,getScrollToLeft:d,getScrollToRight:c,showArrows:s=!0,arrowSize:p="m",arrowOffsetY:B,scrollAnimationDuration:D=B4,getRef:v,scrollOnAnyWheel:a=!1,prevButtonTestId:h,nextButtonTestId:i,ContentWrapperComponent:A="div",contentWrapperRef:r,contentWrapperClassName:_,withPadding:w,onPointerEnter:g,onPointerLeave:y,onMouseEnter:R,...L})=>{const[b,V]=l.useState(!1),[z,W]=l.useState(!1),{focusVisible:O,...Y}=r4(),U=o4({focusVisible:O}),q=t4(),j=q==="rtl",T=l.useRef(!1),t=Q(v),C=l.useRef([]),{isHovered:X,...Z}=n4(),F=l.useCallback(o=>{const e=t.current;C.current.push(()=>D4({scrollElement:e,getScrollPosition:o,animationQueue:C.current,onScrollToEndBorder:()=>W(!1),onScrollEnd:()=>T.current=!1,onScrollStart:()=>T.current=!0,initialScrollWidth:e?.firstElementChild?.scrollWidth||0,scrollAnimationDuration:D,textDirection:q})),C.current.length===1&&C.current[0]()},[t,D,q,W]),G=l.useCallback(()=>{F(d??(e=>e-t.current.offsetWidth))},[d,F,t]),J=l.useCallback(()=>{F(c??(e=>e+t.current.offsetWidth))},[c,F,t]),f=l.useCallback(()=>{if(s&&t.current&&!T.current){const o=t.current,e=o.scrollLeft;V(j?e<0:e>0),W(Math.abs(M(o))+o.offsetWidth<o.scrollWidth)}},[s,t,j]);l.useEffect(f,[f,u]),$(function(){const e=t.current;if(!e)return u4;const H=x=>{t.current.scrollBy({left:x.deltaX+x.deltaY,behavior:"auto"}),x.preventDefault()},S={passive:!1};return a&&e.addEventListener("wheel",H,S),e.addEventListener("scroll",f,S),()=>{a&&e.removeEventListener("wheel",H,S),e.removeEventListener("scroll",f,S)}},[a,f,t]);const K=a4(Z,{onPointerEnter:g,onPointerLeave:y});return E.jsxs(e4,{...L,...K,baseClassName:m(n.host,"vkuiInternalHorizontalScroll",(s==="always"||X)&&n.showArrows,j&&n.rtl,w&&n.withPadding),onMouseEnter:f,children:[s&&b&&E.jsx(N,{"data-testid":h,size:p,offsetY:B,direction:"left","aria-hidden":!0,tabIndex:-1,className:m(n.arrow,n.arrowLeft),onClick:G}),s&&z&&E.jsx(N,{"data-testid":i,size:p,offsetY:B,direction:"right","aria-hidden":!0,tabIndex:-1,className:m(n.arrow,n.arrowRight),onClick:J}),E.jsx("div",{className:m(n.in,U),ref:t,...Y,children:E.jsx(A,{className:m(n.inWrapper,_),ref:r,children:u})})]})};try{P.displayName="HorizontalScroll",P.__docgenInfo={description:"",displayName:"HorizontalScroll",props:{getScrollToLeft:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на левую стрелку.",name:"getScrollToLeft",required:!1,type:{name:"ScrollPositionHandler"}},getScrollToRight:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на правую стрелку.",name:"getScrollToRight",required:!1,type:{name:"ScrollPositionHandler"}},arrowSize:{defaultValue:{value:"m"},description:"Размер стрелок.",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},arrowOffsetY:{defaultValue:null,description:"Смещает иконки кнопок навигации по вертикали.",name:"arrowOffsetY",required:!1,type:{name:"string | number"}},showArrows:{defaultValue:{value:"true"},description:"Показывать ли стрелки.",name:"showArrows",required:!1,type:{name:'boolean | "always"'}},scrollAnimationDuration:{defaultValue:{value:"250"},description:"Длительность анимации скролла.",name:"scrollAnimationDuration",required:!1,type:{name:"number"}},scrollOnAnyWheel:{defaultValue:{value:"false"},description:`Добавляет возможность прокручивать контент на любое колесо мыши.
По умолчанию прокручивается как любой горизонтальный контент через shift.`,name:"scrollOnAnyWheel",required:!1,type:{name:"boolean"}},prevButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении предыдущего элемента.",name:"prevButtonTestId",required:!1,type:{name:"string"}},nextButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении следующего элемента.",name:"nextButtonTestId",required:!1,type:{name:"string"}},ContentWrapperComponent:{defaultValue:{value:"div"},description:"Позволяет поменять тег используемый для обертки над контентом, прокинутым в `children`.",name:"ContentWrapperComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},contentWrapperRef:{defaultValue:null,description:"`ref` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentWrapperClassName:{defaultValue:null,description:"Специфичный `className` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperClassName",required:!1,type:{name:"string"}},withPadding:{defaultValue:null,description:"Добавляет отступы для контента внутри.",name:"withPadding",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{P as H};
