import{i as u4,r as l,k as e4,u as t4,c as a4,W as n4,l as o4,j as e,h as I,n as s4}from"./iframe-qoTtUH8h.js";import{h as l4}from"./react_utils-CSZjvU4X.js";import{u as i4}from"./useBooleanState-CHQ6a7fI.js";import{u as c4}from"./useConfigDirection-DgRc04K6.js";import{u as r4}from"./useNativeFormResetListener-By3eV_PD.js";import{c as d4}from"./callMultiple-ChqatQlo.js";import{B as w}from"./Button-qb2UxdVt.js";import{I as V}from"./IconButton-B17wjzUA.js";import{H as f4}from"./Headline-BOHGExn8.js";import{V as g}from"./VisuallyHidden-BqFtMTWb.js";import{I as m4}from"./clear_16-BHhch7lE.js";import{I as p4}from"./cancel_24-CLPDrLYl.js";import{I as E4}from"./search_outline_16-mQju_dqq.js";const _4="_host_ewo5i_1",h4="_rtl_ewo5i_11",A4="_withPadding_ewo5i_15",B4="_sizeYCompact_ewo5i_24",F4="_sizeYNone_ewo5i_29",v4="_field_ewo5i_34",D4="_label_ewo5i_57",C4="_input_ewo5i_64",y4="_nativeInput_ewo5i_76",b4="_hasAfter_ewo5i_106",x4="_disabled_ewo5i_111",I4="_controls_ewo5i_131",w4="_hasIcon_ewo5i_144",V4="_hasValue_ewo5i_156",g4="_icon_ewo5i_160",N4="_after_ewo5i_174",R4="_focused_ewo5i_185",j4="_afterTextClip_ewo5i_204",T4="_findButton_ewo5i_211",u={host:_4,rtl:h4,withPadding:A4,sizeYCompact:B4,sizeYNone:F4,field:v4,label:D4,input:C4,nativeInput:y4,hasAfter:b4,disabled:x4,controls:I4,hasIcon:w4,hasValue:V4,icon:g4,after:N4,focused:R4,afterTextClip:j4,findButton:T4},N=({id:r,before:R=e.jsx(E4,{}),className:j,placeholder:h="Поиск",after:A="Отмена",getRef:T,icon:o,onIconClick:i,style:q,autoComplete:z="off",onChange:M,iconLabel:H,clearLabel:S="Очистить",clearButtonTestId:L,noPadding:Y,getRootRef:k,findButtonText:O="Найти",findButtonTestId:W,onFindButtonClick:d,hideClearButton:B,...a})=>{const $=c4()==="rtl",n=u4(T),{value:G,setTrue:f,setFalse:m}=i4(!1),J=l.useId(),F=r||`search-${J}`,[p,E]=l.useState(()=>!!(a.value||a.defaultValue)),K=t=>E(!!t.currentTarget.value),{sizeY:v="none"}=e4(),{sizeY:_}=t4(),D=a4(),C=D==="ios"&&l4(A),Q=t=>{f(),a.onFocus&&a.onFocus(t)},U=t=>{m(),a.onBlur&&a.onBlur(t)},c=l.useCallback(()=>{var b,x;const t=(b=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:b.set;t==null||t.call(n.current,"");const s=new Event("input",{bubbles:!0});(x=n.current)==null||x.dispatchEvent(s)},[n]),X=l.useCallback(t=>i==null?void 0:i(t),[i]),Z=l.useCallback(t=>{var s;t.preventDefault(),(s=n.current)==null||s.focus(),n4()&&c()},[n,c]);o4(()=>{a.value!==void 0&&E(!!a.value)},[a.value]),r4(n,()=>{E(!!a.defaultValue)});const y=(t,s={})=>e.jsxs(V,{hoverMode:"opacity",onPointerDown:X,className:u.icon,onFocus:f,onBlur:m,onClick:s4,...s,children:[e.jsx(g,{children:H}),t]}),P=!!(o||!B||_.compact&&d);return e.jsxs("div",{className:I("vkuiInternalSearch",u.host,v==="none"&&u.sizeYNone,v==="compact"&&u.sizeYCompact,G&&u.focused,p&&u.hasValue,C&&u.hasAfter,o&&u.hasIcon,a.disabled&&u.disabled,!Y&&u.withPadding,$&&u.rtl,j),ref:k,style:q,children:[e.jsxs("div",{className:u.field,children:[e.jsx("label",{htmlFor:F,className:u.label,children:h}),e.jsxs("div",{className:u.input,children:[R,e.jsx(f4,{Component:"input",type:"search",level:"1",weight:"3",...a,id:F,placeholder:h,autoComplete:z,getRootRef:n,className:u.nativeInput,onFocus:Q,onBlur:U,onChange:d4(M,K)})]}),P&&e.jsxs("div",{className:u.controls,children:[o&&(typeof o=="function"?o(y):y(o)),!B&&e.jsxs(V,{hoverMode:"opacity",onPointerDown:Z,onClick:c,className:u.icon,tabIndex:p?void 0:-1,disabled:a.disabled,"data-testid":L,children:[e.jsx(g,{children:S}),D==="ios"?e.jsx(m4,{}):e.jsx(p4,{})]}),_.compact&&d&&e.jsx(w,{mode:"primary",size:"m",className:I(u.findButton,_.compact.className),focusVisibleMode:"inside",onClick:d,tabIndex:p?void 0:-1,"data-testid":W,children:O})]})]}),C&&e.jsx("div",{className:u.after,children:e.jsx(w,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:c,onFocus:f,onBlur:m,children:e.jsx("span",{className:u.afterTextClip,children:A})})})]})};try{N.displayName="Search",N.__docgenInfo={description:"",displayName:"Search",props:{after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},hideClearButton:{defaultValue:null,description:"Скрывает кнопку очистки.",name:"hideClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}}}}}catch{}export{N as S};
