import{r as m,h as mu,j as l,g as M,aZ as hu,i as Du,aw as G,W as yu,a4 as vu,w as Cu,b as Su}from"./iframe-CGSrC79H.js";import{D as Fu,C as Bu}from"./constants-DdkjnEgz.js";import{c as Vu}from"./createStoryParameters-CcwS40kl.js";import{F as Au}from"./FormItem-6r74lcrV.js";import{G as Tu}from"./Group-DH0PWTW1.js";import{u as wu}from"./useConfigDirection-BDt5-3HT.js";import{u as Ru}from"./useBooleanState-BkBFPaFP.js";import{u as xu}from"./useState-DzaGsmJ4.js";import{u as Pu}from"./useFocusVisibleClassName-CgCqKIR9.js";import{T as zu}from"./TooltipBase-xtylluOk.js";import{o as Iu,h as qu,d as Mu,i as Nu,u as Lu,c as ju}from"./floating-ui.react-dom-C7nxf647.js";const ku="_host_1q66x_1",Yu="_focusVisible_1q66x_15",Hu="_hover_1q66x_20",Xu="_active_1q66x_24",Wu="_nativeInput_1q66x_31",V={host:ku,focusVisible:Yu,hover:Hu,active:Xu,nativeInput:Wu},N=({className:u,getRootRef:e,inputProps:t,withTooltip:r,isActive:s,...c})=>{const{focusVisible:n,onBlur:S,onFocus:T}=xu(),g=Pu({focusVisible:n,mode:V.focusVisible}),[f,L]=m.useState(null),j=m.useMemo(()=>[Iu({crossAxis:0,mainAxis:15}),qu(),Mu({padding:8}),Nu({element:f})],[f]),{x:b,y:w,placement:k,refs:R,strategy:Y,middlewareData:{arrow:x},update:H}=Lu({placement:"top",middleware:j}),[_,h,P]=Ru(!1),z=mu(e,R.setReference),d=r&&(n||_||s),i=t&&t.value;return m.useEffect(function(){d&&i!=="undefined"&&H()},[i,H,d]),l.jsxs(m.Fragment,{children:[l.jsx("span",{...c,ref:z,onMouseEnter:h,onMouseLeave:P,className:M(V.host,g,s&&V.active,_&&V.hover,u),children:l.jsx("input",{...t,type:"range",className:V.nativeInput,"aria-orientation":"horizontal",onBlur:S,onFocus:T})}),d&&l.jsx(zu,{appearance:"neutral",getRootRef:R.setFloating,style:ju({strategy:Y,x:b,y:w}),arrowProps:{coords:x,placement:k,getRootRef:L},description:i})]})};try{N.displayName="SliderThumb",N.__docgenInfo={description:"",displayName:"SliderThumb",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"(InputHTMLAttributes<HTMLInputElement> & RefAttributes<HTMLInputElement> & HasDataAttribute)"}},withTooltip:{defaultValue:null,description:"",name:"withTooltip",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLSpanElement>"}}}}}catch{}const ou=(u,e,t)=>(u-e)/(t-e)*100,lu=(u,e,t,r,s)=>hu(u,[0,e],[t,r],{step:s}),K=(u,e,t)=>u<e?e:u>t?t:u,iu=(u,e,t,r,s)=>{const[c,n]=u;if(n===null)return[K(e,t,r),null];switch(s){case"start":return e>n?[n,n]:[K(e,t,r),n];case"end":return e<c?[c,c]:[c,K(e,t,r)];case null:default:return u}},Ou=(u,e,t)=>{const[r,s]=u;switch(t){case"start":return[e,s];case"end":return[r,e];case null:default:return u}};function $u(u){return u[1]!==null}const Gu=(u,e,t)=>{if(t==="start")return"start";if(t==="end")return"end";const[r,s]=u,c=.1,n=s!==null?r-c:r,S=s!==null?s+c:0;return Math.abs(n-e)<=Math.abs(S-e)?"start":"end"},cu=u=>{if(u){if(u.dataset.type==="start")return"start";if(u.dataset.type==="end")return"end"}return null},Ku={"aria-label":void 0,"aria-valuetext":void 0,"aria-labelledby":void 0},Uu=u=>{const e=u["aria-label"],t=u["aria-valuetext"],r=u["aria-labelledby"];return{...u,...Ku,ariaLabel:e,ariaValueText:t,ariaLabelledBy:r}},Zu="_host_f9owr_1",Ju="_disabled_f9owr_10",Qu="_track_f9owr_15",u4="_trackFill_f9owr_16",e4="_multiple_f9owr_34",t4="_thumbs_f9owr_40",a4="_thumb_f9owr_40",r4="_rtl_f9owr_52",n4="_thumbStart_f9owr_56",s4="_thumbEnd_f9owr_60",o4="_sizeL_f9owr_64",l4="_sizeM_f9owr_68",i4="_sizeS_f9owr_72",c4="_sizeYCompact_f9owr_80",d4="_sizeYNone_f9owr_93",o={host:Zu,disabled:Ju,track:Qu,trackFill:u4,multiple:e4,thumbs:t4,thumb:a4,rtl:r4,thumbStart:n4,thumbEnd:s4,sizeL:o4,sizeM:l4,sizeS:i4,sizeYCompact:c4,sizeYNone:d4},m4={none:o.sizeYNone,compact:o.sizeYCompact},p4={l:o.sizeL,m:o.sizeM,s:o.sizeS},U=({step:u=1,min:e=0,max:t=100,value:r,multiple:s,defaultValue:c=s?[e,t]:e,disabled:n,className:S,getRootRef:T,getAriaLabel:g,getAriaValueText:f,startThumbTestId:L,endThumbTestId:j,onChange:b,withTooltip:w,size:k="l",style:R,...Y})=>{const{sizeY:x="none"}=Du(),_=wu()==="rtl",h=r!==void 0,[P,z]=m.useState(c),d=m.useMemo(()=>{const a=h?r:P;return Array.isArray(a)?[G(a[0],e,t),G(a[1],e,t)]:[G(a,e,t),null]},[h,r,P,e,t]),[i,p]=d,D=s&&p!==null,Z=ou(i,e,t),pu=D?ou(p,e,t):0,[J,Q]=m.useState(null),y=m.useRef({dragging:null,startX:0,containerWidth:0}).current,X=mu(T),W=m.useRef(null),O=m.useRef(null),{ariaLabel:uu,ariaValueText:eu,ariaLabelledBy:tu,...fu}=Uu(Y),$=(a,v)=>{n||d[0]===a[0]&&d[1]===a[1]||(s?$u(a)&&(!h&&z(a),b&&b(a,v)):(!h&&z(a[0]),b&&b(a[0],v)))},Eu=a=>{if(!X.current)return;const{left:v,width:F}=X.current.getBoundingClientRect(),B=cu(a.originalEvent.target);let E=a.startX-v;_&&(E=F-E);const I=lu(E,F,e,t,u),q=Gu(d,I,B);y.dragging=q,y.containerWidth=F,y.startX=E;const ru=iu(d,I,e,t,q),[nu,su]=ru;W.current&&(B==="start"||nu!==i&&su===p)?(W.current.focus(),a.originalEvent.preventDefault()):O.current&&(B==="end"||su!==p&&nu===i)&&(O.current.focus(),a.originalEvent.preventDefault()),$(ru,a),a.originalEvent.stopPropagation(),Q(y.dragging)},gu=a=>{const{startX:v,containerWidth:F,dragging:B}=y,{shiftX:E=0}=a,I=v+(_?-E:E),q=lu(I,F,e,t,u);$(iu(d,q,e,t,B),a),a.originalEvent.stopPropagation(),a.originalEvent.preventDefault()},bu=a=>{y.dragging=null,a.originalEvent.stopPropagation(),Q(null)},au=a=>{$(Ou(d,Number(a.target.value),cu(a.target)),a)},_u={"--vkui_internal--Slider_start_value":String(Z),"--vkui_internal--Slider_end_value":String(pu)};return l.jsxs(yu,{"data-value":D?`${i},${p}`:i,...fu,className:M(o.host,n&&o.disabled,x!=="regular"&&m4[x],p4[k],D&&o.multiple,_&&o.rtl,S),style:vu(R,_u),getRootRef:T,onStart:n?void 0:Eu,onMove:n?void 0:gu,onEnd:n?void 0:bu,children:[l.jsx("div",{className:o.track}),l.jsx("div",{className:o.trackFill}),l.jsxs("div",{ref:X,className:o.thumbs,children:[l.jsx(N,{"data-type":"start",className:M(o.thumb,o.thumbStart),style:{zIndex:D&&Z>=50?2:void 0},withTooltip:w,inputProps:{"data-type":"start","data-testid":L,ref:W,step:u,min:e,value:i,max:D?p:t,disabled:n,"aria-label":g?g(0):uu,"aria-valuetext":f?f(i,0):eu,"aria-labelledby":tu,onChange:au},isActive:J==="start"}),D&&l.jsx(N,{"data-type":"end",className:M(o.thumb,o.thumbEnd),withTooltip:w,inputProps:{"data-type":"end","data-testid":j,ref:O,step:u,min:i,value:p,max:t,disabled:n,"aria-label":g?g(1):uu,"aria-valuetext":f?f(p,1):eu,"aria-labelledby":tu,onChange:au},isActive:J==="end"})]})]})};try{U.displayName="Slider",U.__docgenInfo={description:"",displayName:"Slider",props:{multiple:{defaultValue:null,description:`Флаг множественного выбора (должен быть false или не указан).
Флаг множественного выбора (должен быть true).`,name:"multiple",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:`Текущее значение слайдера.
Текущие значения слайдера в виде массива [начальное, конечное].`,name:"value",required:!1,type:{name:"number | [number, number]"}},defaultValue:{defaultValue:{value:"multipleProp ? [min, max] : min"},description:`Значение слайдера по умолчанию.
Значения слайдера по умолчанию в виде массива [начальное, конечное].`,name:"defaultValue",required:!1,type:{name:"number | [number, number]"}},onChange:{defaultValue:null,description:`Обработчик изменения значения слайдера.
Обработчик изменения значений слайдера.`,name:"onChange",required:!1,type:{name:"((value: number, event: CustomTouchEvent | ChangeEvent<Element>) => void) | ((value: [number, number], event: CustomTouchEvent | ChangeEvent<...>) => void)"}},min:{defaultValue:{value:"0"},description:"Минимальное значение слайдера.",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"100"},description:"Максимальное значение слайдера.",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"Шаг изменения значения слайдера.",name:"step",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}},getAriaLabel:{defaultValue:null,description:"Тоже самое, что и `aria-label`, но на вход можно получать индекс текущего ползунка и в зависимости от этого выдавать разный текст.\n\n> Перебивает `aria-label`.",name:"getAriaLabel",required:!1,type:{name:"((index: number) => string)"}},getAriaValueText:{defaultValue:null,description:"В отличие от `aria-valuetext`, позволяет более гибко форматировать текст в зависимости от значения ползунка.\n\nПолезно при использовании компонента как неконтролируемого.\n\n> Перебивает `aria-valuetext`.",name:"getAriaValueText",required:!1,type:{name:"((value: number, index: number) => string)"}},withTooltip:{defaultValue:null,description:"Включает отображение всплывающей подсказки при взаимодействии с ползунком.",name:"withTooltip",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"l"},description:"Размер ползунка.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},startThumbTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для первого ползунка.",name:"startThumbTestId",required:!1,type:{name:"string"}},endThumbTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для второго ползунка когда `multiple=true`.",name:"endThumbTestId",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}function du(u){return u===1?"Pineapple Maximum Count":"Pineapple Minimum Count"}const f4={title:"Forms/Slider",component:U,parameters:Vu("Slider",Bu,Fu),args:{getAriaLabel:du},argTypes:{defaultValue:{table:{defaultValue:{summary:"min | [min, max]"}}},multiple:{table:{defaultValue:{summary:"false"}}},getAriaLabel:{table:{defaultValue:{summary:`Для примера используется функция: ${du.toString()}`}}}},tags:["Формы и поля ввода"]},E4=u=>u?.multiple?"multiple":"single",C={decorators:[(u,e)=>l.jsx(Tu,{children:l.jsx(Au,{top:"Pineapple Count",children:l.jsx(u,{...e.args},E4(e.args))})}),Cu,Su]},A={...C,args:{withTooltip:!0}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  decorators: [(Component: typeof Slider, context: StoryContext<SliderProps | SliderMultipleProps>) => <Group>
        <FormItem top="Pineapple Count">
          <Component key={forceRemountKey(context.args)} {...context.args} />
        </FormItem>
      </Group>, withSinglePanel, withVKUILayout]
}`,...C.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  ...Playground,
  args: {
    withTooltip: true
  }
}`,...A.parameters?.docs?.source}}};const g4=["Playground","Tooltip"],A4=Object.freeze(Object.defineProperty({__proto__:null,Playground:C,Tooltip:A,__namedExportsOrder:g4,default:f4},Symbol.toStringTag,{value:"Module"}));export{C as P,U as S,A4 as a};
