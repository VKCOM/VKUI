import{j as e,g as s,o as b,r as p,c as h,R as C}from"./iframe-CGSrC79H.js";import{g as x}from"./children-C-hCqQRI.js";import{I as R}from"./IconButton-Bq_FXaCp.js";import{u as N}from"./useConfigDirection-BDt5-3HT.js";import{T as V}from"./Tappable-HtqfSGDW.js";import{V as q}from"./VisuallyHidden-Cv__RMJJ.js";import{I as S}from"./cancel_24-CsoSQ93Z.js";const T="_content_1j3ca_1",k="_withPadding_1j3ca_17",P="_rtl_1j3ca_21",M="_action_1j3ca_25",O="_ios_1j3ca_33",w="_indentation_1j3ca_33",H="_alignStart_1j3ca_42",L="_remove_1j3ca_57",W="_removeIn_1j3ca_72",z="_toggle_1j3ca_80",G="_toggleIn_1j3ca_89",J="_indent_1j3ca_33",K="_offset_1j3ca_141",u={content:T,withPadding:k,rtl:P,action:M,ios:O,indentation:w,alignStart:H,remove:L,removeIn:W,toggle:z,toggleIn:G,indent:J,offset:K},Q=({onRemove:t,removePlaceholder:n,removePlaceholderString:o,children:l,toggleButtonTestId:i,removeButtonTestId:c,disabled:d})=>{const F=N()==="rtl",{window:m}=b(),r=p.useRef(null),[v,f]=p.useState(!0),[a,A]=p.useState(0);p.useEffect(()=>{const E=()=>{a>0&&A(0)};return m.addEventListener("click",E,{capture:!0}),()=>m.removeEventListener("click",E,{capture:!0})},[a,m]);const D=()=>{if(a>0){r?.current?.focus();return}f(!0)},j=E=>{if(E.stopPropagation(),!r.current)return;const{offsetWidth:I}=r.current;f(!1),A(I)},y={"--vkui_internal_Removable_remove_offset":String(a??0)};return e.jsxs("div",{className:s(u.content,F&&u.rtl,"vkuiInternalRemovable__content"),style:y,onTransitionEnd:D,children:[e.jsxs(R,{hasActive:!1,hasHover:!1,className:s(u.action,u.toggle,"vkuiInternalRemovable__action"),onClick:j,disabled:a>0||d,"data-testid":i,children:[e.jsx(q,{children:o}),e.jsx("i",{className:u.toggleIn,role:"presentation"})]}),typeof l=="function"?l({isRemoving:a>0}):l,e.jsx("span",{className:u.offset,"aria-hidden":!0}),e.jsx(V,{Component:"button",hasActive:!1,hasHover:!1,disabled:v,getRootRef:r,className:u.remove,onClick:t,"data-testid":c,children:e.jsx("span",{className:u.removeIn,children:n})})]})},U=({children:t})=>e.jsxs("div",{className:s(u.content,"vkuiInternalRemovable__content"),children:[e.jsx("div",{className:s(u.action,u.indentation,"vkuiInternalRemovable__action")}),typeof t=="function"?t({isRemoving:!1}):t,e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),g=({indent:t,children:n,...o})=>t?e.jsx(U,{children:n}):e.jsx(Q,{...o,children:n});try{g.displayName="RemovableIos",g.__docgenInfo={description:"",displayName:"RemovableIos",props:{indent:{defaultValue:null,description:"",name:"indent",required:!1,type:{name:"boolean"}},removePlaceholderString:{defaultValue:null,description:"",name:"removePlaceholderString",required:!1,type:{name:"string"}},removePlaceholder:{defaultValue:null,description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const X=({noPadding:t,children:n,removePlaceholderString:o,onRemoveClick:l,removeButtonTestId:i,disabled:c,indent:d})=>e.jsxs("div",{className:s(u.content,!t&&u.withPadding,"vkuiInternalRemovable__content"),children:[typeof n=="function"?n({isRemoving:!1}):n,d?e.jsx("div",{className:s(u.action,u.indentation)}):e.jsx(R,{activeMode:"opacity",hoverMode:"opacity",className:s(u.action,"vkuiInternalRemovable__action"),onClick:l,label:o,"data-testid":i,disabled:c,children:e.jsx(S,{role:"presentation"})}),e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),B=({children:t,onRemove:n,removePlaceholder:o="Удалить",align:l="center",indent:i=!1,toggleButtonTestId:c,removeButtonTestId:d,disabled:_,noPadding:F,...m})=>{const r=h(),v=a=>{a.preventDefault(),n?.(a)},f=x(o);return e.jsx(C,{...m,baseClassName:s(r==="ios"&&u.ios,l==="start"&&u.alignStart,i&&u.indent),children:r==="ios"?e.jsx(g,{onRemove:v,removePlaceholder:o,removePlaceholderString:f,toggleButtonTestId:c,removeButtonTestId:d,disabled:_,indent:i,children:t}):e.jsx(X,{onRemoveClick:v,noPadding:F,removeButtonTestId:d,removePlaceholderString:f,disabled:_,indent:i,children:t})})};try{B.displayName="Removable",B.__docgenInfo={description:"",displayName:"Removable",props:{align:{defaultValue:{value:"center"},description:"Расположение кнопки удаления.",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"start"'}]}},indent:{defaultValue:{value:"false"},description:`Скрывает кнопку, но оставляет отступ.
@since 5.4.0`,name:"indent",required:!1,type:{name:"boolean"}},noPadding:{defaultValue:null,description:"Убирает базовые отступы для базовой платформы.",name:"noPadding",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"Содержимое. Можно передать функцию для отрисовки.",name:"children",required:!1,type:{name:"ReactNode | ((renderProps: RemovableIosRenderProps) => ReactNode)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},removePlaceholder:{defaultValue:{value:"Удалить"},description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}export{B as R};
