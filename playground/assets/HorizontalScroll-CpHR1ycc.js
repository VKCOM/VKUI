import{r as o,i as K,l as Q,n as $,j as E,R as u4,h as m}from"./iframe-DhuutAfC.js";import{u as e4}from"./useConfigDirection-BKOpe2-3.js";import{u as t4,a as r4}from"./useState-DoK0IZwP.js";import{u as n4}from"./useFocusVisibleClassName-CoMQAxvE.js";import{e as o4}from"./fx-D-5xmdri.js";import{m as l4}from"./mergeCalls-Bc-HqyI0.js";import{S as N}from"./ScrollArrow-45T3qbjN.js";const s4="_host_103de_1",a4="_rtl_103de_14",i4="_inWrapper_103de_33",c4="_arrow_103de_39",f4="_showArrows_103de_46",d4="_arrowLeft_103de_54",E4="_arrowRight_103de_58",l={host:s4,rtl:a4,in:"_in_103de_18",inWrapper:i4,arrow:c4,showArrows:f4,arrowLeft:d4,arrowRight:E4};function k(){return performance&&performance.now?performance.now():Date.now()}function z(u){return u>0?Math.ceil(u):Math.floor(u)}const M=u=>z(u.scrollLeft),m4=250;function p4({scrollElement:u,getScrollPosition:d,animationQueue:c,onScrollToEndBorder:a,onScrollEnd:p,onScrollStart:B,initialScrollWidth:D,scrollAnimationDuration:w,textDirection:s}){if(!u||!d)return;const A=(s==="ltr"?1:-1)*(D-u.offsetWidth),i=M(u),h=i*(s==="rtl"?-1:1);let r=d(h);const v=r-h;s==="rtl"&&(r=i-v),B(),i*r<0&&(r=0),Math.abs(r)>=Math.abs(A)&&(a(),r=A);const y=k();(function g(){const H=k(),C=Math.min((H-y)/w,1),R=o4(C),L=i+(r-i)*R;u.scrollLeft=z(L);const b=s==="ltr"?Math.max(0,r):Math.min(0,r);if(M(u)!==b&&C!==1){requestAnimationFrame(g);return}p(),c.shift(),c.length>0&&c[0]()})()}const j=({children:u,getScrollToLeft:d,getScrollToRight:c,showArrows:a=!0,arrowSize:p="m",arrowOffsetY:B,scrollAnimationDuration:D=m4,getRef:w,scrollOnAnyWheel:s=!1,prevButtonTestId:A,nextButtonTestId:i,ContentWrapperComponent:h="div",contentWrapperRef:r,contentWrapperClassName:v,onPointerEnter:y,onPointerLeave:g,onMouseEnter:H,...C})=>{const[R,L]=o.useState(!1),[b,V]=o.useState(!1),{focusVisible:O,...P}=t4(),Y=n4({focusVisible:O}),W=e4(),x=W==="rtl",T=o.useRef(!1),t=K(w),F=o.useRef([]),{isHovered:U,...X}=r4(),S=o.useCallback(n=>{const e=t.current;F.current.push(()=>p4({scrollElement:e,getScrollPosition:n,animationQueue:F.current,onScrollToEndBorder:()=>V(!1),onScrollEnd:()=>T.current=!1,onScrollStart:()=>T.current=!0,initialScrollWidth:e?.firstElementChild?.scrollWidth||0,scrollAnimationDuration:D,textDirection:W})),F.current.length===1&&F.current[0]()},[t,D,W,V]),Z=o.useCallback(()=>{S(d??(e=>e-t.current.offsetWidth))},[d,S,t]),G=o.useCallback(()=>{S(c??(e=>e+t.current.offsetWidth))},[c,S,t]),f=o.useCallback(()=>{if(a&&t.current&&!T.current){const n=t.current,e=n.scrollLeft;L(x?e<0:e>0),V(Math.abs(M(n))+n.offsetWidth<n.scrollWidth)}},[a,t,x]);o.useEffect(f,[f,u]),Q(function(){const e=t.current;if(!e)return $;const I=q=>{t.current.scrollBy({left:q.deltaX+q.deltaY,behavior:"auto"}),q.preventDefault()},_={passive:!1};return s&&e.addEventListener("wheel",I,_),e.addEventListener("scroll",f,_),()=>{s&&e.removeEventListener("wheel",I,_),e.removeEventListener("scroll",f,_)}},[s,f,t]);const J=l4(X,{onPointerEnter:y,onPointerLeave:g});return E.jsxs(u4,{...C,...J,baseClassName:m(l.host,"vkuiInternalHorizontalScroll",(a==="always"||U)&&l.showArrows,x&&l.rtl),onMouseEnter:f,children:[a&&R&&E.jsx(N,{"data-testid":A,size:p,offsetY:B,direction:"left","aria-hidden":!0,tabIndex:-1,className:m(l.arrow,l.arrowLeft),onClick:Z}),a&&b&&E.jsx(N,{"data-testid":i,size:p,offsetY:B,direction:"right","aria-hidden":!0,tabIndex:-1,className:m(l.arrow,l.arrowRight),onClick:G}),E.jsx("div",{className:m(l.in,Y),ref:t,tabIndex:0,...P,children:E.jsx(h,{className:m(l.inWrapper,v),ref:r,children:u})})]})};try{j.displayName="HorizontalScroll",j.__docgenInfo={description:"",displayName:"HorizontalScroll",props:{getScrollToLeft:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на левую стрелку.",name:"getScrollToLeft",required:!1,type:{name:"ScrollPositionHandler"}},getScrollToRight:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на правую стрелку.",name:"getScrollToRight",required:!1,type:{name:"ScrollPositionHandler"}},arrowSize:{defaultValue:{value:"m"},description:"Размер стрелок.",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},arrowOffsetY:{defaultValue:null,description:"Смещает иконки кнопок навигации по вертикали.",name:"arrowOffsetY",required:!1,type:{name:"string | number"}},showArrows:{defaultValue:{value:"true"},description:"Показывать ли стрелки.",name:"showArrows",required:!1,type:{name:'boolean | "always"'}},scrollAnimationDuration:{defaultValue:{value:"250"},description:"Длительность анимации скролла.",name:"scrollAnimationDuration",required:!1,type:{name:"number"}},scrollOnAnyWheel:{defaultValue:{value:"false"},description:`Добавляет возможность прокручивать контент на любое колесо мыши.
По умолчанию прокручивается как любой горизонтальный контент через shift.`,name:"scrollOnAnyWheel",required:!1,type:{name:"boolean"}},prevButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении предыдущего элемента.",name:"prevButtonTestId",required:!1,type:{name:"string"}},nextButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении следующего элемента.",name:"nextButtonTestId",required:!1,type:{name:"string"}},ContentWrapperComponent:{defaultValue:{value:"div"},description:"Позволяет поменять тег используемый для обертки над контентом, прокинутым в `children`.",name:"ContentWrapperComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},contentWrapperRef:{defaultValue:null,description:"`ref` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentWrapperClassName:{defaultValue:null,description:"Специфичный `className` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperClassName",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{j as H};
