import{r as t,a0 as du,a1 as Eu,Y as Du,Z as Fu,a2 as cu,a3 as mu,k as Bu,i as fu,l as pu,m as Cu,j as e,h as o4,a4 as Au,_ as vu,T as i4}from"./iframe-qoTtUH8h.js";import{u as bu,d as i,N as v,I as V}from"./DateInput.module-DuEKjb7z.js";import{C as hu}from"./Calendar-DjlB95fe.js";import{F as yu}from"./FocusTrap-Coy9SLFa.js";import{F as gu}from"./FormField-DCCIiDnM.js";import{I as d4}from"./IconButton-B17wjzUA.js";import{P as Vu}from"./Popper-CDwlWBLk.js";import{V as H}from"./VisuallyHidden-BqFtMTWb.js";import{I as qu}from"./calendar_outline_20-BFw33vZY.js";import{I as xu}from"./clear_16-BHhch7lE.js";const q=(u,a)=>du(u,a)||null,Iu=(u,a)=>Eu(u,a),E4=(u,a,r,n)=>q(a!==void 0?a:r!==void 0?r:u,n),Ru=({value:u,defaultValue:a,onChange:r,timezone:n})=>{const[x,F]=t.useState(E4(null,u,a,n)),c=t.useRef(E4(null,u,a,n)),m=u!==void 0;t.useEffect(()=>{if(m){const d=q(u,n);F(d),c.current=d}},[m,n,u]);const I=t.useCallback(()=>c.current,[]),R=t.useCallback(d=>{m||(F(d),c.current=d);const b=Iu(d,n);return r==null||r(b),b},[m,r,n]);return{value:x,updateValue:R,setInternalValue:F,getLastUpdatedValue:I,clearValue:()=>{F(null),c.current=null,r==null||r(void 0)}}},Tu={none:i.sizeYNone,compact:i.sizeYCompact},D4=u=>{let a=2,r=1,n=0;switch(u){case 0:n=31;break;case 1:n=12;break;case 2:n=2100,r=1900,a=4;break;case 3:n=23;break;case 4:n=59;break}return{length:a,min:r,max:n}},Mu=u=>{const a=["","","","",""];return u&&(a[0]=String(u.getDate()).padStart(2,"0"),a[1]=String(u.getMonth()+1).padStart(2,"0"),a[2]=String(u.getFullYear()).padStart(4,"0"),a[3]=String(u.getHours()).padStart(2,"0"),a[4]=String(u.getMinutes()).padStart(2,"0")),a},Lu={childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]},F4=({enableTime:u,shouldDisableDate:a,disableFuture:r,disablePast:n,minDateTime:x,maxDateTime:F,value:c,defaultValue:m,onChange:I,calendarPlacement:R="bottom-start",style:K,className:d,doneButtonText:b,DoneButton:c4,closeOnChange:Y=!0,disablePickers:m4,getRootRef:B4,name:f4,autoFocus:p4,disabled:$,accessible:E,calendarLabel:C4="Календарь",prevMonthLabel:A4="Предыдущий месяц",nextMonthLabel:v4="Следующий месяц",changeDayLabel:b4="День",changeMonthLabel:z="Месяц",changeYearLabel:U="Год",changeHoursLabel:Z="Час",changeMinutesLabel:G="Минута",clearFieldLabel:h4="Очистить поле",showCalendarLabel:y4="Показать календарь",showNeighboringMonth:g4,size:V4,viewDate:q4,onHeaderChange:x4,onNextMonth:I4,onPrevMonth:R4,prevMonthIcon:T4,nextMonthIcon:M4,renderDayContent:L4,onCalendarOpenChanged:j4,calendarTestsProps:k4,dayFieldTestId:w4,monthFieldTestId:N4,yearFieldTestId:S4,hourFieldTestId:P4,minuteFieldTestId:_4,showCalendarButtonTestId:O4,clearButtonTestId:H4,id:K4,onApply:h,renderCustomValue:y,timezone:Y4,restoreFocus:$4,disableFocusTrap:z4,readOnly:o,disableCalendar:U4=!1,"aria-label":J="",before:Q,...Z4})=>{const T=t.useRef(null),M=t.useRef(null),L=t.useRef(null),j=t.useRef(null),k=t.useRef(null),W=o?!0:U4,{value:l,updateValue:B,setInternalValue:w,getLastUpdatedValue:X,clearValue:G4}=Ru({value:c,defaultValue:m,onChange:I,timezone:Y4}),N=u?4:2,J4=t.useCallback(s=>{for(let D=0;D<=N;D+=1)if(s[D].length<D4(D).length)return;let _=`${s[0]}.${s[1]}.${s[2]}`,O="dd.MM.yyyy";if(u&&(_+=` ${s[3]}:${s[4]}`,O+=" HH:mm"),Du(_,O)){const D=new Date;B(Fu(_,O,l??(u?cu(D):mu(D))))}},[u,N,B,l]),Q4=t.useMemo(()=>[T,M,L,j,k],[T,M,L,j,k]),{rootRef:u4,calendarRef:W4,open:f,internalValue:p,handleKeyDown:C,setFocusedElement:A,handleFieldEnter:S,clear:X4,removeFocusFromField:g,closeCalendar:uu,toggleCalendar:eu,openCalendar:e4,handleRestoreFocus:au}=bu({maxElement:N,refs:Q4,autoFocus:p4,disabled:$||o,elementsConfig:D4,onClear:G4,onInternalValueChange:J4,getInternalValue:Mu,value:l,onCalendarOpenChanged:j4,accessible:E}),{sizeY:a4="none"}=Bu(),tu=fu(u4,B4);pu(function(){f||w(X())},[f,X]);const nu=t.useCallback(s=>{if(s){if(u){w(s);return}B(s),Y&&g()}},[u,B,Y,w,g]),lu=t.useCallback(()=>{if(!l)return;const s=B(l);h==null||h(s),g()},[h,g,B,l]),P=t.useMemo(()=>!f&&(y==null?void 0:y(l||void 0)),[f,y,l]),[ru,su]=t.useState(R),{locale:ou}=Cu(),t4=l?new Intl.DateTimeFormat(ou,{weekday:"long",year:"numeric",month:"long",day:"numeric"}).format(l):null,n4=t.useId(),l4=t.useId(),iu=t.useCallback(()=>{S(),E&&e4()},[S,e4,E]),r4=!W&&(E||!E&&!l),s4=l&&!o;return e.jsxs(gu,{style:K,className:o4(a4!=="regular"&&Tu[a4],!!Q&&i.hasBefore,(r4||s4)&&i.hasAfter,d),getRootRef:tu,role:"group","aria-labelledby":`${l4} ${n4}`,before:Q,after:e.jsxs(t.Fragment,{children:[r4?e.jsx(d4,{hoverMode:"opacity",label:y4,onClick:eu,"data-testid":O4,children:e.jsx(qu,{})}):null,s4?e.jsx(d4,{hoverMode:"opacity",label:h4,onClick:X4,"data-testid":H4,children:e.jsx(xu,{})}):null]}),disabled:$,...Z4,children:[e.jsxs("div",{className:i.wrapper,children:[J&&e.jsx(H,{id:l4,children:J}),t4&&e.jsx(H,{id:n4,children:t4}),e.jsx(H,{id:K4,Component:"input",readOnly:!0,"aria-hidden":!0,tabIndex:o?0:-1,name:f4,value:l?u?Au.format(l):vu.format(l):"",onFocus:S}),e.jsxs(i4,{className:o4(i.input,P&&i.hidden),normalize:!1,Component:"span",onClick:iu,children:[e.jsx(v,{value:p[0],minValue:1,maxValue:31,length:2,getRootRef:T,index:0,onKeyDown:C,onElementSelect:A,label:b4,readOnly:o,"data-testid":w4}),e.jsx(V,{children:"."}),e.jsx(v,{value:p[1],minValue:1,maxValue:12,length:2,getRootRef:M,index:1,onElementSelect:A,onKeyDown:C,readOnly:o,label:z,"data-testid":N4}),e.jsx(V,{children:"."}),e.jsx(v,{value:p[2],minValue:1,maxValue:275750,length:4,getRootRef:L,index:2,onElementSelect:A,readOnly:o,label:U,onKeyDown:C,"data-testid":S4}),u&&e.jsxs(t.Fragment,{children:[e.jsx(V,{className:i.inputTimeDivider,children:" "}),e.jsx(v,{value:p[3],minValue:1,maxValue:24,length:2,getRootRef:j,index:3,onElementSelect:A,readOnly:o,label:Z,onKeyDown:C,"data-testid":P4}),e.jsx(V,{children:":"}),e.jsx(v,{value:p[4],minValue:1,maxValue:59,length:2,getRootRef:k,index:4,onElementSelect:A,readOnly:o,label:G,onKeyDown:C,"data-testid":_4})]})]}),P&&e.jsx(i4,{className:i.customValue,"aria-hidden":!0,normalize:!1,children:P})]}),f&&!W&&e.jsx(Vu,{targetRef:u4,offsetByMainAxis:8,placement:ru,onPlacementChange:su,autoUpdateOnTargetResize:!0,children:e.jsx(yu,{onClose:uu,disabled:z4??!E,restoreFocus:$4??(!!E&&au),captureEscapeKeyboardEvent:!1,mutationObserverOptions:Lu,children:e.jsx(hu,{"aria-label":C4,role:"dialog",value:l,onChange:nu,enableTime:u,disablePast:n,disableFuture:r,shouldDisableDate:a,onDoneButtonClick:lu,getRootRef:W4,doneButtonText:b,DoneButton:c4,disablePickers:m4,changeHoursLabel:Z,changeMinutesLabel:G,prevMonthLabel:A4,nextMonthLabel:v4,changeMonthLabel:z,changeYearLabel:U,showNeighboringMonth:g4,renderDayContent:L4,size:V4,viewDate:q4,onHeaderChange:x4,onNextMonth:I4,onPrevMonth:R4,prevMonthIcon:T4,nextMonthIcon:M4,minDateTime:x,maxDateTime:F,...k4})})})]})};try{F4.displayName="DateInput",F4.__docgenInfo={description:"",displayName:"DateInput",props:{calendarTestsProps:{defaultValue:null,description:"Передает атрибуты `data-testid` для интерактивных элементов в календаре.",name:"calendarTestsProps",required:!1,type:{name:"CalendarTestsProps"}},calendarPlacement:{defaultValue:{value:"bottom-start"},description:"Расположение календаря относительно поля ввода.",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"left"'},{value:'"right"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"Автоматически закрывать календарь при изменениях.",name:"closeOnChange",required:!1,type:{name:"boolean"}},calendarLabel:{defaultValue:{value:"Календарь"},description:"`aria-label` для календаря.",name:"calendarLabel",required:!1,type:{name:"string"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"Label для кнопки очистки. Делает доступным для ассистивных технологий.",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"Label для кнопки открытия календаря. Делает доступным для ассистивных технологий.",name:"showCalendarLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"Отключение открытия календаря.",name:"disableCalendar",required:!1,type:{name:"boolean"}},onCalendarOpenChanged:{defaultValue:null,description:"Обработчик изменения состояния открытия календаря.",name:"onCalendarOpenChanged",required:!1,type:{name:"((opened: boolean) => void)"}},changeDayLabel:{defaultValue:{value:"День"},description:"`aria-label` для поля изменения дня.",name:"changeDayLabel",required:!1,type:{name:"string"}},onApply:{defaultValue:null,description:'Обработчик нажатия на кнопку `"Done"`. Используется совместно с флагом `enableTime`.',name:"onApply",required:!1,type:{name:"((value?: Date) => void)"}},renderCustomValue:{defaultValue:null,description:`Функция для кастомного форматирования отображаемого значения даты.
Позволяет переопределить стандартное отображение даты и вернуть собственное представление.`,name:"renderCustomValue",required:!1,type:{name:"((date: Date) => ReactNode)"}},timezone:{defaultValue:null,description:"Часовой пояс для отображения даты.",name:"timezone",required:!1,type:{name:"string"}},accessible:{defaultValue:null,description:`Включает режим в котором DateInput доступен
для ассистивных технологий.
В этом режиме:
- календарь больше не открывает при фокусе на DateInput;
- иконка календаря видна всегда, чтобы пользователи
ассистивных технологий могли открыть календарь по клику на иконку;
- календарь при открытии получает фокус, клавиатурный
фокус зациклен и не выходит за пределы календаря пока календарь не закрыт.`,name:"accessible",required:!1,type:{name:"boolean"}},disableFocusTrap:{defaultValue:null,description:"Позволяет отключить захват фокуса при появлении календаря.",name:"disableFocusTrap",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"Размер календаря.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},value:{defaultValue:null,description:"Текущая выбранная дата.",name:"value",required:!1,type:{name:"Date | null"}},defaultValue:{defaultValue:null,description:"Начальная дата при монтировании.",name:"defaultValue",required:!1,type:{name:"Date | null"}},onChange:{defaultValue:null,description:"Обработчик изменения выбранной даты.",name:"onChange",required:!1,type:{name:"((value?: Date) => void)"}},changeHoursLabel:{defaultValue:{value:"Час"},description:"Текст выпадающего списка с выбором часов. Делает его доступным для ассистивных технологий.",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Минута"},description:"Текст выпадающего списка с выбором минут. Делает его доступным для ассистивных технологий.",name:"changeMinutesLabel",required:!1,type:{name:"string"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"`aria-label` для кнопки предыдущего месяца.",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"`aria-label` для кнопки следующего месяца.",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Месяц"},description:"`aria-label` для селектора месяца.",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Год"},description:"`aria-label` для селектора года.",name:"changeYearLabel",required:!1,type:{name:"string"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},prevMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки предыдущего месяца.",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки следующего месяца.",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},renderDayContent:{defaultValue:null,description:"Кастомизация отображения содержимого дня.",name:"renderDayContent",required:!1,type:{name:"((day: Date) => ReactNode)"}},disablePast:{defaultValue:null,description:"Запрещает выбор даты в прошлом.\nПрименяется, если не заданы `shouldDisableDate` и `disableFuture`.",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"Запрещает выбор даты в будущем.\nПрименяется, если не задано `shouldDisableDate`.",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"Функция для проверки запрета выбора даты.",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},enableTime:{defaultValue:null,description:"Включает выбор времени.",name:"enableTime",required:!1,type:{name:"boolean"}},doneButtonText:{defaultValue:null,description:'Текст отображаемый в кнопке `"Done"`.',name:"doneButtonText",required:!1,type:{name:"string"}},DoneButton:{defaultValue:null,description:'Кастомное отображение кнопки `"Done"`.',name:"DoneButton",required:!1,type:{name:"ComponentType<ButtonProps>"}},weekStartsOn:{defaultValue:null,description:"День недели, с которого начинается неделя.",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"Отключает селекторы выбора месяца/года.",name:"disablePickers",required:!1,type:{name:"boolean"}},showNeighboringMonth:{defaultValue:null,description:"Показывать дни соседних месяцев.",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},viewDate:{defaultValue:null,description:`Дата отображаемого месяца.
При использовании обновление даты должно происходить вне компонента.`,name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Обработчик изменения даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},minDateTime:{defaultValue:null,description:"Минимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"minDateTime",required:!1,type:{name:"Date"}},maxDateTime:{defaultValue:null,description:"Максимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"maxDateTime",required:!1,type:{name:"Date"}},restoreFocus:{defaultValue:{value:"true"},description:"",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean | HTMLElement)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"Статус отображения поля в форме.",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},mode:{defaultValue:null,description:"Режим отображения.\n\n- `default` — показывает фон, обводку и, при наличии, текст-подсказку.\n- `plain` — показывает только текст-подсказку.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkui.io/components/icon-button), если вам нужна иконка, реагируюущая на нажатие.",name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkui.io/components/icon-button), если вам нужна иконка, реагирующая на нажатие.",name:"before",required:!1,type:{name:"ReactNode"}},beforeAlign:{defaultValue:null,description:"Вертикальное выравнивание иконки слева.",name:"beforeAlign",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"center"'},{value:'"end"'}]}},afterAlign:{defaultValue:null,description:"Вертикальное выравнивание иконки справа.",name:"afterAlign",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"center"'},{value:'"end"'}]}},dayFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода дня.",name:"dayFieldTestId",required:!1,type:{name:"string"}},monthFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода месяца.",name:"monthFieldTestId",required:!1,type:{name:"string"}},yearFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода года.",name:"yearFieldTestId",required:!1,type:{name:"string"}},hourFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода часа.",name:"hourFieldTestId",required:!1,type:{name:"string"}},minuteFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода минут.",name:"minuteFieldTestId",required:!1,type:{name:"string"}},showCalendarButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки показа календаря.",name:"showCalendarButtonTestId",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки даты.",name:"clearButtonTestId",required:!1,type:{name:"string"}}}}}catch{}export{F4 as D};
