import{j as e,i as s,p as b,r as F,d as h,R as C}from"./iframe-k6odcVfq.js";import{g as x}from"./children-CYWK7spH.js";import{I as B}from"./IconButton-dHj7AK-z.js";import{u as j}from"./useConfigDirection-CxnUW9rE.js";import{u as N}from"./useGlobalEventListener-szCziyIJ.js";import{T as V}from"./Tappable-CLnVjIR_.js";import{V as q}from"./VisuallyHidden-D-1P4bzL.js";import{I as S}from"./cancel_24-fcxuZKq0.js";const T="_content_1cllf_1",k="_withPadding_1cllf_16",P="_rtl_1cllf_20",M="_action_1cllf_24",O="_ios_1cllf_32",w="_indentation_1cllf_32",H="_alignStart_1cllf_41",L="_remove_1cllf_56",W="_removeIn_1cllf_71",G="_toggle_1cllf_79",z="_toggleIn_1cllf_88",J="_indent_1cllf_32",K="_offset_1cllf_139",u={content:T,withPadding:k,rtl:P,action:M,ios:O,indentation:w,alignStart:H,remove:L,removeIn:W,toggle:G,toggleIn:z,indent:J,offset:K},Q=({onRemove:t,removePlaceholder:n,removePlaceholderString:o,children:i,toggleButtonTestId:r,removeButtonTestId:m,disabled:d})=>{const v=j()==="rtl",{window:_}=b(),a=F.useRef(null),c=F.useRef(!0),[l,f]=F.useState(0);N(_,"click",()=>{l>0&&f(0)},{capture:!0});const D=()=>{var p;l>0?(p=a==null?void 0:a.current)==null||p.focus():c.current=!0},R=p=>{if(p.stopPropagation(),!a.current)return;const{offsetWidth:I}=a.current;c.current=!1,f(I)},y={"--vkui_internal_Removable_remove_offset":String(l??0)};return e.jsxs("div",{className:s(u.content,v&&u.rtl,"vkuiInternalRemovable__content"),style:y,onTransitionEnd:D,children:[e.jsxs(B,{hasActive:!1,hasHover:!1,className:s(u.action,u.toggle,"vkuiInternalRemovable__action"),onClick:R,disabled:l>0||d,"data-testid":r,children:[e.jsx(q,{children:o}),e.jsx("i",{className:u.toggleIn,role:"presentation"})]}),typeof i=="function"?i({isRemoving:l>0}):i,e.jsx("span",{className:u.offset,"aria-hidden":!0}),e.jsx(V,{Component:"button",hasActive:!1,hasHover:!1,disabled:c.current,getRootRef:a,className:u.remove,onClick:t,"data-testid":m,children:e.jsx("span",{className:u.removeIn,children:n})})]})},U=({children:t})=>e.jsxs("div",{className:s(u.content,"vkuiInternalRemovable__content"),children:[e.jsx("div",{className:s(u.action,u.indentation,"vkuiInternalRemovable__action")}),typeof t=="function"?t({isRemoving:!1}):t,e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),g=({indent:t,children:n,...o})=>t?e.jsx(U,{children:n}):e.jsx(Q,{...o,children:n});try{g.displayName="RemovableIos",g.__docgenInfo={description:"",displayName:"RemovableIos",props:{indent:{defaultValue:null,description:"",name:"indent",required:!1,type:{name:"boolean"}},removePlaceholderString:{defaultValue:null,description:"",name:"removePlaceholderString",required:!1,type:{name:"string"}},removePlaceholder:{defaultValue:null,description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const X=({noPadding:t,children:n,removePlaceholderString:o,onRemoveClick:i,removeButtonTestId:r,disabled:m,indent:d})=>e.jsxs("div",{className:s(u.content,!t&&u.withPadding,"vkuiInternalRemovable__content"),children:[typeof n=="function"?n({isRemoving:!1}):n,d?e.jsx("div",{className:s(u.action,u.indentation)}):e.jsx(B,{activeMode:"opacity",hoverMode:"opacity",className:s(u.action,"vkuiInternalRemovable__action"),onClick:i,label:o,"data-testid":r,disabled:m,children:e.jsx(S,{role:"presentation"})}),e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),A=({children:t,onRemove:n,removePlaceholder:o="Удалить",align:i="center",indent:r=!1,toggleButtonTestId:m,removeButtonTestId:d,disabled:E,noPadding:v,..._})=>{const a=h(),c=f=>{f.preventDefault(),n==null||n(f)},l=x(o);return e.jsx(C,{..._,baseClassName:s(a==="ios"&&u.ios,i==="start"&&u.alignStart,r&&u.indent),children:a==="ios"?e.jsx(g,{onRemove:c,removePlaceholder:o,removePlaceholderString:l,toggleButtonTestId:m,removeButtonTestId:d,disabled:E,indent:r,children:t}):e.jsx(X,{onRemoveClick:c,noPadding:v,removeButtonTestId:d,removePlaceholderString:l,disabled:E,indent:r,children:t})})};try{A.displayName="Removable",A.__docgenInfo={description:"",displayName:"Removable",props:{align:{defaultValue:{value:"center"},description:"Расположение кнопки удаления.",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"start"'}]}},indent:{defaultValue:{value:"false"},description:`Скрывает кнопку, но оставляет отступ.
@since 5.4.0`,name:"indent",required:!1,type:{name:"boolean"}},noPadding:{defaultValue:null,description:"Убирает базовые отступы для базовой платформы.",name:"noPadding",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"Содержимое. Можно передать функцию для отрисовки.",name:"children",required:!1,type:{name:"ReactNode | ((renderProps: RemovableIosRenderProps) => ReactNode)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},removePlaceholder:{defaultValue:{value:"Удалить"},description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}export{A as R};
