import{j as t,i as A,R as C4,n as J,c as A4,k as z,r as Q,q as F4,K as h4,a6 as y4,W as $,av as g4,d as _4,aB as M4,P as b4,S as S4}from"./iframe-BW2_2Sqh.js";import{i as V4}from"./range-rFhSCI5u.js";import{B as v4,u as R4,c as q4,d as P4,b as T4,e as x4,S as v,f as x}from"./ModalOutlet-CmtSB-Ai.js";import{u as Y}from"./useAdaptivityWithJSMediaQueries-2jw3QplY.js";import{F as k4}from"./FocusTrap-DmokX27Q.js";import{h as K}from"./react_utils-CSZjvU4X.js";import{M as I4}from"./ModalOutsideButton-DbNYQrKn.js";import{M as N4}from"./ModalOutsideButtons-BZXgY4mF.js";import{C as H4}from"./CustomScrollView-DrGLqxxz.js";import{I as O4}from"./cancel_20-C-Dh9gs0.js";import{u as L4}from"./useCSSTransition-rzEaekAl.js";const W4="_host_1eoj5_1",j4={host:W4},I=({children:u,className:a,getRootRef:s,...o})=>t.jsx(H4,{className:A(a,j4.host),getRootRef:s,...o,children:u});try{I.displayName="ModalPageContent",I.__docgenInfo={description:"",displayName:"ModalPageContent",props:{getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}const G4="_host_1750h_1",z4="_hostMobile_1750h_10",$4="_hostMobileSafeAreaInsetTop_1750h_21",K4="_hostMobileSafeAreaInsetTopWithCustomOffset_1750h_25",U4="_hostDesktop_1750h_32",w4="_hostDesktopMaxWidthS_1750h_56",X4="_hostDesktopMaxWidthM_1750h_60",J4="_hostDesktopMaxWidthL_1750h_64",Q4="_document_1750h_68",Y4="_documentMobile_1750h_81",Z4="_documentStateEnter_1750h_99",uu="_documentStateEntering_1750h_103",eu="_documentStateExiting_1750h_108",tu="_documentStateExited_1750h_113",au="_documentDesktop_1750h_118",nu="_children_1750h_141",ou="_childrenDesktop_1750h_161",e={host:G4,hostMobile:z4,hostMobileSafeAreaInsetTop:$4,hostMobileSafeAreaInsetTopWithCustomOffset:K4,hostDesktop:U4,hostDesktopMaxWidthS:w4,hostDesktopMaxWidthM:X4,hostDesktopMaxWidthL:J4,document:Q4,documentMobile:Y4,documentStateEnter:Z4,documentStateEntering:uu,documentStateExiting:eu,documentStateExited:tu,documentDesktop:au,children:nu,childrenDesktop:ou},N=({isDesktop:u,getRef:a,disableContentPanningGesture:s,header:o,children:E,footer:l,outsideButtons:i,modalContentTestId:p,modalDismissButtonTestId:m,modalDismissButtonLabel:c,hideCloseButton:D,closable:C,onClose:F=J,...h})=>{const y=s?v4:void 0,d=D||!u?null:t.jsx(I4,{"data-testid":m,onClick:C?function(g){F("click-close-button",g)}:void 0,"aria-label":c,children:t.jsx(O4,{})});return t.jsxs(C4,{role:"document",baseClassName:e.document,...h,children:[t.jsxs("div",{className:A(e.children,u&&e.childrenDesktop),children:[K(o)&&o,t.jsx(I,{getRootRef:a,"data-testid":p,...y,children:E}),K(l)&&l]}),u&&(d||i)&&t.jsxs(N4,{children:[d,i]})]})};try{N.displayName="ModalPageBase",N.__docgenInfo={description:"",displayName:"ModalPageBase",props:{isDesktop:{defaultValue:null,description:"",name:"isDesktop",required:!1,type:{name:"boolean"}},closable:{defaultValue:null,description:"",name:"closable",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},footer:{defaultValue:null,description:"Подвал модальной страницы, `<ModalPageFooter />`.",name:"footer",required:!1,type:{name:"ReactNode"}},header:{defaultValue:null,description:"Шапка модальной страницы, `<ModalPageHeader />`.",name:"header",required:!1,type:{name:"ReactNode"}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия модалки.",name:"onClose",required:!1,type:{name:"((reason: ModalPageCloseReason, event?: UIEvent<HTMLElement, UIEvent>) => void)"}},modalDismissButtonTestId:{defaultValue:null,description:"`data-testid` для кнопки закрытия.",name:"modalDismissButtonTestId",required:!1,type:{name:"string"}},outsideButtons:{defaultValue:null,description:"Управляющие элементы под кнопкой закрытия.\n\nДоступно только в `compact`-режиме. Рекомендуется размещать иконки размера 20, обернутые в ModalOutsideButton.",name:"outsideButtons",required:!1,type:{name:"ReactNode"}},hideCloseButton:{defaultValue:null,description:"Скрывает кнопку закрытия (актуально для iOS, так как можно отрисовать кнопку закрытия внутри модалки).",name:"hideCloseButton",required:!1,type:{name:"boolean"}},modalContentTestId:{defaultValue:null,description:"`data-testid` для содержимого модального окна.",name:"modalContentTestId",required:!1,type:{name:"string"}},modalDismissButtonLabel:{defaultValue:null,description:"Текст для скринридера.",name:"modalDismissButtonLabel",required:!1,type:{name:"string"}},disableContentPanningGesture:{defaultValue:null,description:"Отключает раскрытие и закрытие панели в мобильном виде.",name:"disableContentPanningGesture",required:!1,type:{name:"boolean"}}}}}catch{}const su={appear:e.documentStateEnter,appearing:e.documentStateEntering,enter:e.documentStateEnter,entering:e.documentStateEntering,exiting:e.documentStateExiting,exited:e.documentStateExited},H=({open:u,header:a,footer:s,size:o,height:E,children:l,className:i,style:p,snapPoint:m,onSnapPointChange:c,getModalContentRef:D,ModalOverlay:C=T4,modalOverlayTestId:F,modalContentTestId:h,modalDismissButtonTestId:y,modalDismissButtonLabel:d="Закрыть",outsideButtons:n,noFocusToDialog:g,hideCloseButton:S,preventClose:B,disableContentPanningGesture:r,restoreFocus:Z,onOpen:R,onOpened:q,onClose:_=J,onClosed:P,disableFocusTrap:u4,...e4})=>{const{hasCustomPanelHeaderAfter:t4}=A4(),[M,{ref:a4,onTransitionEnd:n4}]=L4(u,{enableAppear:!0,onEnter(){R==null||R()},onEntered(){q==null||q()},onExited(){P==null||P()}}),O=M==="appeared"||M==="entered",T=M==="exited",V=!B&&O,{sizeX:o4,isDesktop:f}=Y(),L=!f&&!B&&M!=="exited",{opened:W}=R4(L),[{initialStyle:j,setSheetEl:s4,setSheetScrollEl:l4,setBackdropEl:i4},d4]=q4(L,{blocked:W,snapPoint:m,sheetCSSProperty:"--vkui_internal_ModalPageDocument--snapPoint",backdropCSSProperty:"--vkui_internal--modal-overlay--opacity",onSnapPointChange:c,onDismiss(){_("swipe-down")}}),r4=W?{"--vkui_internal_ModalPageDocument--safeAreaInsetBottom":"0px",...j}:j,E4=z(s4,a4),p4=z(l4,D),[m4,c4]=iu(f?o:"s"),D4=t.jsx(C,{getRootRef:i4,"data-testid":F,visible:u,onClick:V?function(f4){_("click-overlay",f4)}:void 0}),B4=Q.useCallback(G=>{V&&F4(G)===h4.ESCAPE&&_("escape-key")},[V,_]);return y4(!T),t.jsxs(P4,{hidden:T,isDesktop:f,onKeyDown:B4,children:[D4,t.jsx(k4,{...e4,autoFocus:!g,restoreFocus:Z,role:"dialog","aria-modal":"true",disabled:!O||T||u4,className:A(i,e.host,f?e.hostDesktop:e.hostMobile,!f&&(t4?e.hostMobileSafeAreaInsetTopWithCustomOffset:e.hostMobileSafeAreaInsetTop),m4,o4==="regular"&&"vkuiInternalModalPage--sizeX-regular"),style:$($(c4,du(E)),p),children:t.jsx(N,{...d4,getRootRef:E4,getRef:p4,style:r4,className:A(f?e.documentDesktop:e.documentMobile,su[M]),onTransitionEnd:n4,isDesktop:f,disableContentPanningGesture:r,header:a,footer:s,outsideButtons:n,modalContentTestId:h,modalDismissButtonTestId:y,modalDismissButtonLabel:d,hideCloseButton:S,closable:V,onClose:_,children:l})})]})},lu={s:e.hostDesktopMaxWidthS,m:e.hostDesktopMaxWidthM,l:e.hostDesktopMaxWidthL};function iu(u="s"){return typeof u=="string"?[lu[u],void 0]:[void 0,typeof u=="number"?{"--vkui_internal_ModalPage--desktopMaxWidth":`${u}px`}:void 0]}function du(u){return u!==void 0?{"--vkui_internal_ModalPage--userHeight":typeof u=="number"?`${u}px`:u}:void 0}try{H.displayName="ModalPageInternal",H.__docgenInfo={description:"В компоненте заложена вся логика модального окна.",displayName:"ModalPageInternal",props:{snapPoint:{defaultValue:null,description:"",name:"snapPoint",required:!0,type:{name:"SnapPoint"}},ModalOverlay:{defaultValue:{value:`({
  visible = false,
  position = 'absolute',
  getRootRef,
  onClick,
  ...restProps
}: ModalOverlayProps) => {
  const [transitionState, { ref, onTransitionEnd }] = useCSSTransition<HTMLDivElement>(visible, {
    enableAppear: true,
  });
  const handleRef = useExternRef(getRootRef, ref);

  return (
    <div
      {...restProps}
      ref={handleRef}
      aria-hidden="true"
      hidden={transitionState === 'exited'}
      className={classNames(
        styles.host,
        onClick === undefined && styles.nonInteractive,
        positionClassNames[position],
        transitionStateClassNames[transitionState],
      )}
      onClick={onClick}
      onTransitionEnd={onTransitionEnd}
    />
  );
}`},description:"",name:"ModalOverlay",required:!1,type:{name:"ComponentType<ModalOverlayProps>"}},onSnapPointChange:{defaultValue:null,description:"",name:"onSnapPointChange",required:!1,type:{name:"SnapPointChange"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Дополнительные стили.",name:"style",required:!1,type:{name:'Omit<CSSProperties, "height" | "maxHeight" | "maxWidth">'}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},footer:{defaultValue:null,description:"Подвал модальной страницы, `<ModalPageFooter />`.",name:"footer",required:!1,type:{name:"ReactNode"}},header:{defaultValue:null,description:"Шапка модальной страницы, `<ModalPageHeader />`.",name:"header",required:!1,type:{name:"ReactNode"}},height:{defaultValue:null,description:`Задаёт модальному окну фиксированную высоту.
Можно передать числовое значение в пикселях, а можно строкой, в том числе и в процентах "50%".
В мобильной версии 'settlingHeight' будет считаться относительно заданного height.`,name:"height",required:!1,type:{name:"string | number"}},open:{defaultValue:{value:"false"},description:"Состояние видимости.",name:"open",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"Задаёт контенту максимальную ширину на десктопе.",name:"size",required:!1,type:{name:'number | "s" | "m" | "l"'}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия модалки.",name:"onClose",required:!1,type:{name:"((reason: ModalPageCloseReason, event?: UIEvent<HTMLElement, UIEvent>) => void)"}},restoreFocus:{defaultValue:{value:"true"},description:"",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean | HTMLElement)"}},onOpen:{defaultValue:null,description:"Будет вызвано при начале открытия модалки.",name:"onOpen",required:!1,type:{name:"VoidFunction"}},disableFocusTrap:{defaultValue:null,description:"Позволяет отключить захват фокуса.\n\nНужно использовать, когда поверх одной модалки открывается другая, чтобы два `FocusTrap` не конфликтовали.",name:"disableFocusTrap",required:!1,type:{name:"boolean"}},modalDismissButtonTestId:{defaultValue:null,description:"`data-testid` для кнопки закрытия.",name:"modalDismissButtonTestId",required:!1,type:{name:"string"}},preventClose:{defaultValue:null,description:"Позволяет отключить возможность закрытия модальной страницы (смахивание, клавиша `ESC`, нажатие на подложку).\n\n⚠️ ВНИМАНИЕ: использование этой опции негативно сказывается на пользовательском опыте.",name:"preventClose",required:!1,type:{name:"boolean"}},outsideButtons:{defaultValue:null,description:"Управляющие элементы под кнопкой закрытия.\n\nДоступно только в `compact`-режиме. Рекомендуется размещать иконки размера 20, обернутые в ModalOutsideButton.",name:"outsideButtons",required:!1,type:{name:"ReactNode"}},modalOverlayTestId:{defaultValue:null,description:"`data-testid` для оверлея.",name:"modalOverlayTestId",required:!1,type:{name:"string"}},noFocusToDialog:{defaultValue:null,description:"Отключает фокус на интерактивный элемент после открытия модалки.",name:"noFocusToDialog",required:!1,type:{name:"boolean"}},onOpened:{defaultValue:null,description:"Будет вызвано при окончательном открытии модалки.",name:"onOpened",required:!1,type:{name:"VoidFunction"}},onClosed:{defaultValue:null,description:"Будет вызвано при окончательном закрытии модалки.",name:"onClosed",required:!1,type:{name:"VoidFunction"}},hideCloseButton:{defaultValue:null,description:"Скрывает кнопку закрытия (актуально для iOS, так как можно отрисовать кнопку закрытия внутри модалки).",name:"hideCloseButton",required:!1,type:{name:"boolean"}},modalContentTestId:{defaultValue:null,description:"`data-testid` для содержимого модального окна.",name:"modalContentTestId",required:!1,type:{name:"string"}},getModalContentRef:{defaultValue:null,description:"Возвращает DOM-элемент содержимого модального окна.",name:"getModalContentRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},modalDismissButtonLabel:{defaultValue:{value:"Закрыть"},description:"Текст для скринридера.",name:"modalDismissButtonLabel",required:!1,type:{name:"string"}},disableContentPanningGesture:{defaultValue:null,description:"Отключает раскрытие и закрытие панели в мобильном виде.",name:"disableContentPanningGesture",required:!1,type:{name:"boolean"}}}}}catch{}const b=new Map,U=({id:u,nav:a,open:s=!1,modalOverlayTestId:o,noFocusToDialog:E,onOpen:l,onOpened:i,onClose:p,onClosed:m,size:c="s",settlingHeight:D=50,dynamicContentHeight:C,keepMounted:F=!1,...h})=>{const{mounted:y,shouldPreserveSnapPoint:d,id:n,...g}=x4({id:a||u,open:s,keepMounted:F,modalOverlayTestId:o,noFocusToDialog:E,onOpen:l,onOpened:i,onClose:p,onClosed:m}),S=Q.useMemo(()=>{if(C)return"auto";if(d){const B=b.get(n);if(B)return B;const r=w(D);return b.set(n,r),r}else b.delete(n);return w(D)},[n,d,C,D]);return y?t.jsx(g4.Provider,{value:n,children:t.jsx(H,{id:n,size:c,"aria-labelledby":`${n}-label`,snapPoint:S,onSnapPointChange:S!=="auto"&&d?B=>{const r=b.get(n);r&&(r.initial=B,b.set(n,r))}:void 0,...g,...h})}):null};function w(u){const a=Math.min(Math.max(u,x.LOWER),v.LARGE);return{initial:a,detents:V4(a,x.LOWER,x.HIGHEST)?[v.MIN,a,v.LARGE]:[v.MIN,a]}}try{U.displayName="ModalPage",U.__docgenInfo={description:"",displayName:"ModalPage",props:{open:{defaultValue:{value:"false"},description:"Состояние видимости.",name:"open",required:!1,type:{name:"boolean"}},keepMounted:{defaultValue:{value:"false"},description:"Сохранять ли компонент в DOM при `open={false}`.",name:"keepMounted",required:!1,type:{name:"boolean"}},header:{defaultValue:null,description:"Шапка модальной страницы, `<ModalPageHeader />`.",name:"header",required:!1,type:{name:"ReactNode"}},footer:{defaultValue:null,description:"Подвал модальной страницы, `<ModalPageFooter />`.",name:"footer",required:!1,type:{name:"ReactNode"}},size:{defaultValue:{value:"s"},description:"Задаёт контенту максимальную ширину на десктопе.",name:"size",required:!1,type:{name:'number | "s" | "m" | "l"'}},height:{defaultValue:null,description:`Задаёт модальному окну фиксированную высоту.
Можно передать числовое значение в пикселях, а можно строкой, в том числе и в процентах "50%".
В мобильной версии 'settlingHeight' будет считаться относительно заданного height.`,name:"height",required:!1,type:{name:"string | number"}},settlingHeight:{defaultValue:{value:"50"},description:"Процент, на который изначально будет открыта модальная страница.\n\n> ⚠️ Следует использовать следующие значения: `25`, `50`, `75`, `100`.\n> При передаче `< 25` значение приведётся к `25`, при передаче `> 75` значение приведётся к `75`.\n\nИгнорируется при включении `dynamicContentHeight`.",name:"settlingHeight",required:!1,type:{name:"number"}},dynamicContentHeight:{defaultValue:null,description:"Если высота контента в модальной странице может поменяться, нужно установить это свойство.",name:"dynamicContentHeight",required:!1,type:{name:"boolean"}},noFocusToDialog:{defaultValue:null,description:"Отключает фокус на интерактивный элемент после открытия модалки.",name:"noFocusToDialog",required:!1,type:{name:"boolean"}},hideCloseButton:{defaultValue:null,description:"Скрывает кнопку закрытия (актуально для iOS, так как можно отрисовать кнопку закрытия внутри модалки).",name:"hideCloseButton",required:!1,type:{name:"boolean"}},modalContentTestId:{defaultValue:null,description:"`data-testid` для содержимого модального окна.",name:"modalContentTestId",required:!1,type:{name:"string"}},getModalContentRef:{defaultValue:null,description:"Возвращает DOM-элемент содержимого модального окна.",name:"getModalContentRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},modalOverlayTestId:{defaultValue:null,description:"`data-testid` для оверлея.",name:"modalOverlayTestId",required:!1,type:{name:"string"}},modalDismissButtonTestId:{defaultValue:null,description:"`data-testid` для кнопки закрытия.",name:"modalDismissButtonTestId",required:!1,type:{name:"string"}},modalDismissButtonLabel:{defaultValue:null,description:"Текст для скринридера.",name:"modalDismissButtonLabel",required:!1,type:{name:"string"}},preventClose:{defaultValue:null,description:"Позволяет отключить возможность закрытия модальной страницы (смахивание, клавиша `ESC`, нажатие на подложку).\n\n⚠️ ВНИМАНИЕ: использование этой опции негативно сказывается на пользовательском опыте.",name:"preventClose",required:!1,type:{name:"boolean"}},disableContentPanningGesture:{defaultValue:null,description:"Отключает раскрытие и закрытие панели в мобильном виде.",name:"disableContentPanningGesture",required:!1,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"Будет вызвано при начале открытия модалки.",name:"onOpen",required:!1,type:{name:"VoidFunction"}},onOpened:{defaultValue:null,description:"Будет вызвано при окончательном открытии модалки.",name:"onOpened",required:!1,type:{name:"VoidFunction"}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия модалки.",name:"onClose",required:!1,type:{name:"((reason: ModalPageCloseReason, event?: UIEvent<HTMLElement, UIEvent>) => void)"}},onClosed:{defaultValue:null,description:"Будет вызвано при окончательном закрытии модалки.",name:"onClosed",required:!1,type:{name:"VoidFunction"}},outsideButtons:{defaultValue:null,description:"Управляющие элементы под кнопкой закрытия.\n\nДоступно только в `compact`-режиме. Рекомендуется размещать иконки размера 20, обернутые в ModalOutsideButton.",name:"outsideButtons",required:!1,type:{name:"ReactNode"}},disableFocusTrap:{defaultValue:null,description:"Позволяет отключить захват фокуса.\n\nНужно использовать, когда поверх одной модалки открывается другая, чтобы два `FocusTrap` не конфликтовали.",name:"disableFocusTrap",required:!1,type:{name:"boolean"}},nav:{defaultValue:null,description:"Уникальный идентификатор навигационного элемента (вместо id)",name:"nav",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},restoreFocus:{defaultValue:{value:"true"},description:"",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean | HTMLElement)"}},style:{defaultValue:null,description:"Дополнительные стили.",name:"style",required:!1,type:{name:'Omit<CSSProperties, "height" | "maxHeight" | "maxWidth">'}}}}}catch{}const ru="_host_7zl0e_1",Eu="_hostWithGaps_7zl0e_10",pu="_hostDesktop_7zl0e_14",k={host:ru,hostWithGaps:Eu,hostDesktop:pu},X=({children:u,noSeparator:a=!1,getRootRef:s,className:o,typographyProps:E,...l})=>{const i=_4(),{isDesktop:p,sizeX:m}=Y(),c=M4();return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:A(k.host,i!=="vkcom"&&k.hostWithGaps,p&&k.hostDesktop),ref:s,children:t.jsx(b4,{className:A("vkuiInternalModalPageHeader__in",o),typographyProps:{Component:"h2",id:c.labelId,...E},...l,fixed:!1,delimiter:"none",transparent:!0,children:u})}),!a&&t.jsx(S4,{padding:m!=="regular"})]})};try{X.displayName="ModalPageHeader",X.__docgenInfo={description:"",displayName:"ModalPageHeader",props:{noSeparator:{defaultValue:{value:"false"},description:"Отключение разделителя.",name:"noSeparator",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},after:{defaultValue:null,description:`Добавляет элемент справа.

При передаче нескольких элементов, расставляет отступы между ними.`,name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:null,description:"Добавляет элемент слева.",name:"before",required:!1,type:{name:"ReactNode"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},float:{defaultValue:null,description:"Высота шапки будет игнорироваться контентом панели.",name:"float",required:!1,type:{name:"boolean"}},transparent:{defaultValue:null,description:"Прозрачный фон компонента.",name:"transparent",required:!1,type:{name:"boolean"}},typographyProps:{defaultValue:null,description:"По умолчанию как `Component` используется `span`.",name:"typographyProps",required:!1,type:{name:"(HasComponent & HTMLAttributes<HTMLElement> & HasDataAttribute)"}}}}}catch{}export{U as M,X as a,N as b};
