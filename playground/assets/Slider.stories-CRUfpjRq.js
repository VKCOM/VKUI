import{r as p,k as _u,j as l,i as N,aB as Su,l as Bu,ad as G,M as Vu,W as Au,w as Tu,b as wu}from"./iframe-DDos8QSD.js";import{D as Ru,C as Pu}from"./constants-DdkjnEgz.js";import{c as zu}from"./createStoryParameters-CcwS40kl.js";import{F as xu}from"./FormItem-Dzo1_vUz.js";import{G as Iu}from"./Group-BdSAzhLh.js";import{u as Mu}from"./useConfigDirection-BVLc7CyO.js";import{u as Nu}from"./useBooleanState-BPdqgwEs.js";import{u as qu,a as Lu}from"./Clickable-CWxsm2KA.js";import{T as ju}from"./TooltipBase-B8JVtoZN.js";import{o as ku,i as Yu,s as Hu,k as Xu,u as Wu,c as Ou}from"./FloatingArrow-AYA0w7FM.js";const $u="_host_13u0p_1",Gu="_focusVisible_13u0p_15",Ku="_hover_13u0p_20",Uu="_active_13u0p_24",Ju="_nativeInput_13u0p_31",V={host:$u,focusVisible:Gu,hover:Ku,active:Uu,nativeInput:Ju},q=({className:u,getRootRef:e,inputProps:t,withTooltip:n,isActive:s,...c})=>{const{focusVisible:r,onBlur:F,onFocus:T}=qu(),b=Lu({focusVisible:r,mode:V.focusVisible}),[f,L]=p.useState(null),j=p.useMemo(()=>[ku({crossAxis:0,mainAxis:15}),Yu(),Hu({padding:8}),Xu({element:f})],[f]),{x:g,y:w,placement:k,refs:R,strategy:Y,middlewareData:{arrow:P},update:H}=Wu({placement:"top",middleware:j}),{value:_,setTrue:h,setFalse:z}=Nu(!1),x=_u(e,R.setReference),d=n&&(r||_||s),i=t&&t.value;return p.useEffect(function(){d&&i!=="undefined"&&H()},[i,H,d]),l.jsxs(p.Fragment,{children:[l.jsx("span",{...c,ref:x,onMouseEnter:h,onMouseLeave:z,className:N(V.host,b,s&&V.active,_&&V.hover,u),children:l.jsx("input",{...t,type:"range",className:V.nativeInput,"aria-orientation":"horizontal",onBlur:F,onFocus:T})}),d&&l.jsx(ju,{appearance:"neutral",getRootRef:R.setFloating,style:Ou({strategy:Y,x:g,y:w}),arrowProps:{coords:P,placement:k,getRootRef:L},description:i})]})};try{q.displayName="SliderThumb",q.__docgenInfo={description:"",displayName:"SliderThumb",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"(InputHTMLAttributes<HTMLInputElement> & RefAttributes<HTMLInputElement> & HasDataAttribute)"}},withTooltip:{defaultValue:null,description:"",name:"withTooltip",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLSpanElement>"}}}}}catch{}const ou=(u,e,t)=>(u-e)/(t-e)*100,lu=(u,e,t,n,s)=>Su(u,[0,e],[t,n],{step:s}),K=(u,e,t)=>u<e?e:u>t?t:u,iu=(u,e,t,n,s)=>{const[c,r]=u;if(r===null)return[K(e,t,n),null];switch(s){case"start":return e>r?[r,r]:[K(e,t,n),r];case"end":return e<c?[c,c]:[c,K(e,t,n)];case null:default:return u}},Qu=(u,e,t)=>{const[n,s]=u;switch(t){case"start":return[e,s];case"end":return[n,e];case null:default:return u}};function Zu(u){return u[1]!==null}const u4=(u,e,t)=>{if(t==="start")return"start";if(t==="end")return"end";const[n,s]=u,c=.1,r=s!==null?n-c:n,F=s!==null?s+c:0;return Math.abs(r-e)<=Math.abs(F-e)?"start":"end"},cu=u=>{if(u){if(u.dataset.type==="start")return"start";if(u.dataset.type==="end")return"end"}return null},e4={"aria-label":void 0,"aria-valuetext":void 0,"aria-labelledby":void 0},t4=u=>{const e=u["aria-label"],t=u["aria-valuetext"],n=u["aria-labelledby"];return{...u,...e4,ariaLabel:e,ariaValueText:t,ariaLabelledBy:n}},a4="_host_f9owr_1",n4="_disabled_f9owr_10",r4="_track_f9owr_15",s4="_trackFill_f9owr_16",o4="_multiple_f9owr_34",l4="_thumbs_f9owr_40",i4="_thumb_f9owr_40",c4="_rtl_f9owr_52",d4="_thumbStart_f9owr_56",p4="_thumbEnd_f9owr_60",m4="_sizeL_f9owr_64",f4="_sizeM_f9owr_68",E4="_sizeS_f9owr_72",b4="_sizeYCompact_f9owr_80",g4="_sizeYNone_f9owr_93",o={host:a4,disabled:n4,track:r4,trackFill:s4,multiple:o4,thumbs:l4,thumb:i4,rtl:c4,thumbStart:d4,thumbEnd:p4,sizeL:m4,sizeM:f4,sizeS:E4,sizeYCompact:b4,sizeYNone:g4},_4={none:o.sizeYNone,compact:o.sizeYCompact},h4={l:o.sizeL,m:o.sizeM,s:o.sizeS},U=({step:u=1,min:e=0,max:t=100,value:n,multiple:s,defaultValue:c=s?[e,t]:e,disabled:r,className:F,getRootRef:T,getAriaLabel:b,getAriaValueText:f,startThumbTestId:L,endThumbTestId:j,onChange:g,withTooltip:w,size:k="l",style:R,...Y})=>{const{sizeY:P="none"}=Bu(),_=Mu()==="rtl",h=n!==void 0,[z,x]=p.useState(c),d=p.useMemo(()=>{const a=h?n:z;return Array.isArray(a)?[G(a[0],e,t),G(a[1],e,t)]:[G(a,e,t),null]},[h,n,z,e,t]),[i,m]=d,D=s&&m!==null,J=ou(i,e,t),hu=D?ou(m,e,t):0,[Q,Z]=p.useState(null),y=p.useRef({dragging:null,startX:0,containerWidth:0}).current,X=_u(T),W=p.useRef(null),O=p.useRef(null),{ariaLabel:uu,ariaValueText:eu,ariaLabelledBy:tu,...Du}=t4(Y),$=(a,v)=>{r||d[0]===a[0]&&d[1]===a[1]||(s?Zu(a)&&(!h&&x(a),g&&g(a,v)):(!h&&x(a[0]),g&&g(a[0],v)))},yu=a=>{if(!X.current)return;const{left:v,width:S}=X.current.getBoundingClientRect(),B=cu(a.originalEvent.target);let E=a.startX-v;_&&(E=S-E);const I=lu(E,S,e,t,u),M=u4(d,I,B);y.dragging=M,y.containerWidth=S,y.startX=E;const nu=iu(d,I,e,t,M),[ru,su]=nu;W.current&&(B==="start"||ru!==i&&su===m)?(W.current.focus(),a.originalEvent.preventDefault()):O.current&&(B==="end"||su!==m&&ru===i)&&(O.current.focus(),a.originalEvent.preventDefault()),$(nu,a),a.originalEvent.stopPropagation(),Z(y.dragging)},vu=a=>{const{startX:v,containerWidth:S,dragging:B}=y,{shiftX:E=0}=a,I=v+(_?-E:E),M=lu(I,S,e,t,u);$(iu(d,M,e,t,B),a),a.originalEvent.stopPropagation(),a.originalEvent.preventDefault()},Cu=a=>{y.dragging=null,a.originalEvent.stopPropagation(),Z(null)},au=a=>{$(Qu(d,Number(a.target.value),cu(a.target)),a)},Fu={"--vkui_internal--Slider_start_value":String(J),"--vkui_internal--Slider_end_value":String(hu)};return l.jsxs(Vu,{"data-value":D?`${i},${m}`:i,...Du,className:N(o.host,r&&o.disabled,P!=="regular"&&_4[P],h4[k],D&&o.multiple,_&&o.rtl,F),style:Au(R,Fu),getRootRef:T,onStart:r?void 0:yu,onMove:r?void 0:vu,onEnd:r?void 0:Cu,children:[l.jsx("div",{className:o.track}),l.jsx("div",{className:o.trackFill}),l.jsxs("div",{ref:X,className:o.thumbs,children:[l.jsx(q,{"data-type":"start",className:N(o.thumb,o.thumbStart),style:{zIndex:D&&J>=50?2:void 0},withTooltip:w,inputProps:{"data-type":"start","data-testid":L,ref:W,step:u,min:e,value:i,max:D?m:t,disabled:r,"aria-label":b?b(0):uu,"aria-valuetext":f?f(i,0):eu,"aria-labelledby":tu,onChange:au},isActive:Q==="start"}),D&&l.jsx(q,{"data-type":"end",className:N(o.thumb,o.thumbEnd),withTooltip:w,inputProps:{"data-type":"end","data-testid":j,ref:O,step:u,min:i,value:m,max:t,disabled:r,"aria-label":b?b(1):uu,"aria-valuetext":f?f(m,1):eu,"aria-labelledby":tu,onChange:au},isActive:Q==="end"})]})]})};try{U.displayName="Slider",U.__docgenInfo={description:"",displayName:"Slider",props:{multiple:{defaultValue:null,description:`Флаг множественного выбора (должен быть false или не указан).
Флаг множественного выбора (должен быть true).`,name:"multiple",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:`Текущее значение слайдера.
Текущие значения слайдера в виде массива [начальное, конечное].`,name:"value",required:!1,type:{name:"number | [number, number]"}},defaultValue:{defaultValue:{value:"multipleProp ? [min, max] : min"},description:`Значение слайдера по умолчанию.
Значения слайдера по умолчанию в виде массива [начальное, конечное].`,name:"defaultValue",required:!1,type:{name:"number | [number, number]"}},onChange:{defaultValue:null,description:`Обработчик изменения значения слайдера.
Обработчик изменения значений слайдера.`,name:"onChange",required:!1,type:{name:"((value: number, event: CustomTouchEvent | ChangeEvent<Element>) => void) | ((value: [number, number], event: CustomTouchEvent | ChangeEvent<...>) => void)"}},min:{defaultValue:{value:"0"},description:"Минимальное значение слайдера.",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"100"},description:"Максимальное значение слайдера.",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"Шаг изменения значения слайдера.",name:"step",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}},getAriaLabel:{defaultValue:null,description:"Тоже самое, что и `aria-label`, но на вход можно получать индекс текущего ползунка и в зависимости от этого выдавать разный текст.\n\n> Перебивает `aria-label`.",name:"getAriaLabel",required:!1,type:{name:"((index: number) => string)"}},getAriaValueText:{defaultValue:null,description:"В отличие от `aria-valuetext`, позволяет более гибко форматировать текст в зависимости от значения ползунка.\n\nПолезно при использовании компонента как неконтролируемого.\n\n> Перебивает `aria-valuetext`.",name:"getAriaValueText",required:!1,type:{name:"((value: number, index: number) => string)"}},withTooltip:{defaultValue:null,description:"Включает отображение всплывающей подсказки при взаимодействии с ползунком.",name:"withTooltip",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"l"},description:"Размер ползунка.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},startThumbTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для первого ползунка.",name:"startThumbTestId",required:!1,type:{name:"string"}},endThumbTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для второго ползунка когда `multiple=true`.",name:"endThumbTestId",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}function du(u){return u===1?"Pineapple Maximum Count":"Pineapple Minimum Count"}const D4={title:"Forms/Slider",component:U,parameters:zu("Slider",Pu,Ru),args:{getAriaLabel:du},argTypes:{defaultValue:{table:{defaultValue:{summary:"min | [min, max]"}}},multiple:{table:{defaultValue:{summary:"false"}}},getAriaLabel:{table:{defaultValue:{summary:`Для примера используется функция: ${du.toString()}`}}}}},y4=u=>u!=null&&u.multiple?"multiple":"single",C={decorators:[(u,e)=>l.jsx(Iu,{children:l.jsx(xu,{top:"Pineapple Count",children:l.jsx(u,{...e.args},y4(e.args))})}),Tu,wu]},A={...C,args:{withTooltip:!0}};var pu,mu,fu;C.parameters={...C.parameters,docs:{...(pu=C.parameters)==null?void 0:pu.docs,source:{originalSource:`{
  decorators: [(Component: typeof Slider, context: StoryContext<SliderProps | SliderMultipleProps>) => <Group>
        <FormItem top="Pineapple Count">
          <Component key={forceRemountKey(context.args)} {...context.args} />
        </FormItem>
      </Group>, withSinglePanel, withVKUILayout]
}`,...(fu=(mu=C.parameters)==null?void 0:mu.docs)==null?void 0:fu.source}}};var Eu,bu,gu;A.parameters={...A.parameters,docs:{...(Eu=A.parameters)==null?void 0:Eu.docs,source:{originalSource:`{
  ...Playground,
  args: {
    withTooltip: true
  }
}`,...(gu=(bu=A.parameters)==null?void 0:bu.docs)==null?void 0:gu.source}}};const v4=["Playground","Tooltip"],z4=Object.freeze(Object.defineProperty({__proto__:null,Playground:C,Tooltip:A,__namedExportsOrder:v4,default:D4},Symbol.toStringTag,{value:"Module"}));export{C as P,U as S,z4 as a};
