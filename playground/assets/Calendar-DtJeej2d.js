import{r as n,j as l,A as oe,aP as le,aQ as se,g as ie,s as de,K as H,aa as Pe,a9 as Se,q as Le,az as Q,aA as Re,aB as je,R as Ke}from"./iframe-CJSxyW9U.js";import{u as He,N as ze,n as Oe,s as Ue,e as Ye,i as A,C as Ze,d as $e,a as Ge,b as Qe}from"./CalendarHeader-Dt0WtSan.js";import{u as We}from"./useEnsuredControl-DVOSKHBB.js";import{B as Je}from"./Button-BC2c2Xtj.js";import{C as Xe}from"./CustomSelect-CcafMIlj.js";const eu="_host_vitji_1",uu="_host__withoutDone_vitji_6",au="_picker_vitji_10",tu="_divider_vitji_14",nu="_button_vitji_20",w={host:eu,host__withoutDone:uu,picker:au,divider:tu,button:nu},lu=()=>!0,su=(e,c)=>{const i=Number(e);return!isNaN(i)&&c.some(r=>r.value===i)},z=({value:e,getNumericValue:c,options:i,onChange:r,setTime:f,inputRef:p,inputLabel:E,inputTestId:q,onInputKeyDown:h})=>{const[B,b]=n.useState(void 0),C=n.useCallback(()=>{b(void 0)},[]),_=n.useCallback((D,o)=>r?.(f(e,Number(o))),[r,f,e]),v=D=>{const o=D.target.value.replace(/\D/g,"");b(o),su(o,i)&&r?.(f(e,Number(o)))};return l.jsx("div",{className:w.picker,children:l.jsx(oe,{density:"compact",children:l.jsx(Xe,{value:c(e),options:i,onChange:_,forceDropdownPortal:!1,searchable:!0,filterFn:lu,onInputChange:v,onInputKeyDown:h,getSelectInputRef:p,slotProps:{input:{"aria-label":E,"data-testid":q,value:B,onBlur:C}}})})})};try{z.displayName="CalendarTimePicker",z.__docgenInfo={description:"",displayName:"CalendarTimePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"Date"}},getNumericValue:{defaultValue:null,description:"",name:"getNumericValue",required:!0,type:{name:"(date: Date) => number"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"{ value: number; label: string; }[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: Date) => void)"}},setTime:{defaultValue:null,description:"",name:"setTime",required:!0,type:{name:"(value: Date, time: number) => Date"}},inputRef:{defaultValue:null,description:"",name:"inputRef",required:!0,type:{name:"Ref<HTMLInputElement>"}},inputLabel:{defaultValue:null,description:"",name:"inputLabel",required:!1,type:{name:"string"}},inputTestId:{defaultValue:null,description:"",name:"inputTestId",required:!1,type:{name:"string"}},onInputKeyDown:{defaultValue:null,description:"Обработчик события `keyDown` в поле ввода.",name:"onInputKeyDown",required:!1,type:{name:"((e: KeyboardEvent<Element>, isOpen: boolean) => void)"}}}}}catch{}const W=[];for(let e=0;e<24;e+=1)W.push({value:e,label:String(e).padStart(2,"0")});const J=[];for(let e=0;e<60;e+=1)J.push({value:e,label:String(e).padStart(2,"0")});const X=({value:e,onChange:c,onDoneButtonClick:i,changeHoursLabel:r,changeMinutesLabel:f,isDayDisabled:p,doneButtonText:E="Готово",doneButtonDisabled:q=!1,doneButtonShow:h=!0,minutesTestId:B,hoursTestId:b,doneButtonTestId:C,DoneButton:_})=>{const v=n.useRef(null),D=n.useRef(null),o=n.useRef(null),O=p?W.map(u=>({...u,disabled:p(le(e,u.value),!0)})):W,U=p?J.map(u=>({...u,disabled:p(se(e,u.value),!0)})):J,N=u=>{if(de(u)!==H.ENTER)return;const g=[v,D,o].filter(I=>!!I.current),P=g.findIndex(I=>I.current===u.target)+1;if(P>=g.length)return;const S=g[P];S.current&&(u.preventDefault(),S.current?.focus())},Y=n.useCallback((u,d)=>{d&&u.key==="Escape"&&u.stopPropagation()},[]),k=(u,d)=>{N(u),Y(u,d)},Z=()=>{const u=_??Je;return l.jsx(u,{mode:"secondary",onClick:i,size:"l",getRootRef:o,onKeyDown:N,disabled:q,"data-testid":C,children:E})};return l.jsxs("div",{className:ie(w.host,!h&&w.host__withoutDone),children:[l.jsx(z,{value:e,getNumericValue:u=>u.getHours(),onChange:c,options:O,setTime:le,onInputKeyDown:k,inputRef:v,inputLabel:r,inputTestId:b}),l.jsx("div",{className:w.divider,children:":"}),l.jsx(z,{value:e,getNumericValue:u=>u.getMinutes(),onChange:c,options:U,setTime:se,onInputKeyDown:k,inputRef:D,inputLabel:f,inputTestId:B}),h&&l.jsx("div",{className:w.button,children:l.jsx(oe,{density:"compact",children:Z()})})]})};try{X.displayName="CalendarTime",X.__docgenInfo={description:"",displayName:"CalendarTime",props:{value:{defaultValue:null,description:"Отображаемая дата.",name:"value",required:!0,type:{name:"Date"}},changeHoursLabel:{defaultValue:null,description:"Текст выпадающего списка с выбором часов. Делает его доступным для ассистивных технологий.",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:null,description:"Текст выпадающего списка с выбором минут. Делает его доступным для ассистивных технологий.",name:"changeMinutesLabel",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Обработчик изменения времени.",name:"onChange",required:!1,type:{name:"((value: Date) => void)"}},isDayDisabled:{defaultValue:null,description:"Функция для проверки блокировки выбора даты и времени.",name:"isDayDisabled",required:!1,type:{name:"((day: Date, withTime?: boolean) => boolean)"}},hoursTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора часа в календаре.",name:"hoursTestId",required:!1,type:{name:"string"}},minutesTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора минут в календаре.",name:"minutesTestId",required:!1,type:{name:"string"}},doneButtonTestId:{defaultValue:null,description:'Передает атрибут `data-testid` для кнопки "Готово" в календаре.',name:"doneButtonTestId",required:!1,type:{name:"string"}},DoneButton:{defaultValue:null,description:'Кастомное отображение кнопки `"Done"`.',name:"DoneButton",required:!1,type:{name:"ComponentType<ButtonProps>"}},doneButtonText:{defaultValue:{value:"Готово"},description:'Текст отображаемый в кнопке `"Done"`.',name:"doneButtonText",required:!1,type:{name:"string"}},doneButtonShow:{defaultValue:{value:"true"},description:'Управление отображением кнопки `"Done"`.',name:"doneButtonShow",required:!1,type:{name:"boolean"}},doneButtonDisabled:{defaultValue:{value:"false"},description:'Блокировка взаимодействия с кнопкой "Done".',name:"doneButtonDisabled",required:!1,type:{name:"boolean"}},onDoneButtonClick:{defaultValue:null,description:'Обработки нажатия на кнопку `"Done"`.',name:"onDoneButtonClick",required:!1,type:{name:"(() => void)"}}}}}catch{}const ru="_host_1izce_1",ou="_time_1izce_13",iu="_header_1izce_21",du="_sizeS_1izce_25",K={host:ru,time:ou,header:iu,sizeS:du},re=({getRootRef:e,value:c,defaultValue:i,onChange:r,disablePast:f,disableFuture:p,shouldDisableDate:E,onDoneButtonClick:q,enableTime:h=!1,doneButtonText:B,doneButtonDisabled:b,doneButtonShow:C,DoneButton:_,weekStartsOn:v=1,disablePickers:D,"aria-label":o="Календарь",changeHoursLabel:O="Изменить час",changeMinutesLabel:U="Изменить минуту",prevMonthLabel:N="Предыдущий месяц",nextMonthLabel:Y="Следующий месяц",changeMonthLabel:k="Изменить месяц",changeYearLabel:Z="Изменить год",showNeighboringMonth:u,size:d="m",viewDate:g,onHeaderChange:ee,onNextMonth:P,onPrevMonth:S,prevMonthIcon:I,nextMonthIcon:ce,prevMonthProps:pe,nextMonthProps:me,dayProps:fe,listenDayChangesForUpdate:De,renderDayContent:ye,minDateTime:F,maxDateTime:T,timezone:L,minutesTestId:he,hoursTestId:be,doneButtonTestId:ve,prevMonthButtonTestId:ge,nextMonthButtonTestId:Ve,monthDropdownTestId:Ee,yearDropdownTestId:qe,dayTestId:Be,...Ce})=>{const _e=n.useCallback(a=>{const s=Pe(a,L);s&&r&&r(s)},[r,L]),[ue,$]=We({value:c,defaultValue:i,onChange:_e}),t=n.useMemo(()=>Se(ue,L),[L,ue]),{viewDate:m,setViewDate:R,setPrevMonth:Ie,setNextMonth:Fe,focusedDay:V,setFocusedDay:M,isDayFocused:Te,isDayDisabled:ae,isMonthDisabled:Me,isYearDisabled:xe}=He({value:t,disableFuture:p,disablePast:f,shouldDisableDate:E,onHeaderChange:ee,onNextMonth:P,onPrevMonth:S,minDateTime:F,maxDateTime:T}),[y,j]=n.useState();Le(()=>{t&&R(t)},[t]);const Ae=n.useCallback(a=>{const s=de(a);if(s&&ze.includes(s)){a.preventDefault();const x=Oe(V??t,s);x&&!Q(x,m)&&R(x),M(x),j(x);return}if(s===H.TAB){M(void 0),j(V);return}(s===H.ENTER||s===H.SPACE)&&Re(a.target)&&(a.preventDefault(),a.target.click?.())},[V,M,j,R,t,m]),we=n.useCallback(a=>{let s=Ue(a,t);(F||T)&&(s=Ye(s,{min:F,max:T})),$(s)},[t,$,T,F]),Ne=n.useCallback(a=>{V&&A(V,a)||(M(a),(!y||!A(a,y))&&j(a))},[y,V,M]),G=n.useCallback(a=>!!(t&&A(a,t)),[t]),te=y&&Q(y,m),ne=t&&Q(t,m),ke=n.useCallback(a=>te?A(y,a):ne?G(a):A(je(m),a),[y,m,G,te,ne]);return l.jsxs(Ke,{"aria-label":o,...Ce,baseClassName:ie(K.host,d==="s"&&K.sizeS),getRootRef:e,children:[l.jsx(Ze,{viewDate:g||m,onChange:R,onNextMonth:Fe,onPrevMonth:Ie,disablePickers:D||d==="s",className:K.header,prevMonthLabel:N,nextMonthLabel:Y,changeMonthLabel:k,changeYearLabel:Z,prevMonthIcon:I,nextMonthIcon:ce,prevMonthProps:pe,nextMonthProps:me,isMonthDisabled:Me,isYearDisabled:xe,nextMonthButtonTestId:Ve,prevMonthButtonTestId:ge,monthDropdownTestId:Ee,yearDropdownTestId:qe}),l.jsx($e,{viewDate:g||m,value:t,weekStartsOn:v,onKeyDown:Ae,onDayChange:we,isDayActive:G,onDayFocus:Ne,isDayFocused:Te,isDayFocusable:ke,isDaySelectionStart:Qe,isDaySelectionEnd:Ge,isDayDisabled:ae,showNeighboringMonth:u,size:d,dayProps:fe,listenDayChangesForUpdate:De,renderDayContent:ye,dayTestId:Be}),h&&t&&d!=="s"&&l.jsx("div",{className:K.time,children:l.jsx(X,{value:t,onChange:$,onDoneButtonClick:q,doneButtonText:B,doneButtonDisabled:b,doneButtonShow:C,DoneButton:_,changeHoursLabel:O,changeMinutesLabel:U,isDayDisabled:F||T?ae:void 0,minutesTestId:he,hoursTestId:be,doneButtonTestId:ve})})]})};try{re.displayName="Calendar",re.__docgenInfo={description:"",displayName:"Calendar",props:{value:{defaultValue:null,description:"Текущая выбранная дата.",name:"value",required:!1,type:{name:"Date | null"}},defaultValue:{defaultValue:null,description:"Начальная дата при монтировании.",name:"defaultValue",required:!1,type:{name:"Date | null"}},disablePast:{defaultValue:null,description:"Запрещает выбор даты в прошлом.\nПрименяется, если не заданы `shouldDisableDate` и `disableFuture`.",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"Запрещает выбор даты в будущем.\nПрименяется, если не задано `shouldDisableDate`.",name:"disableFuture",required:!1,type:{name:"boolean"}},enableTime:{defaultValue:{value:"false"},description:"Включает выбор времени.",name:"enableTime",required:!1,type:{name:"boolean"}},disablePickers:{defaultValue:null,description:"Отключает селекторы выбора месяца/года.",name:"disablePickers",required:!1,type:{name:"boolean"}},changeDayLabel:{defaultValue:null,description:`\`aria-label\` для изменения дня.
@deprecated Будет удалeно в **VKUI v9**.
Использовалось для задания aria-label для контейнера дней в календаре.
Теперь этот контейнер является таблицей (с помощью role="grid") и
в aria-label рендерится текущий открытый в календаре месяц и год.`,name:"changeDayLabel",required:!1,type:{name:"string"}},weekStartsOn:{defaultValue:{value:"1"},description:"День недели, с которого начинается неделя.",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},showNeighboringMonth:{defaultValue:null,description:"Показывать дни соседних месяцев.",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"m"},description:"Размер календаря.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},onChange:{defaultValue:null,description:"Обработчик изменения выбранной даты.",name:"onChange",required:!1,type:{name:"((value: Date) => void)"}},shouldDisableDate:{defaultValue:null,description:"Функция для проверки запрета выбора даты.",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},viewDate:{defaultValue:null,description:`Дата отображаемого месяца.
При использовании обновление даты должно происходить вне компонента.`,name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Обработчик изменения даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},minDateTime:{defaultValue:null,description:"Минимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"minDateTime",required:!1,type:{name:"Date"}},maxDateTime:{defaultValue:null,description:"Максимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"maxDateTime",required:!1,type:{name:"Date"}},timezone:{defaultValue:null,description:"Часовой пояс для отображения даты.",name:"timezone",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},changeHoursLabel:{defaultValue:{value:"Изменить час"},description:"Текст выпадающего списка с выбором часов. Делает его доступным для ассистивных технологий.",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Изменить минуту"},description:"Текст выпадающего списка с выбором минут. Делает его доступным для ассистивных технологий.",name:"changeMinutesLabel",required:!1,type:{name:"string"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"`aria-label` для кнопки предыдущего месяца.",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"`aria-label` для кнопки следующего месяца.",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"`aria-label` для селектора месяца.",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"`aria-label` для селектора года.",name:"changeYearLabel",required:!1,type:{name:"string"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},prevMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки предыдущего месяца.",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки следующего месяца.",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},prevMonthProps:{defaultValue:null,description:"Дополнительные свойства для кнопки предыдущего месяца.",name:"prevMonthProps",required:!1,type:{name:"ArrowMonthProps"}},nextMonthProps:{defaultValue:null,description:"Дополнительные свойства для кнопки следующего месяца.",name:"nextMonthProps",required:!1,type:{name:"ArrowMonthProps"}},dayProps:{defaultValue:null,description:"Дополнительные свойства для элементов дней.",name:"dayProps",required:!1,type:{name:"CalendarDayElementProps"}},listenDayChangesForUpdate:{defaultValue:null,description:"Следить за изменениями дней для обновления UI.",name:"listenDayChangesForUpdate",required:!1,type:{name:"boolean"}},renderDayContent:{defaultValue:null,description:"Кастомизация отображения содержимого дня.",name:"renderDayContent",required:!1,type:{name:"((day: Date) => ReactNode)"}},DoneButton:{defaultValue:null,description:'Кастомное отображение кнопки `"Done"`.',name:"DoneButton",required:!1,type:{name:"ComponentType<ButtonProps>"}},doneButtonText:{defaultValue:null,description:'Текст отображаемый в кнопке `"Done"`.',name:"doneButtonText",required:!1,type:{name:"string"}},doneButtonShow:{defaultValue:null,description:'Управление отображением кнопки `"Done"`.',name:"doneButtonShow",required:!1,type:{name:"boolean"}},doneButtonDisabled:{defaultValue:null,description:'Блокировка взаимодействия с кнопкой "Done".',name:"doneButtonDisabled",required:!1,type:{name:"boolean"}},onDoneButtonClick:{defaultValue:null,description:'Обработки нажатия на кнопку `"Done"`.',name:"onDoneButtonClick",required:!1,type:{name:"(() => void)"}},dayTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дня в календаре.",name:"dayTestId",required:!1,type:{name:"string | ((day: Date) => string)"}},monthDropdownTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора месяца в заголовке календаря.",name:"monthDropdownTestId",required:!1,type:{name:"string | ((monthIndex: number) => string)"}},yearDropdownTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора года в заголовке календаря.",name:"yearDropdownTestId",required:!1,type:{name:"string | ((year: number) => string)"}},nextMonthButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки перехода к следующему месяцу в заголовке календаря.",name:"nextMonthButtonTestId",required:!1,type:{name:"string"}},prevMonthButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки перехода к предыдущему месяцу в заголовке календаря.",name:"prevMonthButtonTestId",required:!1,type:{name:"string"}},hoursTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора часа в календаре.",name:"hoursTestId",required:!1,type:{name:"string"}},minutesTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дропдауна выбора минут в календаре.",name:"minutesTestId",required:!1,type:{name:"string"}},doneButtonTestId:{defaultValue:null,description:'Передает атрибут `data-testid` для кнопки "Готово" в календаре.',name:"doneButtonTestId",required:!1,type:{name:"string"}}}}}catch{}export{re as C};
