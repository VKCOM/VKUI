import{r as s,q as V4,K as j,aa as S4,j as h,R as M4}from"./iframe-DTUKIQpa.js";import{t as L,N as R4,n as _4,a as f,i as E4,b as C4,c as l4,d as F,e as N4,u as x4,f as T4,s as v,g as H,h as r4,j as i4,k as H4,C as o4,l as d4}from"./CalendarHeader-DMAGB71Q.js";import{u as I4}from"./useEnsuredControl-DZdU0p0r.js";function K4(r,n,a){const t=+L(r,a==null?void 0:a.in),[o,B]=[+L(n.start,a==null?void 0:a.in),+L(n.end,a==null?void 0:a.in)].sort((d,E)=>d-E);return t>=o&&t<=B}function P4({focusedDay:r,value:n,setFocusedDay:a,viewDates:[t,o],setViewDate:B}){const[d,E]=s.useState(),[c,b]=s.useState(),p=s.useCallback((l,A)=>{var g,M;const m=V4(l);if(m){if(R4.includes(m)){l.preventDefault();const i=_4(r??(n==null?void 0:n[0]),m);i&&!f(i,t)&&!f(i,o)&&B(i),A?f(i,t)?E(i):E4(i,t)&&b(i):f(i,o)?b(i):C4(i,o)&&E(i),a(i);return}if(m===j.TAB){a(void 0),A?E(r):b(r);return}(m===j.ENTER||m===j.SPACE)&&S4(l.target)&&(l.preventDefault(),(M=(g=l.target).click)==null||M.call(g))}},[r,n,t,o,a,B]),S=s.useCallback(l=>{p(l,!0)},[p]),I=s.useCallback(l=>{p(l,!1)},[p]),K=s.useCallback(l=>{f(t,l)&&(!d||!l4(d,l))&&E(l),f(o,l)&&(!c||!l4(c,l))&&b(l)},[t,d,c,o]);return{focusableDayOnFirstCalendar:d,focusableDayOnSecondCalendar:c,handleFirstCalendarKeyDown:S,handleSecondCalendarKeyDown:I,handleDayFocus:K}}function c4({value:r,focusableDayOnFirstCalendar:n,focusableDayOnSecondCalendar:a,viewDate:t,isDayActive:o}){const B=!!(r&&(r[0]&&f(r[0],t)||r[1]&&f(r[1],t))),d=!!(n&&f(n,t)||a&&f(a,t));return s.useCallback(c=>d?!!(n&&F(n,c)||a&&F(a,c)):B?o(c):F(N4(t),c),[d,B,t,o,n,a])}const j4="_host_laqyo_1",L4="_inner_laqyo_14",v4="_header_laqyo_24",V={host:j4,inner:L4,header:v4},D4=(r,n)=>!(n!=null&&n[0])||!n[1]?!1:K4(r,{start:v(n[0]),end:H(n[1])}),F4=({value:r,defaultValue:n,onChange:a,disablePast:t,disableFuture:o,shouldDisableDate:B,weekStartsOn:d=1,disablePickers:E,prevMonthLabel:c="Предыдущий месяц",nextMonthLabel:b="Следующий месяц",changeMonthLabel:p="Изменить месяц",changeYearLabel:S="Изменить год","aria-label":I="Календарь",prevMonthIcon:K,nextMonthIcon:l,listenDayChangesForUpdate:A,renderDayContent:m,dayTestId:g,leftPartHeaderTestsData:M,rightPartHeaderTestsData:i,getRootRef:f4,...B4})=>{const m4=s.useCallback(u=>a==null?void 0:a(u||void 0),[a]),[e,O]=I4({value:r,defaultValue:n,onChange:m4}),{viewDate:q,setViewDate:R,setPrevMonth:y4,setNextMonth:b4,focusedDay:_,setFocusedDay:P,isDayFocused:w,isDayDisabled:U,isMonthDisabled:Y,isYearDisabled:G}=x4({value:e,disableFuture:o,disablePast:t,shouldDisableDate:B}),[D,k]=s.useState(),N=T4(q,1),{focusableDayOnFirstCalendar:W,focusableDayOnSecondCalendar:z,handleFirstCalendarKeyDown:p4,handleSecondCalendarKeyDown:h4,handleDayFocus:J}=P4({focusedDay:_,setFocusedDay:P,value:e,viewDates:[q,N],setViewDate:R}),x=s.useCallback(u=>{const y=!e||e[0]===null&&e[1]===null,k4=e&&!!e[0]&&!!e[1];if(y||k4)return[u,null];const[C]=e;return C&&F(u,C)?[v(C),H(C)]:C&&C4(u,C)?[v(u),H(C)]:C&&E4(u,C)?[C,H(u)]:e},[e]),Q=s.useCallback(u=>{O(x(u)),k(void 0)},[O,x]),X=s.useCallback(u=>D4(u,e),[e]),T=s.useCallback(u=>!!(e!=null&&e[0]&&F(u,e[0])||e!=null&&e[1]&&F(u,e[1])),[e]),Z=s.useCallback((u,y)=>!!(r4(u,y)||e!=null&&e[1]&&F(u,e[1])),[e]),$=s.useCallback((u,y)=>!!(r4(u,y)||D!=null&&D[1]&&F(u,D[1])),[D]),u4=s.useCallback((u,y)=>!!(i4(u,y)||e!=null&&e[0]&&F(u,e[0])),[e]),e4=s.useCallback((u,y)=>!!(i4(u,y)||D!=null&&D[0]&&F(u,D[0])),[D]),a4=s.useCallback(u=>k(x(u)),[k,x]),n4=s.useCallback(()=>k(void 0),[k]),s4=s.useCallback(u=>D4(u,D),[D]),A4=s.useCallback(u=>R(H4(u)),[R]),g4=c4({value:e,focusableDayOnFirstCalendar:W,focusableDayOnSecondCalendar:z,viewDate:q,isDayActive:T}),q4=c4({value:e,focusableDayOnFirstCalendar:W,focusableDayOnSecondCalendar:z,viewDate:N,isDayActive:T}),t4=s.useCallback(u=>{_&&F(_,u)||(P(u),J(u))},[_,J,P]);return h.jsxs(M4,{"aria-label":I,...B4,baseClassName:V.host,getRootRef:f4,children:[h.jsxs("div",{className:V.inner,children:[h.jsx(o4,{viewDate:q,onChange:R,nextMonthHidden:!0,onPrevMonth:y4,disablePickers:E,className:V.header,prevMonthLabel:c,nextMonthLabel:b,changeMonthLabel:p,changeYearLabel:S,prevMonthIcon:K,isMonthDisabled:Y,isYearDisabled:G,...M}),h.jsx(d4,{viewDate:q,value:e,weekStartsOn:d,onKeyDown:p4,onDayFocus:t4,isDayFocused:w,isDayFocusable:g4,onDayChange:Q,isDaySelected:X,isDayActive:T,isDaySelectionEnd:Z,isDaySelectionStart:u4,isDayHinted:s4,onDayEnter:a4,onDayLeave:n4,isHintedDaySelectionEnd:$,isHintedDaySelectionStart:e4,isDayDisabled:U,listenDayChangesForUpdate:A,renderDayContent:m,dayTestId:g})]}),h.jsxs("div",{className:V.inner,children:[h.jsx(o4,{viewDate:N,onChange:A4,prevMonthHidden:!0,onNextMonth:b4,disablePickers:E,className:V.header,prevMonthLabel:c,nextMonthLabel:b,changeMonthLabel:p,changeYearLabel:S,nextMonthIcon:l,isMonthDisabled:Y,isYearDisabled:G,...i}),h.jsx(d4,{viewDate:N,value:e,weekStartsOn:d,onKeyDown:h4,onDayFocus:t4,isDayFocused:w,isDayFocusable:q4,onDayChange:Q,isDaySelected:X,isDayActive:T,isDaySelectionEnd:Z,isDaySelectionStart:u4,isDayHinted:s4,onDayEnter:a4,onDayLeave:n4,isHintedDaySelectionEnd:$,isHintedDaySelectionStart:e4,isDayDisabled:U,listenDayChangesForUpdate:A,renderDayContent:m,dayTestId:g})]})]})};try{F4.displayName="CalendarRange",F4.__docgenInfo={description:"",displayName:"CalendarRange",props:{value:{defaultValue:null,description:"Текущий выбранный промежуток.",name:"value",required:!1,type:{name:"DateRangeType | null"}},defaultValue:{defaultValue:null,description:"Начальный промежуток при монтировании.",name:"defaultValue",required:!1,type:{name:"DateRangeType | null"}},disablePast:{defaultValue:null,description:"Запрещает выбор даты в прошлом.\nПрименяется, если не заданы `shouldDisableDate` и `disableFuture`.",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"Запрещает выбор даты в будущем.\nПрименяется, если не задано `shouldDisableDate`.",name:"disableFuture",required:!1,type:{name:"boolean"}},disablePickers:{defaultValue:null,description:"Отключает селекторы выбора месяца/года.",name:"disablePickers",required:!1,type:{name:"boolean"}},changeDayLabel:{defaultValue:null,description:`\`aria-label\` для изменения дня.
@deprecated Since 7.4.0.

Будет удалeно в **VKUI v8**. Использовалось для задания aria-label для контейнера дней в календаре.
Теперь этот контейнер является таблицей (с помощью role="grid") и
в aria-label рендерится текущий открытый в календаре месяц и год.`,name:"changeDayLabel",required:!1,type:{name:"string"}},weekStartsOn:{defaultValue:{value:"1"},description:"День недели, с которого начинается неделя.",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},onChange:{defaultValue:null,description:"Обработчик изменения выбранного промежутка.",name:"onChange",required:!1,type:{name:"((value: DateRangeType) => void)"}},shouldDisableDate:{defaultValue:null,description:"Функция для проверки запрета выбора даты.",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},onClose:{defaultValue:null,description:"@deprecated Свойство не используется.",name:"onClose",required:!1,type:{name:"(() => void)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"`aria-label` для кнопки предыдущего месяца.",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"`aria-label` для кнопки следующего месяца.",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"`aria-label` для селектора месяца.",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"`aria-label` для селектора года.",name:"changeYearLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки предыдущего месяца.",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки следующего месяца.",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},listenDayChangesForUpdate:{defaultValue:null,description:"Следить за изменениями дней для обновления UI.",name:"listenDayChangesForUpdate",required:!1,type:{name:"boolean"}},renderDayContent:{defaultValue:null,description:"Кастомизация отображения содержимого дня.",name:"renderDayContent",required:!1,type:{name:"((day: Date) => ReactNode)"}},dayTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для дня в календаре.",name:"dayTestId",required:!1,type:{name:"string | ((day: Date) => string)"}},leftPartHeaderTestsData:{defaultValue:null,description:"Передает атрибуты `data-testid` для интерактивных элементов в заголовке календаря в левой части.",name:"leftPartHeaderTestsData",required:!1,type:{name:"CalendarHeaderTestsProps"}},rightPartHeaderTestsData:{defaultValue:null,description:"Передает атрибуты `data-testid` для интерактивных элементов в заголовке календаря в правой части.",name:"rightPartHeaderTestsData",required:!1,type:{name:"CalendarHeaderTestsProps"}}}}}catch{}export{F4 as C};
