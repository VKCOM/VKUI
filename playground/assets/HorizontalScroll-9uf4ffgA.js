import{r as o,i as U,l as X,n as Z,j as B,R as G,h as D}from"./iframe-Bz8JpgqB.js";import{u as J,e as K}from"./fx-kodWYGM0.js";import{u as Q}from"./useConfigDirection-1j4RIbQo.js";import{u as $}from"./useFocusVisible-DI7o-w5D.js";import{u as u4}from"./useFocusVisibleClassName-DeYZ6Bju.js";import{S as H}from"./ScrollArrow-DFGwcOys.js";const e4="_host_1q7u6_1",t4="_rtl_1q7u6_14",r4="_inWrapper_1q7u6_33",n4="_arrow_1q7u6_39",o4="_withConstArrows_1q7u6_47",a4="_arrowLeft_1q7u6_55",s4="_arrowRight_1q7u6_59",a={host:e4,rtl:t4,in:"_in_1q7u6_18",inWrapper:r4,arrow:n4,withConstArrows:o4,arrowLeft:a4,arrowRight:s4};function k(){return performance&&performance.now?performance.now():Date.now()}function z(e){return e>0?Math.ceil(e):Math.floor(e)}const N=e=>z(e.scrollLeft),l4=250;function i4({scrollElement:e,getScrollPosition:E,animationQueue:c,onScrollToEndBorder:l,onScrollEnd:A,onScrollStart:C,initialScrollWidth:h,scrollAnimationDuration:R,textDirection:s}){if(!e||!E)return;const F=(s==="ltr"?1:-1)*(h-e.offsetWidth),i=N(e),S=i*(s==="rtl"?-1:1);let r=E(S);const g=r-S;s==="rtl"&&(r=i-g),C(),i*r<0&&(r=0),Math.abs(r)>=Math.abs(F)&&(l(),r=F);const L=k();(function q(){const b=k(),_=Math.min((b-L)/R,1),p=K(_),V=i+(r-i)*p;e.scrollLeft=z(V);const W=s==="ltr"?Math.max(0,r):Math.min(0,r);if(N(e)!==W&&_!==1){requestAnimationFrame(q);return}A(),c.shift(),c.length>0&&c[0]()})()}const j=({children:e,getScrollToLeft:E,getScrollToRight:c,showArrows:l=!0,arrowSize:A="m",arrowOffsetY:C,scrollAnimationDuration:h=l4,getRef:R,scrollOnAnyWheel:s=!1,prevButtonTestId:F,nextButtonTestId:i,ContentWrapperComponent:S="div",contentWrapperRef:r,contentWrapperClassName:g,...L})=>{const[q,b]=o.useState(!1),[_,p]=o.useState(!1),{focusVisible:V,...W}=$(),P=u4({focusVisible:V}),x=Q(),T=x==="rtl",M=o.useRef(!1),t=U(R),w=o.useRef([]),f=J(),v=o.useCallback(n=>{const u=t.current;w.current.push(()=>{var m;return i4({scrollElement:u,getScrollPosition:n,animationQueue:w.current,onScrollToEndBorder:()=>p(!1),onScrollEnd:()=>M.current=!1,onScrollStart:()=>M.current=!0,initialScrollWidth:((m=u==null?void 0:u.firstElementChild)==null?void 0:m.scrollWidth)||0,scrollAnimationDuration:h,textDirection:x})}),w.current.length===1&&w.current[0]()},[t,h,x,p]),O=o.useCallback(()=>{v(E??(u=>u-t.current.offsetWidth))},[E,v,t]),Y=o.useCallback(()=>{v(c??(u=>u+t.current.offsetWidth))},[c,v,t]),d=o.useCallback(()=>{if(l&&f&&t.current&&!M.current){const n=t.current,u=n.scrollLeft;b(T?u<0:u>0),p(Math.abs(N(n))+n.offsetWidth<n.scrollWidth)}},[l,f,t,T]);return o.useEffect(d,[d,e]),X(function(){const u=t.current;if(!u)return Z;const m=I=>{t.current.scrollBy({left:I.deltaX+I.deltaY,behavior:"auto"}),I.preventDefault()},y={passive:!1};return s&&u.addEventListener("wheel",m,y),u.addEventListener("scroll",d,y),()=>{s&&u.removeEventListener("wheel",m,y),u.removeEventListener("scroll",d,y)}},[s,d,t]),B.jsxs(G,{...L,baseClassName:D(a.host,"vkuiInternalHorizontalScroll",l==="always"&&a.withConstArrows,T&&a.rtl),onMouseEnter:d,children:[l&&(f||f===void 0)&&q&&B.jsx(H,{"data-testid":F,size:A,offsetY:C,direction:"left","aria-hidden":!0,tabIndex:-1,className:D(a.arrow,a.arrowLeft),onClick:O}),l&&(f||f===void 0)&&_&&B.jsx(H,{"data-testid":i,size:A,offsetY:C,direction:"right","aria-hidden":!0,tabIndex:-1,className:D(a.arrow,a.arrowRight),onClick:Y}),B.jsx("div",{className:D(a.in,P),ref:t,tabIndex:0,...W,children:B.jsx(S,{className:D(a.inWrapper,g),ref:r,children:e})})]})};try{j.displayName="HorizontalScroll",j.__docgenInfo={description:"",displayName:"HorizontalScroll",props:{getScrollToLeft:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на левую стрелку.",name:"getScrollToLeft",required:!1,type:{name:"ScrollPositionHandler"}},getScrollToRight:{defaultValue:null,description:"Функция для расчета величины прокрутки при нажатии на правую стрелку.",name:"getScrollToRight",required:!1,type:{name:"ScrollPositionHandler"}},arrowSize:{defaultValue:{value:"m"},description:"Размер стрелок.",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},arrowOffsetY:{defaultValue:null,description:"Смещает иконки кнопок навигации по вертикали.",name:"arrowOffsetY",required:!1,type:{name:"string | number"}},showArrows:{defaultValue:{value:"true"},description:"Показывать ли стрелки.",name:"showArrows",required:!1,type:{name:'boolean | "always"'}},scrollAnimationDuration:{defaultValue:{value:"250"},description:"Длительность анимации скролла.",name:"scrollAnimationDuration",required:!1,type:{name:"number"}},scrollOnAnyWheel:{defaultValue:{value:"false"},description:`Добавляет возможность прокручивать контент на любое колесо мыши.
По умолчанию прокручивается как любой горизонтальный контент через shift.`,name:"scrollOnAnyWheel",required:!1,type:{name:"boolean"}},prevButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении предыдущего элемента.",name:"prevButtonTestId",required:!1,type:{name:"string"}},nextButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки прокрутки горизонтального скролла в направлении следующего элемента.",name:"nextButtonTestId",required:!1,type:{name:"string"}},ContentWrapperComponent:{defaultValue:{value:"div"},description:"Позволяет поменять тег используемый для обертки над контентом, прокинутым в `children`.",name:"ContentWrapperComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},contentWrapperRef:{defaultValue:null,description:"`ref` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentWrapperClassName:{defaultValue:null,description:"Специфичный `className` для обертки над контентом, прокинутым в `children`.",name:"contentWrapperClassName",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{j as H};
