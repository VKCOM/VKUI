import{c as X,h as Z,r as u4,s as e4,K as n4,n as t4,ap as a4,j as n,g as o4,aH as l4}from"./iframe-BJ9555aC.js";import{u as i4,a as s4,b as d4,c as E4,d as r4}from"./ModalOutlet-DOohz1vI.js";import{u as p4}from"./useAdaptivityWithJSMediaQueries-CC96WuMD.js";import{F as B4}from"./FocusTrap-Qs6H907S.js";import{M as C4}from"./ModalCardBase-DSf7VeCI.js";import{u as m4}from"./useCSSTransition-DZFjXY5z.js";const D4="_host_itkvn_1",F4="_hostMaxWidthS_itkvn_9",c4="_hostMaxWidthM_itkvn_13",A4="_hostMaxWidthL_itkvn_17",f4="_hostMobile_itkvn_22",y4="_hostStateEnter_itkvn_42",h4="_hostStateEntering_itkvn_47",b4="_hostStateExiting_itkvn_51",v4="_hostStateExited_itkvn_56",M4="_hostDesktop_itkvn_62",u={host:D4,hostMaxWidthS:F4,hostMaxWidthM:c4,hostMaxWidthL:A4,hostMobile:f4,hostStateEnter:y4,hostStateEntering:h4,hostStateExiting:b4,hostStateExited:v4,hostDesktop:M4},V4={vkcom:u.hostMaxWidthS,ios:u.hostMaxWidthM,android:u.hostMaxWidthL},q4={appear:u.hostStateEnter,appearing:u.hostStateEntering,enter:u.hostStateEnter,entering:u.hostStateEntering,exiting:u.hostStateExiting,exited:u.hostStateExited},M=({icon:t,title:d,titleComponent:E,description:r,descriptionComponent:p,children:B,actions:C,size:m,open:l,style:i,className:D,preventClose:s,ModalOverlay:F=E4,modalOverlayTestId:c,modalDismissButtonTestId:A,getRootRef:V,dismissButtonMode:e,dismissLabel:f,noFocusToDialog:R,restoreFocus:I,onOpen:N,onOpened:L,onClose:a=t4,onClosed:P,disableFocusTrap:z,disableModalOverlay:q,disableOpenAnimation:y,disableCloseAnimation:S,...W})=>{const H=X(),[o,{ref:j,onTransitionEnd:w}]=m4(l,{enableAppear:!y,enableEnter:!y,enableExit:!S,onEnter(){N?.()},onEntered(){L?.()},onExited(){P?.()}}),_=o==="appeared"||o==="entered",h=o==="exited",b=!s&&_,{isDesktop:v}=p4(),g=!v&&!s&&o!=="exited",{opened:x}=i4(g),[{setSheetEl:K,setBackdropEl:U},G]=s4(g,{blocked:x,snapPoint:"auto",sheetCSSProperty:"--vkui_internal_ModalCard--translateY",backdropCSSProperty:"--vkui_internal--modal-overlay--opacity",onDismiss(){a?.("swipe-down")}}),k=Z(K,j,V),$=x?{...i,"--vkui_internal_ModalCard--safeAreaInsetBottom":"0px"}:i,J=!q&&n.jsx(F,{getRootRef:U,"data-testid":c,visible:l,disableOpenAnimation:y,disableCloseAnimation:S,onClick:b?function(Y){a("click-overlay",Y)}:void 0}),Q=u4.useCallback(T=>{b&&e4(T)===n4.ESCAPE&&a("escape-key")},[b,a]);return a4(!h),n.jsxs(d4,{hidden:h,isDesktop:v,onKeyDown:Q,disableModalOverlay:q,children:[J,n.jsx(B4,{rootRef:k,autoFocus:!R,disabled:!_||h||z,restoreFocus:I,children:n.jsx(C4,{...W,tabIndex:-1,role:"dialog","aria-modal":"true",getRootRef:k,style:$,className:o4(u.host,v?u.hostDesktop:u.hostMobile,V4[H],q4[o],D),onTransitionEnd:w,...G,icon:t,title:d,titleComponent:E,description:r,descriptionComponent:p,actions:C,onClose:()=>a("click-close-button"),size:m,modalDismissButtonTestId:A,dismissButtonMode:e,dismissLabel:f,children:B})})]})};try{M.displayName="ModalCardInternal",M.__docgenInfo={description:"В компоненте заложена вся логика модального окна.",displayName:"ModalCardInternal",props:{ModalOverlay:{defaultValue:{value:`({
  visible = false,
  position = 'absolute',
  getRootRef,
  onClick,
  onClosed,
  onShowed,
  disableOpenAnimation,
  disableCloseAnimation,
  ...restProps
}: ModalOverlayProps) => {
  const [transitionState, { ref, onTransitionEnd }] = useCSSTransition<HTMLDivElement>(visible, {
    enableAppear: !disableOpenAnimation,
    enableEnter: !disableOpenAnimation,
    enableExit: !disableCloseAnimation,
    onExited: onClosed,
    onEntered: onShowed,
  });
  const handleRef = useExternRef(getRootRef, ref);

  return (
    <div
      {...restProps}
      ref={handleRef}
      aria-hidden="true"
      hidden={transitionState === 'exited'}
      className={classNames(
        styles.host,
        onClick === undefined && styles.nonInteractive,
        positionClassNames[position],
        transitionStateClassNames[transitionState],
      )}
      onClick={onClick}
      onTransitionEnd={onTransitionEnd}
    />
  );
}`},description:"",name:"ModalOverlay",required:!1,type:{name:"ComponentType<ModalOverlayProps>"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок карточки.",name:"title",required:!1,type:{name:"ReactNode"}},open:{defaultValue:{value:"false"},description:"Состояние видимости.",name:"open",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"Задаёт контенту максимальную ширину для десктопной версии.",name:"size",required:!1,type:{name:"number"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия модалки.",name:"onClose",required:!1,type:{name:"((reason: ModalCardCloseReason, event?: UIEvent<HTMLElement, UIEvent>) => void)"}},actions:{defaultValue:null,description:'Кнопки-действия. Принимает [`Button`](https://vkui.io/components/button) с параметрами:\n\n- `size="l" mode="primary" stretched`\n- `size="l" mode="secondary" stretched`.\n\nДля набора кнопок используйте [`ButtonGroup`](https://vkui.io/components/button-group) с параметрами:\n\n- `gap="s" mode="horizontal" stretched`\n- `gap="m" mode="vertical" stretched`.',name:"actions",required:!1,type:{name:"ReactNode"}},description:{defaultValue:null,description:"Описание.",name:"description",required:!1,type:{name:"ReactNode"}},onClosed:{defaultValue:null,description:"Будет вызвано при окончательном закрытии модалки.",name:"onClosed",required:!1,type:{name:"VoidFunction"}},dismissLabel:{defaultValue:null,description:"Текст кнопки закрытия. Делает ее доступной для ассистивных технологий.",name:"dismissLabel",required:!1,type:{name:"string"}},dismissButtonMode:{defaultValue:null,description:"Расположение кнопки закрытия (внутри и вне `popout'a`).\n\nДоступно только в `compact`-режиме.\n\nНа `iOS` в `regular`-режиме всегда включен `inside`.\n\n⚠️ ВНИМАНИЕ: использование `none` скрывает крестик, это негативно сказывается на пользовательском опыте.",name:"dismissButtonMode",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"inside"'},{value:'"outside"'}]}},restoreFocus:{defaultValue:{value:"true"},description:"Управление поведением возврата фокуса при закрытии всплывающего окна.",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean | HTMLElement)"}},disableFocusTrap:{defaultValue:null,description:"Позволяет отключить захват фокуса.\n\nНужно использовать, когда поверх одной модалки открывается другая, чтобы два `FocusTrap` не конфликтовали.",name:"disableFocusTrap",required:!1,type:{name:"boolean"}},titleComponent:{defaultValue:null,description:"Позволяет поменять тег используемый для заголовка.",name:"titleComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},icon:{defaultValue:null,description:'Иконка.\n\nМожет быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src="" />`.',name:"icon",required:!1,type:{name:"ReactNode"}},onOpen:{defaultValue:null,description:"Будет вызвано при начале открытия модалки.",name:"onOpen",required:!1,type:{name:"VoidFunction"}},titleId:{defaultValue:null,description:"Позволяет задать id для заголовка. Используется, чтобы связать модальное окно и title через aria-labelledby, тем самым задав модальному окну имя через title.",name:"titleId",required:!1,type:{name:"string"}},descriptionComponent:{defaultValue:null,description:"Позволяет поменять тег используемый для описания.",name:"descriptionComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},modalDismissButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки закрытия.",name:"modalDismissButtonTestId",required:!1,type:{name:"string"}},preventClose:{defaultValue:null,description:"Позволяет отключить возможность закрытия модальной страницы (смахивание, клавиша `ESC`, нажатие на подложку).\n\n⚠️ ВНИМАНИЕ: использование этой опции негативно сказывается на пользовательском опыте.",name:"preventClose",required:!1,type:{name:"boolean"}},outsideButtons:{defaultValue:null,description:"Управляющие элементы под кнопкой закрытия.\n\nДоступно только в `compact`-режиме. Рекомендуется размещать иконки размера 20, обернутые в ModalOutsideButton.",name:"outsideButtons",required:!1,type:{name:"ReactNode"}},modalOverlayTestId:{defaultValue:null,description:"`data-testid` для оверлея.",name:"modalOverlayTestId",required:!1,type:{name:"string"}},noFocusToDialog:{defaultValue:null,description:"Отключает фокус на интерактивный элемент после открытия модалки.\n\n> Важно установить фокус после открытия в любое место модалки используя событие `onOpened`, иначе не будет работать закрытие по нажатию `Esc`.",name:"noFocusToDialog",required:!1,type:{name:"boolean"}},onOpened:{defaultValue:null,description:"Будет вызвано при окончательном открытии модалки.",name:"onOpened",required:!1,type:{name:"VoidFunction"}},disableModalOverlay:{defaultValue:null,description:"Отключает отображение и взаимодействие с фоном модалки.",name:"disableModalOverlay",required:!1,type:{name:"boolean"}},disableOpenAnimation:{defaultValue:null,description:"Отключает анимацию открытия модалки.",name:"disableOpenAnimation",required:!1,type:{name:"boolean"}},disableCloseAnimation:{defaultValue:null,description:"Отключает анимацию закрытия модалки.",name:"disableCloseAnimation",required:!1,type:{name:"boolean"}}}}}catch{}const O=({id:t,nav:d,open:E=!1,modalOverlayTestId:r,noFocusToDialog:p,onOpen:B,onOpened:C,onClose:m,onClosed:l,keepMounted:i=!1,disableModalOverlay:D,disableOpenAnimation:s,disableCloseAnimation:F,...c})=>{const{mounted:A,shouldPreserveSnapPoint:V,id:e,...f}=r4({id:d||t,open:E,keepMounted:i,modalOverlayTestId:r,noFocusToDialog:p,disableModalOverlay:D,disableOpenAnimation:s,disableCloseAnimation:F,onOpen:B,onOpened:C,onClose:m,onClosed:l});return A===!1?null:n.jsx(l4.Provider,{value:e,children:n.jsx(M,{id:e,"aria-labelledby":`${e}-label`,titleId:`${e}-label`,...f,...c})})};try{O.displayName="ModalCard",O.__docgenInfo={description:"",displayName:"ModalCard",props:{open:{defaultValue:{value:"false"},description:"Состояние видимости.",name:"open",required:!1,type:{name:"boolean"}},keepMounted:{defaultValue:{value:"false"},description:"Сохранять ли компонент в DOM при `open={false}`.",name:"keepMounted",required:!1,type:{name:"boolean"}},noFocusToDialog:{defaultValue:null,description:"Отключает фокус на интерактивный элемент после открытия модалки.\n\n> Важно установить фокус после открытия в любое место модалки используя событие `onOpened`, иначе не будет работать закрытие по нажатию `Esc`.",name:"noFocusToDialog",required:!1,type:{name:"boolean"}},modalOverlayTestId:{defaultValue:null,description:"`data-testid` для оверлея.",name:"modalOverlayTestId",required:!1,type:{name:"string"}},onOpen:{defaultValue:null,description:"Будет вызвано при начале открытия модалки.",name:"onOpen",required:!1,type:{name:"VoidFunction"}},onOpened:{defaultValue:null,description:"Будет вызвано при окончательном открытии модалки.",name:"onOpened",required:!1,type:{name:"VoidFunction"}},onClose:{defaultValue:null,description:"Будет вызвано при начале закрытия модалки.",name:"onClose",required:!1,type:{name:"((reason: ModalCardCloseReason, event?: UIEvent<HTMLElement, UIEvent>) => void)"}},onClosed:{defaultValue:null,description:"Будет вызвано при окончательном закрытии модалки.",name:"onClosed",required:!1,type:{name:"VoidFunction"}},disableFocusTrap:{defaultValue:null,description:"Позволяет отключить захват фокуса.\n\nНужно использовать, когда поверх одной модалки открывается другая, чтобы два `FocusTrap` не конфликтовали.",name:"disableFocusTrap",required:!1,type:{name:"boolean"}},disableModalOverlay:{defaultValue:null,description:"Отключает отображение и взаимодействие с фоном модалки.",name:"disableModalOverlay",required:!1,type:{name:"boolean"}},disableOpenAnimation:{defaultValue:null,description:"Отключает анимацию открытия модалки.",name:"disableOpenAnimation",required:!1,type:{name:"boolean"}},disableCloseAnimation:{defaultValue:null,description:"Отключает анимацию закрытия модалки.",name:"disableCloseAnimation",required:!1,type:{name:"boolean"}},restoreFocus:{defaultValue:{value:"true"},description:"Управление поведением возврата фокуса при закрытии всплывающего окна.",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean | HTMLElement)"}},nav:{defaultValue:null,description:"Уникальный идентификатор навигационного элемента (вместо id)",name:"nav",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок карточки.",name:"title",required:!1,type:{name:"ReactNode"}},size:{defaultValue:null,description:"Задаёт контенту максимальную ширину для десктопной версии.",name:"size",required:!1,type:{name:"number"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},actions:{defaultValue:null,description:'Кнопки-действия. Принимает [`Button`](https://vkui.io/components/button) с параметрами:\n\n- `size="l" mode="primary" stretched`\n- `size="l" mode="secondary" stretched`.\n\nДля набора кнопок используйте [`ButtonGroup`](https://vkui.io/components/button-group) с параметрами:\n\n- `gap="s" mode="horizontal" stretched`\n- `gap="m" mode="vertical" stretched`.',name:"actions",required:!1,type:{name:"ReactNode"}},description:{defaultValue:null,description:"Описание.",name:"description",required:!1,type:{name:"ReactNode"}},dismissLabel:{defaultValue:null,description:"Текст кнопки закрытия. Делает ее доступной для ассистивных технологий.",name:"dismissLabel",required:!1,type:{name:"string"}},dismissButtonMode:{defaultValue:null,description:"Расположение кнопки закрытия (внутри и вне `popout'a`).\n\nДоступно только в `compact`-режиме.\n\nНа `iOS` в `regular`-режиме всегда включен `inside`.\n\n⚠️ ВНИМАНИЕ: использование `none` скрывает крестик, это негативно сказывается на пользовательском опыте.",name:"dismissButtonMode",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"inside"'},{value:'"outside"'}]}},titleComponent:{defaultValue:null,description:"Позволяет поменять тег используемый для заголовка.",name:"titleComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},icon:{defaultValue:null,description:'Иконка.\n\nМожет быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src="" />`.',name:"icon",required:!1,type:{name:"ReactNode"}},titleId:{defaultValue:null,description:"Позволяет задать id для заголовка. Используется, чтобы связать модальное окно и title через aria-labelledby, тем самым задав модальному окну имя через title.",name:"titleId",required:!1,type:{name:"string"}},descriptionComponent:{defaultValue:null,description:"Позволяет поменять тег используемый для описания.",name:"descriptionComponent",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},modalDismissButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки закрытия.",name:"modalDismissButtonTestId",required:!1,type:{name:"string"}},preventClose:{defaultValue:null,description:"Позволяет отключить возможность закрытия модальной страницы (смахивание, клавиша `ESC`, нажатие на подложку).\n\n⚠️ ВНИМАНИЕ: использование этой опции негативно сказывается на пользовательском опыте.",name:"preventClose",required:!1,type:{name:"boolean"}},outsideButtons:{defaultValue:null,description:"Управляющие элементы под кнопкой закрытия.\n\nДоступно только в `compact`-режиме. Рекомендуется размещать иконки размера 20, обернутые в ModalOutsideButton.",name:"outsideButtons",required:!1,type:{name:"ReactNode"}}}}}catch{}export{O as M};
