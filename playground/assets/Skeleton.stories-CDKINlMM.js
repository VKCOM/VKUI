import{D as v,C as P}from"./constants-DdkjnEgz.js";import{c as T}from"./createStoryParameters-CcwS40kl.js";import{k as x,j as f,R as h,W as L,i as V,r as i,p as O,X as j}from"./iframe-C2_PECK0.js";import{m as q}from"./constants-BxoWbviK.js";import{u as M}from"./useStateWithPrev-C5Aciol_.js";import{a as G,s as I}from"./animationVisibilityDelay.module-DjZYURHD.js";const N="_host_ytm1y_1",w="_disableAnimation_ytm1y_55",A={host:N,disableAnimation:w},z="--vkui_internal--skeleton_gradient_left";function H(u,e=1.5){const[o,a]=i.useState(!1),t=i.useRef(void 0),s=i.useCallback(()=>{clearTimeout(t.current),a(!1);const n=e*q,r=n-performance.now()%n;return t.current=setTimeout(()=>a(!0),r),()=>clearTimeout(t.current)},[e]);return i.useEffect(()=>{if(u){a(!1);return}if(!o)return s()},[u,o,s]),o}function W(u){const{document:e,window:o}=O(),[[a,t],s]=M("0"),n=i.useCallback(()=>{const r=u.current;if(!r||!e)return;const l=-(r.getBoundingClientRect().left-e.body.getBoundingClientRect().left),c=l===0?"0":`${l}px`;t!==c&&s(c)},[e,t,u,s]);return i.useEffect(n,[n]),j(o,n),a}const D=({width:u,height:e,inlineSize:o,blockSize:a,maxWidth:t,maxInlineSize:s,borderRadius:n,children:r,colorFrom:l,colorTo:c,noAnimation:S=!1,duration:E,margin:k,getRootRef:b,visibilityDelay:p,...g})=>{const B=x(b),F=!H(S,E),R=W(B),d={width:u,height:e,inlineSize:o,blockSize:a,maxWidth:t,maxInlineSize:s,borderRadius:n,margin:k,[z]:R};return l&&(d["--vkui_internal--skeleton_color_from"]=l),c&&(d["--vkui_internal--skeleton_color_to"]=c),Number.isFinite(E)&&(d["--vkui_internal--skeleton_animation_duration"]=`${E}s`),f.jsx(h,{getRootRef:B,Component:"span",baseClassName:V(A.host,F&&A.disableAnimation,p&&I.visibilityDelay),baseStyle:L(d,G(p)),...g,children:r||f.jsx(f.Fragment,{children:"‌"})})};try{D.displayName="Skeleton",D.__docgenInfo={description:`> Старайтесь минимизировать количество заглушек на экране. Не каждый элемент
> на экране должен заменяться заглушкой.
>
> Текстовые блоки лучше сокращать до трёх строк. Ширина последней строки
> скелета вычисляется, как 75% от ширины текстового блока. Высота скелетона
> автоматически подстраивается под размер шрифта, поэтому идеально
> вписывается в слоты компонентов, которые обычно ожидают текст.`,displayName:"Skeleton",props:{colorFrom:{defaultValue:null,description:"Начальный цвет анимации.",name:"colorFrom",required:!1,type:{name:"string"}},colorTo:{defaultValue:null,description:"Финальный цвет анимации.",name:"colorTo",required:!1,type:{name:"string"}},noAnimation:{defaultValue:{value:"false"},description:"Выключает анимацию, в результате чего показывается только один цвет.",name:"noAnimation",required:!1,type:{name:"boolean"}},duration:{defaultValue:null,description:"Длительность анимации в секундах.",name:"duration",required:!1,type:{name:"number"}},visibilityDelay:{defaultValue:null,description:"Задерживает отрисовку элемента на заданное количество миллисекунд.",name:"visibilityDelay",required:!1,type:{name:"number"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement | HTMLSpanElement>"}}}}}catch{}const $={title:"Blocks/Skeleton",component:D,parameters:T("Skeleton",P,v)},m={};var y,C,_;m.parameters={...m.parameters,docs:{...(y=m.parameters)==null?void 0:y.docs,source:{originalSource:"{}",...(_=(C=m.parameters)==null?void 0:C.docs)==null?void 0:_.source}}};const U=["Playground"],u4=Object.freeze(Object.defineProperty({__proto__:null,Playground:m,__namedExportsOrder:U,default:$},Symbol.toStringTag,{value:"Module"}));export{m as P,D as S,u4 as a};
