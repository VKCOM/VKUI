"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[7446],{"./src/components/Gallery/Gallery.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>Gallery});var react=__webpack_require__("../../node_modules/react/index.js"),math=__webpack_require__("./src/helpers/math.ts"),useIsClient=__webpack_require__("./src/hooks/useIsClient.ts"),es6=__webpack_require__("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),useAdaptivityHasPointer=__webpack_require__("./src/hooks/useAdaptivityHasPointer.ts"),useExternRef=__webpack_require__("./src/hooks/useExternRef.ts"),useGlobalEventListener=__webpack_require__("./src/hooks/useGlobalEventListener.ts"),dom=__webpack_require__("./src/lib/dom.tsx"),useIsomorphicLayoutEffect=__webpack_require__("./src/lib/useIsomorphicLayoutEffect.ts"),RootComponent=__webpack_require__("./src/components/RootComponent/RootComponent.tsx"),ScrollArrow=__webpack_require__("./src/components/ScrollArrow/ScrollArrow.tsx"),Touch=__webpack_require__("./src/components/Touch/Touch.tsx"),calcMin=function(param){var _param_containerWidth=param.containerWidth,containerWidth=void 0===_param_containerWidth?0:_param_containerWidth,_param_layerWidth=param.layerWidth,layerWidth=void 0===_param_layerWidth?0:_param_layerWidth,_param_slides=param.slides,slides=void 0===_param_slides?[]:_param_slides,_param_viewportOffsetWidth=param.viewportOffsetWidth,viewportOffsetWidth=void 0===_param_viewportOffsetWidth?0:_param_viewportOffsetWidth,align=param.align,isCenterWithCustomWidth=param.isCenterWithCustomWidth;switch(align){case"left":return containerWidth-layerWidth;case"right":return viewportOffsetWidth-layerWidth;case"center":if(!isCenterWithCustomWidth||!slides.length)return viewportOffsetWidth-(containerWidth-viewportOffsetWidth)/2-layerWidth;var _slides_=slides[slides.length-1];return viewportOffsetWidth/2-_slides_.coordX-_slides_.width/2}},calcMax=function(param){var _param_slides=param.slides,slides=void 0===_param_slides?[]:_param_slides,_param_viewportOffsetWidth=param.viewportOffsetWidth;if(param.isCenterWithCustomWidth&&slides.length){var _slides_=slides[0],width=_slides_.width;return(void 0===_param_viewportOffsetWidth?0:_param_viewportOffsetWidth)/2-_slides_.coordX-width/2}return 0},injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),singletonStyleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),singletonStyleDomAPI_default=__webpack_require__.n(singletonStyleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithAttributesAndNonce=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),setAttributesWithAttributesAndNonce_default=__webpack_require__.n(setAttributesWithAttributesAndNonce),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),BaseGallery_module=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/BaseGallery/BaseGallery.module.css"),options={attributes:{class:"vkui-style"}};options.setAttributes=setAttributesWithAttributesAndNonce_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=singletonStyleDomAPI_default(),options.insertStyleElement=insertStyleElement_default(),injectStylesIntoStyleTag_default()(BaseGallery_module.Z,options);let BaseGallery_BaseGallery_module=BaseGallery_module.Z&&BaseGallery_module.Z.locals?BaseGallery_module.Z.locals:void 0;function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var LAYOUT_DEFAULT_STATE={containerWidth:0,viewportOffsetWidth:0,layerWidth:0,min:0,max:0,slides:[],isFullyVisible:!0},SHIFT_DEFAULT_STATE={animation:void 0,shiftX:0,dragging:!1,deltaX:0,indent:0},stylesBullets={dark:BaseGallery_BaseGallery_module["BaseGallery__bullets--dark"],light:BaseGallery_BaseGallery_module["BaseGallery__bullets--light"]},BaseGallery=function(_param){var _layoutState_current_layerWidth,_param_bullets=_param.bullets,bullets=void 0!==_param_bullets&&_param_bullets,getRootRef=_param.getRootRef,children=_param.children,_param_slideWidth=_param.slideWidth,slideWidth=void 0===_param_slideWidth?"100%":_param_slideWidth,_param_slideIndex=_param.slideIndex,slideIndex=void 0===_param_slideIndex?0:_param_slideIndex,_param_dragDisabled=_param.dragDisabled,onDragStart=_param.onDragStart,onDragEnd=_param.onDragEnd,onChange=_param.onChange,onPrevClick=_param.onPrevClick,onNextClick=_param.onNextClick,_param_align=_param.align,align=void 0===_param_align?"left":_param_align,showArrows=_param.showArrows,getRef=_param.getRef,_param_arrowSize=_param.arrowSize,arrowSize=void 0===_param_arrowSize?"l":_param_arrowSize,restProps=_object_without_properties(_param,["bullets","getRootRef","children","slideWidth","slideIndex","dragDisabled","onDragStart","onDragEnd","onChange","onPrevClick","onNextClick","align","showArrows","getRef","arrowSize"]),slidesStore=react.useRef({}),layoutState=react.useRef(LAYOUT_DEFAULT_STATE),_React_useState=_sliced_to_array(react.useState(SHIFT_DEFAULT_STATE),2),shiftState=_React_useState[0],setShiftState=_React_useState[1],rootRef=(0,useExternRef.Q)(getRootRef),viewportRef=(0,useExternRef.Q)(getRef),window=(0,dom.NG)().window,hasPointer=(0,useAdaptivityHasPointer.K)(),isCenterWithCustomWidth="custom"===slideWidth&&"center"===align,validateIndent=function(value){var _layoutState_current_max,_layoutState_current_min,localMax=(_layoutState_current_max=layoutState.current.max)!==null&&void 0!==_layoutState_current_max?_layoutState_current_max:0,localMin=(_layoutState_current_min=layoutState.current.min)!==null&&void 0!==_layoutState_current_min?_layoutState_current_min:0;return value<localMin?localMin:value>localMax?localMax:value},calculateIndent=function(targetIndex){if(layoutState.current.isFullyVisible)return 0;var targetSlide=((_layoutState_current_slides=layoutState.current.slides)===null||void 0===_layoutState_current_slides?void 0:_layoutState_current_slides.length)?layoutState.current.slides[targetIndex]:null;if(targetSlide){var _layoutState_current_slides,_layoutState_current_viewportOffsetWidth,coordX=targetSlide.coordX,width=targetSlide.width;return isCenterWithCustomWidth?((_layoutState_current_viewportOffsetWidth=layoutState.current.viewportOffsetWidth)!==null&&void 0!==_layoutState_current_viewportOffsetWidth?_layoutState_current_viewportOffsetWidth:0)/2-coordX-width/2:validateIndent(-1*coordX)}return 0},calculateDragIndent=function(){var _layoutState_current_max,_layoutState_current_min,localMax=(_layoutState_current_max=layoutState.current.max)!==null&&void 0!==_layoutState_current_max?_layoutState_current_max:0,localMin=(_layoutState_current_min=layoutState.current.min)!==null&&void 0!==_layoutState_current_min?_layoutState_current_min:0,indent=shiftState.shiftX+shiftState.deltaX;return indent>localMax?localMax+Number((indent-localMax)/3):indent<localMin?localMin+Number((indent-localMin)/3):indent},initializeSlides=function(){var _rootRef_current,_viewportRef_current,_layoutState_current_slides_slideIndex,_localSlides_slideIndex,_React_Children_map,_rootRef_current_offsetWidth,_viewportRef_current_offsetWidth,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},localSlides=(_React_Children_map=react.Children.map(children,function(_item,i){var _elem_offsetLeft,_elem_offsetWidth,elem=slidesStore.current["slide-".concat(i)];return{coordX:(_elem_offsetLeft=null==elem?void 0:elem.offsetLeft)!==null&&void 0!==_elem_offsetLeft?_elem_offsetLeft:0,width:(_elem_offsetWidth=null==elem?void 0:elem.offsetWidth)!==null&&void 0!==_elem_offsetWidth?_elem_offsetWidth:0}}))!==null&&void 0!==_React_Children_map?_React_Children_map:[],localContainerWidth=(_rootRef_current_offsetWidth=(_rootRef_current=rootRef.current)===null||void 0===_rootRef_current?void 0:_rootRef_current.offsetWidth)!==null&&void 0!==_rootRef_current_offsetWidth?_rootRef_current_offsetWidth:0,localViewportOffsetWidth=(_viewportRef_current_offsetWidth=(_viewportRef_current=viewportRef.current)===null||void 0===_viewportRef_current?void 0:_viewportRef_current.offsetWidth)!==null&&void 0!==_viewportRef_current_offsetWidth?_viewportRef_current_offsetWidth:0,localLayerWidth=localSlides.reduce(function(val,slide){return slide.width+val},0),adjustShiftX=localSlides.length<=layoutState.current.slides.length||((_layoutState_current_slides_slideIndex=layoutState.current.slides[slideIndex])===null||void 0===_layoutState_current_slides_slideIndex?void 0:_layoutState_current_slides_slideIndex.coordX)!==((_localSlides_slideIndex=localSlides[slideIndex])===null||void 0===_localSlides_slideIndex?void 0:_localSlides_slideIndex.coordX);layoutState.current={containerWidth:localContainerWidth,viewportOffsetWidth:localViewportOffsetWidth,layerWidth:localLayerWidth,max:calcMax({slides:localSlides,viewportOffsetWidth:localViewportOffsetWidth,isCenterWithCustomWidth:isCenterWithCustomWidth}),min:calcMin({containerWidth:localContainerWidth,layerWidth:localLayerWidth,slides:localSlides,viewportOffsetWidth:localViewportOffsetWidth,isCenterWithCustomWidth:isCenterWithCustomWidth,align:align}),slides:localSlides,isFullyVisible:localLayerWidth<=localContainerWidth},setShiftState(function(prevState){var _options_animation;return _object_spread_props(_object_spread({},prevState),{shiftX:adjustShiftX?calculateIndent(slideIndex):prevState.shiftX,animation:(_options_animation=options.animation)!==null&&void 0!==_options_animation?_options_animation:prevState.shiftX===validateIndent(prevState.shiftX)})})};(0,useGlobalEventListener.J)(window,"resize",function(){void 0!==shiftState.animation&&initializeSlides({animation:!1})}),(0,useIsomorphicLayoutEffect.L)(function(){initializeSlides({animation:!1})},[children,align,slideWidth]),(0,useIsomorphicLayoutEffect.L)(function(){void 0!==shiftState.animation&&setShiftState(function(prevState){return _object_spread_props(_object_spread({},prevState),{animation:!0,deltaX:0,shiftX:calculateIndent(null!=slideIndex?slideIndex:0)})})},[slideIndex]);var getTarget=function(e){var _layoutState_current_max,expectDeltaX=shiftState.deltaX/e.duration*144,shift=shiftState.shiftX+shiftState.deltaX+expectDeltaX-((_layoutState_current_max=layoutState.current.max)!==null&&void 0!==_layoutState_current_max?_layoutState_current_max:0),direction=shiftState.deltaX<0?1:-1,targetIndex=layoutState.current.slides.reduce(function(val,item,index){return Math.abs(layoutState.current.slides[val].coordX+shift)<Math.abs(item.coordX+shift)?val:index},slideIndex);if(targetIndex===slideIndex){var targetSlide=slideIndex+direction;targetSlide>=0&&targetSlide<layoutState.current.slides.length&&Math.abs(shiftState.deltaX)>.05*layoutState.current.slides[targetSlide].width&&(targetIndex=targetSlide)}return targetIndex},isDraggable=!(void 0!==_param_dragDisabled&&_param_dragDisabled)&&!layoutState.current.isFullyVisible,indent=shiftState.dragging?calculateDragIndent():shiftState.shiftX,layerStyle={WebkitTransform:"translateX(".concat(indent,"px)"),transform:"translateX(".concat(indent,"px)"),WebkitTransition:shiftState.animation?"-webkit-transform ".concat(.24,"s cubic-bezier(.1, 0, .25, 1)"):"none",transition:shiftState.animation?"transform ".concat(.24,"s cubic-bezier(.1, 0, .25, 1)"):"none"},setSlideRef=function(slideRef,slideIndex){slidesStore.current["slide-".concat(slideIndex)]=slideRef},canSlideLeft=!layoutState.current.isFullyVisible&&shiftState.shiftX<0,canSlideRight=!layoutState.current.isFullyVisible&&("left"===align&&layoutState.current.containerWidth-shiftState.shiftX<((_layoutState_current_layerWidth=layoutState.current.layerWidth)!==null&&void 0!==_layoutState_current_layerWidth?_layoutState_current_layerWidth:0)||"left"!==align&&slideIndex<layoutState.current.slides.length-1);return react.createElement(RootComponent.U,_object_spread_props(_object_spread({},restProps),{baseClassName:(0,es6.AK)(BaseGallery_BaseGallery_module.BaseGallery,"center"===align&&BaseGallery_BaseGallery_module["BaseGallery--align-center"],"custom"===slideWidth&&BaseGallery_BaseGallery_module["BaseGallery--custom-width"],isDraggable&&BaseGallery_BaseGallery_module["BaseGallery--draggable"]),getRootRef:rootRef}),react.createElement(Touch.X,{className:BaseGallery_BaseGallery_module.BaseGallery__viewport,onStartX:function(e){e.originalEvent.stopPropagation(),isDraggable&&(null==onDragStart||onDragStart(e),setShiftState(function(prevState){return _object_spread_props(_object_spread({},prevState),{animation:!1})}))},onMoveX:function(e){isDraggable&&(e.originalEvent.preventDefault(),e.isSlideX&&shiftState.deltaX!==e.shiftX&&setShiftState(function(prevState){return _object_spread_props(_object_spread({},prevState),{deltaX:e.shiftX,dragging:e.isSlideX})}))},onEnd:function(e){if(isDraggable){var targetIndex=e.isSlide?getTarget(e):null!=slideIndex?slideIndex:0;null==onDragEnd||onDragEnd(e,targetIndex);var nextShiftState={animation:!0,dragging:!1,deltaX:0},shiftXStick=calculateDragIndent();targetIndex!==slideIndex&&(nextShiftState.shiftX=shiftXStick),setShiftState(function(prevState){return _object_spread({},prevState,nextShiftState)}),targetIndex!==slideIndex&&(null==onChange||onChange(targetIndex))}},style:{width:"custom"===slideWidth?"100%":slideWidth},getRootRef:viewportRef,noSlideClick:!0},react.createElement("div",{className:BaseGallery_BaseGallery_module.BaseGallery__layer,style:layerStyle},react.Children.map(children,function(item,i){return react.createElement("div",{className:BaseGallery_BaseGallery_module.BaseGallery__slide,key:"slide-".concat(i),ref:function(el){return setSlideRef(el,i)}},item)}))),bullets&&react.createElement("div",{"aria-hidden":!0,className:(0,es6.AK)(BaseGallery_BaseGallery_module.BaseGallery__bullets,stylesBullets[bullets])},react.Children.map(children,function(_item,index){return react.createElement("div",{className:(0,es6.AK)(BaseGallery_BaseGallery_module.BaseGallery__bullet,index===slideIndex&&BaseGallery_BaseGallery_module["BaseGallery__bullet--active"]),key:index})})),showArrows&&hasPointer&&canSlideLeft&&react.createElement(ScrollArrow.Q,{className:BaseGallery_BaseGallery_module.BaseGallery__arrow,direction:"left",onClick:function(event){null==onChange||onChange(slideIndex-1),null==onPrevClick||onPrevClick(event)},size:arrowSize}),showArrows&&hasPointer&&canSlideRight&&react.createElement(ScrollArrow.Q,{className:BaseGallery_BaseGallery_module.BaseGallery__arrow,direction:"right",onClick:function(event){null==onChange||onChange(slideIndex+1),null==onNextClick||onNextClick(event)},size:arrowSize}))};try{BaseGallery.displayName="BaseGallery",BaseGallery.__docgenInfo={description:"",displayName:"BaseGallery",props:{slideWidth:{defaultValue:{value:"100%"},description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:{value:"0"},description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:{value:"false"},description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:{value:"false"},description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:{value:"l"},description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:{value:"left"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BaseGallery/BaseGallery.tsx#BaseGallery"]={docgenInfo:BaseGallery.__docgenInfo,name:"BaseGallery",path:"src/components/BaseGallery/BaseGallery.tsx#BaseGallery"})}catch(__react_docgen_typescript_loader_error){}var warnOnce=__webpack_require__("./src/lib/warnOnce.ts"),CONTROL_ELEMENTS_STATE={canSlideLeft:!0,canSlideRight:!0,isDraggable:!0},SLIDES_MANAGER_STATE={viewportOffsetWidth:0,slides:[],isFullyVisible:!0,loopPoints:[],contentSize:0,snaps:[]};function helpers_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_without_holes(arr){if(Array.isArray(arr))return helpers_array_like_to_array(arr)}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||helpers_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function helpers_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return helpers_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return helpers_array_like_to_array(o,minLen)}}function calculateIndent(targetIndex,slidesManager,isCenterWithCustomWidth){if(slidesManager.isFullyVisible||!slidesManager.slides.length)return 0;var targetSlide=slidesManager.slides[targetIndex];if(targetSlide){var coordX=targetSlide.coordX,width=targetSlide.width;return isCenterWithCustomWidth?slidesManager.viewportOffsetWidth/2-coordX-width/2:-1*coordX}return 0}function getShiftedIndexes(direction,slides,availableWidth){for(var gap=availableWidth,shiftedSlideIndexes=[],startIndex=1===direction?0:slides.length-1,endIndex=1===direction?slides.length-1:0,i=startIndex;(1===direction?i<=endIndex:i>=endIndex)&&gap>0;i+=direction){var slideWidth=slides[i].width;gap>0&&shiftedSlideIndexes.push(i),gap-=slideWidth}return shiftedSlideIndexes}function calculateLoopPoints(indexes,edge,slidesManager,containerWidth){var contentSize=slidesManager.contentSize,slides=slidesManager.slides,snaps=slidesManager.snaps,isStartEdge="start"===edge,offset=isStartEdge?-contentSize:contentSize;return indexes.map(function(index){var initial=isStartEdge?0:-contentSize,altered=isStartEdge?contentSize:0,loopPoint=isStartEdge?snaps[index]+containerWidth+offset:snaps[index]-slides[index].width+offset-snaps[0];return{index:index,target:function(currentLocation){return currentLocation>=loopPoint?initial:altered}}})}function getLoopPoints(slidesManager,containerWidth){var slides=slidesManager.slides,snaps=slidesManager.snaps,startShiftedIndexes=getShiftedIndexes(-1,slides,snaps[0]);return _to_consumable_array(calculateLoopPoints(getShiftedIndexes(1,slides,containerWidth-snaps[0]),"start",slidesManager,containerWidth)).concat(_to_consumable_array(calculateLoopPoints(startShiftedIndexes,"end",slidesManager,containerWidth)))}function getTargetIndex(slides,slideIndex,currentShiftX,currentShiftXDelta){var shift=currentShiftX+currentShiftXDelta,direction=currentShiftXDelta<0?1:-1,targetIndex=slides.reduce(function(val,item,index){return Math.abs(slides[val].coordX+shift)<Math.abs(item.coordX+shift)?val:index},slideIndex);if(targetIndex===slideIndex){var targetSlide=slideIndex+direction;return targetSlide>=0&&targetSlide<slides.length?Math.abs(currentShiftXDelta)>.05*slides[targetSlide].width?targetSlide:targetIndex:direction<0?(targetSlide+slides.length)%slides.length:targetSlide%slides.length}return targetIndex}function animate(param){var start,duration=param.duration,timing=param.timing,draw=param.draw,_param_animationQueue=param.animationQueue,animationQueue=void 0===_param_animationQueue?[]:_param_animationQueue;es6.Nq&&requestAnimationFrame(function animate(time){start||(start=time);var timeFraction=Math.min((time-start)/duration,1);if(draw(timing(timeFraction)),timeFraction<1){requestAnimationFrame(animate);return}animationQueue.shift(),animationQueue.length>0&&animationQueue[0]()})}var TIMING_FUNCTION=(0,__webpack_require__("./src/lib/fx.ts")._)(.8,1);function useSlideAnimation(){var animationQueue=react.useRef([]);return{getAnimateFunction:function getAnimateFunction(drawFunction){return function(){animate({duration:240,timing:TIMING_FUNCTION,animationQueue:animationQueue.current,draw:drawFunction})}},addToAnimationQueue:function addToAnimationQueue(func){animationQueue.current.push(func)},startAnimation:function startAnimation(){1===animationQueue.current.length&&animationQueue.current[0]()}}}function CarouselBase_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function CarouselBase_array_with_holes(arr){if(Array.isArray(arr))return arr}function CarouselBase_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function CarouselBase_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function CarouselBase_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CarouselBase_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){CarouselBase_define_property(target,key,source[key])})}return target}function CarouselBase_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function CarouselBase_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):CarouselBase_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function CarouselBase_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=CarouselBase_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function CarouselBase_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function CarouselBase_sliced_to_array(arr,i){return CarouselBase_array_with_holes(arr)||CarouselBase_iterable_to_array_limit(arr,i)||CarouselBase_unsupported_iterable_to_array(arr,i)||CarouselBase_non_iterable_rest()}function CarouselBase_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return CarouselBase_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CarouselBase_array_like_to_array(o,minLen)}}var CarouselBase_stylesBullets={dark:BaseGallery_BaseGallery_module["BaseGallery__bullets--dark"],light:BaseGallery_BaseGallery_module["BaseGallery__bullets--light"]};(0,warnOnce.O)("Gallery");var CarouselBase=function(_param){var _param_bullets=_param.bullets,bullets=void 0!==_param_bullets&&_param_bullets,getRootRef=_param.getRootRef,children=_param.children,_param_slideWidth=_param.slideWidth,slideWidth=void 0===_param_slideWidth?"100%":_param_slideWidth,_param_slideIndex=_param.slideIndex,slideIndex=void 0===_param_slideIndex?0:_param_slideIndex,_param_dragDisabled=_param.dragDisabled,dragDisabled=void 0!==_param_dragDisabled&&_param_dragDisabled,onDragStart=_param.onDragStart,onDragEnd=_param.onDragEnd,onChange=_param.onChange,onPrevClick=_param.onPrevClick,onNextClick=_param.onNextClick,_param_align=_param.align,align=void 0===_param_align?"left":_param_align,showArrows=_param.showArrows,getRef=_param.getRef,_param_arrowSize=_param.arrowSize,arrowSize=void 0===_param_arrowSize?"l":_param_arrowSize,restProps=CarouselBase_object_without_properties(_param,["bullets","getRootRef","children","slideWidth","slideIndex","dragDisabled","onDragStart","onDragEnd","onChange","onPrevClick","onNextClick","align","showArrows","getRef","arrowSize"]),slidesStore=react.useRef({}),slidesManager=react.useRef(SLIDES_MANAGER_STATE),rootRef=(0,useExternRef.Q)(getRootRef),viewportRef=(0,useExternRef.Q)(getRef),layerRef=react.useRef(null),animationFrameRef=react.useRef(null),shiftXCurrentRef=react.useRef(0),shiftXDeltaRef=react.useRef(0),initialized=react.useRef(!1),_useSlideAnimation=useSlideAnimation(),addToAnimationQueue=_useSlideAnimation.addToAnimationQueue,getAnimateFunction=_useSlideAnimation.getAnimateFunction,startAnimation=_useSlideAnimation.startAnimation,_React_useState=CarouselBase_sliced_to_array(react.useState(CONTROL_ELEMENTS_STATE),2),controlElementsState=_React_useState[0],setControlElementsState=_React_useState[1],window=(0,dom.NG)().window,hasPointer=(0,useAdaptivityHasPointer.K)(),isCenterWithCustomWidth="custom"===slideWidth&&"center"===align,transformCssStyles=function(shiftX){var animation=arguments.length>1&&void 0!==arguments[1]&&arguments[1];slidesManager.current.loopPoints.forEach(function(loopPoint){var target=loopPoint.target,index=loopPoint.index,slide=slidesStore.current[index];slide&&(slide.style.transform="translate3d(".concat(target(shiftX),"px, 0, 0)"))}),layerRef.current&&(layerRef.current.style.transform="translate3d(".concat(shiftX,"px, 0, 0)"),layerRef.current.style.transition=animation?"transform ".concat(240,"ms cubic-bezier(.1, 0, .25, 1)"):"")},requestTransform=function(shiftX){var animation=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_slidesManager_current=slidesManager.current,snaps=_slidesManager_current.snaps,contentSize=_slidesManager_current.contentSize,slides=_slidesManager_current.slides;null!==animationFrameRef.current&&cancelAnimationFrame(animationFrameRef.current),animationFrameRef.current=requestAnimationFrame(function(){shiftX>snaps[0]&&(shiftXCurrentRef.current=-contentSize+snaps[0],shiftX=shiftXCurrentRef.current+shiftXDeltaRef.current);var lastPoint=slides[slides.length-1].width+slides[slides.length-1].coordX;shiftX<=-lastPoint&&(shiftXCurrentRef.current=Math.abs(shiftXDeltaRef.current)+snaps[0]),transformCssStyles(shiftX,animation)})},initializeSlides=function(){if(rootRef.current&&viewportRef.current){var localSlides=react.Children.map(children,function(_item,i){var elem=slidesStore.current[i]||{offsetLeft:0,offsetWidth:0};return{coordX:elem.offsetLeft,width:elem.offsetWidth}})||[],containerWidth=rootRef.current.offsetWidth,viewportOffsetWidth=viewportRef.current.offsetWidth,layerWidth=localSlides.reduce(function(val,slide){return slide.width+val},0);if("center"===align){var firstSlideShift=(containerWidth-localSlides[0].width)/2;localSlides=localSlides.map(function(item){return{width:item.width,coordX:item.coordX-firstSlideShift}})}slidesManager.current=CarouselBase_object_spread_props(CarouselBase_object_spread({},slidesManager.current),{viewportOffsetWidth:viewportOffsetWidth,slides:localSlides,isFullyVisible:layerWidth<=containerWidth});var snaps=localSlides.map(function(_,index){return calculateIndent(index,slidesManager.current,isCenterWithCustomWidth)}),contentSize=-snaps[snaps.length-1]+localSlides[localSlides.length-1].width;"center"===align&&(contentSize+=snaps[0]),slidesManager.current.snaps=snaps,slidesManager.current.contentSize=contentSize,slidesManager.current.loopPoints=getLoopPoints(slidesManager.current,containerWidth),setControlElementsState({canSlideLeft:!slidesManager.current.isFullyVisible,canSlideRight:!slidesManager.current.isFullyVisible,isDraggable:!(dragDisabled||slidesManager.current.isFullyVisible)}),shiftXCurrentRef.current=snaps[slideIndex],initialized.current=!0,requestTransform(shiftXCurrentRef.current)}};(0,useGlobalEventListener.J)(window,"resize",function(){initialized.current&&initializeSlides()}),(0,useIsomorphicLayoutEffect.L)(function performSlideChange(){if(initialized.current){var _slidesManager_current=slidesManager.current,snaps=_slidesManager_current.snaps,slides=_slidesManager_current.slides,indent=snaps[slideIndex],startPoint=shiftXCurrentRef.current;if(indent===snaps[0]&&shiftXCurrentRef.current<=snaps[snaps.length-1]){var distance=Math.abs(snaps[snaps.length-1])+slides[slides.length-1].width+startPoint;addToAnimationQueue(getAnimateFunction(function(progress){var shiftX=startPoint+-(progress*distance*1);transformCssStyles(shiftX),shiftX<=snaps[snaps.length-1]-slides[slides.length-1].width&&requestAnimationFrame(function(){shiftXCurrentRef.current=indent,transformCssStyles(snaps[0])})}))}else indent===snaps[snaps.length-1]&&shiftXCurrentRef.current===snaps[0]?(startPoint=indent-slides[slides.length-1].width,addToAnimationQueue(function(){requestAnimationFrame(function(){transformCssStyles(indent-slides[slides.length-1].width),getAnimateFunction(function(progress){transformCssStyles(startPoint+progress*slides[slides.length-1].width)})()})})):addToAnimationQueue(function(){var distance=Math.abs(indent-startPoint),direction=startPoint<=indent?1:-1;getAnimateFunction(function(progress){transformCssStyles(startPoint+progress*distance*direction)})()});startAnimation(),shiftXCurrentRef.current=indent}},[slideIndex]),(0,useIsomorphicLayoutEffect.L)(function(){initializeSlides()},[children,align,slideWidth]);var setSlideRef=function(slideRef,slideIndex){slidesStore.current[slideIndex]=slideRef},canSlideLeft=controlElementsState.canSlideLeft,canSlideRight=controlElementsState.canSlideRight,isDraggable=controlElementsState.isDraggable;return react.createElement(RootComponent.U,CarouselBase_object_spread_props(CarouselBase_object_spread({},restProps),{baseClassName:(0,es6.AK)(BaseGallery_BaseGallery_module.BaseGallery,"custom"===slideWidth&&BaseGallery_BaseGallery_module["BaseGallery--custom-width"],isDraggable&&BaseGallery_BaseGallery_module["BaseGallery--draggable"]),getRootRef:rootRef}),react.createElement(Touch.X,{className:BaseGallery_BaseGallery_module.BaseGallery__viewport,onStartX:function(e){e.originalEvent.stopPropagation(),controlElementsState.isDraggable&&(null==onDragStart||onDragStart(e),shiftXCurrentRef.current=slidesManager.current.snaps[slideIndex],shiftXDeltaRef.current=0)},onMoveX:function(e){controlElementsState.isDraggable&&(e.originalEvent.preventDefault(),e.isSlideX&&shiftXDeltaRef.current!==e.shiftX&&(shiftXDeltaRef.current=e.shiftX,requestTransform(shiftXCurrentRef.current+shiftXDeltaRef.current)))},onEnd:function(e){if(controlElementsState.isDraggable){var targetIndex=slideIndex;e.isSlide&&(targetIndex=getTargetIndex(slidesManager.current.slides,slideIndex,shiftXCurrentRef.current,shiftXDeltaRef.current)),null==onDragEnd||onDragEnd(e,targetIndex),targetIndex!==slideIndex?(shiftXCurrentRef.current=shiftXCurrentRef.current+shiftXDeltaRef.current,null==onChange||onChange(targetIndex)):requestTransform(slidesManager.current.snaps[targetIndex],!0)}},style:{width:"custom"===slideWidth?"100%":slideWidth},getRootRef:viewportRef,noSlideClick:!0},react.createElement("div",{className:BaseGallery_BaseGallery_module.BaseGallery__layer,ref:layerRef},react.Children.map(children,function(item,i){return react.createElement("div",{className:BaseGallery_BaseGallery_module.BaseGallery__slide,key:"slide-".concat(i),ref:function(el){return setSlideRef(el,i)}},item)}))),bullets&&react.createElement("div",{"aria-hidden":!0,className:(0,es6.AK)(BaseGallery_BaseGallery_module.BaseGallery__bullets,CarouselBase_stylesBullets[bullets])},react.Children.map(children,function(_item,index){return react.createElement("div",{className:(0,es6.AK)(BaseGallery_BaseGallery_module.BaseGallery__bullet,index===slideIndex&&BaseGallery_BaseGallery_module["BaseGallery__bullet--active"]),key:index})})),showArrows&&hasPointer&&canSlideLeft&&react.createElement(ScrollArrow.Q,{className:BaseGallery_BaseGallery_module.BaseGallery__arrow,direction:"left",onClick:function(event){null==onChange||onChange((slideIndex-1+slidesManager.current.slides.length)%slidesManager.current.slides.length),null==onPrevClick||onPrevClick(event)},size:arrowSize}),showArrows&&hasPointer&&canSlideRight&&react.createElement(ScrollArrow.Q,{className:BaseGallery_BaseGallery_module.BaseGallery__arrow,direction:"right",onClick:function(event){null==onChange||onChange((slideIndex+1)%slidesManager.current.slides.length),null==onNextClick||onNextClick(event)},size:arrowSize}))};try{CarouselBase.displayName="CarouselBase",CarouselBase.__docgenInfo={description:"",displayName:"CarouselBase",props:{slideWidth:{defaultValue:{value:"100%"},description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:{value:"0"},description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:{value:"false"},description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:{value:"false"},description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:{value:"l"},description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:{value:"left"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BaseGallery/CarouselBase/CarouselBase.tsx#CarouselBase"]={docgenInfo:CarouselBase.__docgenInfo,name:"CarouselBase",path:"src/components/BaseGallery/CarouselBase/CarouselBase.tsx#CarouselBase"})}catch(__react_docgen_typescript_loader_error){}var useTimeout=__webpack_require__("./src/hooks/useTimeout.ts");function useAutoPlay(timeout,slideIndex,callbackFn){var _useTimeout=(0,useTimeout.K)(callbackFn,timeout),clearAutoPlay=_useTimeout.clear,setAutoPlay=_useTimeout.set,document=(0,dom.NG)().document;react.useEffect(function(){return timeout?setAutoPlay():clearAutoPlay()},[timeout,slideIndex,clearAutoPlay,setAutoPlay]),react.useEffect(function preventSlideChange(){if(document&&timeout){var changeAutoPlay=function(){"visible"===document.visibilityState&&(clearAutoPlay(),setAutoPlay()),"hidden"===document.visibilityState&&clearAutoPlay()};return document.addEventListener("visibilitychange",changeAutoPlay),function(){document.removeEventListener("visibilitychange",changeAutoPlay)}}},[document,timeout,clearAutoPlay,setAutoPlay])}function Gallery_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Gallery_array_with_holes(arr){if(Array.isArray(arr))return arr}function Gallery_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Gallery_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function Gallery_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gallery_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Gallery_define_property(target,key,source[key])})}return target}function Gallery_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function Gallery_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Gallery_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function Gallery_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=Gallery_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Gallery_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function Gallery_sliced_to_array(arr,i){return Gallery_array_with_holes(arr)||Gallery_iterable_to_array_limit(arr,i)||Gallery_unsupported_iterable_to_array(arr,i)||Gallery_non_iterable_rest()}function Gallery_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return Gallery_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gallery_array_like_to_array(o,minLen)}}var Gallery=function(_param){var _props_slideIndex,_param_initialSlideIndex=_param.initialSlideIndex,children=_param.children,_param_timeout=_param.timeout,onChange=_param.onChange,bullets=_param.bullets,looped=_param.looped,props=Gallery_object_without_properties(_param,["initialSlideIndex","children","timeout","onChange","bullets","looped"]),_React_useState=Gallery_sliced_to_array(react.useState(void 0===_param_initialSlideIndex?0:_param_initialSlideIndex),2),localSlideIndex=_React_useState[0],setSlideIndex=_React_useState[1],isControlled="number"==typeof props.slideIndex,slideIndex=isControlled?(_props_slideIndex=props.slideIndex)!==null&&void 0!==_props_slideIndex?_props_slideIndex:0:localSlideIndex,slides=react.useMemo(function(){return react.Children.toArray(children).filter(function(item){return!!item})},[children]),childCount=slides.length,isClient=(0,useIsClient.O)(),handleChange=react.useCallback(function(current){current!==slideIndex&&(isControlled||setSlideIndex(current),onChange&&onChange(current))},[isControlled,onChange,slideIndex]);useAutoPlay(void 0===_param_timeout?0:_param_timeout,slideIndex,function(){return handleChange((slideIndex+1)%childCount)});var safeSlideIndex=childCount>0?(0,math.uZ)(slideIndex,0,childCount-1):slideIndex;if(react.useEffect(function(){onChange&&safeSlideIndex!==slideIndex&&onChange(safeSlideIndex),setSlideIndex(safeSlideIndex)},[onChange,safeSlideIndex,slideIndex]),!isClient)return null;var Component=looped?CarouselBase:BaseGallery;return react.createElement(Component,Gallery_object_spread_props(Gallery_object_spread({dragDisabled:isControlled&&!onChange},props),{bullets:childCount>0&&bullets,slideIndex:safeSlideIndex,onChange:handleChange}),slides)};try{Gallery.displayName="Gallery",Gallery.__docgenInfo={description:"",displayName:"Gallery",props:{initialSlideIndex:{defaultValue:{value:"0"},description:"",name:"initialSlideIndex",required:!1,type:{name:"number"}},timeout:{defaultValue:{value:"0"},description:"",name:"timeout",required:!1,type:{name:"number"}},looped:{defaultValue:null,description:"",name:"looped",required:!1,type:{name:"boolean"}},slideWidth:{defaultValue:null,description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:null,description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:null,description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:null,description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:null,description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Gallery/Gallery.tsx#Gallery"]={docgenInfo:Gallery.__docgenInfo,name:"Gallery",path:"src/components/Gallery/Gallery.tsx#Gallery"})}catch(__react_docgen_typescript_loader_error){}},"../../node_modules/@vkontakte/icons/dist/es6/16/chevron_16.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>Icon16Chevron});var Icon16Chevron=(0,__webpack_require__("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8" /></symbol>',12,16,!1,void 0)},"../../node_modules/@vkontakte/icons/dist/es6/24/chevron_24.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>Icon24Chevron});var Icon24Chevron=(0,__webpack_require__("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a.998.998 0 0 1 0 1.416l-5.084 5.084a1.002 1.002 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12 4.706 7.706" /></g></symbol>',16,24,!1,void 0)},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/BaseGallery/BaseGallery.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".BaseGallery--aehDU{overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.BaseGallery__viewport--I1eNk{block-size:100%;margin:0;position:relative}.BaseGallery--align-center--JQQn4 .BaseGallery__viewport--I1eNk{margin-block:0;margin-inline:auto}.BaseGallery__layer--nJ0KW{align-items:stretch;block-size:100%;display:flex;inline-size:100%;min-block-size:100px}.BaseGallery--draggable--J_egI .BaseGallery__layer--nJ0KW{cursor:-webkit-grab;cursor:grab}.BaseGallery__layer--nJ0KW:empty{min-block-size:0}.BaseGallery__slide--N5num{flex:0 0 auto;inline-size:100%;max-inline-size:100%;overflow:hidden}.BaseGallery--custom-width--Cet7r .BaseGallery__slide--N5num{inline-size:auto}.BaseGallery__slide--N5num>*{inline-size:100%;min-block-size:100%}.BaseGallery__bullets--acbMd{align-items:center;block-size:6px;display:flex;inline-size:100%;inset-block-end:10px;inset-inline-start:0;justify-content:center;position:absolute}.BaseGallery__bullets--dark--T_Veu .BaseGallery__bullet--YYi6w{background-color:var(--vkui--color_icon_primary_invariably)}.BaseGallery__bullets--light--wkxQq .BaseGallery__bullet--YYi6w{background-color:var(--vkui--color_icon_contrast)}.BaseGallery__bullet--YYi6w{block-size:6px;border-radius:50%;inline-size:6px;margin-block:0;margin-inline:3px;opacity:var(--vkui--opacity_disable_accessibility)}.BaseGallery__bullet--active--WpJY6{opacity:1}.BaseGallery__arrow--Z8JoJ{inset-block-start:0;opacity:0;position:absolute}.BaseGallery--aehDU:hover .BaseGallery__arrow--Z8JoJ{opacity:var(--vkui--opacity_disable_accessibility)}.BaseGallery--aehDU .BaseGallery__arrow--Z8JoJ:hover{opacity:1}","",{version:3,sources:["webpack://./src/components/BaseGallery/BaseGallery.module.css"],names:[],mappings:"AAAA,oBAEE,eAAgB,CADhB,iBAAkB,CAElB,wBAAiB,CAAjB,qBAAiB,CAAjB,oBAAiB,CAAjB,gBACF,CAEA,8BAEE,eAAgB,CADhB,QAAS,CAET,iBACF,CAEA,gEACE,cAAe,CACf,kBACF,CAEA,2BAKE,mBAAoB,CAFpB,eAAgB,CAFhB,YAAa,CACb,gBAAiB,CAEjB,oBAEF,CAEA,0DACE,mBAAY,CAAZ,WACF,CAEA,iCACE,gBACF,CAEA,2BAEE,aAAc,CADd,gBAAiB,CAEjB,oBAAqB,CACrB,eACF,CAEA,6DACE,gBACF,CAGA,6BACE,gBAAiB,CACjB,mBACF,CAEA,6BAOE,kBAAmB,CAJnB,cAAe,CAGf,YAAa,CAFb,gBAAiB,CAFjB,oBAAqB,CAGrB,oBAAqB,CAGrB,sBAAuB,CAPvB,iBAQF,CAEA,+DACE,2DACF,CAEA,gEACE,iDACF,CAEA,4BACE,cAAe,CAEf,iBAAkB,CADlB,eAAgB,CAEhB,cAAe,CACf,iBAAkB,CAClB,kDACF,CAEA,oCACE,SACF,CAEA,2BAEE,mBAAoB,CACpB,SAAU,CAFV,iBAGF,CAEA,qDACE,kDACF,CAEA,qDACE,SACF",sourcesContent:[".BaseGallery {\n  position: relative;\n  overflow: hidden;\n  user-select: none;\n}\n\n.BaseGallery__viewport {\n  margin: 0;\n  block-size: 100%;\n  position: relative;\n}\n\n.BaseGallery--align-center .BaseGallery__viewport {\n  margin-block: 0;\n  margin-inline: auto;\n}\n\n.BaseGallery__layer {\n  display: flex;\n  inline-size: 100%;\n  block-size: 100%;\n  min-block-size: 100px;\n  align-items: stretch;\n}\n\n.BaseGallery--draggable .BaseGallery__layer {\n  cursor: grab;\n}\n\n.BaseGallery__layer:empty {\n  min-block-size: 0;\n}\n\n.BaseGallery__slide {\n  inline-size: 100%;\n  flex: 0 0 auto;\n  max-inline-size: 100%;\n  overflow: hidden;\n}\n\n.BaseGallery--custom-width .BaseGallery__slide {\n  inline-size: auto;\n}\n\n/* stylelint-disable-next-line selector-max-universal */\n.BaseGallery__slide > * {\n  inline-size: 100%;\n  min-block-size: 100%;\n}\n\n.BaseGallery__bullets {\n  position: absolute;\n  inset-block-end: 10px;\n  block-size: 6px;\n  inline-size: 100%;\n  inset-inline-start: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.BaseGallery__bullets--dark .BaseGallery__bullet {\n  background-color: var(--vkui--color_icon_primary_invariably);\n}\n\n.BaseGallery__bullets--light .BaseGallery__bullet {\n  background-color: var(--vkui--color_icon_contrast);\n}\n\n.BaseGallery__bullet {\n  block-size: 6px;\n  inline-size: 6px;\n  border-radius: 50%;\n  margin-block: 0;\n  margin-inline: 3px;\n  opacity: var(--vkui--opacity_disable_accessibility);\n}\n\n.BaseGallery__bullet--active {\n  opacity: 1;\n}\n\n.BaseGallery__arrow {\n  position: absolute;\n  inset-block-start: 0;\n  opacity: 0;\n}\n\n.BaseGallery:hover .BaseGallery__arrow {\n  opacity: var(--vkui--opacity_disable_accessibility);\n}\n\n.BaseGallery .BaseGallery__arrow:hover {\n  opacity: 1;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={BaseGallery:"BaseGallery--aehDU",BaseGallery__viewport:"BaseGallery__viewport--I1eNk","BaseGallery--align-center":"BaseGallery--align-center--JQQn4",BaseGallery__layer:"BaseGallery__layer--nJ0KW","BaseGallery--draggable":"BaseGallery--draggable--J_egI",BaseGallery__slide:"BaseGallery__slide--N5num","BaseGallery--custom-width":"BaseGallery--custom-width--Cet7r",BaseGallery__bullets:"BaseGallery__bullets--acbMd","BaseGallery__bullets--dark":"BaseGallery__bullets--dark--T_Veu",BaseGallery__bullet:"BaseGallery__bullet--YYi6w","BaseGallery__bullets--light":"BaseGallery__bullets--light--wkxQq","BaseGallery__bullet--active":"BaseGallery__bullet--active--WpJY6",BaseGallery__arrow:"BaseGallery__arrow--Z8JoJ"};let __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);