import{v as B,h as je,r as l,i as qe,u as ye,c as Re,a3 as ge,q as Ce,j as t,R as Ve,k as xe,g as N,n as Be}from"./iframe-CGSrC79H.js";import{u as Ne}from"./useBooleanState-BkBFPaFP.js";import{u as Te}from"./useConfigDirection-BDt5-3HT.js";import{u as He}from"./useNativeFormResetListener-DbeuhCJS.js";import{c as Me}from"./callMultiple-ChqatQlo.js";import{B as T}from"./Button-JZGl9x8f.js";import{I as H}from"./IconButton-Bq_FXaCp.js";import{H as Ee}from"./Headline-DOU82LYx.js";import{V as M}from"./VisuallyHidden-Cv__RMJJ.js";import{I as Se}from"./clear_16-BR3jMMf4.js";import{I as Fe}from"./cancel_24-CsoSQ93Z.js";import{I as Le}from"./search_outline_16-B2mMrplc.js";const ke="_host_blbjq_1",ze="_rtl_blbjq_11",Ae="_withPadding_blbjq_15",Ye="_sizeYCompact_blbjq_24",we="_sizeYNone_blbjq_29",De="_field_blbjq_34",Pe="_label_blbjq_57",Oe="_input_blbjq_64",$e="_nativeInput_blbjq_76",Ge="_hasAfter_blbjq_106",Je="_disabled_blbjq_111",Ke="_controls_blbjq_131",Qe="_hasIcon_blbjq_144",Ue="_hasValue_blbjq_156",We="_icon_blbjq_160",Xe="_after_blbjq_174",Ze="_focused_blbjq_185",et="_afterTextClip_blbjq_204",tt="_findButton_blbjq_211",e={host:ke,rtl:ze,withPadding:Ae,sizeYCompact:Ye,sizeYNone:we,field:De,label:Pe,input:Oe,nativeInput:$e,hasAfter:Ge,disabled:Je,controls:Ke,hasIcon:Qe,hasValue:Ue,icon:We,after:Xe,focused:Ze,afterTextClip:et,findButton:tt},E=({after:r="Отмена",before:S=t.jsx(Le,{}),icon:s,onIconClick:_,iconLabel:F,clearLabel:L="Очистить",clearButtonTestId:k,noPadding:z,findButtonText:A="Найти",onFindButtonClick:c,findButtonTestId:Y,hideClearButton:h,getRef:w,placeholder:D="Поиск",autoComplete:P="off",disabled:O,list:$,maxLength:G,minLength:J,name:K,readOnly:Q,required:U,value:W,id:X,inputMode:Z,defaultValue:ee,autoFocus:te,tabIndex:ne,spellCheck:ae,onChange:oe,onFocus:se,onBlur:le,slotProps:v,...ie})=>{const re=Te()==="rtl",ce=B(ie,v?.root),{id:I,placeholder:j,getRootRef:ue,onChange:de,onFocus:q,onBlur:y,...a}=B({getRootRef:w,className:e.nativeInput,placeholder:D,autoComplete:P,disabled:O,list:$,maxLength:G,minLength:J,name:K,readOnly:Q,required:U,value:W,id:X,inputMode:Z,defaultValue:ee,autoFocus:te,tabIndex:ne,spellCheck:ae,onChange:oe,onFocus:se,onBlur:le},v?.input),o=je(ue),[pe,u,d]=Ne(!1),fe=l.useId(),R=I||`search-${fe}`,[p,f]=l.useState(()=>!!(a.value||a.defaultValue)),me=n=>f(!!n.currentTarget.value),{sizeY:g="none"}=qe(),{sizeY:m}=ye(),C=Re(),V=C==="ios"&&xe(r),be=n=>{u(),q&&q(n)},_e=n=>{d(),y&&y(n)},i=l.useCallback(()=>{Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")?.set?.call(o.current,"");const b=new Event("input",{bubbles:!0});o.current?.dispatchEvent(b)},[o]),he=l.useCallback(n=>_?.(n),[_]),ve=l.useCallback(n=>{n.preventDefault(),o.current?.focus(),ge()&&i()},[o,i]);Ce(()=>{a.value!==void 0&&f(!!a.value)},[a.value]),He(o,()=>{f(!!a.defaultValue)});const x=(n,b={})=>t.jsxs(H,{hoverMode:"opacity",onPointerDown:he,className:e.icon,onFocus:u,onBlur:d,onClick:Be,...b,children:[t.jsx(M,{children:F}),n]}),Ie=!!(s||!h||m.compact&&c);return t.jsxs(Ve,{baseClassName:N("vkuiInternalSearch",e.host,g==="none"&&e.sizeYNone,g==="compact"&&e.sizeYCompact,pe&&e.focused,p&&e.hasValue,V&&e.hasAfter,s&&e.hasIcon,a.disabled&&e.disabled,!z&&e.withPadding,re&&e.rtl),...ce,children:[t.jsxs("div",{className:e.field,children:[t.jsx("label",{htmlFor:R,className:e.label,children:j}),t.jsxs("div",{className:e.input,children:[S,t.jsx(Ee,{Component:"input",type:"search",level:"1",weight:"3",id:R,placeholder:j,getRootRef:o,onChange:Me(de,me),onFocus:be,onBlur:_e,...a})]}),Ie&&t.jsxs("div",{className:e.controls,children:[s&&(typeof s=="function"?s(x):x(s)),!h&&t.jsxs(H,{hoverMode:"opacity",onPointerDown:ve,onClick:i,className:e.icon,tabIndex:p?void 0:-1,disabled:a.disabled,"data-testid":k,children:[t.jsx(M,{children:L}),C==="ios"?t.jsx(Se,{}):t.jsx(Fe,{})]}),m.compact&&c&&t.jsx(T,{mode:"primary",size:"m",className:N(e.findButton,m.compact.className),focusVisibleMode:"inside",onClick:c,tabIndex:p?void 0:-1,"data-testid":Y,children:A})]})]}),V&&t.jsx("div",{className:e.after,children:t.jsx(T,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:i,onFocus:u,onBlur:d,children:t.jsx("span",{className:e.afterTextClip,children:r})})})]})};try{E.displayName="Search",E.__docgenInfo={description:"",displayName:"Search",props:{getRef:{defaultValue:null,description:"@deprecated Since 7.9.0. Вместо этого используйте `slotProps={ input: { getRootRef: ... } }`.",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},slotProps:{defaultValue:null,description:"Свойства, которые можно прокинуть внутрь компонента:\n- `root`: свойства для прокидывания в корень компонента;\n- `input`: свойства для прокидывания в поле ввода.",name:"slotProps",required:!1,type:{name:"{ root?: (HTMLAttributes<HTMLDivElement> & HasRootRef<HTMLDivElement> & HasDataAttribute); input?: (InputHTMLAttributes<...> & ... 1 more ... & HasDataAttribute); } | undefined"}},after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},hideClearButton:{defaultValue:null,description:"Скрывает кнопку очистки.",name:"hideClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}export{E as S};
