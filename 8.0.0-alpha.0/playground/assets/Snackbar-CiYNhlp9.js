import{r as s,n as U,i as E4,j as m,R as $,g as K,v as G,c as m4,h as f4,ag as D4,q as M,a_ as p4}from"./iframe-CGSrC79H.js";import{u as B4}from"./useConfigDirection-BDt5-3HT.js";import{u as _4}from"./useFocusWithin-Bqhwx3UJ.js";import{u as C4}from"./useGlobalEscKeyDown--1hZmUwN.js";import{c as F4}from"./callMultiple-ChqatQlo.js";import{B as y4}from"./Button-JZGl9x8f.js";import{P as x4}from"./Paragraph-MD0IQtl5.js";import{S as A4}from"./Subhead-BDUGOuQB.js";import{r as F,U as h4}from"./rubberbandIfOutOfBounds-Dj2OyPbD.js";import{u as v4}from"./useCSSKeyframesAnimationController-3EPmQPbL.js";const b4=s.createContext({isInsideContainer:!1,onClosed:U,onOpen:U}),g4="_body_1xmoo_1",k4="_sizeYRegular_1xmoo_21",R4="_sizeYNone_1xmoo_33",T4="_modeDark_1xmoo_45",N4="_before_1xmoo_49",V4="_after_1xmoo_53",S4="_content_1xmoo_57",q4="_contentText_1xmoo_64",z4="_contentSubtitle_1xmoo_74",M4="_layoutHorizontal_1xmoo_84",I4="_action_1xmoo_84",H4="_layoutVertical_1xmoo_89",w4="_layoutNone_1xmoo_101",d={body:g4,sizeYRegular:k4,sizeYNone:R4,modeDark:T4,before:N4,after:V4,content:S4,contentText:q4,contentSubtitle:z4,layoutHorizontal:M4,action:I4,layoutVertical:H4,layoutNone:w4},j4={none:d.layoutNone,vertical:d.layoutVertical,horizontal:d.layoutHorizontal},L4={none:d.sizeYNone,regular:d.sizeYRegular};function T({layout:t,action:e,after:u,before:o,mode:r,subtitle:a,children:l,...N}){const{sizeY:v="none"}=E4(),x=u||a?"vertical":"none";return m.jsxs($,{...N,baseClassName:K(d.body,j4[t||x],v!=="compact"&&L4[v],r==="dark"&&d.modeDark),children:[o&&m.jsx("div",{className:d.before,children:o}),m.jsxs("div",{className:d.content,children:[m.jsx(x4,{className:d.contentText,children:l}),a&&!e&&m.jsx(A4,{className:d.contentSubtitle,children:a}),e&&!a&&m.jsx("div",{className:d.action,children:e})]}),u&&m.jsx("div",{className:d.after,children:u})]})}try{T.displayName="Basic",T.__docgenInfo={description:"",displayName:"Basic",props:{getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},action:{defaultValue:null,description:"Элемент действия.\nНе может использоваться одновременно с `subtitle`.",name:"action",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Контент в правой части, может быть иконкой 24x24.",name:"after",required:!1,type:{name:"ReactNode"}},layout:{defaultValue:null,description:"Варианты расположения кнопки действия\nПо умолчанию на десктопах, или при наличии элементов `after` или `subtitle`\nимеет значение `vertical`, в остальных случаях `horizontal`.",name:"layout",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},before:{defaultValue:null,description:"Может быть следующими компонентами:\n - цветная иконка 24x24 или 28x28 пикселя\n - `<Avatar size={32} />`\n - `<Image size={40} />`.",name:"before",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"Задает стиль снекбара.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"dark"'}]}},subtitle:{defaultValue:null,description:"Дополнительная строка текста под `children`.\nНе может использоваться одновременно с `action`.",name:"subtitle",required:!1,type:{name:"ReactNode"}}}}}catch{}function O4(t,e){if(e!==void 0)switch(t){case"top-start":case"top":case"top-end":return{top:e};case"bottom-start":case"bottom":case"bottom-end":return{bottom:e}}}function p(t,e){return e?-1*t:t}function W4(t,e,u){return{shifted:!1,direction:null,isDesktop:u.smallTabletPlus.matches,x:0,y:0,width:t,height:e}}function Y4(t,e,u,o=!1){if(e.isDesktop)t.endsWith("start")?e.x=o?F(u.x,0,e.width):F(u.x,-e.width,0):t.endsWith("end")&&(e.x=o?F(u.x,-e.width,0):F(u.x,0,e.width)),t.startsWith("bottom")&&(e.y=F(u.y,0,e.height));else if(t.startsWith("bottom")){e.x=u.x;const r=u.x<0?-1:null,a=u.x>0?1:null;e.direction=r||a}return t.startsWith("top")&&(e.y=F(u.y,-e.height,0)),e.shifted=!0,e}const y=200;function P4(t,e,u,o,r=!1){if(!e.shifted)return!1;const a={x:!1,y:!1},l={x:!1,y:!1};return e.isDesktop?(t.endsWith("start")?(a.x=p(u.x,r)<-u.width/2,l.x=p(u.x,r)<0?p(o.x,r)<p(-y,r):!1):t.endsWith("end")&&(a.x=p(u.x,r)>u.width/2,l.x=p(u.x,r)>0?p(o.x,r)>p(y,r):!1),t.startsWith("bottom")&&(a.y=u.y>u.height/2,l.y=u.y>0?o.y>y:!1)):t.startsWith("bottom")&&(a.x=u.x<-u.width/2||u.x>u.width/2,l.x=u.x<0&&o.x<-y||u.x>0&&o.x>y),t.startsWith("top")&&(a.y=u.y<-u.height/2,l.y=u.y<0?o.y<-y:!1),a.x||l.x||a.y||l.y}const U4="_host_h5v1l_1",G4="_fixed_h5v1l_18",$4="_ios_h5v1l_22",K4="_rtl_h5v1l_26",Q4="_placementTopStart_h5v1l_30",J4="_placementTop_h5v1l_30",X4="_placementTopEnd_h5v1l_32",Z4="_placementBottomStart_h5v1l_39",uu="_placementBottomEnd_h5v1l_46",eu="_placementBottom_h5v1l_39",tu="_stateEnter_h5v1l_160",nu="_stateEntering_h5v1l_161",ou="_stateEntered_h5v1l_172",au="_touched_h5v1l_178",ru="_stateExit_h5v1l_182",su="_stateExiting_h5v1l_183",n={host:U4,fixed:G4,ios:$4,rtl:K4,placementTopStart:Q4,placementTop:J4,placementTopEnd:X4,placementBottomStart:Z4,placementBottomEnd:uu,placementBottom:eu,in:"_in_h5v1l_121",stateEnter:tu,stateEntering:nu,stateEntered:ou,touched:au,stateExit:ru,stateExiting:su},lu={"top-start":n.placementTopStart,top:n.placementTop,"top-end":n.placementTopEnd,"bottom-start":n.placementBottomStart,bottom:n.placementBottom,"bottom-end":n.placementBottomEnd},iu={enter:n.stateEnter,entering:n.stateEntering,entered:n.stateEntered,exit:n.stateExit,exiting:n.stateExiting,exited:void 0},h=({placement:t="bottom-start",children:e,layout:u,action:o,before:r,after:a,duration:l=4e3,onActionClick:N,onClosed:v,onClose:x,mode:I="default",subtitle:Q,offsetY:J,getRootRef:X,slotProps:H,open:D,id:A,...Z})=>{const{getRootRef:u4,...e4}=G({getRootRef:X,...Z},H?.root),{onClick:t4,...n4}=G({onClick:N},H?.action),o4=m4(),{isInsideContainer:a4,onOpen:r4,onClosed:s4}=s.useContext(b4),[B,w]=s.useState(D!==void 0?D:!0),[_,j]=s.useState(!1),V=B4()==="rtl",i=f4(u4),L=_4(i),O=s.useRef(null),f=s.useRef(null),E=s.useRef(null),b=s.useRef(null),W=s.useRef(void 0),l4=D4(),[g,i4]=v4(B?"enter":"exit",{onEnter:A?()=>r4(A):void 0,onExited:F4(v,A?()=>s4(A):void 0)},!1,!0);M(function(){D!==void 0&&(D||x?.("manual"),w(D))},[D]);const k=s.useCallback(()=>{b.current!==null&&(cancelAnimationFrame(b.current),b.current=null)},[]),S=s.useCallback((c,R,z)=>{b.current=requestAnimationFrame(()=>{i.current&&(c===null?i.current.style.removeProperty("--vkui_internal--snackbar_shift_x"):i.current.style.setProperty("--vkui_internal--snackbar_shift_x",`${c}px`),R===null?i.current.style.removeProperty("--vkui_internal--snackbar_shift_y"):i.current.style.setProperty("--vkui_internal--snackbar_shift_y",`${R}px`),z===null?i.current.style.removeProperty("--vkui_internal--snackbar_direction"):i.current.style.setProperty("--vkui_internal--snackbar_direction",`${z}`))})},[i]),C=s.useCallback(c=>{x?.(c),D===void 0&&w(!1)},[x,D]),c4=c=>{C("click-action"),o&&t4?.(c)},Y=c=>{f.current=new h4,f.current.setStartCoords(c.nativeEvent),E.current=W4(i.current.offsetWidth,i.current.offsetHeight,l4),j(!0)},P=c=>{E.current&&f.current&&(f.current.setInitialTimeOnce(),f.current.setEndCoords(c.nativeEvent),E.current=Y4(t,E.current,f.current.delta(),V),E.current.shifted&&S(E.current.x,E.current.y,E.current.direction))},q=()=>{_&&E.current&&f.current&&P4(t,E.current,p4(i.current,O.current),f.current.velocity(),V)&&C("swipe"),j(!1)};M(function(){if(!B||L||_||g!=="entered"||!l)return;const R=()=>C("timeout");return W.current=setTimeout(R,l),function(){clearTimeout(W.current)}},[B,L,_,g,C,l]),M(function(){_||(k(),E.current=null,f.current=null,B&&S(null,null,null))},[_,B,S,k]),s.useEffect(()=>k,[k]);const d4=s.useCallback(()=>C("escape-key"),[C]);return C4(B,d4),g==="exited"?null:m.jsx($,{id:A,role:"presentation",baseClassName:K(n.host,!a4&&n.fixed,o4==="ios"&&n.ios,_&&n.touched,lu[t],iu[g],V&&n.rtl),baseStyle:O4(t,J),getRootRef:i,...e4,children:m.jsx("div",{role:"alert",className:n.in,ref:O,onTouchStart:Y,onTouchMove:P,onTouchEnd:q,onMouseDown:Y,onMouseMove:P,onMouseUp:q,onMouseLeave:q,...i4,children:m.jsx(T,{mode:I,layout:u,before:r,after:a,subtitle:Q,action:o&&m.jsx(y4,{align:"left",mode:"link",appearance:I==="dark"?"overlay":"accent",size:"s",onClick:c4,...n4,children:o}),children:e})})})};h.Basic=T;try{h.displayName="Snackbar",h.__docgenInfo={description:"",displayName:"Snackbar",props:{slotProps:{defaultValue:null,description:"Свойства, которые можно прокинуть внутрь компонента:\n- `root`: свойства для прокидывания в корень компонента;\n- `action`: свойства для прокидывания в кнопку действия.",name:"slotProps",required:!1,type:{name:'{ root?: (Omit<HTMLAttributes<HTMLDivElement>, "children"> & HasRootRef<HTMLDivElement> & HasDataAttribute); action?: (HTMLAttributes<...> & ... 1 more ... & HasDataAttribute); } | undefined'}},placement:{defaultValue:{value:"bottom-start"},description:'Задаёт расположение компонента.\n\n> Note: в мобильном режиме:\n> - `"top-start"`/`"top-end"` перебивается на `"top"`, чтобы поведение было схожим с нативными\n>   уведомлениями;\n> - `"bottom"` перебивается на `"bottom-start"`, чтобы избежать вызова системных\n>   функций, таких как **Pull To Refresh** и **Режим управления одной рукой**.\n> - `"bottom-start"`/`"bottom-end"` закрываются смахиванием в любое из направлений\n>   по горизонтальной оси.',name:"placement",required:!1,type:{name:"enum",value:[{value:'"top-start"'},{value:'"top"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom"'},{value:'"bottom-end"'}]}},action:{defaultValue:null,description:"Название кнопки действия в уведомлении\nНе может использоваться одновременно с `subtitle`.",name:"action",required:!1,type:{name:"ReactNode"}},onActionClick:{defaultValue:null,description:"Будет вызвано при нажатии на кнопку действия.",name:"onActionClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},duration:{defaultValue:{value:"4000"},description:"Время в миллисекундах, через которое плашка скроется.",name:"duration",required:!1,type:{name:"number | null"}},onClose:{defaultValue:null,description:"Обработчик закрытия уведомления.",name:"onClose",required:!1,type:{name:"((reason: SnackbarCloseReason) => void)"}},onClosed:{defaultValue:null,description:"Обработчик закрытия уведомления, срабатывающий после окончания анимации.",name:"onClosed",required:!0,type:{name:"() => void"}},offsetY:{defaultValue:null,description:"Величина отступа снизу. Используется для позиционирования элемента в случае, когда нежелательно, чтобы Snackbar при появлении перекрывал важные элементы интерфейса.",name:"offsetY",required:!1,type:{name:"Bottom<string | number>"}},open:{defaultValue:null,description:"Для контролируемого управления состоянием открытия снекбара.",name:"open",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},after:{defaultValue:null,description:"Контент в правой части, может быть иконкой 24x24.",name:"after",required:!1,type:{name:"ReactNode"}},layout:{defaultValue:null,description:"Варианты расположения кнопки действия\nПо умолчанию на десктопах, или при наличии элементов `after` или `subtitle`\nимеет значение `vertical`, в остальных случаях `horizontal`.",name:"layout",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},before:{defaultValue:null,description:"Может быть следующими компонентами:\n - цветная иконка 24x24 или 28x28 пикселя\n - `<Avatar size={32} />`\n - `<Image size={40} />`.",name:"before",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:{value:"default"},description:"Задает стиль снекбара.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"dark"'}]}},subtitle:{defaultValue:null,description:"Дополнительная строка текста под `children`.\nНе может использоваться одновременно с `action`.",name:"subtitle",required:!1,type:{name:"ReactNode"}}}}}catch{}try{h.Basic.displayName="Snackbar.Basic",h.Basic.__docgenInfo={description:"",displayName:"Snackbar.Basic",props:{getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},action:{defaultValue:null,description:"Элемент действия.\nНе может использоваться одновременно с `subtitle`.",name:"action",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Контент в правой части, может быть иконкой 24x24.",name:"after",required:!1,type:{name:"ReactNode"}},layout:{defaultValue:null,description:"Варианты расположения кнопки действия\nПо умолчанию на десктопах, или при наличии элементов `after` или `subtitle`\nимеет значение `vertical`, в остальных случаях `horizontal`.",name:"layout",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},before:{defaultValue:null,description:"Может быть следующими компонентами:\n - цветная иконка 24x24 или 28x28 пикселя\n - `<Avatar size={32} />`\n - `<Image size={40} />`.",name:"before",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"Задает стиль снекбара.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"dark"'}]}},subtitle:{defaultValue:null,description:"Дополнительная строка текста под `children`.\nНе может использоваться одновременно с `action`.",name:"subtitle",required:!1,type:{name:"ReactNode"}}}}}catch{}export{T as B,h as S,b4 as a};
