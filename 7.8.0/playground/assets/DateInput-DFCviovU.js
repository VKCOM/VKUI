import{r as t,a0 as du,a1 as Eu,Y as Du,Z as Fu,a2 as cu,a3 as mu,k as Bu,i as pu,l as fu,m as Cu,j as e,h as o4,a4 as Au,_ as hu,T as i4}from"./iframe-DJZLDe2v.js";import{u as vu,d as i,N as h,I as g}from"./DateInput.module-CSyqh8vx.js";import{C as bu}from"./Calendar-DjubU5_1.js";import{F as gu}from"./FocusTrap-CvsHEOgG.js";import{F as yu}from"./FormField-Cnff4fSG.js";import{I as d4}from"./IconButton-CMOFK_Ua.js";import{P as Vu}from"./Popper-D8p4fWFq.js";import{V as _}from"./VisuallyHidden-D0jMNSCO.js";import{I as qu}from"./calendar_outline_20-mFrDkcnn.js";import{I as xu}from"./clear_16-CndK8jYO.js";const y=(u,a)=>du(u,a)||null,Iu=(u,a)=>Eu(u,a),E4=(u,a,s,n)=>y(a!==void 0?a:s!==void 0?s:u,n),Ru=({value:u,defaultValue:a,onChange:s,timezone:n})=>{const[V,F]=t.useState(E4(null,u,a,n)),c=t.useRef(E4(null,u,a,n)),m=u!==void 0;t.useEffect(()=>{if(m){const d=y(u,n);F(d),c.current=d}},[m,n,u]);const q=t.useCallback(()=>c.current,[]),x=t.useCallback(d=>{m||(F(d),c.current=d);const v=Iu(d,n);return s?.(v),v},[m,s,n]);return{value:V,updateValue:x,setInternalValue:F,getLastUpdatedValue:q,clearValue:()=>{F(null),c.current=null,s?.(void 0)}}},Tu={none:i.sizeYNone,compact:i.sizeYCompact},D4=u=>{let a=2,s=1,n=0;switch(u){case 0:n=31;break;case 1:n=12;break;case 2:n=2100,s=1900,a=4;break;case 3:n=23;break;case 4:n=59;break}return{length:a,min:s,max:n}},Mu=u=>{const a=["","","","",""];return u&&(a[0]=String(u.getDate()).padStart(2,"0"),a[1]=String(u.getMonth()+1).padStart(2,"0"),a[2]=String(u.getFullYear()).padStart(4,"0"),a[3]=String(u.getHours()).padStart(2,"0"),a[4]=String(u.getMinutes()).padStart(2,"0")),a},Lu={childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]},F4=({enableTime:u,shouldDisableDate:a,disableFuture:s,disablePast:n,minDateTime:V,maxDateTime:F,value:c,defaultValue:m,onChange:q,calendarPlacement:x="bottom-start",style:O,className:d,doneButtonText:v,DoneButton:c4,closeOnChange:H=!0,disablePickers:m4,getRootRef:B4,name:p4,autoFocus:f4,disabled:K,accessible:E,calendarLabel:C4="Календарь",prevMonthLabel:A4="Предыдущий месяц",nextMonthLabel:h4="Следующий месяц",changeDayLabel:v4="День",changeMonthLabel:Y="Месяц",changeYearLabel:$="Год",changeHoursLabel:z="Час",changeMinutesLabel:U="Минута",clearFieldLabel:b4="Очистить поле",showCalendarLabel:g4="Показать календарь",showNeighboringMonth:y4,size:V4,viewDate:q4,onHeaderChange:x4,onNextMonth:I4,onPrevMonth:R4,prevMonthIcon:T4,nextMonthIcon:M4,renderDayContent:L4,onCalendarOpenChanged:j4,calendarTestsProps:k4,dayFieldTestId:w4,monthFieldTestId:N4,yearFieldTestId:S4,hourFieldTestId:P4,minuteFieldTestId:_4,showCalendarButtonTestId:O4,clearButtonTestId:H4,id:K4,onApply:Z,renderCustomValue:G,timezone:Y4,restoreFocus:$4,disableFocusTrap:z4,readOnly:o,disableCalendar:U4=!1,"aria-label":J="",before:Q,...Z4})=>{const I=t.useRef(null),R=t.useRef(null),T=t.useRef(null),M=t.useRef(null),L=t.useRef(null),W=o?!0:U4,{value:l,updateValue:B,setInternalValue:j,getLastUpdatedValue:X,clearValue:G4}=Ru({value:c,defaultValue:m,onChange:q,timezone:Y4}),k=u?4:2,J4=t.useCallback(r=>{for(let D=0;D<=k;D+=1)if(r[D].length<D4(D).length)return;let S=`${r[0]}.${r[1]}.${r[2]}`,P="dd.MM.yyyy";if(u&&(S+=` ${r[3]}:${r[4]}`,P+=" HH:mm"),Du(S,P)){const D=new Date;B(Fu(S,P,l??(u?cu(D):mu(D))))}},[u,k,B,l]),Q4=t.useMemo(()=>[I,R,T,M,L],[I,R,T,M,L]),{rootRef:u4,calendarRef:W4,open:p,internalValue:f,handleKeyDown:C,setFocusedElement:A,handleFieldEnter:w,clear:X4,removeFocusFromField:b,closeCalendar:uu,toggleCalendar:eu,openCalendar:e4,handleRestoreFocus:au}=vu({maxElement:k,refs:Q4,autoFocus:f4,disabled:K||o,elementsConfig:D4,onClear:G4,onInternalValueChange:J4,getInternalValue:Mu,value:l,onCalendarOpenChanged:j4,accessible:E}),{sizeY:a4="none"}=Bu(),tu=pu(u4,B4);fu(function(){p||j(X())},[p,X]);const nu=t.useCallback(r=>{if(r){if(u){j(r);return}B(r),H&&b()}},[u,B,H,j,b]),lu=t.useCallback(()=>{if(!l)return;const r=B(l);Z?.(r),b()},[Z,b,B,l]),N=t.useMemo(()=>!p&&G?.(l||void 0),[p,G,l]),[ru,su]=t.useState(x),{locale:ou}=Cu(),t4=l?new Intl.DateTimeFormat(ou,{weekday:"long",year:"numeric",month:"long",day:"numeric"}).format(l):null,n4=t.useId(),l4=t.useId(),iu=t.useCallback(()=>{w(),E&&e4()},[w,e4,E]),r4=!W&&(E||!E&&!l),s4=l&&!o;return e.jsxs(yu,{style:O,className:o4(a4!=="regular"&&Tu[a4],!!Q&&i.hasBefore,(r4||s4)&&i.hasAfter,d),getRootRef:tu,role:"group","aria-labelledby":`${l4} ${n4}`,before:Q,after:e.jsxs(t.Fragment,{children:[r4?e.jsx(d4,{hoverMode:"opacity",label:g4,onClick:eu,"data-testid":O4,children:e.jsx(qu,{})}):null,s4?e.jsx(d4,{hoverMode:"opacity",label:b4,onClick:X4,"data-testid":H4,children:e.jsx(xu,{})}):null]}),disabled:K,...Z4,children:[e.jsxs("div",{className:i.wrapper,children:[J&&e.jsx(_,{id:l4,children:J}),t4&&e.jsx(_,{id:n4,children:t4}),e.jsx(_,{id:K4,Component:"input",readOnly:!0,"aria-hidden":!0,tabIndex:o?0:-1,name:p4,value:l?u?Au.format(l):hu.format(l):"",onFocus:w}),e.jsxs(i4,{className:o4(i.input,N&&i.hidden),normalize:!1,Component:"span",onClick:iu,children:[e.jsx(h,{value:f[0],minValue:1,maxValue:31,length:2,getRootRef:I,index:0,onKeyDown:C,onElementSelect:A,label:v4,readOnly:o,"data-testid":w4}),e.jsx(g,{children:"."}),e.jsx(h,{value:f[1],minValue:1,maxValue:12,length:2,getRootRef:R,index:1,onElementSelect:A,onKeyDown:C,readOnly:o,label:Y,"data-testid":N4}),e.jsx(g,{children:"."}),e.jsx(h,{value:f[2],minValue:1,maxValue:275750,length:4,getRootRef:T,index:2,onElementSelect:A,readOnly:o,label:$,onKeyDown:C,"data-testid":S4}),u&&e.jsxs(t.Fragment,{children:[e.jsx(g,{className:i.inputTimeDivider,children:" "}),e.jsx(h,{value:f[3],minValue:1,maxValue:24,length:2,getRootRef:M,index:3,onElementSelect:A,readOnly:o,label:z,onKeyDown:C,"data-testid":P4}),e.jsx(g,{children:":"}),e.jsx(h,{value:f[4],minValue:1,maxValue:59,length:2,getRootRef:L,index:4,onElementSelect:A,readOnly:o,label:U,onKeyDown:C,"data-testid":_4})]})]}),N&&e.jsx(i4,{className:i.customValue,"aria-hidden":!0,normalize:!1,children:N})]}),p&&!W&&e.jsx(Vu,{targetRef:u4,offsetByMainAxis:8,placement:ru,onPlacementChange:su,autoUpdateOnTargetResize:!0,children:e.jsx(gu,{onClose:uu,disabled:z4??!E,restoreFocus:$4??(!!E&&au),captureEscapeKeyboardEvent:!1,mutationObserverOptions:Lu,children:e.jsx(bu,{"aria-label":C4,role:"dialog",value:l,onChange:nu,enableTime:u,disablePast:n,disableFuture:s,shouldDisableDate:a,onDoneButtonClick:lu,getRootRef:W4,doneButtonText:v,DoneButton:c4,disablePickers:m4,changeHoursLabel:z,changeMinutesLabel:U,prevMonthLabel:A4,nextMonthLabel:h4,changeMonthLabel:Y,changeYearLabel:$,showNeighboringMonth:y4,renderDayContent:L4,size:V4,viewDate:q4,onHeaderChange:x4,onNextMonth:I4,onPrevMonth:R4,prevMonthIcon:T4,nextMonthIcon:M4,minDateTime:V,maxDateTime:F,...k4})})})]})};try{F4.displayName="DateInput",F4.__docgenInfo={description:"",displayName:"DateInput",props:{calendarTestsProps:{defaultValue:null,description:"Передает атрибуты `data-testid` для интерактивных элементов в календаре.",name:"calendarTestsProps",required:!1,type:{name:"CalendarTestsProps"}},calendarPlacement:{defaultValue:{value:"bottom-start"},description:"Расположение календаря относительно поля ввода.",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"left"'},{value:'"right"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"Автоматически закрывать календарь при изменениях.",name:"closeOnChange",required:!1,type:{name:"boolean"}},calendarLabel:{defaultValue:{value:"Календарь"},description:"`aria-label` для календаря.",name:"calendarLabel",required:!1,type:{name:"string"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"Label для кнопки очистки. Делает доступным для ассистивных технологий.",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"Label для кнопки открытия календаря. Делает доступным для ассистивных технологий.",name:"showCalendarLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"Отключение открытия календаря.",name:"disableCalendar",required:!1,type:{name:"boolean"}},onCalendarOpenChanged:{defaultValue:null,description:"Обработчик изменения состояния открытия календаря.",name:"onCalendarOpenChanged",required:!1,type:{name:"((opened: boolean) => void)"}},changeDayLabel:{defaultValue:{value:"День"},description:"`aria-label` для поля изменения дня.",name:"changeDayLabel",required:!1,type:{name:"string"}},onApply:{defaultValue:null,description:'Обработчик нажатия на кнопку `"Done"`. Используется совместно с флагом `enableTime`.',name:"onApply",required:!1,type:{name:"((value?: Date) => void)"}},renderCustomValue:{defaultValue:null,description:`Функция для кастомного форматирования отображаемого значения даты.
Позволяет переопределить стандартное отображение даты и вернуть собственное представление.`,name:"renderCustomValue",required:!1,type:{name:"((date: Date) => ReactNode)"}},timezone:{defaultValue:null,description:"Часовой пояс для отображения даты.",name:"timezone",required:!1,type:{name:"string"}},accessible:{defaultValue:null,description:`Включает режим в котором DateInput доступен
для ассистивных технологий.
В этом режиме:
- календарь больше не открывает при фокусе на DateInput;
- иконка календаря видна всегда, чтобы пользователи
ассистивных технологий могли открыть календарь по клику на иконку;
- календарь при открытии получает фокус, клавиатурный
фокус зациклен и не выходит за пределы календаря пока календарь не закрыт.`,name:"accessible",required:!1,type:{name:"boolean"}},disableFocusTrap:{defaultValue:null,description:"Позволяет отключить захват фокуса при появлении календаря.",name:"disableFocusTrap",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"Размер календаря.",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},value:{defaultValue:null,description:"Текущая выбранная дата.",name:"value",required:!1,type:{name:"Date | null"}},defaultValue:{defaultValue:null,description:"Начальная дата при монтировании.",name:"defaultValue",required:!1,type:{name:"Date | null"}},onChange:{defaultValue:null,description:"Обработчик изменения выбранной даты.",name:"onChange",required:!1,type:{name:"((value?: Date) => void)"}},shouldDisableDate:{defaultValue:null,description:"Функция для проверки запрета выбора даты.",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},disablePast:{defaultValue:null,description:"Запрещает выбор даты в прошлом.\nПрименяется, если не заданы `shouldDisableDate` и `disableFuture`.",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"Запрещает выбор даты в будущем.\nПрименяется, если не задано `shouldDisableDate`.",name:"disableFuture",required:!1,type:{name:"boolean"}},weekStartsOn:{defaultValue:null,description:"День недели, с которого начинается неделя.",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"Отключает селекторы выбора месяца/года.",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"`aria-label` для кнопки предыдущего месяца.",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"`aria-label` для кнопки следующего месяца.",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Месяц"},description:"`aria-label` для селектора месяца.",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Год"},description:"`aria-label` для селектора года.",name:"changeYearLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки предыдущего месяца.",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"Кастомная иконка для кнопки следующего месяца.",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},renderDayContent:{defaultValue:null,description:"Кастомизация отображения содержимого дня.",name:"renderDayContent",required:!1,type:{name:"((day: Date) => ReactNode)"}},enableTime:{defaultValue:null,description:"Включает выбор времени.",name:"enableTime",required:!1,type:{name:"boolean"}},doneButtonText:{defaultValue:null,description:'Текст отображаемый в кнопке `"Done"`.',name:"doneButtonText",required:!1,type:{name:"string"}},DoneButton:{defaultValue:null,description:'Кастомное отображение кнопки `"Done"`.',name:"DoneButton",required:!1,type:{name:"ComponentType<ButtonProps>"}},changeHoursLabel:{defaultValue:{value:"Час"},description:"Текст выпадающего списка с выбором часов. Делает его доступным для ассистивных технологий.",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Минута"},description:"Текст выпадающего списка с выбором минут. Делает его доступным для ассистивных технологий.",name:"changeMinutesLabel",required:!1,type:{name:"string"}},showNeighboringMonth:{defaultValue:null,description:"Показывать дни соседних месяцев.",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},viewDate:{defaultValue:null,description:`Дата отображаемого месяца.
При использовании обновление даты должно происходить вне компонента.`,name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Обработчик изменения даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},minDateTime:{defaultValue:null,description:"Минимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"minDateTime",required:!1,type:{name:"Date"}},maxDateTime:{defaultValue:null,description:"Максимальные дата и время, которые можно выбрать.\nПрименяется, если не заданы `shouldDisableDate` и `disablePast`/`disableFuture`.",name:"maxDateTime",required:!1,type:{name:"Date"}},restoreFocus:{defaultValue:{value:"true"},description:"",name:"restoreFocus",required:!1,type:{name:"boolean | (() => boolean | HTMLElement)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"Статус отображения поля в форме.",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},mode:{defaultValue:null,description:"Режим отображения.\n\n- `default` — показывает фон, обводку и, при наличии, текст-подсказку.\n- `plain` — показывает только текст-подсказку.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkui.io/components/icon-button), если вам нужна иконка, реагируюущая на нажатие.",name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkui.io/components/icon-button), если вам нужна иконка, реагирующая на нажатие.",name:"before",required:!1,type:{name:"ReactNode"}},beforeAlign:{defaultValue:null,description:"Вертикальное выравнивание иконки слева.",name:"beforeAlign",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"center"'},{value:'"end"'}]}},afterAlign:{defaultValue:null,description:"Вертикальное выравнивание иконки справа.",name:"afterAlign",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"center"'},{value:'"end"'}]}},dayFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода дня.",name:"dayFieldTestId",required:!1,type:{name:"string"}},monthFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода месяца.",name:"monthFieldTestId",required:!1,type:{name:"string"}},yearFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода года.",name:"yearFieldTestId",required:!1,type:{name:"string"}},hourFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода часа.",name:"hourFieldTestId",required:!1,type:{name:"string"}},minuteFieldTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для поля ввода минут.",name:"minuteFieldTestId",required:!1,type:{name:"string"}},showCalendarButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки показа календаря.",name:"showCalendarButtonTestId",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки даты.",name:"clearButtonTestId",required:!1,type:{name:"string"}}}}}catch{}export{F4 as D};
