import{i as Z,r as s,k as P,u as uu,c as eu,W as tu,l as au,j as e,h as y,n as nu}from"./iframe-F_0bvJrc.js";import{h as ou}from"./react_utils-CSZjvU4X.js";import{u as su}from"./useBooleanState-Bze2nNFK.js";import{u as lu}from"./useConfigDirection-poWhsvcV.js";import{u as iu}from"./useNativeFormResetListener-C11ImeZp.js";import{c as cu}from"./callMultiple-ChqatQlo.js";import{B as b}from"./Button-OQORbYpv.js";import{I as V}from"./IconButton-BHFFi_8a.js";import{H as ru}from"./Headline-B-xJiW6B.js";import{V as x}from"./VisuallyHidden-CRrL_L2y.js";import{I as du}from"./clear_16-BPlmX8ts.js";import{I as fu}from"./cancel_24-CEwNt985.js";import{I as mu}from"./search_outline_16-4WqwHCSi.js";const pu="_host_ewo5i_1",Eu="_rtl_ewo5i_11",_u="_withPadding_ewo5i_15",hu="_sizeYCompact_ewo5i_24",Au="_sizeYNone_ewo5i_29",Bu="_field_ewo5i_34",Fu="_label_ewo5i_57",vu="_input_ewo5i_64",Cu="_nativeInput_ewo5i_76",Du="_hasAfter_ewo5i_106",Iu="_disabled_ewo5i_111",yu="_controls_ewo5i_131",bu="_hasIcon_ewo5i_144",Vu="_hasValue_ewo5i_156",xu="_icon_ewo5i_160",wu="_after_ewo5i_174",gu="_focused_ewo5i_185",Nu="_afterTextClip_ewo5i_204",Ru="_findButton_ewo5i_211",u={host:pu,rtl:Eu,withPadding:_u,sizeYCompact:hu,sizeYNone:Au,field:Bu,label:Fu,input:vu,nativeInput:Cu,hasAfter:Du,disabled:Iu,controls:yu,hasIcon:bu,hasValue:Vu,icon:xu,after:wu,focused:gu,afterTextClip:Nu,findButton:Ru},w=({id:i,before:g=e.jsx(mu,{}),className:N,placeholder:_="Поиск",after:h="Отмена",getRef:R,icon:o,onIconClick:A,style:j,autoComplete:T="off",onChange:q,iconLabel:S,clearLabel:k="Очистить",clearButtonTestId:z,noPadding:M,getRootRef:H,findButtonText:L="Найти",findButtonTestId:Y,onFindButtonClick:c,hideClearButton:B,...t})=>{const O=lu()==="rtl",n=Z(R),{value:W,setTrue:r,setFalse:d}=su(!1),$=s.useId(),F=i||`search-${$}`,[f,m]=s.useState(()=>!!(t.value||t.defaultValue)),G=a=>m(!!a.currentTarget.value),{sizeY:v="none"}=P(),{sizeY:p}=uu(),C=eu(),D=C==="ios"&&ou(h),J=a=>{r(),t.onFocus&&t.onFocus(a)},K=a=>{d(),t.onBlur&&t.onBlur(a)},l=s.useCallback(()=>{Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")?.set?.call(n.current,"");const E=new Event("input",{bubbles:!0});n.current?.dispatchEvent(E)},[n]),Q=s.useCallback(a=>A?.(a),[A]),U=s.useCallback(a=>{a.preventDefault(),n.current?.focus(),tu()&&l()},[n,l]);au(()=>{t.value!==void 0&&m(!!t.value)},[t.value]),iu(n,()=>{m(!!t.defaultValue)});const I=(a,E={})=>e.jsxs(V,{hoverMode:"opacity",onPointerDown:Q,className:u.icon,onFocus:r,onBlur:d,onClick:nu,...E,children:[e.jsx(x,{children:S}),a]}),X=!!(o||!B||p.compact&&c);return e.jsxs("div",{className:y("vkuiInternalSearch",u.host,v==="none"&&u.sizeYNone,v==="compact"&&u.sizeYCompact,W&&u.focused,f&&u.hasValue,D&&u.hasAfter,o&&u.hasIcon,t.disabled&&u.disabled,!M&&u.withPadding,O&&u.rtl,N),ref:H,style:j,children:[e.jsxs("div",{className:u.field,children:[e.jsx("label",{htmlFor:F,className:u.label,children:_}),e.jsxs("div",{className:u.input,children:[g,e.jsx(ru,{Component:"input",type:"search",level:"1",weight:"3",...t,id:F,placeholder:_,autoComplete:T,getRootRef:n,className:u.nativeInput,onFocus:J,onBlur:K,onChange:cu(q,G)})]}),X&&e.jsxs("div",{className:u.controls,children:[o&&(typeof o=="function"?o(I):I(o)),!B&&e.jsxs(V,{hoverMode:"opacity",onPointerDown:U,onClick:l,className:u.icon,tabIndex:f?void 0:-1,disabled:t.disabled,"data-testid":z,children:[e.jsx(x,{children:k}),C==="ios"?e.jsx(du,{}):e.jsx(fu,{})]}),p.compact&&c&&e.jsx(b,{mode:"primary",size:"m",className:y(u.findButton,p.compact.className),focusVisibleMode:"inside",onClick:c,tabIndex:f?void 0:-1,"data-testid":Y,children:L})]})]}),D&&e.jsx("div",{className:u.after,children:e.jsx(b,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:l,onFocus:r,onBlur:d,children:e.jsx("span",{className:u.afterTextClip,children:h})})})]})};try{w.displayName="Search",w.__docgenInfo={description:"",displayName:"Search",props:{after:{defaultValue:{value:"Отмена"},description:'Only iOS. Текст кнопки "отмена", которая чистит текстовое поле и убирает фокус.',name:"after",required:!1,type:{name:"ReactNode"}},before:{defaultValue:{value:"<Icon16SearchOutline />"},description:"Контент, отображаемый перед полем ввода.",name:"before",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка поиска. Может быть React-элементом или функцией, возвращающей элемент.",name:"icon",required:!1,type:{name:"ReactNode | ((renderFn: RenderIconButtonFn) => ReactNode)"}},onIconClick:{defaultValue:null,description:"Обработчик нажатия на иконку поиска.",name:"onIconClick",required:!1,type:{name:"PointerEventHandler<HTMLElement>"}},defaultValue:{defaultValue:null,description:"Значение поля ввода по умолчанию.",name:"defaultValue",required:!1,type:{name:"string"}},iconLabel:{defaultValue:null,description:"Текст для скринридеров, описывающий иконку поиска.",name:"iconLabel",required:!1,type:{name:"string"}},clearLabel:{defaultValue:{value:"Очистить"},description:"Текст для скринридеров, описывающий кнопку очистки.",name:"clearLabel",required:!1,type:{name:"string"}},clearButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки очистки.",name:"clearButtonTestId",required:!1,type:{name:"string"}},noPadding:{defaultValue:null,description:"Удаляет отступы у компонента.",name:"noPadding",required:!1,type:{name:"boolean"}},findButtonText:{defaultValue:{value:"Найти"},description:"Текст для кнопки Найти.",name:"findButtonText",required:!1,type:{name:"string"}},onFindButtonClick:{defaultValue:null,description:'Обработчик, при нажатии на кнопку "Найти".',name:"onFindButtonClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},findButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки поиска.",name:"findButtonTestId",required:!1,type:{name:"string"}},hideClearButton:{defaultValue:null,description:"Скрывает кнопку очистки.",name:"hideClearButton",required:!1,type:{name:"boolean"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLInputElement>"}}}}}catch{}export{w as S};
