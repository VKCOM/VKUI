import{j as e,h as l,q as b,r as _,c as h,R as C}from"./iframe-DJZLDe2v.js";import{g as x}from"./children-Dhk2DcjP.js";import{I as A}from"./IconButton-CMOFK_Ua.js";import{u as j}from"./useConfigDirection-Codxpgcm.js";import{u as N}from"./useGlobalEventListener-BxOtw4jo.js";import{T as V}from"./Tappable-CY0nsltg.js";import{V as q}from"./VisuallyHidden-D0jMNSCO.js";import{I as S}from"./cancel_24-rN7d2YWh.js";const T="_content_1cllf_1",k="_withPadding_1cllf_16",P="_rtl_1cllf_20",M="_action_1cllf_24",O="_ios_1cllf_32",w="_indentation_1cllf_32",H="_alignStart_1cllf_41",L="_remove_1cllf_56",W="_removeIn_1cllf_71",G="_toggle_1cllf_79",z="_toggleIn_1cllf_88",J="_indent_1cllf_32",K="_offset_1cllf_139",u={content:T,withPadding:k,rtl:P,action:M,ios:O,indentation:w,alignStart:H,remove:L,removeIn:W,toggle:G,toggleIn:z,indent:J,offset:K},Q=({onRemove:t,removePlaceholder:n,removePlaceholderString:o,children:s,toggleButtonTestId:i,removeButtonTestId:m,disabled:d})=>{const E=j()==="rtl",{window:p}=b(),r=_.useRef(null),c=_.useRef(!0),[a,f]=_.useState(0);N(p,"click",()=>{a>0&&f(0)},{capture:!0});const R=()=>{a>0?r?.current?.focus():c.current=!0},B=y=>{if(y.stopPropagation(),!r.current)return;const{offsetWidth:I}=r.current;c.current=!1,f(I)},D={"--vkui_internal_Removable_remove_offset":String(a??0)};return e.jsxs("div",{className:l(u.content,E&&u.rtl,"vkuiInternalRemovable__content"),style:D,onTransitionEnd:R,children:[e.jsxs(A,{hasActive:!1,hasHover:!1,className:l(u.action,u.toggle,"vkuiInternalRemovable__action"),onClick:B,disabled:a>0||d,"data-testid":i,children:[e.jsx(q,{children:o}),e.jsx("i",{className:u.toggleIn,role:"presentation"})]}),typeof s=="function"?s({isRemoving:a>0}):s,e.jsx("span",{className:u.offset,"aria-hidden":!0}),e.jsx(V,{Component:"button",hasActive:!1,hasHover:!1,disabled:c.current,getRootRef:r,className:u.remove,onClick:t,"data-testid":m,children:e.jsx("span",{className:u.removeIn,children:n})})]})},U=({children:t})=>e.jsxs("div",{className:l(u.content,"vkuiInternalRemovable__content"),children:[e.jsx("div",{className:l(u.action,u.indentation,"vkuiInternalRemovable__action")}),typeof t=="function"?t({isRemoving:!1}):t,e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),F=({indent:t,children:n,...o})=>t?e.jsx(U,{children:n}):e.jsx(Q,{...o,children:n});try{F.displayName="RemovableIos",F.__docgenInfo={description:"",displayName:"RemovableIos",props:{indent:{defaultValue:null,description:"",name:"indent",required:!1,type:{name:"boolean"}},removePlaceholderString:{defaultValue:null,description:"",name:"removePlaceholderString",required:!1,type:{name:"string"}},removePlaceholder:{defaultValue:null,description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const X=({noPadding:t,children:n,removePlaceholderString:o,onRemoveClick:s,removeButtonTestId:i,disabled:m,indent:d})=>e.jsxs("div",{className:l(u.content,!t&&u.withPadding,"vkuiInternalRemovable__content"),children:[typeof n=="function"?n({isRemoving:!1}):n,d?e.jsx("div",{className:l(u.action,u.indentation)}):e.jsx(A,{activeMode:"opacity",hoverMode:"opacity",className:l(u.action,"vkuiInternalRemovable__action"),onClick:s,label:o,"data-testid":i,disabled:m,children:e.jsx(S,{role:"presentation"})}),e.jsx("span",{className:u.offset,"aria-hidden":!0})]}),g=({children:t,onRemove:n,removePlaceholder:o="Удалить",align:s="center",indent:i=!1,toggleButtonTestId:m,removeButtonTestId:d,disabled:v,noPadding:E,...p})=>{const r=h(),c=f=>{f.preventDefault(),n?.(f)},a=x(o);return e.jsx(C,{...p,baseClassName:l(r==="ios"&&u.ios,s==="start"&&u.alignStart,i&&u.indent),children:r==="ios"?e.jsx(F,{onRemove:c,removePlaceholder:o,removePlaceholderString:a,toggleButtonTestId:m,removeButtonTestId:d,disabled:v,indent:i,children:t}):e.jsx(X,{onRemoveClick:c,noPadding:E,removeButtonTestId:d,removePlaceholderString:a,disabled:v,indent:i,children:t})})};try{g.displayName="Removable",g.__docgenInfo={description:"",displayName:"Removable",props:{align:{defaultValue:{value:"center"},description:"Расположение кнопки удаления.",name:"align",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"center"'}]}},indent:{defaultValue:{value:"false"},description:`Скрывает кнопку, но оставляет отступ.
@since 5.4.0`,name:"indent",required:!1,type:{name:"boolean"}},noPadding:{defaultValue:null,description:"Убирает базовые отступы для базовой платформы.",name:"noPadding",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"Содержимое. Можно передать функцию для отрисовки.",name:"children",required:!1,type:{name:"ReactNode | ((renderProps: RemovableIosRenderProps) => ReactNode)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},removePlaceholder:{defaultValue:{value:"Удалить"},description:"Текст кнопки удаления ячейки. Визуально скрыт везде, кроме iOS. На iOS появляется в выезжающей кнопке для удаления ячейки.",name:"removePlaceholder",required:!1,type:{name:"ReactNode"}},onRemove:{defaultValue:null,description:"Обработчик, срабатывающий при нажатии на контрол удаления.",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>, rootEl?: HTMLElement | null) => void)"}},toggleButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки, которая активирует кнопку удаления (iOS only).",name:"toggleButtonTestId",required:!1,type:{name:"string"}},removeButtonTestId:{defaultValue:null,description:"Передает атрибут `data-testid` для кнопки удаления.",name:"removeButtonTestId",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Блокировка взаимодействия с компонентом.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}export{g as R};
