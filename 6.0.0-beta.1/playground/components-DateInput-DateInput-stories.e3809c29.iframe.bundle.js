"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[7867],{"./src/components/DateInput/DateInput.stories.tsx":(e,n,t)=>{t.r(n),t.d(n,{Playground:()=>S,__namedExportsOrder:()=>q,default:()=>R});var a,l,r,o=t("../../node_modules/react/jsx-runtime.js"),u=t("../../node_modules/react/index.js"),i=t("./src/storybook/constants.ts"),s=t("../../node_modules/@vkontakte/icons/dist/es6/16/clear_16.js"),c=t("../../node_modules/@vkontakte/icons/dist/es6/20/calendar_outline_20.js"),d=t("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),p=t("./src/hooks/useAdaptivity.ts"),b=t("./src/hooks/useDateInput.ts"),m=t("./src/hooks/useExternRef.ts"),v=t("./src/lib/callMultiple.ts"),h=t("./src/lib/date.ts"),f=t("./src/components/Calendar/Calendar.tsx"),g=t("./src/components/FormField/FormField.tsx"),y=t("./src/components/IconButton/IconButton.tsx"),O=t("./src/components/InputLike/InputLike.tsx"),D=t("./src/components/InputLike/InputLikeDivider.tsx"),x=t("./src/components/Popper/Popper.tsx"),j=t("./src/components/Typography/Text/Text.tsx");t("./src/components/InputLike/InputLike.module.css");var M=t("./src/components/DateInput/DateInput.module.css");function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var L=k({none:M.Z["DateInput--sizeY-none"]},"compact",M.Z["DateInput--sizeY-compact"]),I=function(e){var n=2,t=1,a=0;switch(e){case 0:a=31;break;case 1:a=12;break;case 2:a=2100,t=1900,n=4;break;case 3:a=23;break;case 4:a=59}return{length:n,min:t,max:a}},P=function(e){var n=["","","","",""];return e&&(n[0]=String(e.getDate()).padStart(2,"0"),n[1]=String(e.getMonth()+1).padStart(2,"0"),n[2]=String(e.getFullYear()).padStart(4,"0"),n[3]=String(e.getHours()).padStart(2,"0"),n[4]=String(e.getMinutes()).padStart(2,"0")),n},w=function(e){var n=e.enableTime,t=e.shouldDisableDate,a=e.disableFuture,l=e.disablePast,r=e.value,i=e.onChange,w=e.calendarPlacement,C=e.style,V=e.className,R=e.doneButtonText,S=e.closeOnChange,q=void 0===S||S,F=e.disablePickers,E=e.getRootRef,_=e.name,Y=e.autoFocus,N=e.disabled,T=e.onClick,B=e.onFocus,H=e.prevMonthLabel,z=e.nextMonthLabel,A=e.showNeighboringMonth,K=e.size,Z=e.changeMonthLabel,U=void 0===Z?"Изменить месяц":Z,W=e.changeYearLabel,Q=void 0===W?"Изменить год":W,G=e.changeDayLabel,J=void 0===G?"Изменить день":G,X=e.changeHoursLabel,$=void 0===X?"Изменить час":X,ee=e.changeMinutesLabel,en=void 0===ee?"Изменить минуту":ee,et=e.clearFieldLabel,ea=e.showCalendarLabel,el=e.viewDate,er=e.onHeaderChange,eo=e.onNextMonth,eu=e.onPrevMonth,ei=e.prevMonthIcon,es=e.nextMonthIcon,ec=e.disableCalendar,ed=function(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}(e,["enableTime","shouldDisableDate","disableFuture","disablePast","value","onChange","calendarPlacement","style","className","doneButtonText","closeOnChange","disablePickers","getRootRef","name","autoFocus","disabled","onClick","onFocus","prevMonthLabel","nextMonthLabel","showNeighboringMonth","size","changeMonthLabel","changeYearLabel","changeDayLabel","changeHoursLabel","changeMinutesLabel","clearFieldLabel","showCalendarLabel","viewDate","onHeaderChange","onNextMonth","onPrevMonth","prevMonthIcon","nextMonthIcon","disableCalendar"]),ep=u.useRef(null),eb=u.useRef(null),em=u.useRef(null),ev=u.useRef(null),eh=u.useRef(null),ef=n?4:2,eg=u.useCallback(function(e){for(var t=0;t<=ef;t+=1)if(e[t].length<I(t).length)return;var a="".concat(e[0],".").concat(e[1],".").concat(e[2]),l="DD.MM.YYYY";n&&(a+=" ".concat(e[3],":").concat(e[4]),l+=" HH:mm"),(0,h.BD)(a,l)&&(null==i||i((0,h.Qc)(a,l,null!=r?r:new Date)))},[n,ef,i,r]),ey=u.useMemo(function(){return[ep,eb,em,ev,eh]},[ep,eb,em,ev,eh]),eO=(0,b.S)({maxElement:ef,refs:ey,autoFocus:Y,disabled:N,elementsConfig:I,onChange:i,onInternalValueChange:eg,getInternalValue:P,value:r}),eD=eO.rootRef,ex=eO.calendarRef,ej=eO.open,eM=eO.openCalendar,ek=eO.closeCalendar,eL=eO.internalValue,eI=eO.handleKeyDown,eP=eO.setFocusedElement,ew=eO.handleFieldEnter,eC=eO.clear,eV=eO.removeFocusFromField,eR=(0,p.g)().sizeY,eS=void 0===eR?"none":eR,eq=(0,m.Q)(eD,E),eF=u.useCallback(function(e){null==i||i(e),q&&!n&&eV()},[i,eV,q,n]);return(0,o.jsxs)(g.W,function(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){k(e,n,t[n])})}return e}({style:C,className:(0,d.AK)("regular"!==eS&&L[eS],V),getRootRef:eq,after:r?(0,o.jsx)(y.h,{hoverMode:"opacity",label:void 0===et?"Очистить поле":et,onClick:eC,children:(0,o.jsx)(s.l,{})}):(0,o.jsx)(y.h,{hoverMode:"opacity",label:void 0===ea?"Показать календарь":ea,onClick:eM,children:(0,o.jsx)(c.D,{})}),disabled:N,onClick:(0,v.C)(ew,T),onFocus:(0,v.C)(ew,B)},ed),{children:[(0,o.jsx)("input",{type:"hidden",name:_,value:r?(0,h.WU)(r,n?"DD.MM.YYYYTHH:mm":"DD.MM.YYYY"):""}),(0,o.jsxs)(j.x,{className:M.Z.DateInput__input,onKeyDown:eI,children:[(0,o.jsx)(O.E,{length:2,getRootRef:ep,index:0,onElementSelect:eP,value:eL[0],label:J}),(0,o.jsx)(D.q,{children:"."}),(0,o.jsx)(O.E,{length:2,getRootRef:eb,index:1,onElementSelect:eP,value:eL[1],label:U}),(0,o.jsx)(D.q,{children:"."}),(0,o.jsx)(O.E,{length:4,getRootRef:em,index:2,onElementSelect:eP,value:eL[2],label:Q}),n&&(0,o.jsxs)(u.Fragment,{children:[(0,o.jsx)(D.q,{className:M.Z["DateInput__input--time-divider"],children:" "}),(0,o.jsx)(O.E,{length:2,getRootRef:ev,index:3,onElementSelect:eP,value:eL[3],label:$}),(0,o.jsx)(D.q,{children:":"}),(0,o.jsx)(O.E,{length:2,getRootRef:eh,index:4,onElementSelect:eP,value:eL[4],label:en})]})]}),ej&&!(void 0!==ec&&ec)&&(0,o.jsx)(x.r,{targetRef:eD,offsetByMainAxis:8,placement:void 0===w?"bottom-start":w,children:(0,o.jsx)(f.f,{value:r,onChange:eF,enableTime:n,disablePast:l,disableFuture:a,shouldDisableDate:t,onClose:ek,getRootRef:ex,doneButtonText:R,disablePickers:F,changeHoursLabel:$,changeMinutesLabel:en,prevMonthLabel:void 0===H?"Предыдущий месяц":H,nextMonthLabel:void 0===z?"Следующий месяц":z,changeMonthLabel:U,changeYearLabel:Q,changeDayLabel:J,showNeighboringMonth:A,size:K,viewDate:el,onHeaderChange:er,onNextMonth:eo,onPrevMonth:eu,prevMonthIcon:ei,nextMonthIcon:es})})]}))};try{w.displayName="DateInput",w.__docgenInfo={description:"",displayName:"DateInput",props:{calendarPlacement:{defaultValue:{value:"bottom-start"},description:"",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"",name:"closeOnChange",required:!1,type:{name:"boolean"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"",name:"showCalendarLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"",name:"disableCalendar",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Date"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: Date) => void)"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},disablePast:{defaultValue:null,description:"",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},weekStartsOn:{defaultValue:null,description:"",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"",name:"changeYearLabel",required:!1,type:{name:"string"}},changeDayLabel:{defaultValue:{value:"Изменить день"},description:"",name:"changeDayLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},enableTime:{defaultValue:null,description:"",name:"enableTime",required:!1,type:{name:"boolean"}},doneButtonText:{defaultValue:null,description:"",name:"doneButtonText",required:!1,type:{name:"string"}},changeHoursLabel:{defaultValue:{value:"Изменить час"},description:"",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Изменить минуту"},description:"",name:"changeMinutesLabel",required:!1,type:{name:"string"}},showNeighboringMonth:{defaultValue:null,description:"",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},viewDate:{defaultValue:null,description:"Дата отображаемого месяца.\nПри использовании обновление даты должно происходить вне компонента.",name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Изменение даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"after",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateInput/DateInput.tsx#DateInput"]={docgenInfo:w.__docgenInfo,name:"DateInput",path:"src/components/DateInput/DateInput.tsx#DateInput"})}catch(e){}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){!function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}(e,n,t[n])})}return e}function V(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}let R={title:"Forms/DateInput",component:w,parameters:C({},i.tW,i.nB),argTypes:{value:{control:{type:"date"}}}};var S={render:function(e){var n=e.value,t=function(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}(e,["value"]),a=n?new Date(n):n;return(0,o.jsx)(w,C({value:a},t))}};S.parameters=V(C({},S.parameters),{docs:V(C({},null===(a=S.parameters)||void 0===a?void 0:a.docs),{source:C({originalSource:"{\n  render: ({\n    value,\n    ...args\n  }) => {\n    const parsedValue = value ? new Date(value) : value;\n    return <DateInput value={parsedValue} {...args} />;\n  }\n}"},null===(r=S.parameters)||void 0===r?void 0:null===(l=r.docs)||void 0===l?void 0:l.source)})});let q=["Playground"]}}]);