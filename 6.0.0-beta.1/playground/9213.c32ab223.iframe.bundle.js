"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[9213],{"../../node_modules/@vkontakte/icons/dist/es6/16/spinner_16.js":(e,t,n)=>{n.d(t,{P:()=>r});var r=(0,n("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon16Spinner","spinner_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="spinner_16"><path fill-rule="evenodd" d="M8 3.25a4.75 4.75 0 0 0-4.149 7.065.75.75 0 1 1-1.31.732A6.25 6.25 0 1 1 8 14.25a.75.75 0 0 1 .001-1.5 4.75 4.75 0 1 0 0-9.5Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},"../../node_modules/@vkontakte/icons/dist/es6/24/spinner_24.js":(e,t,n)=>{n.d(t,{h:()=>r});var r=(0,n("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon24Spinner","spinner_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="spinner_24"><path fill="currentColor" fill-rule="evenodd" d="M16.394 5.077A8.2 8.2 0 0 0 4.58 15.49a.9.9 0 0 1-1.628.767A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.394-15.123" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},"../../node_modules/@vkontakte/icons/dist/es6/32/spinner_32.js":(e,t,n)=>{n.d(t,{X:()=>r});var r=(0,n("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon32Spinner","spinner_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path fill="currentColor" d="M16 32a1.5 1.5 0 0 1 0-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 1 1 .986 21.54 15.97 15.97 0 0 1 0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16" /></symbol>',32,32,!1,void 0)},"../../node_modules/@vkontakte/icons/dist/es6/44/spinner_44.js":(e,t,n)=>{n.d(t,{C:()=>r});var r=(0,n("../../node_modules/@vkontakte/icons-sprite/dist/index.js").De)("Icon44Spinner","spinner_44","0 0 44 44",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path fill="currentColor" d="M22 44a1.5 1.5 0 0 1 0-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 1 1-2.825 1.01A21.964 21.964 0 0 1 0 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22" /></symbol>',44,44,!1,void 0)},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/styles/animationFades.module.css":(e,t,n)=>{n.d(t,{Z:()=>u});var r=n("../../node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(r),i=n("../../node_modules/css-loader/dist/runtime/api.js"),s=n.n(i)()(o());s.push([e.id,"@media (prefers-reduced-motion:no-preference){.-anim-fade-in--__Eff{animation:anim-fade-in--xxsS4 .1s ease-in forwards}.-anim-fade-out--j9FS6{animation:anim-fade-out--JWrSu .1s ease-out forwards}}@keyframes anim-fade-in--xxsS4{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes anim-fade-out--JWrSu{0%{opacity:1}to{opacity:0}}",""]),s.locals={"-anim-fade-in":"-anim-fade-in--__Eff","anim-fade-in":"anim-fade-in--xxsS4","-anim-fade-out":"-anim-fade-out--j9FS6","anim-fade-out":"anim-fade-out--JWrSu"};let u=s},"./src/hooks/useEffectDev.ts":(e,t,n)=>{n.d(t,{i:()=>r}),n("../../node_modules/react/index.js");var r=n("../../node_modules/@vkontakte/vkjs/lib/es6/index.js").ZT},"./src/hooks/useEnsuredControl.ts":(e,t,n)=>{n.d(t,{V:()=>a,q:()=>l});var r=n("../../node_modules/react/index.js"),o=n("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),i=n("./src/lib/useIsomorphicLayoutEffect.ts");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],s=!0,u=!1;try{for(o=o.call(e);!(s=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){u=!0,r=e}finally{try{s||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){var t=e.onChange,n=e.disabled,o=u(l(function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["onChange","disabled"])),2),i=o[0],s=o[1];return[i,r.useCallback(function(e){!n&&(s(e.target.value),t&&t(e))},[s,t,n])]}function l(e){var t=e.value,n=e.defaultValue,s=e.disabled,a=e.onChange,l=void 0!==t,c=u(r.useState(n),2),f=c[0],d=c[1],m=r.useRef();(0,i.L)(function(){m.current=t});var v=r.useCallback(function(e){!s&&((0,o.mf)(e)?l?a&&a(e(m.current)):d(function(t){var n=e(t);return a&&a(n),n}):(a&&a(e),l||d(e)))},[s,l,a]);return[l?t:f,v]}},"./src/hooks/useGlobalOnClickOutside.ts":(e,t,n)=>{n.d(t,{s:()=>u}),n("../../node_modules/react/index.js");var r=n("./src/lib/dom.tsx"),o=n("../../node_modules/@vkontakte/vkui-floating-ui/utils/dom/dist/floating-ui.utils.dom.esm.js"),i=n("./src/lib/useIsomorphicLayoutEffect.ts");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];var a=(0,r.NG)().document;(0,i.L)(function(){var t=n.some(function(e){return e&&null!==e.current});if(a&&t){var r=function(t){var r=t.target;(0,o.kK)(r)&&n.some(function(e){return e&&e.current&&e.current.contains(r)})||e(t)};return a.addEventListener("click",r,{passive:!0,capture:!0}),function(){a.removeEventListener("click",r,!0)}}},[a,e].concat(function(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n)))}},"./src/hooks/usePatchChildren.ts":(e,t,n)=>{n.d(t,{q:()=>d});var r=n("../../node_modules/react/index.js"),o=function(e,t){return"function"==typeof e[t]},i=function(e,t){var n=function(n){e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&o(e,n)&&o(t,n)&&(r[n]=function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];t[n].apply(this,o),e[n].apply(this,o)})},r={};for(var i in e)n(i);return r},s=n("./src/lib/utils.ts"),u=n("./src/lib/warnOnce.ts"),a=n("./src/hooks/useEffectDev.ts"),l=n("./src/hooks/useExternRef.ts");function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})}return e}var f=(0,u.O)("usePatchChildrenRef"),d=function(e,t,n){var o=(0,s.i6)(e),u=o&&(0,s.hg)(e),d=(0,l.Q)(u?e.ref:o?e.props.getRootRef:void 0,n),m=i(t||{},o?e.props:{}),v=u?c({ref:d},t,m):o?c({getRootRef:d},t,m):void 0;return(0,a.i)(function(){d.current||f("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента","error")},[o?e.type:null,d]),[d,o?r.cloneElement(e,v):e]}},"./src/lib/cssAnimation/fades.ts":(e,t,n)=>{n.d(t,{x:()=>p});var r=n("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=n.n(r),i=n("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),s=n.n(i),u=n("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),a=n.n(u),l=n("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),c=n.n(l),f=n("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),d=n.n(f),m=n("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/styles/animationFades.module.css"),v={attributes:{class:"vkui-style"}};v.setAttributes=c(),v.insert=a().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=d(),o()(m.Z,v);let y=m.Z&&m.Z.locals?m.Z.locals:void 0;var p={in:y["-anim-fade-in"],out:y["-anim-fade-out"]}},"./src/lib/floating/adapters.ts":(e,t,n)=>{n.d(t,{JO:()=>s});var r=n("../../node_modules/@vkontakte/vkui-floating-ui/dom/dist/floating-ui.dom.esm.js"),o=n("../../node_modules/@vkontakte/vkui-floating-ui/utils/dom/dist/floating-ui.utils.dom.esm.js"),i={ancestorScroll:!0,ancestorResize:!0,elementResize:!1,animationFrame:!1};function s(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,u=s.elementResize,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(s,["elementResize"]),l=(0,r.Me)(e,t,n,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})}return e}({},a),{elementResize:!1})),c=null;if(void 0!==u&&u){var f=!0;c=new MutationObserver(function(){f||n(),f=!1}),(0,o.Re)(e)&&c.observe(e,{childList:!0,subtree:!0}),c.observe(t,{childList:!0,subtree:!0})}return function(){null!==c&&(c.disconnect(),c=null),l()}}},"./src/lib/floating/useFloatingMiddlewaresBootstrap/index.ts":(e,t,n)=>{n.d(t,{w:()=>a});var r=n("../../node_modules/react/index.js"),o=n("../../node_modules/@vkontakte/vkui-floating-ui/core/dist/floating-ui.core.esm.js"),i=n("../../node_modules/@vkontakte/vkui-floating-ui/react-dom/dist/floating-ui.react-dom.esm.js"),s=n("./src/lib/floating/functions.ts");function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=function(e){var t=e.placement,n=void 0===t?"bottom-start":t,a=e.arrowRef,l=void 0===a?null:a,c=e.arrow,f=e.arrowHeight,d=e.arrowPadding,m=e.sameWidth,v=e.offsetByMainAxis,y=void 0===v?0:v,p=e.offsetByCrossAxis,b=void 0===p?0:p,g=e.customMiddlewares,h=e.hideWhenReferenceHidden;return r.useMemo(function(){var e=(0,s.Nf)(n),t=[(0,o.cv)({crossAxis:b,mainAxis:c&&f?y+f:y})];return e?t.push((0,o.RR)({fallbackAxisSideDirection:"start"})):t.push((0,o.X5)({alignment:(0,s.kd)(n)})),t.push((0,o.uY)()),m&&t.push((0,o.dp)({apply:function(e){var t=e.rects;Object.assign(e.elements.floating.style,{width:"".concat(t.reference.width,"px")})}})),g&&t.push.apply(t,function(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(g)),c&&t.push((0,i.x7)({element:l,padding:d})),h&&t.push((0,o.Cp)()),{middlewares:t,strictPlacement:e?n:void 0}},[b,l,c,f,d,y,m,g,n,h])}},"./src/lib/floating/useFloatingWithInteractions/useFloatingWithInteractions.ts":(e,t,n)=>{n.d(t,{D:()=>h});var r=n("../../node_modules/react/index.js"),o=n("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),i=n("../../node_modules/@vkontakte/vkui-floating-ui/utils/dom/dist/floating-ui.utils.dom.esm.js"),s=n("./src/hooks/useEnsuredControl.ts"),u=n("./src/hooks/useGlobalOnClickOutside.ts"),a=n("./src/lib/useIsomorphicLayoutEffect.ts");function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e){var t=this,n=r.useRef(e);return(0,a.L)(function(){n.current=e}),r.useRef(function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return(0,n.current).apply(t,function(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r))}).current}var f=n("./src/lib/dom.tsx"),d=n("./src/lib/floating/adapters.ts"),m=n("../../node_modules/@vkontakte/vkui-floating-ui/react-dom/dist/floating-ui.react-dom.esm.js"),v=n("./src/lib/floating/functions.ts");function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],s=!0,u=!1;try{for(o=o.call(e);!(s=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){u=!0,r=e}finally{try{s||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||b(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}}var g=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.JO.apply(void 0,(function(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()})(t).concat([{elementResize:!0}]))},h=function(e){var t=e.trigger,n=e.placement,l=e.middlewares,d=e.hoverDelay,y=void 0===d?0:d,b=e.closeAfterClick,h=e.disabled,k=void 0!==h&&h,j=e.disableInteractive,w=void 0!==j&&j,O=e.disableCloseOnClickOutside,S=e.disableCloseOnEscKey,A=e.defaultShown,_=e.shown,x=e.onShownChange,C=r.useMemo(function(){return void 0!==_?{shown:_}:void 0},[_]),E=p((0,s.q)({value:C,disabled:k,defaultValue:{shown:void 0!==A&&A},onChange:c(function(e){var t=e.shown,n=e.reason;x&&x(t,n)})}),2),I=E[0],P=E[1],R=p(r.useState(function(){return I.shown}),2),M=R[0],D=R[1],L=p(r.useState(!1),2),F=L[0],T=L[1],B=r.useRef(!1),W=r.useRef(!1),Z=r.useRef(!1),z=r.useRef(),H=k||void 0!==O&&O||F||!I.shown,J=function(e){return("string"==typeof e?[e]:e).reduce(function(e,t){switch(t){case"click":return e.triggerOnClick=!0,e;case"hover":return e.triggerOnHover=!0,e;case"focus":return e.triggerOnFocus=!0,e;case"manual":return e}},{triggerOnFocus:!1,triggerOnClick:!1,triggerOnHover:!1})}(void 0===t?"click":t),U=J.triggerOnFocus,$=J.triggerOnClick,q=J.triggerOnHover,G=(0,m.YF)({strategy:"fixed",placement:void 0===n?"bottom":n,middleware:l,whileElementsMounted:g}),K=G.placement,N=G.x,V=G.y,X=G.strategy,Y=G.refs,Q=G.middlewareData,ee=r.useCallback(function(e,t){P(function(n){return n.shown!==e?{shown:e,reason:t}:n})},[P]),et=p("number"==typeof y?[y,y]:y,2),en=et[0],er=et[1],eo=r.useMemo(function(){return(0,o.Ds)(function(){return ee(!0,"hover")},en)},[en,ee]),ei=r.useMemo(function(){return(0,o.Ds)(function(){return ee(!1,"hover")},er)},[er,ee]),es=c(function(){if(Z.current){Z.current=!1;return}ee(!0,"focus")}),eu=c(function(e){if(Z.current=!1,W.current=!1,!I.shown){clearTimeout(z.current);return}var t=e.relatedTarget;z.current=setTimeout(function(){var e=Y.reference.current;!t&&(0,f._g)(e)===e||(0,f.r3)(Y.floating.current,t)||(0,f.r3)(e,t)||ee(!1,"focus")})}),ea=c(function(){ee(!I.shown,"click")}),el=c(function(){W.current=!0,ee(!1,"click")}),ec=c(function(){eo.cancel(),ei.cancel(),W.current||I.shown||eo()}),ef=c(function(){Z.current=!1,W.current=!1,q&&(eo.cancel(),ei.cancel(),"focus"!==I.reason&&"click"!==I.reason&&ei())}),ed=r.useCallback(function(){Z.current=!0,ee(!1,"callback")},[ee]),em=r.useCallback(function(){return!U||Z.current},[U]),ev=r.useCallback(function(){Z.current=!0,ee(!1,"escape-key")},[ee]),ey=r.useCallback(function(){Z.current=!0,ee(!1,"click-outside")},[ee]);(0,u.s)(ey,H?null:Y.reference,w||H?null:Y.floating),(0,a.L)(function(){if(U&&Y.reference.current){var e=function(){var e=Y.reference.current;!I.shown&&(0,i.Re)(e)&&e===(0,f._g)(e)&&(Z.current=!0)},t=(0,i.Jj)(Y.reference.current);return t.addEventListener("blur",e),function(){t.removeEventListener("blur",e)}}},[U,Y.reference,I]),(0,a.L)(function(){if(!F&&I.shown!==M)return I.shown?D(!0):B.current&&!F?T(!0):D(!1),function(){clearTimeout(z.current)}},[I,M,F]);var ep=r.useRef({}),eb=r.useRef({style:{}});return M&&(eb.current.style=(0,v.EA)(X,N,V,void 0,Q),w&&(eb.current.style.pointerEvents="none")),U&&(ep.current.onFocus=es,ep.current.onBlur=eu),$&&(ep.current.onClick=ea),q&&(ep.current.onMouseOver=ec,void 0!==b&&b&&!$&&(ep.current.onClick=el),w||(eb.current.onMouseOver=ec)),(q||U)&&(ep.current.onMouseLeave=ef,w||(eb.current.onMouseLeave=ef)),M&&(eb.current.onAnimationStart=function(){B.current=!0},eb.current.onAnimationEnd=function(){F&&(D(!1),T(!1))}),{placement:K,shown:M,willBeHide:F,refs:Y,referenceProps:ep.current,floatingProps:eb.current,middlewareData:Q,onClose:ed,onEscapeKeyDown:!M||void 0!==S&&S?void 0:ev,onRestoreFocus:em}}}}]);