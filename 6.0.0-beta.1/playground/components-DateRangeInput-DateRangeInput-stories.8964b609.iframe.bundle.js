"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[7524],{"./src/components/DateRangeInput/DateRangeInput.stories.tsx":(e,t,n)=>{n.r(t),n.d(t,{Playground:()=>X,__namedExportsOrder:()=>$,default:()=>Q});var a,r,l,o=n("../../node_modules/react/jsx-runtime.js"),u=n("../../node_modules/react/index.js"),s=n("@storybook/preview-api"),i=n("./src/storybook/constants.ts"),c=n("../../node_modules/@vkontakte/icons/dist/es6/16/clear_16.js"),d=n("../../node_modules/@vkontakte/icons/dist/es6/20/calendar_outline_20.js"),p=n("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),g=n("./src/hooks/useAdaptivity.ts"),m=n("./src/hooks/useDateInput.ts"),b=n("./src/hooks/useExternRef.ts"),h=n("./src/lib/callMultiple.ts"),f=n("./src/lib/date.ts"),v=n("./src/components/CalendarRange/CalendarRange.tsx"),y=n("./src/components/FormField/FormField.tsx"),D=n("./src/components/IconButton/IconButton.tsx"),j=n("./src/components/InputLike/InputLike.tsx"),x=n("./src/components/InputLike/InputLikeDivider.tsx"),R=n("./src/components/Popper/Popper.tsx"),O=n("./src/components/Typography/Text/Text.tsx"),S=n("./src/components/VisuallyHidden/VisuallyHidden.tsx"),I=n("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),L=n.n(I),k=n("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),w=n.n(k),M=n("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),E=n.n(M),_=n("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),P=n.n(_),C=n("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),V=n.n(C),Y=n("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css"),q={attributes:{class:"vkui-style"}};q.setAttributes=P(),q.insert=E().bind(null,"head"),q.domAPI=w(),q.insertStyleElement=V(),L()(Y.Z,q);let A=Y.Z&&Y.Z.locals?Y.Z.locals:void 0;var F=n("./src/components/DateInput/DateInput.module.css");function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=T({none:A["DateRangeInput--sizeY-none"]},"compact",A["DateRangeInput--sizeY-compact"]),z=function(e){var t=2,n=1,a=0;switch(e){case 0:case 3:a=31;break;case 1:case 4:a=12;break;case 2:case 5:a=2100,n=1900,t=4}return{length:t,min:n,max:a}},N=function(e){var t=["","","","","",""];return(null==e?void 0:e[0])&&(t[0]=String(e[0].getDate()).padStart(2,"0"),t[1]=String(e[0].getMonth()+1).padStart(2,"0"),t[2]=String(e[0].getFullYear()).padStart(4,"0")),(null==e?void 0:e[1])&&(t[3]=String(e[1].getDate()).padStart(2,"0"),t[4]=String(e[1].getMonth()+1).padStart(2,"0"),t[5]=String(e[1].getFullYear()).padStart(4,"0")),t},K=function(e){var t=e.shouldDisableDate,n=e.disableFuture,a=e.disablePast,r=e.value,l=e.onChange,s=e.calendarPlacement,i=e.style,I=e.className,L=e.closeOnChange,k=void 0===L||L,w=e.disablePickers,M=e.getRootRef,E=e.name,_=e.autoFocus,P=e.disabled,C=e.onClick,V=e.onFocus,Y=e.prevMonthLabel,q=e.nextMonthLabel,A=e.changeDayLabel,K=e.changeMonthLabel,U=e.changeYearLabel,Z=e.changeStartDayLabel,W=e.changeStartMonthLabel,H=e.changeStartYearLabel,Q=e.changeEndDayLabel,X=e.changeEndMonthLabel,$=e.changeEndYearLabel,G=e.clearFieldLabel,J=e.showCalendarLabel,ee=e.prevMonthIcon,et=e.nextMonthIcon,en=e.disableCalendar,ea=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["shouldDisableDate","disableFuture","disablePast","value","onChange","calendarPlacement","style","className","closeOnChange","disablePickers","getRootRef","name","autoFocus","disabled","onClick","onFocus","prevMonthLabel","nextMonthLabel","changeDayLabel","changeMonthLabel","changeYearLabel","changeStartDayLabel","changeStartMonthLabel","changeStartYearLabel","changeEndDayLabel","changeEndMonthLabel","changeEndYearLabel","clearFieldLabel","showCalendarLabel","prevMonthIcon","nextMonthIcon","disableCalendar"]),er=u.useRef(null),el=u.useRef(null),eo=u.useRef(null),eu=u.useRef(null),es=u.useRef(null),ei=u.useRef(null),ec=u.useCallback(function(e){for(var t=!0,n=!0,a=0;a<=2;a+=1)e[a].length<z(a).length&&(t=!1);for(var o=3;o<=5;o+=1)e[o].length<z(o).length&&(n=!1);var u="".concat(e[0],".").concat(e[1],".").concat(e[2]),s="".concat(e[3],".").concat(e[4],".").concat(e[5]),i="DD.MM.YYYY";if((0,f.BD)(u,i)||(t=!1),(0,f.BD)(s,i)||(n=!1),t||n){var c=Array.isArray(r),d=new Date,p=t?(0,f.Qc)(u,i,c&&(null==r?void 0:r[0])||d):null,g=n?(0,f.Qc)(s,i,c&&(null==r?void 0:r[1])||d):null;p&&g&&(0,f.Ax)(g,p)&&(null==l||l([p,g]))}},[l,r]),ed=u.useMemo(function(){return[er,el,eo,eu,es,ei]},[er,el,eo,eu,es,ei]),ep=(0,m.S)({maxElement:5,refs:ed,autoFocus:_,disabled:P,elementsConfig:z,onChange:l,onInternalValueChange:ec,getInternalValue:N,value:r}),eg=ep.rootRef,em=ep.calendarRef,eb=ep.open,eh=ep.openCalendar,ef=ep.closeCalendar,ev=ep.internalValue,ey=ep.handleKeyDown,eD=ep.setFocusedElement,ej=ep.handleFieldEnter,ex=ep.clear,eR=ep.removeFocusFromField,eO=(0,g.g)().sizeY,eS=void 0===eO?"none":eO,eI=(0,b.Q)(eg,M),eL=u.useCallback(function(e){null==l||l(e),k&&(null==e?void 0:e[1])&&e[1]!==(null==r?void 0:r[1])&&eR()},[l,k,r,eR]);return(0,o.jsxs)(y.W,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){T(e,t,n[t])})}return e}({style:i,className:(0,p.AK)("regular"!==eS&&B[eS],I),getRootRef:eI,after:r?(0,o.jsxs)(D.h,{hoverMode:"opacity",onClick:ex,children:[(0,o.jsx)(S.T,{children:void 0===G?"Очистить поле":G}),(0,o.jsx)(c.l,{})]}):(0,o.jsxs)(D.h,{hoverMode:"opacity",onClick:eh,children:[(0,o.jsx)(S.T,{children:void 0===J?"Показать календарь":J}),(0,o.jsx)(d.D,{})]}),disabled:P,onClick:(0,h.C)(ej,C),onFocus:(0,h.C)(ej,V)},ea),{children:[(0,o.jsx)("input",{type:"hidden",name:E,value:r?"".concat(r[0]?(0,f.WU)(r[0],"DD.MM.YYYY"):""," - ").concat(r[1]?(0,f.WU)(r[1],"DD.MM.YYYY"):""):""}),(0,o.jsxs)(O.x,{className:F.Z.DateInput__input,onKeyDown:ey,children:[(0,o.jsx)(j.E,{length:2,getRootRef:er,index:0,onElementSelect:eD,value:ev[0],label:void 0===Z?"Изменить день начала":Z}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:2,getRootRef:el,index:1,onElementSelect:eD,value:ev[1],label:void 0===W?"Изменить месяц начала":W}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:4,getRootRef:eo,index:2,onElementSelect:eD,value:ev[2],label:void 0===H?"Изменить год начала":H}),(0,o.jsx)(x.q,{children:" — "}),(0,o.jsx)(j.E,{length:2,getRootRef:eu,index:3,onElementSelect:eD,value:ev[3],label:void 0===Q?"Изменить день окончания":Q}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:2,getRootRef:es,index:4,onElementSelect:eD,value:ev[4],label:void 0===X?"Изменить месяц окончания":X}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:4,getRootRef:ei,index:5,onElementSelect:eD,value:ev[5],label:void 0===$?"Изменить год окончания":$})]}),eb&&!(void 0!==en&&en)&&(0,o.jsx)(R.r,{targetRef:eg,offsetByMainAxis:8,placement:void 0===s?"bottom-start":s,children:(0,o.jsx)(v.a,{value:r,onChange:eL,disablePast:a,disableFuture:n,shouldDisableDate:t,onClose:ef,getRootRef:em,disablePickers:w,prevMonthLabel:void 0===Y?"Предыдущий месяц":Y,nextMonthLabel:void 0===q?"Следующий месяц":q,changeMonthLabel:void 0===K?"Изменить месяц":K,changeYearLabel:void 0===U?"Изменить год":U,changeDayLabel:void 0===A?"Изменить день":A,prevMonthIcon:ee,nextMonthIcon:et})})]}))};try{K.displayName="DateRangeInput",K.__docgenInfo={description:"",displayName:"DateRangeInput",props:{calendarPlacement:{defaultValue:{value:"bottom-start"},description:"",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"",name:"closeOnChange",required:!1,type:{name:"boolean"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"",name:"showCalendarLabel",required:!1,type:{name:"string"}},changeStartDayLabel:{defaultValue:{value:"Изменить день начала"},description:"",name:"changeStartDayLabel",required:!1,type:{name:"string"}},changeStartMonthLabel:{defaultValue:{value:"Изменить месяц начала"},description:"",name:"changeStartMonthLabel",required:!1,type:{name:"string"}},changeStartYearLabel:{defaultValue:{value:"Изменить год начала"},description:"",name:"changeStartYearLabel",required:!1,type:{name:"string"}},changeEndDayLabel:{defaultValue:{value:"Изменить день окончания"},description:"",name:"changeEndDayLabel",required:!1,type:{name:"string"}},changeEndMonthLabel:{defaultValue:{value:"Изменить месяц окончания"},description:"",name:"changeEndMonthLabel",required:!1,type:{name:"string"}},changeEndYearLabel:{defaultValue:{value:"Изменить год окончания"},description:"",name:"changeEndYearLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"",name:"disableCalendar",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DateRangeType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: DateRangeType) => void)"}},disablePast:{defaultValue:null,description:"",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},weekStartsOn:{defaultValue:null,description:"",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"",name:"changeYearLabel",required:!1,type:{name:"string"}},changeDayLabel:{defaultValue:{value:"Изменить день"},description:"",name:"changeDayLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"after",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"]={docgenInfo:K.__docgenInfo,name:"DateRangeInput",path:"src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"})}catch(e){}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})}return e}function W(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,a,r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var l=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let Q={title:"Forms/DateRangeInput",component:K,parameters:Z({},i.tW,i.nB),argTypes:{value:{description:"Используйте startDate и endDate для задания периода",control:!1},startDate:{description:"Дата начала периода",table:{type:{summary:"string"}},control:{type:"date"}},endDate:{description:"Дата окончания периода",table:{type:{summary:"string"}},control:{type:"date"}}}};var X={render:function(){var e=(0,s.useArgs)(),t=H(e,2),n=t[0],a=(n.value,n.startDate),r=n.endDate,l=t[1],u=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e[0],["value","startDate","endDate"]),i=a?new Date(a):null,c=r?new Date(r):null;return(0,o.jsx)(K,W(Z({},u),{value:[i,c],onChange:function(e){var t=H(e||[null,null],2),n=t[0],a=t[1];l({startDate:n?new Date(n):null,endDate:a?new Date(a):null})}}))}};X.parameters=W(Z({},X.parameters),{docs:W(Z({},null===(a=X.parameters)||void 0===a?void 0:a.docs),{source:Z({originalSource:"{\n  render: function Render() {\n    const [{\n      value,\n      startDate,\n      endDate,\n      ...args\n    }, updateArgs] = useArgs();\n    const handleDateRangeUpdate: DateRangeInputProps['onChange'] = updatedValue => {\n      const [changedStartDate, changedEndDate] = updatedValue || [null, null];\n      updateArgs({\n        startDate: changedStartDate ? new Date(changedStartDate) : null,\n        endDate: changedEndDate ? new Date(changedEndDate) : null\n      });\n    };\n    const parsedStartDate = startDate ? new Date(startDate) : null;\n    const parsedEndDate = endDate ? new Date(endDate) : null;\n    return <DateRangeInput {...args} value={[parsedStartDate, parsedEndDate]} onChange={handleDateRangeUpdate} />;\n  }\n}"},null===(l=X.parameters)||void 0===l?void 0:null===(r=l.docs)||void 0===r?void 0:r.source)})});let $=["Playground"]},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css":(e,t,n)=>{n.d(t,{Z:()=>u});var a=n("../../node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=n.n(a),l=n("../../node_modules/css-loader/dist/runtime/api.js"),o=n.n(l)()(r());o.push([e.id,".DateRangeInput__input--c8r2o{cursor:text;flex-grow:1;font-variant-numeric:tabular-nums;margin-left:10px;margin-right:14px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;white-space:nowrap;z-index:var(--vkui_internal--z_index_form_field_element)}.DateRangeInput--sizeY-compact--iXDEM .DateRangeInput__input--c8r2o{margin-right:22px}@media (max-height:414.9px),(pointer:fine) and (min-width:768px){.DateRangeInput--sizeY-none--xvAjl .DateRangeInput__input--c8r2o{margin-right:22px}}",""]),o.locals={DateRangeInput__input:"DateRangeInput__input--c8r2o","DateRangeInput--sizeY-compact":"DateRangeInput--sizeY-compact--iXDEM","DateRangeInput--sizeY-none":"DateRangeInput--sizeY-none--xvAjl"};let u=o}}]);