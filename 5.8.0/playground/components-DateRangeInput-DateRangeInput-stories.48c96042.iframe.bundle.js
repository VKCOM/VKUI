"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[7524],{"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[13].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css":function(e,t,a){var n=a("../../node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=a.n(n),l=a("../../node_modules/css-loader/dist/runtime/api.js"),o=a.n(l)()(r());o.push([e.id,".DateRangeInput__input--c8r2o{cursor:text;flex-grow:1;font-variant-numeric:tabular-nums;margin-left:10px;margin-right:14px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;white-space:nowrap;z-index:1;z-index:var(--vkui_internal--z_index_form_field_element)}.DateRangeInput--sizeY-compact--iXDEM .DateRangeInput__input--c8r2o{margin-right:22px}@media (max-height:414.9px),(pointer:fine) and (min-width:768px){.DateRangeInput--sizeY-none--xvAjl .DateRangeInput__input--c8r2o{margin-right:22px}}",""]),o.locals={DateRangeInput__input:"DateRangeInput__input--c8r2o","DateRangeInput--sizeY-compact":"DateRangeInput--sizeY-compact--iXDEM","DateRangeInput--sizeY-none":"DateRangeInput--sizeY-none--xvAjl"},t.Z=o},"./src/components/DateRangeInput/DateRangeInput.stories.tsx":function(e,t,a){a.r(t),a.d(t,{Playground:function(){return W},default:function(){return U}});var n,r,l,o=a("../../node_modules/react/jsx-runtime.js"),i=a("../../node_modules/react/index.js"),u=a("./src/storybook/constants.ts"),s=a("../../node_modules/@vkontakte/icons/dist/es6/16/clear_16.js"),c=a("../../node_modules/@vkontakte/icons/dist/es6/20/calendar_outline_20.js"),d=a("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),p=a("./src/hooks/useAdaptivity.ts"),m=a("./src/hooks/useDateInput.ts"),g=a("./src/hooks/useExternRef.ts"),b=a("./src/lib/adaptivity/constants.ts"),h=a("./src/lib/callMultiple.ts"),f=a("./src/lib/date.ts"),v=a("./src/components/CalendarRange/CalendarRange.tsx"),y=a("./src/components/FormField/FormField.tsx"),D=a("./src/components/IconButton/IconButton.tsx"),j=a("./src/components/InputLike/InputLike.tsx"),x=a("./src/components/InputLike/InputLikeDivider.tsx"),O=a("./src/components/Popper/Popper.tsx"),R=a("./src/components/Typography/Text/Text.tsx"),A=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),S=a.n(A),I=a("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),L=a.n(I),k=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),M=a.n(k),P=a("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),_=a.n(P),E=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),w=a.n(E),C=a("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[13].use[2]!./src/components/DateRangeInput/DateRangeInput.module.css"),Y={attributes:{class:"vkui-style"}};Y.setAttributes=_(),Y.insert=M().bind(null,"head"),Y.domAPI=L(),Y.insertStyleElement=w(),S()(C.Z,Y);var q=C.Z&&C.Z.locals?C.Z.locals:void 0,V=a("./src/components/DateInput/DateInput.module.css");function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var z=F({none:q["DateRangeInput--sizeY-none"]},b.n$.COMPACT,q["DateRangeInput--sizeY-compact"]),B=function(e){var t=2,a=1,n=0;switch(e){case 0:case 3:n=31;break;case 1:case 4:n=12;break;case 2:case 5:n=2100,a=1900,t=4}return{length:t,min:a,max:n}},N=function(e){var t=["","","","","",""];return(null==e?void 0:e[0])&&(t[0]=String(e[0].getDate()).padStart(2,"0"),t[1]=String(e[0].getMonth()+1).padStart(2,"0"),t[2]=String(e[0].getFullYear()).padStart(4,"0")),(null==e?void 0:e[1])&&(t[3]=String(e[1].getDate()).padStart(2,"0"),t[4]=String(e[1].getMonth()+1).padStart(2,"0"),t[5]=String(e[1].getFullYear()).padStart(4,"0")),t},T=function(e){var t=e.shouldDisableDate,a=e.disableFuture,n=e.disablePast,r=e.value,l=e.onChange,u=e.calendarPlacement,A=e.style,S=e.className,I=e.closeOnChange,L=void 0===I||I,k=e.disablePickers,M=e.getRootRef,P=e.name,_=e.autoFocus,E=e.disabled,w=e.onClick,C=e.onFocus,Y=e.prevMonthAriaLabel,q=e.nextMonthAriaLabel,T=e.changeDayAriaLabel,K=e.changeMonthAriaLabel,Z=e.changeYearAriaLabel,U=e.changeStartDayAriaLabel,W=e.changeStartMonthAriaLabel,Q=e.changeStartYearAriaLabel,X=e.changeEndDayAriaLabel,$=e.changeEndMonthAriaLabel,G=e.changeEndYearAriaLabel,H=e.clearFieldAriaLabel,J=e.showCalendarAriaLabel,ee=e.prevMonthIcon,et=e.nextMonthIcon,ea=e.disableCalendar,en=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,["shouldDisableDate","disableFuture","disablePast","value","onChange","calendarPlacement","style","className","closeOnChange","disablePickers","getRootRef","name","autoFocus","disabled","onClick","onFocus","prevMonthAriaLabel","nextMonthAriaLabel","changeDayAriaLabel","changeMonthAriaLabel","changeYearAriaLabel","changeStartDayAriaLabel","changeStartMonthAriaLabel","changeStartYearAriaLabel","changeEndDayAriaLabel","changeEndMonthAriaLabel","changeEndYearAriaLabel","clearFieldAriaLabel","showCalendarAriaLabel","prevMonthIcon","nextMonthIcon","disableCalendar"]),er=i.useRef(null),el=i.useRef(null),eo=i.useRef(null),ei=i.useRef(null),eu=i.useRef(null),es=i.useRef(null),ec=i.useCallback(function(e){for(var t=!0,a=!0,n=0;n<=2;n+=1)e[n].length<B(n).length&&(t=!1);for(var o=3;o<=5;o+=1)e[o].length<B(o).length&&(a=!1);var i="".concat(e[0],".").concat(e[1],".").concat(e[2]),u="".concat(e[3],".").concat(e[4],".").concat(e[5]),s="DD.MM.YYYY";if((0,f.BD)(i,s)||(t=!1),(0,f.BD)(u,s)||(a=!1),t||a){var c=Array.isArray(r),d=new Date,p=t?(0,f.Qc)(i,s,c&&(null==r?void 0:r[0])||d):null,m=a?(0,f.Qc)(u,s,c&&(null==r?void 0:r[1])||d):null;p&&m&&(0,f.Ax)(m,p)&&(null==l||l([p,m]))}},[l,r]),ed=i.useMemo(function(){return[er,el,eo,ei,eu,es]},[er,el,eo,ei,eu,es]),ep=(0,m.S)({maxElement:5,refs:ed,autoFocus:_,disabled:E,elementsConfig:B,onChange:l,onInternalValueChange:ec,getInternalValue:N,value:r}),em=ep.rootRef,eg=ep.calendarRef,eb=ep.open,eh=ep.openCalendar,ef=ep.closeCalendar,ev=ep.internalValue,ey=ep.handleKeyDown,eD=ep.setFocusedElement,ej=ep.handleFieldEnter,ex=ep.clear,eO=ep.removeFocusFromField,eR=(0,p.g)().sizeY,eA=void 0===eR?"none":eR,eS=(0,g.Q)(em,M),eI=i.useCallback(function(e){null==l||l(e),L&&(null==e?void 0:e[1])&&e[1]!==(null==r?void 0:r[1])&&eO()},[l,L,r,eO]);return(0,o.jsxs)(y.W,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a})(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}),e}(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){F(e,t,a[t])})}return e}({style:A,className:(0,d.AK)(eA!==b.n$.REGULAR&&z[eA],S),getRootRef:eS,after:r?(0,o.jsx)(D.h,{hoverMode:"opacity","aria-label":void 0===H?"Очистить поле":H,onClick:ex,children:(0,o.jsx)(s.l,{})}):(0,o.jsx)(D.h,{hoverMode:"opacity","aria-label":void 0===J?"Показать календарь":J,onClick:eh,children:(0,o.jsx)(c.D,{})}),disabled:E,onClick:(0,h.C)(ej,w),onFocus:(0,h.C)(ej,C)},en),{children:[(0,o.jsx)("input",{type:"hidden",name:P,value:r?"".concat(r[0]?(0,f.WU)(r[0],"DD.MM.YYYY"):""," - ").concat(r[1]?(0,f.WU)(r[1],"DD.MM.YYYY"):""):""}),(0,o.jsxs)(R.x,{className:V.Z.DateInput__input,onKeyDown:ey,children:[(0,o.jsx)(j.E,{length:2,getRootRef:er,index:0,onElementSelect:eD,value:ev[0],"aria-label":void 0===U?"Изменить день начала":U}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:2,getRootRef:el,index:1,onElementSelect:eD,value:ev[1],"aria-label":void 0===W?"Изменить месяц начала":W}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:4,getRootRef:eo,index:2,onElementSelect:eD,value:ev[2],"aria-label":void 0===Q?"Изменить год начала":Q}),(0,o.jsx)(x.q,{children:" — "}),(0,o.jsx)(j.E,{length:2,getRootRef:ei,index:3,onElementSelect:eD,value:ev[3],"aria-label":void 0===X?"Изменить день окончания":X}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:2,getRootRef:eu,index:4,onElementSelect:eD,value:ev[4],"aria-label":void 0===$?"Изменить месяц окончания":$}),(0,o.jsx)(x.q,{children:"."}),(0,o.jsx)(j.E,{length:4,getRootRef:es,index:5,onElementSelect:eD,value:ev[5],"aria-label":void 0===G?"Изменить год окончания":G})]}),eb&&!(void 0!==ea&&ea)&&(0,o.jsx)(O.r,{targetRef:em,offsetDistance:8,placement:void 0===u?"bottom-start":u,children:(0,o.jsx)(v.a,{value:r,onChange:eI,disablePast:n,disableFuture:a,shouldDisableDate:t,onClose:ef,getRootRef:eg,disablePickers:k,prevMonthAriaLabel:Y,nextMonthAriaLabel:q,changeMonthAriaLabel:K,changeYearAriaLabel:Z,changeDayAriaLabel:T,prevMonthIcon:ee,nextMonthIcon:et})})]}))};try{T.displayName="DateRangeInput",T.__docgenInfo={description:"",displayName:"DateRangeInput",props:{calendarPlacement:{defaultValue:{value:"bottom-start"},description:"",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom"'},{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"",name:"closeOnChange",required:!1,type:{name:"boolean"}},clearFieldAriaLabel:{defaultValue:{value:"Очистить поле"},description:"",name:"clearFieldAriaLabel",required:!1,type:{name:"string"}},showCalendarAriaLabel:{defaultValue:{value:"Показать календарь"},description:"",name:"showCalendarAriaLabel",required:!1,type:{name:"string"}},changeStartDayAriaLabel:{defaultValue:{value:"Изменить день начала"},description:"",name:"changeStartDayAriaLabel",required:!1,type:{name:"string"}},changeStartMonthAriaLabel:{defaultValue:{value:"Изменить месяц начала"},description:"",name:"changeStartMonthAriaLabel",required:!1,type:{name:"string"}},changeStartYearAriaLabel:{defaultValue:{value:"Изменить год начала"},description:"",name:"changeStartYearAriaLabel",required:!1,type:{name:"string"}},changeEndDayAriaLabel:{defaultValue:{value:"Изменить день окончания"},description:"",name:"changeEndDayAriaLabel",required:!1,type:{name:"string"}},changeEndMonthAriaLabel:{defaultValue:{value:"Изменить месяц окончания"},description:"",name:"changeEndMonthAriaLabel",required:!1,type:{name:"string"}},changeEndYearAriaLabel:{defaultValue:{value:"Изменить год окончания"},description:"",name:"changeEndYearAriaLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"",name:"disableCalendar",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"(Date | null)[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: (Date | null)[]) => void)"}},disablePast:{defaultValue:null,description:"",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},weekStartsOn:{defaultValue:null,description:"",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"2"},{value:"1"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthAriaLabel:{defaultValue:null,description:"",name:"prevMonthAriaLabel",required:!1,type:{name:"string"}},nextMonthAriaLabel:{defaultValue:null,description:"",name:"nextMonthAriaLabel",required:!1,type:{name:"string"}},changeMonthAriaLabel:{defaultValue:null,description:"",name:"changeMonthAriaLabel",required:!1,type:{name:"string"}},changeYearAriaLabel:{defaultValue:null,description:"",name:"changeYearAriaLabel",required:!1,type:{name:"string"}},changeDayAriaLabel:{defaultValue:null,description:"",name:"changeDayAriaLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"after",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"]={docgenInfo:T.__docgenInfo,name:"DateRangeInput",path:"src/components/DateRangeInput/DateRangeInput.tsx#DateRangeInput"})}catch(e){}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(e,t,a[t])})}return e}function Z(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a})(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}),e}var U={title:"Forms/DateRangeInput",component:T,parameters:K({},u.tW,u.nB),argTypes:{value:{description:"Используйте startDate и endDate для задания периода",control:!1},startDate:{description:"Дата начала периода",table:{type:{summary:"string"}},control:{type:"date"}},endDate:{description:"Дата окончания периода",table:{type:{summary:"string"}},control:{type:"date"}}}},W={render:function(e){e.value;var t=e.startDate,a=e.endDate,n=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,["value","startDate","endDate"]),r=t?new Date(t):null,l=a?new Date(a):null;return(0,o.jsx)(T,K({value:[r,l]},n))}};W.parameters=Z(K({},W.parameters),{docs:Z(K({},null===(n=W.parameters)||void 0===n?void 0:n.docs),{source:K({originalSource:"{\n  render: ({\n    value,\n    startDate,\n    endDate,\n    ...args\n  }) => {\n    const parsedStartDate = startDate ? new Date(startDate) : null;\n    const parsedEndDate = endDate ? new Date(endDate) : null;\n    return <DateRangeInput value={[parsedStartDate, parsedEndDate]} {...args} />;\n  }\n}"},null===(l=W.parameters)||void 0===l?void 0:null===(r=l.docs)||void 0===r?void 0:r.source)})})}}]);